<!DOCTYPE html>
<!-- saved from url=(0107)index.html#_kiedeploycheatsheets -->
<html lang="zh-CN" class="translated-ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="The Drools Team &lt;https://www.drools.org/community/team.html&gt;">
<title>Drools文档</title>
<link rel="stylesheet" href="./Drools文档_files/css">
<link rel="stylesheet" href="./Drools文档_files/asciidoctor.css">
<link rel="stylesheet" href="./Drools文档_files/font-awesome.min.css">
<!-- Adobe Analytics for Red Hat - DPAL (DTM Property Auto-Loader) - part 1/2 -->
<script type="text/javascript" id="www-widgetapi-script" src="./Drools文档_files/www-widgetapi.js.下载" async=""></script><script type="text/javascript" async="" src="./Drools文档_files/analytics.js.下载"></script><script id="dpal" src="./Drools文档_files/dtm.js.下载" type="text/javascript"></script><script src="./Drools文档_files/mbox-contents-dc4a102c462e55a78aec3590996bae13ca839e07.js.下载"></script>
<!-- Google Analytics for kie team: Global site tag (gtag.js) -->
<script async="" src="./Drools文档_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-62250098-1');
</script>

<!-- Collapsed Table of Content -->
<link rel="stylesheet" href="./Drools文档_files/style.css">
<link rel="stylesheet" href="./Drools文档_files/toc.css">
<script src="./Drools文档_files/s-code-contents-f4a9b6c9b26c8800983ba8666ad806f707c6e823.js.下载"></script><script src="./Drools文档_files/satellite-57b31fc964746d78b5000e89.js.下载"></script><script src="./Drools文档_files/satellite-5ad4b51064746d0355005da6.js.下载"></script><script src="./Drools文档_files/satellite-57b31fbb64746d4d3b001131.js.下载"></script><script src="./Drools文档_files/elqCfg.min.js.下载"></script><script type="text/javascript" src="./Drools文档_files/iframe_api"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./Drools文档_files/translateelement.css"></head>
<body class="book toc2 toc-left">
<div id="header">
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools文档</font></font></h1>
<div class="details">
<span id="author" class="author"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools团队&lt;https://www.drools.org/community/team.html&gt; </font></font></span><br>
<span id="revnumber"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本7.12.0.Final</font></font></span>
</div>
<div id="toc" class="toc2">
<div id="toctitle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></div>
<input placeholder="Search TOC" id="tocSearch" type="text"><a href="index.html#" id="tocTreeExpandAll" title="展开全部"><i class="fa fa-plus-square" aria-hidden="true"></i></a><a href="index.html#" id="tocTreeCollapseAll" title="全部收缩"><i class="fa fa-minus-square" aria-hidden="true"></i></a><div id="tocTree" class="jstree jstree-1 jstree-default jstree-default-small" role="tree" aria-multiselectable="true" tabindex="0" aria-activedescendant="j1_44" aria-busy="false"><ul class="jstree-container-ul jstree-children jstree-no-icons jstree-wholerow-ul jstree-no-dots" role="group"><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_1_anchor" aria-expanded="true" id="j1_1" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_welcome" tabindex="-1" id="j1_1_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.简介</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_2_anchor" id="j1_2" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_introduction" tabindex="-1" id="j1_2_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_3_anchor" aria-expanded="true" id="j1_3" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_gettingstarted" tabindex="-1" id="j1_3_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2。</font><font style="vertical-align: inherit;">卷入</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_4_anchor" id="j1_4" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sign_up_to_jboss_org" tabindex="-1" id="j1_4_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.1. Sign up to jboss.org</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_5_anchor" id="j1_5" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sign_the_contributor_agreement" tabindex="-1" id="j1_5_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.2. Sign the Contributor Agreement</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_6_anchor" id="j1_6" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_submitting_issues_via_jira" tabindex="-1" id="j1_6_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.3. Submitting issues via JIRA</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_7_anchor" id="j1_7" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_fork_github" tabindex="-1" id="j1_7_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.4. Fork GitHub</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_8_anchor" id="j1_8" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_writing_tests" tabindex="-1" id="j1_8_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.5. Writing Tests</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_9_anchor" id="j1_9" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_commit_with_correct_conventions" tabindex="-1" id="j1_9_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.6. Commit with Correct Conventions</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_10_anchor" id="j1_10" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_submit_pull_requests" tabindex="-1" id="j1_10_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.2.7. Submit Pull Requests</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_11_anchor" aria-expanded="true" id="j1_11" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_installationandsetup" tabindex="-1" id="j1_11_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3。</font><font style="vertical-align: inherit;">安装和设置（核心和IDE）</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_12_anchor" id="j1_12" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_installing_and_using" tabindex="-1" id="j1_12_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.3.1. Installing and using</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_13_anchor" id="j1_13" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_building_from_source" tabindex="-1" id="j1_13_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.3.2. Building from source</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_14_anchor" id="j1_14" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_eclipse" tabindex="-1" id="j1_14_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>1.3.3. Eclipse</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_15_anchor" aria-expanded="true" id="j1_15" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiechapter" tabindex="-1" id="j1_15_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凯</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_16_anchor" aria-expanded="true" id="j1_16" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieoverviewsection" tabindex="-1" id="j1_16_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。</font><font style="vertical-align: inherit;">概观</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_17_anchor" id="j1_17" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieanatomysection" tabindex="-1" id="j1_17_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.1.1. Anatomy of Projects</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_18_anchor" id="j1_18" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kielifecyclessection" tabindex="-1" id="j1_18_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.1.2. Lifecycles</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_19_anchor" aria-expanded="true" id="j1_19" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_builddeployutilizeandrunsection" tabindex="-1" id="j1_19_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。</font><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_20_anchor" id="j1_20" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiemoduleintroductionbuildingintroductionsection" tabindex="-1" id="j1_20_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.1. Introduction</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_21_anchor" id="j1_21" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiebuildingsection" tabindex="-1" id="j1_21_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.2. Building</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_22_anchor" id="j1_22" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiedeployingsection" tabindex="-1" id="j1_22_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.3. Deploying</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_23_anchor" id="j1_23" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kierunningsection" tabindex="-1" id="j1_23_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.4. Running</a></li><li role="treeitem" aria-selected="true" aria-level="3" aria-labelledby="j1_24_anchor" id="j1_24" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow jstree-wholerow-clicked">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor jstree-clicked" href="index.html#_kiedeploycheatsheets" tabindex="-1" id="j1_24_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.5. Installation and Deployment Cheat Sheets</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_25_anchor" id="j1_25" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieexamplessection" tabindex="-1" id="j1_25_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.2.6. Build,  Deploy and Utilize Examples</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_26_anchor" aria-expanded="true" id="j1_26" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiesecuritysection" tabindex="-1" id="j1_26_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3。</font><font style="vertical-align: inherit;">安全</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_27_anchor" id="j1_27" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_securitymanager" tabindex="-1" id="j1_27_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>2.3.1. Security Manager</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_28_anchor" aria-expanded="true" id="j1_28" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_hybridreasoningchapter" tabindex="-1" id="j1_28_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.混合推理</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_29_anchor" aria-expanded="true" id="j1_29" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_artificial_intelligence" tabindex="-1" id="j1_29_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">人工智能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_30_anchor" id="j1_30" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_a_little_history" tabindex="-1" id="j1_30_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.1。</font><font style="vertical-align: inherit;">一点点历史</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_31_anchor" id="j1_31" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_knowledge_representation_and_reasoning" tabindex="-1" id="j1_31_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.2。</font><font style="vertical-align: inherit;">知识表征与推理</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_32_anchor" id="j1_32" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rules_engines_and_production_rule_systems_prs" tabindex="-1" id="j1_32_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.3。</font><font style="vertical-align: inherit;">规则引擎和生产规则系统（PRS）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_33_anchor" id="j1_33" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_hybrid_reasoning_systems_hrs" tabindex="-1" id="j1_33_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.4。</font><font style="vertical-align: inherit;">混合推理系统（HRS）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_34_anchor" id="j1_34" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_expert_systems" tabindex="-1" id="j1_34_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.5。</font><font style="vertical-align: inherit;">专家系统</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_35_anchor" id="j1_35" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_recommended_reading" tabindex="-1" id="j1_35_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.6。</font><font style="vertical-align: inherit;">推荐阅读</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_36_anchor" id="j1_36" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_reteoo" tabindex="-1" id="j1_36_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">Rete算法</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_37_anchor" id="j1_37" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_reteoosection" tabindex="-1" id="j1_37_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3。</font><font style="vertical-align: inherit;">ReteOO算法</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_38_anchor" id="j1_38" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_phreak" tabindex="-1" id="j1_38_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">PHREAK算法</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_39_anchor" aria-expanded="true" id="j1_39" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_user_guide" tabindex="-1" id="j1_39_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.用户指南</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_40_anchor" aria-expanded="true" id="j1_40" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_the_basics" tabindex="-1" id="j1_40_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1。</font><font style="vertical-align: inherit;">基础</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_41_anchor" id="j1_41" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_stateless_kie_session" tabindex="-1" id="j1_41_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.1。</font><font style="vertical-align: inherit;">无国籍的KIE会议</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_42_anchor" id="j1_42" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_stateful_kie_session" tabindex="-1" id="j1_42_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.2。</font><font style="vertical-align: inherit;">有状态的KIE会议</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_43_anchor" id="j1_43" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_methods_versus_rules" tabindex="-1" id="j1_43_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.3。</font><font style="vertical-align: inherit;">方法与规则</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_44_anchor" id="j1_44" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_cross_products" tabindex="-1" id="j1_44_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.4。</font><font style="vertical-align: inherit;">跨产品</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_45_anchor" aria-expanded="true" id="j1_45" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_execution_control" tabindex="-1" id="j1_45_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2。</font><font style="vertical-align: inherit;">执行控制</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_46_anchor" id="j1_46" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_agenda" tabindex="-1" id="j1_46_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.1。</font><font style="vertical-align: inherit;">议程</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_47_anchor" id="j1_47" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule_matches_and_conflict_sets" tabindex="-1" id="j1_47_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2。</font><font style="vertical-align: inherit;">规则匹配和冲突集。</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_48_anchor" aria-expanded="true" id="j1_48" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_inference" tabindex="-1" id="j1_48_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3。</font><font style="vertical-align: inherit;">推理</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_49_anchor" id="j1_49" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_bus_pass_example" tabindex="-1" id="j1_49_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3.1。</font><font style="vertical-align: inherit;">巴士通行证示例</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_50_anchor" aria-expanded="true" id="j1_50" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_truth_maintenance_with_logical_objects" tabindex="-1" id="j1_50_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4。</font><font style="vertical-align: inherit;">使用逻辑对象进行真相维护</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_51_anchor" id="j1_51" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_overview" tabindex="-1" id="j1_51_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4.1。</font><font style="vertical-align: inherit;">概观</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_52_anchor" aria-expanded="true" id="j1_52" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_decision_tables_in_spreadsheets" tabindex="-1" id="j1_52_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5。</font><font style="vertical-align: inherit;">电子表格中的决策表</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_53_anchor" id="j1_53" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_when_to_use_decision_tables" tabindex="-1" id="j1_53_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.1。</font><font style="vertical-align: inherit;">何时使用决策表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_54_anchor" id="j1_54" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_overview_2" tabindex="-1" id="j1_54_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.2。</font><font style="vertical-align: inherit;">概观</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_55_anchor" id="j1_55" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_how_decision_tables_work" tabindex="-1" id="j1_55_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.3。</font><font style="vertical-align: inherit;">决策表的工作原理</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_56_anchor" id="j1_56" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_spreadsheet_syntax" tabindex="-1" id="j1_56_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4。</font><font style="vertical-align: inherit;">电子表格语法</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_57_anchor" id="j1_57" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_creating_and_integrating_spreadsheet_based_decision_tables" tabindex="-1" id="j1_57_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.5。</font><font style="vertical-align: inherit;">创建和集成基于电子表格的决策表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_58_anchor" id="j1_58" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_managing_business_rules_in_decision_tables" tabindex="-1" id="j1_58_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.6。</font><font style="vertical-align: inherit;">管理决策表中的业务规则</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_59_anchor" id="j1_59" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule_templates" tabindex="-1" id="j1_59_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.7。</font><font style="vertical-align: inherit;">规则模板</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_60_anchor" id="j1_60" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_logging" tabindex="-1" id="j1_60_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6。</font><font style="vertical-align: inherit;">记录</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_61_anchor" aria-expanded="true" id="j1_61" class="jstree-node  jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_running" tabindex="-1" id="j1_61_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.跑步</font></font></a><ul role="group" class="jstree-children"><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_62_anchor" aria-expanded="true" id="j1_62" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieruntime_3" tabindex="-1" id="j1_62_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1。</font><font style="vertical-align: inherit;">KieRuntime</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_63_anchor" id="j1_63" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_entrypoint" tabindex="-1" id="j1_63_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1。</font><font style="vertical-align: inherit;">入口点</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_64_anchor" id="j1_64" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ruleruntime" tabindex="-1" id="j1_64_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2。</font><font style="vertical-align: inherit;">RuleRuntime</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_65_anchor" id="j1_65" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_statefulrulesession" tabindex="-1" id="j1_65_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.3。</font><font style="vertical-align: inherit;">StatefulRuleSession</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_66_anchor" aria-expanded="true" id="j1_66" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_agenda_2" tabindex="-1" id="j1_66_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2。</font><font style="vertical-align: inherit;">议程</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_67_anchor" id="j1_67" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_conflict_resolution_2" tabindex="-1" id="j1_67_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.1。</font><font style="vertical-align: inherit;">解决冲突</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_68_anchor" id="j1_68" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_agendagroup" tabindex="-1" id="j1_68_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.2。</font><font style="vertical-align: inherit;">AgendaGroup</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_69_anchor" id="j1_69" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_activationgroup" tabindex="-1" id="j1_69_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.3。</font><font style="vertical-align: inherit;">的ActivationGroup</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_70_anchor" id="j1_70" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ruleflowgroup" tabindex="-1" id="j1_70_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.4。</font><font style="vertical-align: inherit;">RuleFlowGroup</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_71_anchor" id="j1_71" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_event_model_2" tabindex="-1" id="j1_71_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3。</font><font style="vertical-align: inherit;">事件模型</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_72_anchor" aria-expanded="true" id="j1_72" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_statelesskiesession_2" tabindex="-1" id="j1_72_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4。</font><font style="vertical-align: inherit;">StatelessKieSession</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_73_anchor" id="j1_73" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sequential_mode" tabindex="-1" id="j1_73_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.1。</font><font style="vertical-align: inherit;">顺序模式</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_74_anchor" aria-expanded="true" id="j1_74" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule_execution_modes" tabindex="-1" id="j1_74_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5。</font><font style="vertical-align: inherit;">规则执行模式</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_75_anchor" id="j1_75" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_passive_mode" tabindex="-1" id="j1_75_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>5.5.1. Passive Mode</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_76_anchor" id="j1_76" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_active_mode" tabindex="-1" id="j1_76_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>5.5.2. Active Mode</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_77_anchor" id="j1_77" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_propagation_modes" tabindex="-1" id="j1_77_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6。</font><font style="vertical-align: inherit;">传播模式</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_78_anchor" id="j1_78" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_commands_and_the_commandexecutor_2" tabindex="-1" id="j1_78_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7。</font><font style="vertical-align: inherit;">命令和CommandExecutor</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_79_anchor" aria-expanded="true" id="j1_79" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_droolslanguagereferencechapter" tabindex="-1" id="j1_79_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.规则语言参考</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_80_anchor" aria-expanded="true" id="j1_80" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_overview_3" tabindex="-1" id="j1_80_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1。</font><font style="vertical-align: inherit;">概观</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_81_anchor" id="j1_81" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_a_rule_file" tabindex="-1" id="j1_81_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1.1。</font><font style="vertical-align: inherit;">规则文件</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_82_anchor" id="j1_82" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_what_makes_a_rule" tabindex="-1" id="j1_82_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1.2。</font><font style="vertical-align: inherit;">什么是规则</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_83_anchor" id="j1_83" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_keywords" tabindex="-1" id="j1_83_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2。</font><font style="vertical-align: inherit;">关键词</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_84_anchor" aria-expanded="true" id="j1_84" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_comments" tabindex="-1" id="j1_84_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3。</font><font style="vertical-align: inherit;">注释</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_85_anchor" id="j1_85" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_single_line_comment" tabindex="-1" id="j1_85_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3.1。</font><font style="vertical-align: inherit;">单行评论</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_86_anchor" id="j1_86" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_multi_line_comment" tabindex="-1" id="j1_86_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3.2。</font><font style="vertical-align: inherit;">多行评论</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_87_anchor" aria-expanded="true" id="j1_87" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_error_messages" tabindex="-1" id="j1_87_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4。</font><font style="vertical-align: inherit;">错误消息</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_88_anchor" id="j1_88" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_message_format" tabindex="-1" id="j1_88_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.1。</font><font style="vertical-align: inherit;">消息格式</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_89_anchor" id="j1_89" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_error_messages_description" tabindex="-1" id="j1_89_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2。</font><font style="vertical-align: inherit;">错误消息说明</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_90_anchor" id="j1_90" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_other_messages" tabindex="-1" id="j1_90_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.3。</font><font style="vertical-align: inherit;">其他消息</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_91_anchor" aria-expanded="true" id="j1_91" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_package" tabindex="-1" id="j1_91_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5。</font><font style="vertical-align: inherit;">包</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_92_anchor" id="j1_92" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_import" tabindex="-1" id="j1_92_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5.1。</font><font style="vertical-align: inherit;">进口</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_93_anchor" id="j1_93" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_global" tabindex="-1" id="j1_93_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5.2。</font><font style="vertical-align: inherit;">全球</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_94_anchor" id="j1_94" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_function" tabindex="-1" id="j1_94_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6。</font><font style="vertical-align: inherit;">功能</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_95_anchor" aria-expanded="true" id="j1_95" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_type_declaration" tabindex="-1" id="j1_95_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7。</font><font style="vertical-align: inherit;">输入声明</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_96_anchor" id="j1_96" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_declaring_new_types" tabindex="-1" id="j1_96_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.1。</font><font style="vertical-align: inherit;">声明新类型</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_97_anchor" id="j1_97" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_declaring_metadata" tabindex="-1" id="j1_97_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.2。</font><font style="vertical-align: inherit;">声明元数据</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_98_anchor" id="j1_98" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_declaring_metadata_for_existing_types" tabindex="-1" id="j1_98_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.3。</font><font style="vertical-align: inherit;">声明现有类型的元数据</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_99_anchor" id="j1_99" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_parametrized_constructors_for_declared_types" tabindex="-1" id="j1_99_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.4。</font><font style="vertical-align: inherit;">声明类型的参数化构造函数</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_100_anchor" id="j1_100" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_non_typesafe_classes" tabindex="-1" id="j1_100_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.5。</font><font style="vertical-align: inherit;">非类型安全类</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_101_anchor" id="j1_101" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_accessing_declared_types_from_the_application_code" tabindex="-1" id="j1_101_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.6。</font><font style="vertical-align: inherit;">从应用程序代码访问声明的类型</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_102_anchor" id="j1_102" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_type_declaration_extends" tabindex="-1" id="j1_102_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.7。</font><font style="vertical-align: inherit;">类型声明'延伸'</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_103_anchor" aria-expanded="true" id="j1_103" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule" tabindex="-1" id="j1_103_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8。</font><font style="vertical-align: inherit;">规则</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_104_anchor" id="j1_104" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule_attributes" tabindex="-1" id="j1_104_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.1。</font><font style="vertical-align: inherit;">规则属性</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_105_anchor" id="j1_105" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_timers_and_calendars" tabindex="-1" id="j1_105_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.2。</font><font style="vertical-align: inherit;">计时器和日历</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_106_anchor" id="j1_106" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_left_hand_side_when_syntax" tabindex="-1" id="j1_106_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3。</font><font style="vertical-align: inherit;">左手边（何时）语法</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_107_anchor" id="j1_107" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_the_right_hand_side_then" tabindex="-1" id="j1_107_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.4。</font><font style="vertical-align: inherit;">右手边（然后）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_108_anchor" id="j1_108" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_conditional_named_consequences" tabindex="-1" id="j1_108_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.5。</font><font style="vertical-align: inherit;">有条件命名的后果</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_109_anchor" id="j1_109" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_a_note_on_auto_boxing_and_primitive_types" tabindex="-1" id="j1_109_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.6。</font><font style="vertical-align: inherit;">关于自动装箱和原始类型的注记</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_110_anchor" id="j1_110" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_querysection" tabindex="-1" id="j1_110_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.9。</font><font style="vertical-align: inherit;">询问</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_111_anchor" aria-expanded="true" id="j1_111" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_domain_specific_languages" tabindex="-1" id="j1_111_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10。</font><font style="vertical-align: inherit;">领域特定语言</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_112_anchor" id="j1_112" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_when_to_use_a_dsl" tabindex="-1" id="j1_112_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.1。</font><font style="vertical-align: inherit;">何时使用DSL</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_113_anchor" id="j1_113" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_dsl_basics" tabindex="-1" id="j1_113_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.2。</font><font style="vertical-align: inherit;">DSL基础知识</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_114_anchor" id="j1_114" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_adding_constraints_to_facts" tabindex="-1" id="j1_114_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.3。</font><font style="vertical-align: inherit;">为事实添加约束</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_115_anchor" id="j1_115" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_developing_a_dsl" tabindex="-1" id="j1_115_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.4。</font><font style="vertical-align: inherit;">开发DSL</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_116_anchor" id="j1_116" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_dsl_and_dslr_reference" tabindex="-1" id="j1_116_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.5。</font><font style="vertical-align: inherit;">DSL和DSLR参考</font></font></a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_117_anchor" aria-expanded="true" id="j1_117" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#DroolsComplexEventProcessingChapter" tabindex="-1" id="j1_117_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.复杂事件处理</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_118_anchor" id="j1_118" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_complex_event_processing" tabindex="-1" id="j1_118_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.1。</font><font style="vertical-align: inherit;">复杂事件处理</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_119_anchor" id="j1_119" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools_fusion" tabindex="-1" id="j1_119_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2。</font><font style="vertical-align: inherit;">Drools Fusion</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_120_anchor" id="j1_120" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_event_semantics" tabindex="-1" id="j1_120_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3。</font><font style="vertical-align: inherit;">事件语义学</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_121_anchor" aria-expanded="true" id="j1_121" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_event_processing_modes" tabindex="-1" id="j1_121_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4。</font><font style="vertical-align: inherit;">事件处理模式</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_122_anchor" id="j1_122" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_cloud_mode" tabindex="-1" id="j1_122_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.4.1. Cloud Mode</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_123_anchor" id="j1_123" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_stream_mode" tabindex="-1" id="j1_123_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.4.2. Stream Mode</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_124_anchor" aria-expanded="true" id="j1_124" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_session_clock" tabindex="-1" id="j1_124_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5。</font><font style="vertical-align: inherit;">会话时钟</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_125_anchor" id="j1_125" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_available_clock_implementations" tabindex="-1" id="j1_125_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.5.1. Available Clock Implementations</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_126_anchor" aria-expanded="true" id="j1_126" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sliding_windows" tabindex="-1" id="j1_126_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6。</font><font style="vertical-align: inherit;">滑动窗户</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_127_anchor" id="j1_127" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sliding_time_windows" tabindex="-1" id="j1_127_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.6.1. Sliding Time Windows</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_128_anchor" id="j1_128" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sliding_length_windows" tabindex="-1" id="j1_128_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.6.2. Sliding Length Windows</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_129_anchor" id="j1_129" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_window_declaration" tabindex="-1" id="j1_129_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.6.3. Window Declaration</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_130_anchor" aria-expanded="true" id="j1_130" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_streams_support" tabindex="-1" id="j1_130_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7。</font><font style="vertical-align: inherit;">Streams支持</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_131_anchor" id="j1_131" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_declaring_and_using_entry_points" tabindex="-1" id="j1_131_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.7.1. Declaring and Using Entry Points</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_132_anchor" aria-expanded="true" id="j1_132" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_memory_management_for_events" tabindex="-1" id="j1_132_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.8。</font><font style="vertical-align: inherit;">事件的内存管理</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_133_anchor" id="j1_133" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_explicit_expiration_offset" tabindex="-1" id="j1_133_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.8.1. Explicit expiration offset</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_134_anchor" id="j1_134" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_inferred_expiration_offset" tabindex="-1" id="j1_134_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.8.2. Inferred expiration offset</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_135_anchor" aria-expanded="true" id="j1_135" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_temporal_reasoning" tabindex="-1" id="j1_135_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9。</font><font style="vertical-align: inherit;">时间推理</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_136_anchor" id="j1_136" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_temporal_operators" tabindex="-1" id="j1_136_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>7.9.1. Temporal Operators</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_137_anchor" aria-expanded="true" id="j1_137" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#drools.DMN" tabindex="-1" id="j1_137_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.决策模型和符号（DMN）</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_138_anchor" aria-expanded="true" id="j1_138" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-con_dmn-models" tabindex="-1" id="j1_138_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1. Decision Model and Notation (DMN)</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_139_anchor" id="j1_139" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-conformance-levels-con_dmn-models" tabindex="-1" id="j1_139_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1.1. DMN conformance levels</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_140_anchor" id="j1_140" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-elements-ref_dmn-models" tabindex="-1" id="j1_140_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1.2. DMN elements</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_141_anchor" id="j1_141" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-feel-overview-ref_dmn-models" tabindex="-1" id="j1_141_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1.3. Rule expressions in FEEL</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_142_anchor" id="j1_142" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-decision-tables-ref_dmn-models" tabindex="-1" id="j1_142_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1.4. DMN decision tables</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_143_anchor" id="j1_143" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-boxed-expressions-ref_dmn-models" tabindex="-1" id="j1_143_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.1.5. Boxed expressions</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_144_anchor" id="j1_144" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-elements-example-con" tabindex="-1" id="j1_144_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.2. DMN use case</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_145_anchor" id="j1_145" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-model-example-ref_dmn-models" tabindex="-1" id="j1_145_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.3. DMN model example</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_146_anchor" aria-expanded="true" id="j1_146" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-support-con_dmn-models" tabindex="-1" id="j1_146_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.4. DMN support in Drools</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_147_anchor" id="j1_147" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-feel-enhancements-ref_dmn-models" tabindex="-1" id="j1_147_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.4.1. FEEL enhancements in Drools</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_148_anchor" id="j1_148" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-model-enhancements-ref_dmn-models" tabindex="-1" id="j1_148_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.4.2. DMN model enhancements in Drools</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_149_anchor" id="j1_149" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-properties-ref_dmn-models" tabindex="-1" id="j1_149_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.4.3. Configurable DMN properties in Drools</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_150_anchor" aria-expanded="true" id="j1_150" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-invocation-options-con" tabindex="-1" id="j1_150_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.5. Options for invoking a DMN model</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_151_anchor" id="j1_151" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-invocation-embedded-proc" tabindex="-1" id="j1_151_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.5.1. Embedding a DMN call directly in a Java application</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_152_anchor" id="j1_152" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-invocation-remote-java-proc" tabindex="-1" id="j1_152_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.5.2. Executing DMN services remotely on KIE Server (Java)</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_153_anchor" id="j1_153" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#dmn-invocation-rest-proc" tabindex="-1" id="j1_153_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>8.5.3. Calling a DMN service on a remote server using REST APIs</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_154_anchor" aria-expanded="true" id="j1_154" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#drools.PMML" tabindex="-1" id="j1_154_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.预测模型标记语言（PMML）</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_155_anchor" aria-expanded="true" id="j1_155" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-con_pmml-models" tabindex="-1" id="j1_155_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.1. Predictive Model Markup Language (PMML)</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_156_anchor" id="j1_156" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-conformance-con_pmml-models" tabindex="-1" id="j1_156_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.1.1. PMML conformance levels</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_157_anchor" id="j1_157" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-examples-ref_pmml-models" tabindex="-1" id="j1_157_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.2. PMML model examples</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_158_anchor" aria-expanded="true" id="j1_158" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-support-con_pmml-models" tabindex="-1" id="j1_158_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.3. PMML support in Drools</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_159_anchor" id="j1_159" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-naming-conventions-ref_pmml-models" tabindex="-1" id="j1_159_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.3.1. PMML naming conventions in Drools</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_160_anchor" id="j1_160" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-extensions-ref_pmml-models" tabindex="-1" id="j1_160_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.3.2. PMML extensions in Drools</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_161_anchor" aria-expanded="true" id="j1_161" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-invocation-options-con_pmml-models" tabindex="-1" id="j1_161_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.4. Options for invoking a PMML model</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_162_anchor" id="j1_162" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#pmml-invocation-embedded-proc_pmml-models" tabindex="-1" id="j1_162_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>9.4.1. Embedding a PMML call directly in a Java application</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_163_anchor" aria-expanded="true" id="j1_163" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_experimentalfeatureschapter" tabindex="-1" id="j1_163_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.实验特征</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_164_anchor" id="j1_164" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_declarative_agenda" tabindex="-1" id="j1_164_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.1. Declarative Agenda</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_165_anchor" aria-expanded="true" id="j1_165" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_browsing_graphs_of_objects_with_oopath" tabindex="-1" id="j1_165_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.2. Browsing graphs of objects with OOPath</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_166_anchor" id="j1_166" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_reactive_and_non_reactive_oopath" tabindex="-1" id="j1_166_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.2.1. Reactive and Non-Reactive OOPath</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_167_anchor" aria-expanded="true" id="j1_167" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_traits" tabindex="-1" id="j1_167_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.3. Traits</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_168_anchor" id="j1_168" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_cascading_traits" tabindex="-1" id="j1_168_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.3.1. Cascading traits</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_169_anchor" aria-expanded="true" id="j1_169" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rule_units" tabindex="-1" id="j1_169_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.4. Rule Units</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_170_anchor" id="j1_170" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_data_sources" tabindex="-1" id="j1_170_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.4.1. Data sources</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_171_anchor" id="j1_171" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_imperatively_running_and_declaratively_guarding_a_ruleunit" tabindex="-1" id="j1_171_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.4.2. Imperatively running and declaratively guarding a RuleUnit</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_172_anchor" id="j1_172" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ruleunit_identity" tabindex="-1" id="j1_172_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>10.4.3. RuleUnit identity</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_173_anchor" aria-expanded="true" id="j1_173" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.commands" tabindex="-1" id="j1_173_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. Drools命令</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_174_anchor" aria-expanded="true" id="j1_174" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_commandsapisection" tabindex="-1" id="j1_174_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.1. API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_175_anchor" id="j1_175" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_xstream" tabindex="-1" id="j1_175_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.1.1. XStream</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_176_anchor" id="j1_176" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_json" tabindex="-1" id="j1_176_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.1.2. JSON</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_177_anchor" id="j1_177" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_jaxb" tabindex="-1" id="j1_177_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.1.3. JAXB</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_178_anchor" aria-expanded="true" id="j1_178" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_commands_supported" tabindex="-1" id="j1_178_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2. Commands supported</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_179_anchor" id="j1_179" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_batchexecutioncommand" tabindex="-1" id="j1_179_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.1. BatchExecutionCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_180_anchor" id="j1_180" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_insertobjectcommand" tabindex="-1" id="j1_180_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.2. InsertObjectCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_181_anchor" id="j1_181" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_retractcommand" tabindex="-1" id="j1_181_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.3. RetractCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_182_anchor" id="j1_182" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_modifycommand" tabindex="-1" id="j1_182_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.4. ModifyCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_183_anchor" id="j1_183" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_getobjectcommand" tabindex="-1" id="j1_183_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.5. GetObjectCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_184_anchor" id="j1_184" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_insertelementscommand" tabindex="-1" id="j1_184_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.6. InsertElementsCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_185_anchor" id="j1_185" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_fireallrulescommand" tabindex="-1" id="j1_185_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.7. FireAllRulesCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_186_anchor" id="j1_186" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_startprocesscommand" tabindex="-1" id="j1_186_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.8. StartProcessCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_187_anchor" id="j1_187" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_signaleventcommand" tabindex="-1" id="j1_187_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.9. SignalEventCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_188_anchor" id="j1_188" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_completeworkitemcommand" tabindex="-1" id="j1_188_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.10. CompleteWorkItemCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_189_anchor" id="j1_189" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_abortworkitemcommand" tabindex="-1" id="j1_189_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.11. AbortWorkItemCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_190_anchor" id="j1_190" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_querycommand" tabindex="-1" id="j1_190_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.12. QueryCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_191_anchor" id="j1_191" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_setglobalcommand" tabindex="-1" id="j1_191_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.13. SetGlobalCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_192_anchor" id="j1_192" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_getglobalcommand" tabindex="-1" id="j1_192_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.14. GetGlobalCommand</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_193_anchor" id="j1_193" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_getobjectscommand" tabindex="-1" id="j1_193_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>11.2.15. GetObjectsCommand</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_194_anchor" aria-expanded="true" id="j1_194" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_cdichapter" tabindex="-1" id="j1_194_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. CDI</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_195_anchor" id="j1_195" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_introduction_2" tabindex="-1" id="j1_195_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_196_anchor" aria-expanded="true" id="j1_196" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_annotations" tabindex="-1" id="j1_196_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2。</font><font style="vertical-align: inherit;">注释</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_197_anchor" id="j1_197" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__kreleaseid" tabindex="-1" id="j1_197_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>12.2.1. @KReleaseId</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_198_anchor" id="j1_198" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__kcontainer" tabindex="-1" id="j1_198_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>12.2.2. @KContainer</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_199_anchor" id="j1_199" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__kbase" tabindex="-1" id="j1_199_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>12.2.3. @KBase</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_200_anchor" id="j1_200" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__ksession_for_kiesession" tabindex="-1" id="j1_200_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>12.2.4. @KSession for KieSession</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_201_anchor" id="j1_201" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__ksession_for_statelesskiesession" tabindex="-1" id="j1_201_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>12.2.5. @KSession for StatelessKieSession</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_202_anchor" id="j1_202" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_api_example_comparison" tabindex="-1" id="j1_202_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3。</font><font style="vertical-align: inherit;">API示例比较</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_203_anchor" aria-expanded="true" id="j1_203" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.kie.spring" tabindex="-1" id="j1_203_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.与Spring集成</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_204_anchor" id="j1_204" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_important_changes_for_drools_6_0" tabindex="-1" id="j1_204_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.1. Important Changes for Drools 6.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_205_anchor" aria-expanded="true" id="j1_205" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_integration_with_drools_expert" tabindex="-1" id="j1_205_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2. Integration with Drools Expert</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_206_anchor" id="j1_206" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiemodule" tabindex="-1" id="j1_206_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.1. KieModule</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_207_anchor" id="j1_207" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiebase_3" tabindex="-1" id="j1_207_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.2. KieBase</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_208_anchor" id="j1_208" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_important_note" tabindex="-1" id="j1_208_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.3. IMPORTANT NOTE</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_209_anchor" id="j1_209" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiesessions" tabindex="-1" id="j1_209_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.4. KieSessions</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_210_anchor" id="j1_210" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_releaseid" tabindex="-1" id="j1_210_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.5. Kie:ReleaseId</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_211_anchor" id="j1_211" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_import" tabindex="-1" id="j1_211_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.6. Kie:Import</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_212_anchor" id="j1_212" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_annotations_2" tabindex="-1" id="j1_212_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.7. Annotations</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_213_anchor" id="j1_213" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_event_listeners" tabindex="-1" id="j1_213_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.8. Event Listeners</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_214_anchor" id="j1_214" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_loggers" tabindex="-1" id="j1_214_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.9. Loggers</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_215_anchor" id="j1_215" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_defining_batch_commands" tabindex="-1" id="j1_215_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.10. Defining Batch Commands</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_216_anchor" id="j1_216" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_persistence" tabindex="-1" id="j1_216_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.11. Persistence</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_217_anchor" id="j1_217" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_leveraging_other_spring_features" tabindex="-1" id="j1_217_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.2.12. Leveraging Other Spring Features</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_218_anchor" aria-expanded="true" id="j1_218" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_integration_with_jbpm_human_task" tabindex="-1" id="j1_218_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.3. Integration with jBPM Human Task</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_219_anchor" id="j1_219" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_how_to_configure_spring_with_jbpm_human_task" tabindex="-1" id="j1_219_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>13.3.1. How to configure Spring with jBPM Human task</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_220_anchor" aria-expanded="true" id="j1_220" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.kie.blueprint" tabindex="-1" id="j1_220_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.与白羊座蓝图整合</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_221_anchor" aria-expanded="false" id="j1_221" class="jstree-node  jstree-closed jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_integration_with_drools_expert_2" tabindex="-1" id="j1_221_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>14.1. Integration with Drools Expert</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_230_anchor" aria-expanded="true" id="j1_230" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.kie.android" tabindex="-1" id="j1_230_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15. Android集成</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_231_anchor" aria-expanded="true" id="j1_231" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_integration_with_drools_expert_3" tabindex="-1" id="j1_231_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.1. Integration with Drools Expert</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_232_anchor" id="j1_232" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_pre_serialized_rules" tabindex="-1" id="j1_232_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.1.1. Pre-serialized Rules</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_233_anchor" id="j1_233" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiecontainer_api_with_drools_compiler_dependency" tabindex="-1" id="j1_233_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.1.2. KieContainer API with drools-compiler dependency</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_234_anchor" aria-expanded="true" id="j1_234" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_integration_with_roboguice" tabindex="-1" id="j1_234_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.2. Integration with Roboguice</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_235_anchor" id="j1_235" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_pre_serialized_rules_with_roboguice" tabindex="-1" id="j1_235_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.2.1. Pre-serialized Rules with Roboguice</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_236_anchor" id="j1_236" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kiecontainer_with_drools_compiler_dependency_and_roboguice" tabindex="-1" id="j1_236_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>15.2.2. KieContainer with drools-compiler dependency and Roboguice</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_237_anchor" aria-expanded="true" id="j1_237" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.camel" tabindex="-1" id="j1_237_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16. Apache Camel集成</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_238_anchor" id="j1_238" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_camel" tabindex="-1" id="j1_238_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>16.1. Camel</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_239_anchor" aria-expanded="true" id="j1_239" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.server" tabindex="-1" id="j1_239_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17. Drools Camel Server</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_240_anchor" id="j1_240" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_introduction_3" tabindex="-1" id="j1_240_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>17.1. Introduction</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_241_anchor" id="j1_241" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_deployment" tabindex="-1" id="j1_241_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>17.2. Deployment</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_242_anchor" aria-expanded="true" id="j1_242" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_configuration" tabindex="-1" id="j1_242_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>17.3. Configuration</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_243_anchor" id="j1_243" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rest_camel_services_configuration" tabindex="-1" id="j1_243_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>17.3.1. REST/Camel Services configuration</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_244_anchor" aria-expanded="true" id="j1_244" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.workbench" tabindex="-1" id="j1_244_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.工作台（一般）</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_245_anchor" aria-expanded="true" id="j1_245" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.installation" tabindex="-1" id="j1_245_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.1. Installation</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_246_anchor" id="j1_246" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.warinstallation" tabindex="-1" id="j1_246_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.1.1. War installation</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_247_anchor" id="j1_247" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.workbenchdata" tabindex="-1" id="j1_247_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.1.2. Workbench data</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_248_anchor" id="j1_248" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.systemproperties" tabindex="-1" id="j1_248_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.1.3. System properties</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_249_anchor" id="j1_249" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.troubleshooting" tabindex="-1" id="j1_249_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.1.4. Trouble shooting</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_250_anchor" aria-expanded="true" id="j1_250" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstart" tabindex="-1" id="j1_250_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2. Quick Start</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_251_anchor" id="j1_251" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstartimportexamples" tabindex="-1" id="j1_251_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2.1. Importing examples</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_252_anchor" id="j1_252" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstartaddproject" tabindex="-1" id="j1_252_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2.2. Add Project</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_253_anchor" id="j1_253" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstartdefinedatamodel" tabindex="-1" id="j1_253_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2.3. Define Data Model</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_254_anchor" id="j1_254" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstartdefinerule" tabindex="-1" id="j1_254_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2.4. Define Rule</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_255_anchor" id="j1_255" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.quickstartbuildanddeloy" tabindex="-1" id="j1_255_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.2.5. Build and Deploy</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_256_anchor" aria-expanded="true" id="j1_256" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.configuration" tabindex="-1" id="j1_256_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.3. Configuration</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_257_anchor" id="j1_257" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.usermanagement" tabindex="-1" id="j1_257_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.3.1. Basic user management</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_258_anchor" id="j1_258" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.roles" tabindex="-1" id="j1_258_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.3.2. Roles</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_259_anchor" aria-expanded="true" id="j1_259" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.introduction" tabindex="-1" id="j1_259_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.4. Introduction</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_260_anchor" id="j1_260" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.loginandlogout" tabindex="-1" id="j1_260_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.4.1. Log in and log out</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_261_anchor" id="j1_261" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.homescreen" tabindex="-1" id="j1_261_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.4.2. Home screen</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_262_anchor" id="j1_262" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.administrationoverview" tabindex="-1" id="j1_262_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.4.3. Workbench overview</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_263_anchor" id="j1_263" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.workbenchconcepts" tabindex="-1" id="j1_263_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.4.4. Workbench user interface concepts</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_264_anchor" aria-expanded="true" id="j1_264" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.changinglayout" tabindex="-1" id="j1_264_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.5. Changing the layout</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_265_anchor" id="j1_265" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.resizing" tabindex="-1" id="j1_265_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.5.1. Resizing</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_266_anchor" aria-expanded="true" id="j1_266" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.authoring" tabindex="-1" id="j1_266_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6. Authoring (General)</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_267_anchor" id="j1_267" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.artifactrepository" tabindex="-1" id="j1_267_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.1. Artifact Repository</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_268_anchor" id="j1_268" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.asseteditor" tabindex="-1" id="j1_268_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.2. Asset Editor</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_269_anchor" id="j1_269" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.tagseditor" tabindex="-1" id="j1_269_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.3. Tags Editor</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_270_anchor" id="j1_270" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.projectexplorer" tabindex="-1" id="j1_270_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.4. Project Explorer</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_271_anchor" id="j1_271" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.projecteditor" tabindex="-1" id="j1_271_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.5. Project Editor</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_272_anchor" id="j1_272" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.validation" tabindex="-1" id="j1_272_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.6. Validation</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_273_anchor" id="j1_273" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.datamodeller" tabindex="-1" id="j1_273_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.7. Data Modeller</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_274_anchor" id="j1_274" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.datasets" tabindex="-1" id="j1_274_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.8. Data Sets</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_275_anchor" id="j1_275" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.datasources" tabindex="-1" id="j1_275_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.6.9. Data Source Management</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_276_anchor" aria-expanded="true" id="j1_276" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.userandgroupmgmt" tabindex="-1" id="j1_276_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7. Security management</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_277_anchor" id="j1_277" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_basic_concepts" tabindex="-1" id="j1_277_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7.1. Basic concepts</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_278_anchor" id="j1_278" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_installation_and_setup" tabindex="-1" id="j1_278_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7.2. Installation and setup</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_279_anchor" id="j1_279" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_usage_2" tabindex="-1" id="j1_279_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7.3. Usage</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_280_anchor" id="j1_280" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_security_settings_editor" tabindex="-1" id="j1_280_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7.4. Security Settings Editor</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_281_anchor" id="j1_281" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_security_policy_storage" tabindex="-1" id="j1_281_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.7.5. Security Policy Storage</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_282_anchor" id="j1_282" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.embedding" tabindex="-1" id="j1_282_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.8. Embedding Workbench in Your Application</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_283_anchor" aria-expanded="true" id="j1_283" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.execserverui" tabindex="-1" id="j1_283_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.9. Execution Server Management UI</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_284_anchor" id="j1_284" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.execserveruitemplate" tabindex="-1" id="j1_284_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.9.1. Server Templates</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_285_anchor" id="j1_285" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.execserveruicontainer" tabindex="-1" id="j1_285_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.9.2. Container</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_286_anchor" id="j1_286" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.execserveruiremoteserver" tabindex="-1" id="j1_286_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>18.9.3. Remote Server</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_287_anchor" aria-expanded="true" id="j1_287" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#drools.AuthoringAssets" tabindex="-1" id="j1_287_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.编写规则资产</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_288_anchor" aria-expanded="true" id="j1_288" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.newpackage" tabindex="-1" id="j1_288_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1。</font><font style="vertical-align: inherit;">创建包</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_289_anchor" id="j1_289" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_empty_package" tabindex="-1" id="j1_289_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1.1。</font><font style="vertical-align: inherit;">空包装</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_290_anchor" id="j1_290" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_copy_rename_and_delete_packages" tabindex="-1" id="j1_290_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1.2。</font><font style="vertical-align: inherit;">复制，重命名和删除包</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_291_anchor" aria-expanded="true" id="j1_291" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditor" tabindex="-1" id="j1_291_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2。</font><font style="vertical-align: inherit;">使用指导编辑器的业务规则</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_292_anchor" id="j1_292" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditorparts" tabindex="-1" id="j1_292_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.1。</font><font style="vertical-align: inherit;">引导规则编辑器的各个部分</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_293_anchor" id="j1_293" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditorlhs" tabindex="-1" id="j1_293_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.2。</font><font style="vertical-align: inherit;">规则的“WHEN”（左侧）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_294_anchor" id="j1_294" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditorrhs" tabindex="-1" id="j1_294_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.3。</font><font style="vertical-align: inherit;">规则的“那个”（右侧）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_295_anchor" id="j1_295" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditoroptionalattributes" tabindex="-1" id="j1_295_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.4。</font><font style="vertical-align: inherit;">可选属性</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_296_anchor" id="j1_296" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditortoolbar" tabindex="-1" id="j1_296_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.5。</font><font style="vertical-align: inherit;">模式/动作工具栏</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_297_anchor" id="j1_297" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditorenumerations" tabindex="-1" id="j1_297_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.6。</font><font style="vertical-align: inherit;">用户驱动的下拉列表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_298_anchor" id="j1_298" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditordsl" tabindex="-1" id="j1_298_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.7。</font><font style="vertical-align: inherit;">增加DSL句子</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_299_anchor" id="j1_299" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruleeditorcomplexexample" tabindex="-1" id="j1_299_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.8。</font><font style="vertical-align: inherit;">一个更复杂的例子：</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_300_anchor" aria-expanded="true" id="j1_300" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruletemplateeditor" tabindex="-1" id="j1_300_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3。</font><font style="vertical-align: inherit;">资产/规则模板</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_301_anchor" id="j1_301" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruletemplateeditorcreating" tabindex="-1" id="j1_301_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.1。</font><font style="vertical-align: inherit;">创建规则模板</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_302_anchor" id="j1_302" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruletemplateeditordefining" tabindex="-1" id="j1_302_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.2。</font><font style="vertical-align: inherit;">定义模板</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_303_anchor" id="j1_303" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruletemplateeditordefiningdata" tabindex="-1" id="j1_303_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.3。</font><font style="vertical-align: inherit;">定义模板数据</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_304_anchor" id="j1_304" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedruletemplateeditorgenerateddrl" tabindex="-1" id="j1_304_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.4。</font><font style="vertical-align: inherit;">生成的DRL</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_305_anchor" aria-expanded="true" id="j1_305" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditor" tabindex="-1" id="j1_305_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4。</font><font style="vertical-align: inherit;">指导决策表</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_306_anchor" id="j1_306" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditortypesofdecisiontable" tabindex="-1" id="j1_306_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.1。</font><font style="vertical-align: inherit;">决策表的类型</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_307_anchor" id="j1_307" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditordefining" tabindex="-1" id="j1_307_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2。</font><font style="vertical-align: inherit;">定义基于Web的决策表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_308_anchor" id="j1_308" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditorhitpolicy" tabindex="-1" id="j1_308_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.3。</font><font style="vertical-align: inherit;">命中政策</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_309_anchor" id="j1_309" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditorauditlog" tabindex="-1" id="j1_309_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.4。</font><font style="vertical-align: inherit;">审核日志</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_310_anchor" id="j1_310" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontableeditorverification" tabindex="-1" id="j1_310_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5。</font><font style="vertical-align: inherit;">实时验证和验证</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_311_anchor" aria-expanded="true" id="j1_311" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontablegrapheditor" tabindex="-1" id="j1_311_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5。</font><font style="vertical-align: inherit;">引导决策表图</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_312_anchor" id="j1_312" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_editor" tabindex="-1" id="j1_312_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5.1。</font><font style="vertical-align: inherit;">编辑</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_313_anchor" id="j1_313" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_creating_a_new_graph" tabindex="-1" id="j1_313_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5.2。</font><font style="vertical-align: inherit;">创建新图表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_314_anchor" id="j1_314" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_adding_new_tables_to_the_graph" tabindex="-1" id="j1_314_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5.3。</font><font style="vertical-align: inherit;">向图表添加新表</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_315_anchor" id="j1_315" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_removing_tables" tabindex="-1" id="j1_315_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5.4。</font><font style="vertical-align: inherit;">删除表</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_316_anchor" aria-expanded="true" id="j1_316" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guideddecisiontreeeditor" tabindex="-1" id="j1_316_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6。</font><font style="vertical-align: inherit;">引导决策树</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_317_anchor" id="j1_317" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_the_initial_editor_layout" tabindex="-1" id="j1_317_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.1。</font><font style="vertical-align: inherit;">初始编辑器布局</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_318_anchor" id="j1_318" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_first_steps" tabindex="-1" id="j1_318_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.2。</font><font style="vertical-align: inherit;">第一步</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_319_anchor" id="j1_319" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_editing_data_object_nodes" tabindex="-1" id="j1_319_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.3。</font><font style="vertical-align: inherit;">编辑数据对象节点</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_320_anchor" id="j1_320" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_editing_field_constraint_nodes" tabindex="-1" id="j1_320_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.4。</font><font style="vertical-align: inherit;">编辑字段约束节点</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_321_anchor" id="j1_321" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_editing_action_nodes" tabindex="-1" id="j1_321_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.5。</font><font style="vertical-align: inherit;">编辑Action节点</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_322_anchor" id="j1_322" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_managing_the_tree" tabindex="-1" id="j1_322_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.6。</font><font style="vertical-align: inherit;">管理树</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_323_anchor" aria-expanded="true" id="j1_323" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.xlsdecisiontable" tabindex="-1" id="j1_323_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.7。</font><font style="vertical-align: inherit;">电子表格决策表</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_324_anchor" id="j1_324" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_convert_to_guided_decision_table" tabindex="-1" id="j1_324_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.7.1。</font><font style="vertical-align: inherit;">转换为指导决策表</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_325_anchor" aria-expanded="true" id="j1_325" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedscorecardeditor" tabindex="-1" id="j1_325_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8。</font><font style="vertical-align: inherit;">记分卡</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_326_anchor" id="j1_326" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedscorecardeditorsetupparameters" tabindex="-1" id="j1_326_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8.1。</font><font style="vertical-align: inherit;">（a）设置参数</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_327_anchor" id="j1_327" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.guidedscorecardeditorcharacteristics" tabindex="-1" id="j1_327_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8.2。</font><font style="vertical-align: inherit;">（b）特征</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_328_anchor" aria-expanded="true" id="j1_328" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.testscenarioeditor" tabindex="-1" id="j1_328_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9。</font><font style="vertical-align: inherit;">测试场景</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_329_anchor" id="j1_329" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.ksessionselector" tabindex="-1" id="j1_329_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.1。</font><font style="vertical-align: inherit;">KIE会话选择器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_330_anchor" id="j1_330" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.testscenarioeditorgivensection" tabindex="-1" id="j1_330_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.2。</font><font style="vertical-align: inherit;">给定部分</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_331_anchor" id="j1_331" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.testscenarioeditorexpectedsection" tabindex="-1" id="j1_331_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.9.3. Expect Section</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_332_anchor" id="j1_332" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.testscenarioeditorglobalsection" tabindex="-1" id="j1_332_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.9.4. Global Section</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_333_anchor" id="j1_333" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.testscenarioeditorinpuotsection" tabindex="-1" id="j1_333_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.9.5. New Input Section</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_334_anchor" id="j1_334" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.dsleditor" tabindex="-1" id="j1_334_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.10. DSL editor</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_335_anchor" aria-expanded="true" id="j1_335" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.enumerationeditor" tabindex="-1" id="j1_335_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.11. Data enumerations (drop down list configurations)</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_336_anchor" id="j1_336" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.advancedenumconcepts" tabindex="-1" id="j1_336_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.11.1. Advanced enumeration concepts</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_337_anchor" id="j1_337" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.drleditor" tabindex="-1" id="j1_337_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>19.12. DRL file</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_338_anchor" aria-expanded="true" id="j1_338" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.workbenchintegration" tabindex="-1" id="j1_338_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.工作台集成</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_339_anchor" aria-expanded="true" id="j1_339" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.workbenchremoteapi" tabindex="-1" id="j1_339_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1. REST</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_340_anchor" id="j1_340" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_job_calls" tabindex="-1" id="j1_340_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.1. Job calls</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_341_anchor" id="j1_341" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_project_calls" tabindex="-1" id="j1_341_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.2. Project calls</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_342_anchor" id="j1_342" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_space_calls" tabindex="-1" id="j1_342_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.3. Space calls</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_343_anchor" id="j1_343" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_maven_calls" tabindex="-1" id="j1_343_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.4. Maven calls</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_344_anchor" id="j1_344" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_rest_summary" tabindex="-1" id="j1_344_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.5. REST summary</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_345_anchor" id="j1_345" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_embedded_drools_controller_calls" tabindex="-1" id="j1_345_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.1.6. Embedded Drools controller calls</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_346_anchor" aria-expanded="true" id="j1_346" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie.keycloakssointegration" tabindex="-1" id="j1_346_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2. Keycloak SSO integration</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_347_anchor" id="j1_347" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_scenario" tabindex="-1" id="j1_347_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.1. Scenario</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_348_anchor" id="j1_348" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_install_and_set_up_a_keycloak_server" tabindex="-1" id="j1_348_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.2. Install and set up a Keycloak server</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_349_anchor" id="j1_349" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_create_and_set_up_the_demo_realm" tabindex="-1" id="j1_349_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.3. Create and set up the demo realm</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_350_anchor" id="j1_350" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_install_and_set_up_jbpm_workbench" tabindex="-1" id="j1_350_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.4. Install and set up jBPM Workbench</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_351_anchor" id="j1_351" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_securing_workbench_remote_services_via_keycloak" tabindex="-1" id="j1_351_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.5. Securing workbench remote services via Keycloak</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_352_anchor" id="j1_352" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_securing_workbench_s_file_system_services_via_keycloak" tabindex="-1" id="j1_352_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.6. Securing workbench’s file system services via Keycloak</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_353_anchor" id="j1_353" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_execution_server" tabindex="-1" id="j1_353_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.7. Execution server</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_354_anchor" id="j1_354" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#consumingRemoteServices" tabindex="-1" id="j1_354_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.8. Consuming remote services</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_355_anchor" id="j1_355" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_keycloak_and_the_workbench_s_security_administration_area" tabindex="-1" id="j1_355_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>20.2.9. Keycloak and the workbench’s security administration area</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_356_anchor" aria-expanded="true" id="j1_356" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.workbenchhighavailability" tabindex="-1" id="j1_356_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21.工作台高可用性</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_357_anchor" id="j1_357" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.vfsclustering" tabindex="-1" id="j1_357_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>21.1. VFS clustering</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_358_anchor" id="j1_358" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_jbpm_clustering" tabindex="-1" id="j1_358_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>21.2. jBPM clustering</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_359_anchor" aria-expanded="true" id="j1_359" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_ch.kie.server" tabindex="-1" id="j1_359_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22. KIE执行服务器</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_360_anchor" aria-expanded="true" id="j1_360" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_overview_4" tabindex="-1" id="j1_360_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.1. Overview</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_361_anchor" id="j1_361" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_glossary" tabindex="-1" id="j1_361_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.1.1. Glossary</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_362_anchor" aria-expanded="true" id="j1_362" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_installing_the_kie_server" tabindex="-1" id="j1_362_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.2. Installing the KIE Server</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_363_anchor" id="j1_363" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_bootstrap_switches" tabindex="-1" id="j1_363_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.2.1. Bootstrap switches</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_364_anchor" id="j1_364" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_installation_details_for_different_containers" tabindex="-1" id="j1_364_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.2.2. Installation details for different containers</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_365_anchor" aria-expanded="true" id="j1_365" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_server_setup" tabindex="-1" id="j1_365_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.3. Kie Server setup</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_366_anchor" id="j1_366" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_managed_kie_server" tabindex="-1" id="j1_366_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3.1。</font><font style="vertical-align: inherit;">托管Kie服务器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_367_anchor" id="j1_367" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_unmanaged_kie_execution_server" tabindex="-1" id="j1_367_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3.2。</font><font style="vertical-align: inherit;">非托管KIE执行服务器</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_368_anchor" id="j1_368" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_creating_a_kie_container" tabindex="-1" id="j1_368_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.4. Creating a Kie Container</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_369_anchor" aria-expanded="true" id="j1_369" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_managing_containers" tabindex="-1" id="j1_369_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.5. Managing Containers</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_370_anchor" id="j1_370" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_starting_a_container" tabindex="-1" id="j1_370_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.1。</font><font style="vertical-align: inherit;">启动容器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_371_anchor" id="j1_371" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_stopping_and_deleting_a_container" tabindex="-1" id="j1_371_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.2。</font><font style="vertical-align: inherit;">停止和删除容器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_372_anchor" id="j1_372" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_updating_a_container" tabindex="-1" id="j1_372_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.3。</font><font style="vertical-align: inherit;">更新容器</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_373_anchor" aria-expanded="true" id="j1_373" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie.ksrestapi" tabindex="-1" id="j1_373_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.6. Kie Server REST API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_374_anchor" id="j1_374" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get" tabindex="-1" id="j1_374_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.1。</font><font style="vertical-align: inherit;">[GET] /</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_375_anchor" id="j1_375" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_config" tabindex="-1" id="j1_375_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.2。</font><font style="vertical-align: inherit;">[POST] / config</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_376_anchor" id="j1_376" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers" tabindex="-1" id="j1_376_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.3。</font><font style="vertical-align: inherit;">[GET] /容器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_377_anchor" id="j1_377" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_id" tabindex="-1" id="j1_377_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.4。</font><font style="vertical-align: inherit;">⁠[GET] / containers / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_378_anchor" id="j1_378" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__put_containers_id" tabindex="-1" id="j1_378_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.5。</font><font style="vertical-align: inherit;">[PUT] / containers / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_379_anchor" id="j1_379" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__delete_containers_id" tabindex="-1" id="j1_379_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.6。</font><font style="vertical-align: inherit;">[DELETE] / containers / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_380_anchor" id="j1_380" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_instances_id" tabindex="-1" id="j1_380_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.7。</font><font style="vertical-align: inherit;">[POST] / containers / instances / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_381_anchor" id="j1_381" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_id_release_id" tabindex="-1" id="j1_381_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.8。</font><font style="vertical-align: inherit;">[GET] / containers / {id} / release-id</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_382_anchor" id="j1_382" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_id_release_id" tabindex="-1" id="j1_382_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.9。</font><font style="vertical-align: inherit;">[POST] / containers / {id} / release-id</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_383_anchor" id="j1_383" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_id_scanner" tabindex="-1" id="j1_383_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.10。</font><font style="vertical-align: inherit;">[GET] / containers / {id} / scanner</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_384_anchor" id="j1_384" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_id_scanner" tabindex="-1" id="j1_384_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.11节。</font><font style="vertical-align: inherit;">[POST] / containers / {id} / scanner</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_385_anchor" aria-expanded="true" id="j1_385" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_optaplanner_rest_api" tabindex="-1" id="j1_385_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.7. OptaPlanner REST API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_386_anchor" id="j1_386" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_2" tabindex="-1" id="j1_386_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.1。</font><font style="vertical-align: inherit;">[GET] /容器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_387_anchor" id="j1_387" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__put_containers_containerid_solvers_solverid" tabindex="-1" id="j1_387_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.2。</font><font style="vertical-align: inherit;">[PUT] / containers / {containerId} / solvers / {solverId}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_388_anchor" id="j1_388" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_containerid_solvers" tabindex="-1" id="j1_388_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.3。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_389_anchor" id="j1_389" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_containerid_solvers_solverid" tabindex="-1" id="j1_389_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.4。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_390_anchor" id="j1_390" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_containerid_solvers_solverid_state_solving" tabindex="-1" id="j1_390_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.5。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / state / solving</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_391_anchor" id="j1_391" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_containerid_solvers_solverid_state_terminating_early" tabindex="-1" id="j1_391_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.6。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / state / terminating-early</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_392_anchor" id="j1_392" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_containerid_solvers_solverid_bestsolution" tabindex="-1" id="j1_392_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.7。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId} / bestsolution</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_393_anchor" id="j1_393" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_containers_containerid_solvers_solverid_problemfactchanges" tabindex="-1" id="j1_393_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.8。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / problemfactchanges</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_394_anchor" id="j1_394" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_containers_containerid_solvers_solverid_problemfactchanges_processed" tabindex="-1" id="j1_394_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.9。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId} / problemfactchanges / processed</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_395_anchor" id="j1_395" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__delete_containers_containerid_solvers_solverid" tabindex="-1" id="j1_395_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10年7月22日。</font><font style="vertical-align: inherit;">[DELETE] / containers / {containerId} / solvers / {solverId}</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_396_anchor" aria-expanded="true" id="j1_396" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools_controller_rest_api" tabindex="-1" id="j1_396_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.8. Drools controller REST API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_397_anchor" id="j1_397" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_management_servers" tabindex="-1" id="j1_397_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.1。</font><font style="vertical-align: inherit;">[GET] /管理/服务器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_398_anchor" id="j1_398" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_management_server_id" tabindex="-1" id="j1_398_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.2。</font><font style="vertical-align: inherit;">[GET] / management / server / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_399_anchor" id="j1_399" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__put_management_server_id" tabindex="-1" id="j1_399_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.3。</font><font style="vertical-align: inherit;">[PUT] / management / server / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_400_anchor" id="j1_400" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__delete_management_server_id" tabindex="-1" id="j1_400_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.4。</font><font style="vertical-align: inherit;">[DELETE] / management / server / {id}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_401_anchor" id="j1_401" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_management_server_id_containers" tabindex="-1" id="j1_401_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.5。</font><font style="vertical-align: inherit;">[GET] / management / server / {id} / containers</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_402_anchor" id="j1_402" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__get_management_server_id_containers_containerid" tabindex="-1" id="j1_402_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.6。</font><font style="vertical-align: inherit;">[GET] / management / server / {id} / containers / {containerId}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_403_anchor" id="j1_403" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__put_management_server_id_containers_containerid" tabindex="-1" id="j1_403_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.7。</font><font style="vertical-align: inherit;">[PUT] / management / server / {id} / containers / {containerId}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_404_anchor" id="j1_404" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__delete_management_server_id_containers_containerid" tabindex="-1" id="j1_404_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.8。</font><font style="vertical-align: inherit;">[DELETE] / management / server / {id} / containers / {containerId}</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_405_anchor" id="j1_405" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_management_server_id_containers_containerid_status_started" tabindex="-1" id="j1_405_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.9。</font><font style="vertical-align: inherit;">[POST] / management / server / {id} / containers / {containerId} / status / started</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_406_anchor" id="j1_406" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#__post_management_server_id_containers_containerid_status_stopped" tabindex="-1" id="j1_406_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10年8月22日。</font><font style="vertical-align: inherit;">[POST] / management / server / {id} / containers / {containerId} / status / stopped</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_407_anchor" aria-expanded="true" id="j1_407" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_server_java_client_api" tabindex="-1" id="j1_407_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.9. Kie Server Java Client API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_408_anchor" id="j1_408" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_maven_configuration_2" tabindex="-1" id="j1_408_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.1。</font><font style="vertical-align: inherit;">Maven配置</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_409_anchor" id="j1_409" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_client_configuration" tabindex="-1" id="j1_409_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.2。</font><font style="vertical-align: inherit;">客户端配置</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_410_anchor" id="j1_410" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_server_response" tabindex="-1" id="j1_410_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.3。</font><font style="vertical-align: inherit;">服务器响应</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_411_anchor" id="j1_411" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_server_capabilities" tabindex="-1" id="j1_411_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.4。</font><font style="vertical-align: inherit;">服务器功能</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_412_anchor" id="j1_412" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_containers" tabindex="-1" id="j1_412_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.5。</font><font style="vertical-align: inherit;">Kie Containers</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_413_anchor" id="j1_413" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_managing_containers_2" tabindex="-1" id="j1_413_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.6。</font><font style="vertical-align: inherit;">管理容器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_414_anchor" id="j1_414" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_available_clients_for_the_decision_server" tabindex="-1" id="j1_414_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.7。</font><font style="vertical-align: inherit;">Decision Server的可用客户端</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_415_anchor" id="j1_415" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sending_commands_to_the_server" tabindex="-1" id="j1_415_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.8。</font><font style="vertical-align: inherit;">将命令发送到服务器</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_416_anchor" id="j1_416" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_listing_available_business_processes" tabindex="-1" id="j1_416_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.9。</font><font style="vertical-align: inherit;">列出可用的业务流程</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_417_anchor" aria-expanded="true" id="j1_417" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_securing_password_using_key_store" tabindex="-1" id="j1_417_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.10. Securing password using key store</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_418_anchor" id="j1_418" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_simple_usecase" tabindex="-1" id="j1_418_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.1。</font><font style="vertical-align: inherit;">简单的用例</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_419_anchor" id="j1_419" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_implementation_and_business_logic" tabindex="-1" id="j1_419_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.2。</font><font style="vertical-align: inherit;">实施和业务逻辑</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_420_anchor" id="j1_420" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_system_requirements" tabindex="-1" id="j1_420_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.3。</font><font style="vertical-align: inherit;">系统要求</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_421_anchor" id="j1_421" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_initialization_of_a_key_store" tabindex="-1" id="j1_421_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.4。</font><font style="vertical-align: inherit;">密钥库的初始化</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_422_anchor" id="j1_422" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_system_parameters_for_loading_key_store" tabindex="-1" id="j1_422_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.5。</font><font style="vertical-align: inherit;">用于加载密钥库的系统参数</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_423_anchor" id="j1_423" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_example_3" tabindex="-1" id="j1_423_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.6。</font><font style="vertical-align: inherit;">例</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_424_anchor" aria-expanded="true" id="j1_424" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools_controller_client_api" tabindex="-1" id="j1_424_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.11. Drools controller client API</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_425_anchor" id="j1_425" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_maven_configuration_3" tabindex="-1" id="j1_425_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.11.1. Maven Configuration</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_426_anchor" id="j1_426" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_client_configuration_2" tabindex="-1" id="j1_426_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.11.2. Client Configuration</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_427_anchor" id="j1_427" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_setting_up_a_drools_controller" tabindex="-1" id="j1_427_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>22.11.3. Setting up a Drools controller</a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_428_anchor" aria-expanded="true" id="j1_428" class="jstree-node  jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_examples_2" tabindex="-1" id="j1_428_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.例子</font></font></a><ul role="group" class="jstree-children"><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_429_anchor" id="j1_429" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_getting_the_examples" tabindex="-1" id="j1_429_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.1。</font><font style="vertical-align: inherit;">得到例子</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_430_anchor" id="j1_430" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_hello_world" tabindex="-1" id="j1_430_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.2。</font><font style="vertical-align: inherit;">你好，世界</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_431_anchor" aria-expanded="true" id="j1_431" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_state_example" tabindex="-1" id="j1_431_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.3。</font><font style="vertical-align: inherit;">状态示例</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_432_anchor" id="j1_432" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_understanding_the_state_example" tabindex="-1" id="j1_432_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.3.1。</font><font style="vertical-align: inherit;">了解状态示例</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_433_anchor" id="j1_433" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_fibonacci_example" tabindex="-1" id="j1_433_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.4。</font><font style="vertical-align: inherit;">斐波纳契实例</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_434_anchor" id="j1_434" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_banking_tutorial" tabindex="-1" id="j1_434_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.5。</font><font style="vertical-align: inherit;">银行教程</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_435_anchor" aria-expanded="true" id="j1_435" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_pricing_rule_decision_table_example" tabindex="-1" id="j1_435_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.6。</font><font style="vertical-align: inherit;">定价规则决策表示例</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_436_anchor" id="j1_436" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_executing_the_example" tabindex="-1" id="j1_436_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.6.1. Executing the example</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_437_anchor" id="j1_437" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_the_decision_table" tabindex="-1" id="j1_437_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.6.2. The decision table</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_438_anchor" id="j1_438" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_pet_store_example" tabindex="-1" id="j1_438_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.7。</font><font style="vertical-align: inherit;">宠物店示例</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_439_anchor" id="j1_439" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_honest_politician_example" tabindex="-1" id="j1_439_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.8。</font><font style="vertical-align: inherit;">诚实的政客榜样</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_440_anchor" aria-expanded="true" id="j1_440" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sudoku_example" tabindex="-1" id="j1_440_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9。</font><font style="vertical-align: inherit;">数独示例</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_441_anchor" id="j1_441" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sudoku_overview" tabindex="-1" id="j1_441_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.9.1. Sudoku Overview</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_442_anchor" id="j1_442" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_running_the_example" tabindex="-1" id="j1_442_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.9.2. Running the Example</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_443_anchor" id="j1_443" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_java_source_and_rules_overview" tabindex="-1" id="j1_443_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.9.3. Java Source and Rules Overview</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_444_anchor" id="j1_444" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sudoku_validator_rules_validate_drl" tabindex="-1" id="j1_444_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.9.4. Sudoku Validator Rules (validate.drl)</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_445_anchor" id="j1_445" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_sudoku_solving_rules_sudoku_drl" tabindex="-1" id="j1_445_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.9.5. Sudoku Solving Rules (sudoku.drl)</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_446_anchor" id="j1_446" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_number_guess" tabindex="-1" id="j1_446_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.10。</font><font style="vertical-align: inherit;">数字猜猜</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_447_anchor" id="j1_447" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_conway_s_game_of_life" tabindex="-1" id="j1_447_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.11。</font><font style="vertical-align: inherit;">康威的生命游戏</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_448_anchor" aria-expanded="true" id="j1_448" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders" tabindex="-1" id="j1_448_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12。</font><font style="vertical-align: inherit;">侵略者</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_449_anchor" id="j1_449" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders1main" tabindex="-1" id="j1_449_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.1. Invaders1Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_450_anchor" id="j1_450" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders2main" tabindex="-1" id="j1_450_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.2. Invaders2Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_451_anchor" id="j1_451" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders3main" tabindex="-1" id="j1_451_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.3. Invaders3Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_452_anchor" id="j1_452" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders4main" tabindex="-1" id="j1_452_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.4. Invaders4Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_453_anchor" id="j1_453" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders5main" tabindex="-1" id="j1_453_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.5. Invaders5Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_454_anchor" id="j1_454" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders6main" tabindex="-1" id="j1_454_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.6. Invaders6Main</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_455_anchor" id="j1_455" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_invaders4main_2" tabindex="-1" id="j1_455_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.12.7. Invaders4Main</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_456_anchor" aria-expanded="true" id="j1_456" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_adventures_with_drools" tabindex="-1" id="j1_456_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.13。</font><font style="vertical-align: inherit;">与Drools的冒险</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_457_anchor" id="j1_457" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_using_the_game" tabindex="-1" id="j1_457_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.13.1. Using the game.</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_458_anchor" id="j1_458" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_the_code" tabindex="-1" id="j1_458_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.13.2. The code</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_459_anchor" id="j1_459" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_pong" tabindex="-1" id="j1_459_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.14。</font><font style="vertical-align: inherit;">傍</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_460_anchor" id="j1_460" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wumpus_world" tabindex="-1" id="j1_460_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.15。</font><font style="vertical-align: inherit;">Wumpus World</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_461_anchor" aria-expanded="true" id="j1_461" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_backward_chaining" tabindex="-1" id="j1_461_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16。</font><font style="vertical-align: inherit;">逆向链接</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_462_anchor" id="j1_462" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_backward_chaining_systems" tabindex="-1" id="j1_462_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.1. Backward-Chaining Systems</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_463_anchor" id="j1_463" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_cloning_transitive_closures" tabindex="-1" id="j1_463_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.2. Cloning Transitive Closures</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_464_anchor" id="j1_464" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_defining_a_query" tabindex="-1" id="j1_464_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.3. Defining a Query</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_465_anchor" id="j1_465" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_transitive_closure_example" tabindex="-1" id="j1_465_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.4. Transitive Closure Example</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_466_anchor" id="j1_466" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_reactive_transitive_queries" tabindex="-1" id="j1_466_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.5. Reactive Transitive Queries</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_467_anchor" id="j1_467" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_queries_with_unbound_arguments" tabindex="-1" id="j1_467_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>23.16.6. Queries with Unbound Arguments</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_468_anchor" id="j1_468" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_multiple_unbound_arguments" tabindex="-1" id="j1_468_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.7。</font><font style="vertical-align: inherit;">多个未绑定参数</font></font></a></li></ul></li></ul></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="j1_469_anchor" aria-expanded="true" id="j1_469" class="jstree-node jstree-last jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_droolsreleasenoteschapter" tabindex="-1" id="j1_469_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.发行说明</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_470_anchor" aria-expanded="true" id="j1_470" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.7.11.0" tabindex="-1" id="j1_470_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.1。</font><font style="vertical-align: inherit;">Drools 7.11中新的和值得注意的是什么</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_471_anchor" id="j1_471" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_minor_api_changes_of_kie_dmn_open_source_engine" tabindex="-1" id="j1_471_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.1.1. Minor API changes of Kie DMN open source engine</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_472_anchor" aria-expanded="true" id="j1_472" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.11.0.final" tabindex="-1" id="j1_472_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.2。</font><font style="vertical-align: inherit;">KIE Workbench 7.11.0中的新功能和值得注意的功能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_473_anchor" id="j1_473" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_multiple_git_branches_support" tabindex="-1" id="j1_473_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.2.1. Multiple Git branches support</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_474_anchor" aria-expanded="true" id="j1_474" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.7.9.0" tabindex="-1" id="j1_474_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.3。</font><font style="vertical-align: inherit;">在Drools 7.9中新的和值得注意的是什么</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_475_anchor" id="j1_475" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_moved_executablecommand_to_kie_public_api" tabindex="-1" id="j1_475_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.3.1. Moved ExecutableCommand to KIE public API</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_476_anchor" id="j1_476" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_alpha_network_compiler" tabindex="-1" id="j1_476_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.3.2. Alpha Network Compiler</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_477_anchor" aria-expanded="true" id="j1_477" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.8.0.final" tabindex="-1" id="j1_477_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.4。</font><font style="vertical-align: inherit;">KIE Workbench 7.8.0中新的和值得注意的</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_478_anchor" id="j1_478" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_system_property_for_setting_the_default_maven_repository_in_project_pom_xml_files" tabindex="-1" id="j1_478_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.4.1. New System Property for setting the Default Maven Repository in Project pom.xml files</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_479_anchor" aria-expanded="true" id="j1_479" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.7.7.0" tabindex="-1" id="j1_479_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5。</font><font style="vertical-align: inherit;">在Drools 7.7中新的和值得注意的是什么</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_480_anchor" id="j1_480" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#executable-model-con_pmml-models" tabindex="-1" id="j1_480_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.5.1. Executable rule models</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_481_anchor" aria-expanded="true" id="j1_481" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.7.0.final" tabindex="-1" id="j1_481_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6。</font><font style="vertical-align: inherit;">KIE Workbench 7.7.0中新的和值得注意的</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_482_anchor" id="j1_482" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_project_oriented_workbench" tabindex="-1" id="j1_482_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.6.1. Project Oriented Workbench</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_483_anchor" id="j1_483" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_connecting_to_a_headless_drools_controller" tabindex="-1" id="j1_483_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.6.2. Connecting to a headless Drools controller</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_484_anchor" id="j1_484" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_content_management_enhancements" tabindex="-1" id="j1_484_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.6.3. Content management enhancements</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_485_anchor" id="j1_485" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_migration_tool" tabindex="-1" id="j1_485_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.6.4. New Migration Tool</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_486_anchor" aria-expanded="true" id="j1_486" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.6.0.final" tabindex="-1" id="j1_486_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7。</font><font style="vertical-align: inherit;">KIE Workbench 7.6.0中新的和值得注意的</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_487_anchor" id="j1_487" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_content_management_enhancements_2" tabindex="-1" id="j1_487_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.7.1. Content management enhancements</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_488_anchor" id="j1_488" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieserver.releasenoteskie.7.5.1" tabindex="-1" id="j1_488_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8。</font><font style="vertical-align: inherit;">新的Drools控制器客户端API</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_489_anchor" aria-expanded="true" id="j1_489" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_breaking_changes_in_kie_server_7_5_1_from_7_0" tabindex="-1" id="j1_489_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9。</font><font style="vertical-align: inherit;">从7.0中断Kie Server 7.5.1中的更改</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_490_anchor" id="j1_490" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools_controller_api_changes" tabindex="-1" id="j1_490_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.9.1. Drools controller API changes</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_491_anchor" id="j1_491" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_server_api_changes" tabindex="-1" id="j1_491_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.9.2. Kie Server API changes</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_492_anchor" aria-expanded="true" id="j1_492" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.5.0.final" tabindex="-1" id="j1_492_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10。</font><font style="vertical-align: inherit;">KIE Workbench 7.5.0中的新功能和值得注意的功能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_493_anchor" id="j1_493" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_content_management_enhancements_3" tabindex="-1" id="j1_493_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.10.1. Content management enhancements</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_494_anchor" id="j1_494" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_extra_navigation_components" tabindex="-1" id="j1_494_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.10.2. Extra navigation components</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_495_anchor" aria-expanded="true" id="j1_495" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.4.0.final" tabindex="-1" id="j1_495_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.11。</font><font style="vertical-align: inherit;">KIE Workbench 7.4.0中的新功能和值得注意的功能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_496_anchor" id="j1_496" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_guided_decision_table_improvements" tabindex="-1" id="j1_496_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.11.1. Guided Decision Table improvements</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_497_anchor" id="j1_497" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_disable_experimental_editors" tabindex="-1" id="j1_497_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.11.2. Disable experimental editors</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_498_anchor" aria-expanded="true" id="j1_498" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.3.0.final" tabindex="-1" id="j1_498_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12。</font><font style="vertical-align: inherit;">KIE Workbench 7.3.0中新的和值得注意的</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_499_anchor" id="j1_499" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_home_and_menu_bar" tabindex="-1" id="j1_499_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12.1。</font><font style="vertical-align: inherit;">新家和菜单栏</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_500_anchor" id="j1_500" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_admin_page_changes" tabindex="-1" id="j1_500_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12.2。</font><font style="vertical-align: inherit;">管理页面更改</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_501_anchor" id="j1_501" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.7.1.0" tabindex="-1" id="j1_501_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.13。</font><font style="vertical-align: inherit;">Drools 7.1中新的和值得注意的是什么</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_502_anchor" aria-expanded="true" id="j1_502" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.1.0.final" tabindex="-1" id="j1_502_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14。</font><font style="vertical-align: inherit;">KIE Workbench 7.1.0中的新功能和值得注意的功能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_503_anchor" id="j1_503" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_project_metrics_dashboard" tabindex="-1" id="j1_503_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14.1。</font><font style="vertical-align: inherit;">项目指标仪表板</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_504_anchor" id="j1_504" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_teams_metrics_dashboard" tabindex="-1" id="j1_504_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14.2。</font><font style="vertical-align: inherit;">团队指标仪表板</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_505_anchor" aria-expanded="true" id="j1_505" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.7.0.0" tabindex="-1" id="j1_505_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15。</font><font style="vertical-align: inherit;">在Drools 7.0中有什么新的和值得注意的</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_506_anchor" id="j1_506" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_core_engine" tabindex="-1" id="j1_506_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1。</font><font style="vertical-align: inherit;">核心引擎</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_507_anchor" id="j1_507" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_workbench" tabindex="-1" id="j1_507_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2。</font><font style="vertical-align: inherit;">工作台</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_508_anchor" aria-expanded="true" id="j1_508" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_breaking_changes_in_drools_7_0_from_6_x" tabindex="-1" id="j1_508_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16。</font><font style="vertical-align: inherit;">从6.x突破Drools 7.0的变化</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_509_anchor" id="j1_509" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_property_reactivity_enabled_by_default" tabindex="-1" id="j1_509_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.1。</font><font style="vertical-align: inherit;">默认启用属性反应</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_510_anchor" id="j1_510" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_type_preserving_accumulate_functions" tabindex="-1" id="j1_510_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.2。</font><font style="vertical-align: inherit;">类型保留累积函数</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_511_anchor" id="j1_511" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_renaming_timedruleexecutionoption" tabindex="-1" id="j1_511_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.3。</font><font style="vertical-align: inherit;">重命名TimedRuleExecutionOption</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_512_anchor" id="j1_512" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_renaming_and_unification_of_configuration_files" tabindex="-1" id="j1_512_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.4。</font><font style="vertical-align: inherit;">重命名和统一配置文件</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_513_anchor" aria-expanded="true" id="j1_513" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.7.0.0.final" tabindex="-1" id="j1_513_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17。</font><font style="vertical-align: inherit;">KIE Workbench 7.0.0中的新功能和值得注意的功能</font></font></a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_514_anchor" id="j1_514" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_authoring_library" tabindex="-1" id="j1_514_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.1。</font><font style="vertical-align: inherit;">新作者（图书馆）</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_515_anchor" id="j1_515" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_authoring_imports_of_examples" tabindex="-1" id="j1_515_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.2。</font><font style="vertical-align: inherit;">创作 - 导入示例</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_516_anchor" id="j1_516" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_authoring_pop_ups_improvements" tabindex="-1" id="j1_516_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.3。</font><font style="vertical-align: inherit;">创作 - 弹出式改进</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_517_anchor" id="j1_517" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_authoring_project_editor_reimport_button" tabindex="-1" id="j1_517_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.4。</font><font style="vertical-align: inherit;">创作 - 项目编辑 - 重新导入按钮</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_518_anchor" id="j1_518" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_security_management" tabindex="-1" id="j1_518_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.5。</font><font style="vertical-align: inherit;">安全管理</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_519_anchor" id="j1_519" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie_config_cli_has_been_removed" tabindex="-1" id="j1_519_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.6。</font><font style="vertical-align: inherit;">kie-config-cli已被删除</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_520_anchor" id="j1_520" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_user_and_project_admin_pages_and_preferences" tabindex="-1" id="j1_520_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.7。</font><font style="vertical-align: inherit;">用户和项目管理页面和首选项</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_521_anchor" id="j1_521" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_gav_conflict_check_and_child_gav_edition" tabindex="-1" id="j1_521_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.8。</font><font style="vertical-align: inherit;">GAV冲突检查和儿童GAV版</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_522_anchor" id="j1_522" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_data_source_management" tabindex="-1" id="j1_522_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.9。</font><font style="vertical-align: inherit;">数据源管理</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_523_anchor" aria-expanded="true" id="j1_523" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kieserver.releasenoteskie.7.0.0" tabindex="-1" id="j1_523_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.18. Breaking changes in Kie Server 7.0 from 6.x</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_524_anchor" id="j1_524" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_serviceresponse_xstream_marshalling_changes" tabindex="-1" id="j1_524_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.1。</font><font style="vertical-align: inherit;">ServiceResponse XStream编组更改</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_525_anchor" id="j1_525" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_simplified_planner_rest_api" tabindex="-1" id="j1_525_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.2。</font><font style="vertical-align: inherit;">简化的Planner REST API</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_526_anchor" aria-expanded="true" id="j1_526" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.5.0" tabindex="-1" id="j1_526_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.19. What is New and Noteworthy in Drools 6.5.0</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_527_anchor" id="j1_527" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_configurable_threadfactory" tabindex="-1" id="j1_527_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.1。</font><font style="vertical-align: inherit;">可配置的ThreadFactory</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_528_anchor" id="j1_528" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_use_of_any_expressions_as_input_for_a_query" tabindex="-1" id="j1_528_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.2。</font><font style="vertical-align: inherit;">使用任何表达式作为查询的输入</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_529_anchor" id="j1_529" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_update_with_modified_properties" tabindex="-1" id="j1_529_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.3。</font><font style="vertical-align: inherit;">使用已修改的属性进</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_530_anchor" id="j1_530" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_monitoring_framework_improvements" tabindex="-1" id="j1_530_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.4。</font><font style="vertical-align: inherit;">监控框架改进</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_531_anchor" aria-expanded="true" id="j1_531" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.4.0" tabindex="-1" id="j1_531_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.20. What is New and Noteworthy in Drools 6.4.0</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_532_anchor" id="j1_532" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_better_java_8_compatibility" tabindex="-1" id="j1_532_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.1。</font><font style="vertical-align: inherit;">更好的Java 8兼容性</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_533_anchor" id="j1_533" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_more_robust_incremental_compilation" tabindex="-1" id="j1_533_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.2。</font><font style="vertical-align: inherit;">更强大的增量编译</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_534_anchor" id="j1_534" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_improved_multi_threading_behaviour" tabindex="-1" id="j1_534_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.3。</font><font style="vertical-align: inherit;">改进的多线程行为</font></font></a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_535_anchor" id="j1_535" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_oopath_improvements_2" tabindex="-1" id="j1_535_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.4。</font><font style="vertical-align: inherit;">OOPath的改进</font></font></a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_536_anchor" aria-expanded="true" id="j1_536" class="jstree-node jstree-open"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.6.4.0.final" tabindex="-1" id="j1_536_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21. New and Noteworthy in KIE Workbench 6.4.0</a><ul role="group" class="jstree-children" style=""><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_537_anchor" id="j1_537" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_look_and_feel" tabindex="-1" id="j1_537_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.1. New look and feel</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_538_anchor" id="j1_538" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_various_ui_improvements" tabindex="-1" id="j1_538_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.2. Various UI improvements</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_539_anchor" id="j1_539" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_locales" tabindex="-1" id="j1_539_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.3. New locales</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_540_anchor" id="j1_540" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_authoring_imports_consistent_terminology" tabindex="-1" id="j1_540_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.4. Authoring - Imports - Consistent terminology</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_541_anchor" id="j1_541" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_disable_automatic_build" tabindex="-1" id="j1_541_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.5. Disable automatic build</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_542_anchor" id="j1_542" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_support_for_code_scp_code_style_code_git_code_repository_urls" tabindex="-1" id="j1_542_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.6. Support for <code>SCP</code> style <code>git</code> Repository URLs</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_543_anchor" id="j1_543" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_authoring_duplicate_gav_detection" tabindex="-1" id="j1_543_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.7. Authoring - Duplicate GAV detection</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_544_anchor" id="j1_544" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_new_execution_server_management_user_interface" tabindex="-1" id="j1_544_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.8. New Execution Server Management User Interface</a></li><li role="treeitem" aria-selected="false" aria-level="3" aria-labelledby="j1_545_anchor" id="j1_545" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_user_and_group_management" tabindex="-1" id="j1_545_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.21.9. User and group management</a></li></ul></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_546_anchor" aria-expanded="false" id="j1_546" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.3.0" tabindex="-1" id="j1_546_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.22. What is New and Noteworthy in Drools 6.3.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_549_anchor" aria-expanded="false" id="j1_549" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.6.3.0.final" tabindex="-1" id="j1_549_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.23. New and Noteworthy in KIE Workbench 6.3.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_556_anchor" aria-expanded="false" id="j1_556" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.2.0" tabindex="-1" id="j1_556_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.24. What is New and Noteworthy in Drools 6.2.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_558_anchor" aria-expanded="false" id="j1_558" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.6.2.0.final" tabindex="-1" id="j1_558_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.25. New and Noteworthy in KIE Workbench 6.2.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_574_anchor" aria-expanded="false" id="j1_574" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie.releasenotesintegration.6.2.0" tabindex="-1" id="j1_574_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.26. New and Noteworthy in Integration 6.2.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_576_anchor" aria-expanded="false" id="j1_576" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.1.0" tabindex="-1" id="j1_576_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.27. What is New and Noteworthy in Drools 6.1.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_578_anchor" aria-expanded="false" id="j1_578" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.6.1.0" tabindex="-1" id="j1_578_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.28. New and Noteworthy in KIE Workbench 6.1.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_583_anchor" aria-expanded="false" id="j1_583" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie.releasenoteskie.6.0.0" tabindex="-1" id="j1_583_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.29. New and Noteworthy in KIE API 6.0.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_593_anchor" aria-expanded="false" id="j1_593" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_drools.releasenotesdrools.6.0.0" tabindex="-1" id="j1_593_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.30. What is New and Noteworthy in Drools 6.0.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_598_anchor" id="j1_598" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_wb.releasenotesworkbench.6.0.0" tabindex="-1" id="j1_598_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.31. New and Noteworthy in KIE Workbench 6.0.0</a></li><li role="treeitem" aria-selected="false" aria-level="2" aria-labelledby="j1_599_anchor" aria-expanded="false" id="j1_599" class="jstree-node  jstree-closed jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="index.html#_kie.releasenotesintegration.6.0.0" tabindex="-1" id="j1_599_anchor"><i class="jstree-icon jstree-themeicon" role="presentation"></i>24.32. New and Noteworthy in Integration 6.0.0</a></li></ul></li></ul></div>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/droolsExpertLogo.png" alt="droolsExpertLogo">
</div>
</div>
<h1 id="_welcome" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欢迎</font></font></h1>
</div>
</div>
<div class="sect1">
<h2 id="_welcome"><a class="anchor" href="index.html#_welcome"></a><a class="link" href="index.html#_welcome"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.简介</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction"><a class="anchor" href="index.html#_introduction"></a><a class="link" href="index.html#_introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE（Knowledge Is Everything）是一个将我们的相关技术集中在一起的伞形项目。</font><font style="vertical-align: inherit;">它也是我们项目之间共享的核心。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE包含以下不同但相关的项目，为业务自动化和管理提供完整的解决方案组合：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个业务规则管理系统，具有基于前向链接和后向链接推理的规则引擎，允许快速可靠地评估业务规则和复杂的事件处理。</font><font style="vertical-align: inherit;">规则引擎也是创建专家系统的基本构建块，在人工智能中，该专家系统是模拟人类专家的决策能力的计算机系统。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个灵活的业务流程管理套件，允许您通过描述为实现这些目标而需要执行的步骤来建模您的业务目标。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OptaPlanner</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种约束求解器，可优化员工排班，车辆路径，任务分配和云优化等用例。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Workbench</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个功能齐全的Web应用程序，用于自定义业务规则和流程的可视化组合。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UberFire</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个基于Web的工作台框架，受Eclipse富客户端平台的启发。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.x系列将遵循更灵活的方法，更常规和迭代发布。</font><font style="vertical-align: inherit;">我们计划对一系列次要版本进行一些比正常情况更大的更改，用户需要知道这些版本在采用之前即将发布。</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI部分和链接将变为面向对象，而不是面向任务。</font></font><a href="https://en.wikipedia.org/wiki/Object-oriented_user_interface" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://en.wikipedia.org/wiki/Object-oriented_user_interface</font></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创作/图书馆将成为面向项目，而不是面向存储库。</font><font style="vertical-align: inherit;">您将创建，浏览和打开项目而不是存储库。</font><font style="vertical-align: inherit;">存储库概念将被推低，例如，当您创建项目时，它将自动创建。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旧表单建模器将被删除，只有新表单建模器可用。</font><font style="vertical-align: inherit;">虽然旧表格将继续呈现。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新设计师将继续成熟，拥有更多节点和改进的UXD。</font><font style="vertical-align: inherit;">最终它将成为默认编辑器，但在BPMN2支持中存在功能奇偶校验之前，我们不会删除旧编辑器。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许多地方的UXD持续改进。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将介绍AppFormer项目，这将是现有项目的重组和整合，并导致一些工件重命名。</font><font style="vertical-align: inherit;">UberFire将成为AppFormer-Core，表单，数据建模器和dashbuilder将成为AppFormer。</font><font style="vertical-align: inherit;">Dashbuilder很可能会成为Appformer-Insight的代名词。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.x系列将于今年年底推出。</font><font style="vertical-align: inherit;">我们正在进行并行工作以引入具有改进的git支持的工作空间概念，这将具有用于分叉和拉取请求的内置工作流。</font><font style="vertical-align: inherit;">这将与水平扩展和改进的高可用性相结合。</font><font style="vertical-align: inherit;">这些更改对于可用性和云可伸缩性非常重要，但对于次要版本的更改太多，因此会突然降至8.x.</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_gettingstarted"><a class="anchor" href="index.html#_gettingstarted"></a><a class="link" href="index.html#_gettingstarted"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2。</font><font style="vertical-align: inherit;">卷入</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们经常被问到“我如何参与”。</font><font style="vertical-align: inherit;">幸运的是答案很简单，只需编写一些代码并提交它:)没有必须跳过的秘密或秘密握手。</font><font style="vertical-align: inherit;">我们有一个非常小的“开销”，我们要求允许可扩展的项目开发。</font><font style="vertical-align: inherit;">下面我们提供了我们要求的工具和“工作流程”的一般概述，以及一些一般性建议。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你贡献了一些好的工作，不要忘记博客:)</font></font></p>
</div>
<div class="sect3">
<h4 id="_sign_up_to_jboss_org"><a class="anchor" href="index.html#_sign_up_to_jboss_org"></a><a class="link" href="index.html#_sign_up_to_jboss_org"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.1。</font><font style="vertical-align: inherit;">注册jboss.org</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录jboss.org可以访问JBoss wiki，论坛和JIRA。</font><font style="vertical-align: inherit;">转到</font></font><a href="https://www.jboss.org/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.jboss.org/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击“注册”。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/sign_jbossorg.png" alt="签署jbossorg">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sign_the_contributor_agreement"><a class="anchor" href="index.html#_sign_the_contributor_agreement"></a><a class="link" href="index.html#_sign_the_contributor_agreement"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.2。</font><font style="vertical-align: inherit;">签署贡献者协议</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要签署的唯一表单是贡献者协议，该协议通过网络完全自动化。</font><font style="vertical-align: inherit;">如下图所示“这确定了您的贡献的条款和条件，并确保源代码可以得到适当的许可”</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://cla.jboss.org/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://cla.jboss.org/</font></font></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/sign_contributor.png" alt="签署贡献者">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_submitting_issues_via_jira"><a class="anchor" href="index.html#_submitting_issues_via_jira"></a><a class="link" href="index.html#_submitting_issues_via_jira"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.3。</font><font style="vertical-align: inherit;">通过JIRA提交问题</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了能够与核心开发团队进行交互，您需要使用问题跟踪器JIRA。</font><font style="vertical-align: inherit;">这可确保记录所有请求并将其分配到发布计划，并在一个位置捕获所有讨论。</font><font style="vertical-align: inherit;">Bug报告，错误修复，功能请求和功能提交都应该放在这里。</font><font style="vertical-align: inherit;">一般问题应在邮件列表中进行。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次要代码提交（如格式或文档修复）不需要创建关联的JIRA问题。</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://issues.jboss.org/browse/DROOLS" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://issues.jboss.org/browse/DROOLS</font></font></a></p>
</div>
<div class="paragraph">
<p><a href="https://issues.jboss.org/browse/JBPM" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://issues.jboss.org/browse/JBPM</font></font></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/submit_jira.png" alt="提交jira">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fork_github"><a class="anchor" href="index.html#_fork_github"></a><a class="link" href="index.html#_fork_github"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.4。</font><font style="vertical-align: inherit;">Fork GitHub</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">签署了贡献者协议，并且您的请求已提交给JIRA，您现在应该可以编写代码:)创建一个GitHub帐户并分叉任何Drools，jBPM或Guvnor存储库。</font><font style="vertical-align: inherit;">fork将在您自己的GitHub空间中创建一个副本，您可以按自己的进度工作。</font><font style="vertical-align: inherit;">如果你犯了一个错误，不要担心吹走它并再次分叉。</font><font style="vertical-align: inherit;">请注意，每个GitHub存储库都提供了克隆（checkout）URL，GitHub将为您提供特定于fork的URL。</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/kiegroup" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/kiegroup</font></font></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/fork_github.png" alt="fork github">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_writing_tests"><a class="anchor" href="index.html#_writing_tests"></a><a class="link" href="index.html#_writing_tests"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.5。</font><font style="vertical-align: inherit;">写测试</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在编写测试时，尽量保持最小化和自包含。</font><font style="vertical-align: inherit;">我们更倾向于将DRL片段保留在测试范围内，因为它可以更快地进行审核。</font><font style="vertical-align: inherit;">如果它们是大量规则，则使用String是不实际的，因此无论如何都要将它们放在单独的DRL文件中，而不是从类路径加载。</font><font style="vertical-align: inherit;">如果您的测试需要使用模型，请尝试使用已经存在的模型用于其他单元测试; </font><font style="vertical-align: inherit;">如人，奶酪或订单。</font><font style="vertical-align: inherit;">如果不存在具有所需字段的类，请在添加新类之前尝试更新现有类的字段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有很多测试需要了解，MiscTest是一个很好的起点。</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/kiegroup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/kiegroup/drools/blob/master/drools-compiler/src/test/java/org/drools/integrationtests/MiscTest.java</font></font></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/unit_test.png" alt="单元测试">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_commit_with_correct_conventions"><a class="anchor" href="index.html#_commit_with_correct_conventions"></a><a class="link" href="index.html#_commit_with_correct_conventions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.6。</font><font style="vertical-align: inherit;">承诺正确的约定</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提交时，请确保使用正确的约定。</font><font style="vertical-align: inherit;">提交必须以JIRA问题ID开头，例如DROOLS-1946。</font><font style="vertical-align: inherit;">这可确保通过JIRA交叉引用提交，因此我们可以在同一位置查看给定问题的所有提交。</font><font style="vertical-align: inherit;">在id之后，问题的标题应该接下来。</font><font style="vertical-align: inherit;">然后使用换行符，用短划线缩进，以提供与此提交相关的其他信息。</font><font style="vertical-align: inherit;">为您想要制作的每个单独的点使用额外的新线和短划线。</font><font style="vertical-align: inherit;">如果合适，您可以向同一个提交添加其他JIRA交叉引用。</font><font style="vertical-align: inherit;">通常尽量避免在同一次提交中组合不相关的问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要忘记从原始主服务器中重新绑定本地fork，然后将提交返回到fork。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/jira_crossreferenced.png" alt="jira crossreferenced">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_submit_pull_requests"><a class="anchor" href="index.html#_submit_pull_requests"></a><a class="link" href="index.html#_submit_pull_requests"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2.7。</font><font style="vertical-align: inherit;">提交拉请求</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将您的代码从原始主服务器重新命名并推送到您的个人GitHub区域，您现在可以将您的工作作为拉取请求提交。</font><font style="vertical-align: inherit;">如果你在GitHub的页面顶部查看你的工作区域，它们将是一个“Pull Request”按钮。</font><font style="vertical-align: inherit;">选择此项将提供一个gui来自动提交您的拉取请求。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拉取请求然后进入队列，供所有人查看和评论。</font><font style="vertical-align: inherit;">您可以在下面看到典型的拉取请求。</font><font style="vertical-align: inherit;">pull请求允许讨论，它显示所有相关提交和每个提交的差异。</font><font style="vertical-align: inherit;">讨论通常涉及代码审查，这些审查为改进提供了有用的建议，并允许我们对代码的特定部分留下内联评论。</font><font style="vertical-align: inherit;">如果我们不立即合并，请不要沮丧，在我们接受拉取请求之前，通常可以进行多次修改。</font><font style="vertical-align: inherit;">幸运的是GitHub让你回到你的代码，做更多的提交，然后将你的拉取请求更新到你最新的和最好的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们需要时间来回应拉取请求，所以请耐心等待。</font><font style="vertical-align: inherit;">修复程序附带的提交测试通常会很快应用，因为只有测试才会经常进行，直到我们有时间提交修复程序。</font><font style="vertical-align: inherit;">不要忘记不时地重新提交并重新提交您的请求，否则随着时间的推移会发生合并冲突，核心开发人员将会忽略这些冲突。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/submit_pull_request.png" alt="提交拉取请求">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installationandsetup"><a class="anchor" href="index.html#_installationandsetup"></a><a class="link" href="index.html#_installationandsetup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3。</font><font style="vertical-align: inherit;">安装和设置（核心和IDE）</font></font></a></h3>
<div class="sect3">
<h4 id="_installing_and_using"><a class="anchor" href="index.html#_installing_and_using"></a><a class="link" href="index.html#_installing_and_using"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.1。</font><font style="vertical-align: inherit;">安装和使用</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools提供了一个基于Eclipse的IDE（可选），但其核心只需要Java 1.5（Java SE）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个简单的入门方法是下载并安装Eclipse插件 - 这也需要安装Eclipse GEF框架（如果您还没有安装它，请参见下文）。</font><font style="vertical-align: inherit;">这将为您提供开始所需的所有依赖项：您只需创建一个新的规则项目，一切都将为您完成。</font><font style="vertical-align: inherit;">有关详细说明，请参阅Rule Workbench和IDE一章。</font><font style="vertical-align: inherit;">安装Eclipse插件通常就像将文件解压缩到Eclipse插件目录一样简单。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要使用Eclipse插件。</font><font style="vertical-align: inherit;">规则文件只是文本输入（或视情况而定的电子表格），IDE（也称为Rule Workbench）只是一种便利。</font><font style="vertical-align: inherit;">人们已经在很多方面集成了Drools引擎，没有“一刀切”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，您可以下载二进制分发版，并在项目类路径中包含相关的JAR。</font></font></p>
</div>
<div class="sect4">
<h5 id="_dependencies_and_jars"><a class="anchor" href="index.html#_dependencies_and_jars"></a><a class="link" href="index.html#_dependencies_and_jars"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.1.1。</font><font style="vertical-align: inherit;">依赖关系和JAR</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools被分解为几个模块，在规则开发/编译期间需要一些模块，并且在运行时需要一些模块。</font><font style="vertical-align: inherit;">在许多情况下，人们只想在运行时包含所有依赖项，这很好。</font><font style="vertical-align: inherit;">它可以让您拥有最大的灵活性。</font><font style="vertical-align: inherit;">但是，有些人可能更愿意将他们的“运行时”剥离到最低限度，因为他们将以二进制形式部署规则 - 这也是可能的。</font><font style="vertical-align: inherit;">核心运行时引擎可以非常紧凑，并且在3个JAR文件中只需要几百千字节。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是构成JBoss Drools的重要库的描述</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">knowledge-api.jar  - 这提供了接口和工厂。</font><font style="vertical-align: inherit;">它还有助于清楚地显示作为用户API的用途以及什么只是引擎API。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">knowledge-internal-api.jar  - 这提供了内部接口和工厂。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-core.jar  - 这是核心引擎，运行时组件。</font><font style="vertical-align: inherit;">包含RETE引擎和LEAPS引擎。</font><font style="vertical-align: inherit;">如果您正在预编译规则（以及通过Package或RuleBase对象进行部署），那么这是唯一的运行时依赖项。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-compiler.jar  - 包含编译器/构建器组件以获取规则源，并构建可执行规则库。</font><font style="vertical-align: inherit;">这通常是应用程序的运行时依赖性，但如果您要预编译规则则不必如此。</font><font style="vertical-align: inherit;">这取决于drools-core。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-jsr94.jar  - 这是符合JSR-94的实现，这实际上是drools-compiler组件的一个层。</font><font style="vertical-align: inherit;">请注意，由于JSR-94规范的性质，并非所有功能都可通过此接口轻松公开。</font><font style="vertical-align: inherit;">在某些情况下，直接使用Drools API会更容易，但在某些环境中，JSR-94是强制要求的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-decisiontables.jar  - 这是决策表的'编译器'组件，它使用drools-compiler组件。</font><font style="vertical-align: inherit;">这支持excel和CSV输入格式。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的组件需要很多其他依赖项，其中大部分都是针对drools-compiler，drools-jsr94或drools-decisiontables模块。</font><font style="vertical-align: inherit;">需要注意的一些关键点是提供电子表格解析能力的“POI”，以及提供规则语言本身解析的“antlr”。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果你在J2EE或servlet容器中使用Drools并且遇到了带有“JDT”的类路径问题，那么你可以切换到janino编译器。</font><font style="vertical-align: inherit;">设置系统属性“drools.compiler”：例如：-Ddrools.compiler = JANINO。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关发行版中依赖项的最新信息，请参阅可在Maven存储库中找到的已发布POM。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_use_with_maven_gradle_ivy_buildr_or_ant"><a class="anchor" href="index.html#_use_with_maven_gradle_ivy_buildr_or_ant"></a><a class="link" href="index.html#_use_with_maven_gradle_ivy_buildr_or_ant"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.1.2。</font><font style="vertical-align: inherit;">与Maven，Gradle，Ivy，Buildr或Ant一起使用</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAR也可以在</font></font><a href="http://search.maven.org/#search|ga|1|org.drools"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven中央存储库中找到</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（以及</font></font><a href="https://repository.jboss.org/nexus/index.html#nexus-search;gav" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://repository.jboss.org/nexus/index.html#nexus-search;gav </font></font></a><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.drools </font></font></sub><sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">~</font></font></sub><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [JBoss Maven存储库]）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您使用Maven，请在项目的</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pom.xml中</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加KIE和Drools依赖项，</font><font style="vertical-align: inherit;">
 如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-bom<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-title">scope</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
      ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependencyManagement</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-title">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
    ...<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这与Gradle，Ivy和Buildr类似。</font><font style="vertical-align: inherit;">要识别最新版本，请检查Maven存储库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您仍在使用Ant（不使用Ivy），请从下载zip的</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">二进制文件</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 目录中</font><font style="vertical-align: inherit;">复制所有JAR，</font><font style="vertical-align: inherit;">并手动验证您的类路径是否包含重复的JAR。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_runtime"><a class="anchor" href="index.html#_runtime"></a><a class="link" href="index.html#_runtime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.1.3。</font><font style="vertical-align: inherit;">运行</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里提到的“运行时”要求是您将规则部署为二进制形式（作为KnowledgePackage对象或KnowledgeBase对象等）。</font><font style="vertical-align: inherit;">这是一个可选功能，允许您保持运行时非常轻。</font><font style="vertical-align: inherit;">您可以使用drools-compiler生成“进程外”的规则包，然后将它们部署到运行时系统。</font><font style="vertical-align: inherit;">此运行时系统仅需要drools-core.jar和knowledge-api来执行。</font><font style="vertical-align: inherit;">这是一个可选的部署模式，许多人不需要“修剪”他们的应用程序，但它是某些环境的理想选择。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_installing_ide_rule_workbench"><a class="anchor" href="index.html#_installing_ide_rule_workbench"></a><a class="link" href="index.html#_installing_ide_rule_workbench"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.1.4。</font><font style="vertical-align: inherit;">安装IDE（Rule Workbench）</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则工作台（对于Eclipse）要求您具有Eclipse 3.4或更高版本，以及Eclipse GEF 3.4或更高版本。</font><font style="vertical-align: inherit;">您可以通过下载插件或使用更新站点来安装它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个选择是使用JBoss IDE，它包含预先打包的所有插件要求，以及与规则分开的其他工具选择。</font><font style="vertical-align: inherit;">您可以选择只安装JBoss IDE附带的“bundle”中的规则。</font></font></p>
</div>
<div class="sect5">
<h6 id="_installing_gef_a_required_dependency"><a class="anchor" href="index.html#_installing_gef_a_required_dependency"></a><a class="link" href="index.html#_installing_gef_a_required_dependency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装GEF（必需的依赖项）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GEF是Eclipse图形编辑框架，用于插件中的图形查看组件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您没有安装GEF，可以使用内置更新机制安装它（或者不推荐从Eclipse.org网站下载GEF）。</font><font style="vertical-align: inherit;">JBoss IDE已经拥有了GEF，就像Eclipse的许多其他“发行版”一样，所以这一步对于某些人来说可能是多余的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从帮助菜单中打开帮助→软件更新...→可用软件→添加站点.... </font><font style="vertical-align: inherit;">位置是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/download.eclipse.org/tools</span><span class="hljs-regexp">/gef/updates</span><span class="hljs-regexp">/releases/</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，您选择GEF插件：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/install_gef.png" alt="安装gef">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按next，并同意安装插件（可能需要重新启动Eclipse）。</font><font style="vertical-align: inherit;">完成后，您可以继续安装规则插件。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_installing_gef_from_zip_file"><a class="anchor" href="index.html#_installing_gef_from_zip_file"></a><a class="link" href="index.html#_installing_gef_from_zip_file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从zip文件安装GEF</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要从zip文件安装，请下载并解压缩该文件。</font><font style="vertical-align: inherit;">在zip中你会看到一个插件目录和插件JAR本身。</font><font style="vertical-align: inherit;">将插件JAR放入Eclipse应用程序插件目录中，然后重新启动Eclipse。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_installing_drools_plug_in_from_zip_file"><a class="anchor" href="index.html#_installing_drools_plug_in_from_zip_file"></a><a class="link" href="index.html#_installing_drools_plug_in_from_zip_file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从zip文件安装Drools插件</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从下面的链接下载Drools Eclipse IDE插件。</font><font style="vertical-align: inherit;">将下载的文件解压缩到主eclipse文件夹中（不要只是将文件复制到那里，将其解压缩，以便功能和插件JAR最终出现在eclipse的功能和插件目录中）并重新启动Eclipse。</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://www.drools.org/download/download.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.drools.org/download/download.html</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要检查安装是否成功，请尝试打开Drools透视图：单击Eclipse窗口右上角的“Open Perspective”按钮，选择“Other ...”并选择Drools透视图。</font><font style="vertical-align: inherit;">如果您无法找到Drools透视图作为可能的透视图之一，则安装可能不成功。</font><font style="vertical-align: inherit;">检查您是否正确执行了每个必需的步骤：您是否拥有正确版本的Eclipse（3.4.x）？</font><font style="vertical-align: inherit;">你是否安装了Eclipse GEF（检查</font><strong><font style="vertical-align: inherit;">eclipse根文件夹中plugins目录中</font></strong><font style="vertical-align: inherit;">是否</font><strong><font style="vertical-align: inherit;">存在</font></strong><font style="vertical-align: inherit;"> org.eclipse.gef_3.4 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.jar）？</font><font style="vertical-align: inherit;">您是否正确提取了Drools Eclipse插件（检查org.drools.eclipse_是否正确</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.jar存在于eclipse根文件夹的plugins目录中）？</font><font style="vertical-align: inherit;">如果您找不到问题，请尝试联系我们（例如，在irc或用户邮件列表上），更多信息可以在我们的主页上找到：</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://www.drools.org/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.drools.org/</font></font></a></p>
</div>
</div>
<div class="sect5">
<h6 id="_drools_runtimes"><a class="anchor" href="index.html#_drools_runtimes"></a><a class="link" href="index.html#_drools_runtimes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Runtimes</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools运行时是文件系统上的JAR集合，代表Drools项目JAR的一个特定版本。</font><font style="vertical-align: inherit;">要创建运行时，必须将IDE指向您选择的版本。</font><font style="vertical-align: inherit;">如果要基于插件本身包含的最新Drools项目JAR创建新的运行时，您也可以轻松地执行此操作。</font><font style="vertical-align: inherit;">您需要为Eclipse工作区指定默认的Drools运行时，但每个项目都可以覆盖默认值并专门为该项目选择适当的运行时。</font></font></p>
</div>
<div class="sect6">
<h7 id="_defining_a_drools_runtime"><a class="anchor" href="index.html#_defining_a_drools_runtime"></a><a class="link" href="index.html#_defining_a_drools_runtime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义Drools运行时</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要使用Eclipse首选项视图定义一个或多个Drools运行时。</font><font style="vertical-align: inherit;">要打开首选项，请在菜单窗口中选择“首选项”菜单项。</font><font style="vertical-align: inherit;">新的首选项对话框应显示您的所有首选项。</font><font style="vertical-align: inherit;">在此对话框的左侧，在Drools类别下，选择“Installed Drools runtimes”。</font><font style="vertical-align: inherit;">然后右侧的面板应显示当前定义的Drools运行时。</font><font style="vertical-align: inherit;">如果您还没有定义任何运行时，它应该像下图所示。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes.png" alt="流口水">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要定义新的Drools运行时，请单击“添加”按钮。</font><font style="vertical-align: inherit;">将弹出如下所示的对话框，其中需要运行时的名称以及文件系统中可以找到它的位置。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes-add.png" alt="drools运行时添加">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，您有两种选择：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您只想使用Drools Eclipse插件中包含的默认JAR，可以通过单击“Create a new Drools 5 runtime ...”按钮自动创建新的Drools运行时。</font><font style="vertical-align: inherit;">将显示一个文件浏览器，要求您选择文件系统上要创建此运行时的文件夹。</font><font style="vertical-align: inherit;">然后，插件将自动将所有必需的依赖项复制到指定的文件夹。</font><font style="vertical-align: inherit;">选择此文件夹后，对话框应如下图所示。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要使用Drools项目的一个特定版本，则应在文件系统上创建一个包含所有必需的Drools库和依赖项的文件夹。</font><font style="vertical-align: inherit;">如上所述，不是创建新的Drools运行时，而是为运行时命名，并选择包含所有必需JAR的此文件夹的位置。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes-add2.png" alt="drools运行时add2">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“确定”按钮后，运行时应显示在已安装的Drools运行时表中，如下所示。</font><font style="vertical-align: inherit;">单击新创建的运行时前面的复选框，使其成为默认的Drools运行时。</font><font style="vertical-align: inherit;">默认的Drools运行时将用作未选择项目特定运行时的所有Drools项目的运行时。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes2.png" alt="drools runtimes2">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以根据需要添加任意数量的Drools运行时。</font><font style="vertical-align: inherit;">例如，下面的屏幕截图显示了已定义三个运行时的配置：Drools 4.0.7运行时，Drools 5.0.0运行时和Drools 5.0.0.SNAPSHOT运行时。</font><font style="vertical-align: inherit;">Drools 5.0.0运行时被选为默认运行时。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes3.png" alt="drools runtimes3">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，如果更改了默认运行时，则需要重新启动Eclipse，并且要确保使用默认运行时的所有项目都相应地更新其类路径。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_selecting_a_runtime_for_your_drools_project"><a class="anchor" href="index.html#_selecting_a_runtime_for_your_drools_project"></a><a class="link" href="index.html#_selecting_a_runtime_for_your_drools_project"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为Drools项目选择运行时</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论何时创建Drools项目（使用New Drools Project向导或使用“转换为Drools项目”将现有Java项目转换为Drools项目，当您处于Drools透视图时右键单击现有项目时Java项目），插件会自动将所有必需的JAR添加到项目的类路径中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在创建新的Drools项目时，插件将自动使用该项目的默认Drools运行时，除非您指定项目特定的项目。</font><font style="vertical-align: inherit;">您可以在New Drools Project向导的最后一步中执行此操作，如下所示，通过取消选中“Use default Drools runtime”复选框并在下拉框中选择相应的运行时。</font><font style="vertical-align: inherit;">如果单击“配置工作区设置...”链接，将打开显示当前安装的Drools运行时的工作区首选项，以便您可以在其中添加新的运行时。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes-newproject.png" alt="drools runtimes newproject">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以通过打开项目属性（右键单击项目并选择“属性”）并选择“Drools”类别随时更改Drools项目的运行时，如下所示。</font><font style="vertical-align: inherit;">选中“启用项目特定设置”复选框，然后从下拉框中选择相应的运行时。</font><font style="vertical-align: inherit;">如果单击“配置工作区设置...”链接，将打开显示当前安装的Drools运行时的工作区首选项，以便您可以在其中添加新的运行时。</font><font style="vertical-align: inherit;">如果取消选中“启用项目特定设置”复选框，它将使用全局首选项中定义的默认运行时。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools-runtimes-project.png" alt="drools运行时项目">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_building_from_source"><a class="anchor" href="index.html#_building_from_source"></a><a class="link" href="index.html#_building_from_source"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.2。</font><font style="vertical-align: inherit;">从源头构建</font></font></a></h4>
<div class="sect4">
<h5 id="_getting_the_sources"><a class="anchor" href="index.html#_getting_the_sources"></a><a class="link" href="index.html#_getting_the_sources"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.2.1。</font><font style="vertical-align: inherit;">获取消息来源</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个Maven工件的源代码在JBoss Maven存储库中作为源JAR提供。</font><font style="vertical-align: inherit;">下载拉链中也包含相同的源JAR。</font><font style="vertical-align: inherit;">但是，如果您想从源代码构建，强烈建议从源代码控制中获取源代码。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM使用</font></font><a href="http://git-scm.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行源代码控制。</font><font style="vertical-align: inherit;">受祝福的git存储库托管在</font></font><a href="https://github.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/kiegroup" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/kiegroup</font></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git允许您分叉我们的代码，独立地对其进行个人更改，但仍定期合并我们的最新更改，并可选择与我们分享您的更改。</font><font style="vertical-align: inherit;">要了解有关git的更多信息，请阅读免费书籍</font></font><a href="http://progit.org/book/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git Pro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_building_the_sources"><a class="anchor" href="index.html#_building_the_sources"></a><a class="link" href="index.html#_building_the_sources"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.2.2。</font><font style="vertical-align: inherit;">建立资源</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本质上，从源代码构建非常容易，例如，如果你想构建</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">guvnor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 项目：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell" data-lang="shell">$ git clone git@github.com:kiegroup/guvnor.git<font></font>
...<font></font>
$ cd guvnor<font></font>
$ mvn clean install -DskipTests -Dfull<font></font>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在很多潜在的缺陷</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此如果您认真考虑从源构建并可能为项目做出贡献，请</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按照</font></font><a href="https://github.com/kiegroup/droolsjbpm-build-bootstrap/blob/master/README.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">droolsjbpm-build-bootstrap中的README文件中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的说明进行操作
 </font><font style="vertical-align: inherit;">。</font></font></strong></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_eclipse"><a class="anchor" href="index.html#_eclipse"></a><a class="link" href="index.html#_eclipse"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.3。</font><font style="vertical-align: inherit;">蚀</font></font></a></h4>
<div class="sect4">
<h5 id="_importing_eclipse_projects"><a class="anchor" href="index.html#_importing_eclipse_projects"></a><a class="link" href="index.html#_importing_eclipse_projects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3.3.1。</font><font style="vertical-align: inherit;">导入Eclipse项目</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成Eclipse项目文件后，现在可以将它们导入Eclipse。</font><font style="vertical-align: inherit;">启动Eclipse时，在subversion结帐的根目录中打开工作区。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import1.jpg" alt="eclipse import1">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import2.jpg" alt="eclipse import2">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import3.jpg" alt="eclipse import3">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import4.jpg" alt="eclipse import4">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font></font><code>mvn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有项目依赖项时，下载并添加到本地Maven存储库。</font><font style="vertical-align: inherit;">除非您告诉它存储库的位置，否则Eclipse无法找到这些依赖项。</font><font style="vertical-align: inherit;">为此，请设置一个</font></font><code>M2_REPO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类路径变量。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import6.jpg" alt="eclipse import6">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import7.jpg" alt="eclipse import7">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import8.jpg" alt="eclipse import8">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eclipse_import9.jpg" alt="eclipse import9">
</div>
</div>
<h1 id="_kie" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE是Drools和jBPM的共享核心。</font><font style="vertical-align: inherit;">它为构建，部署和利用资源提供了统一的方法和编程模型。</font></font></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kiechapter"><a class="anchor" href="index.html#_kiechapter"></a><a class="link" href="index.html#_kiechapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凯</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kieoverviewsection"><a class="anchor" href="index.html#_kieoverviewsection"></a><a class="link" href="index.html#_kieoverviewsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。</font><font style="vertical-align: inherit;">概观</font></font></a></h3>
<div class="sect3">
<h4 id="_kieanatomysection"><a class="anchor" href="index.html#_kieanatomysection"></a><a class="link" href="index.html#_kieanatomysection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.1。</font><font style="vertical-align: inherit;">项目剖析</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究Drools和jBPM的集成知识解决方案的过程只使用了“kiegroup”组名。</font><font style="vertical-align: inherit;">这个名字渗透了GitHub帐户和Maven POM。</font><font style="vertical-align: inherit;">随着范围的扩大和新项目的推出，KIE（知识就是一切的首字母缩写）被选为新的组名。</font><font style="vertical-align: inherit;">KIE名称也用于系统的共享方面; </font><font style="vertical-align: inherit;">例如统一构建，部署和利用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE目前由以下子项目组成：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/kie.png" alt="纪伊">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图1. KIE解剖学</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OptaPlanner是一个本地搜索和优化工具，已经从Drools Planner分离出来，现在是Drools和jBPM的顶级项目。</font><font style="vertical-align: inherit;">这是Optaplanner的自然演变，虽然具有强大的Drools整合，但长期以来一直独立于Drools。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Polymita的收购，以及其他东西，强大的Dashboard Builder提供强大的报告功能。</font><font style="vertical-align: inherit;">Dashboard Builder目前是一个临时名称，在6.0版本之后将选择一个新名称。</font><font style="vertical-align: inherit;">Dashboard Builder完全独立于Drools和jBPM，并将被JBoss的许多项目使用，并希望在JBoss之外:)</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UberFire是新的基础工作台项目，从头开始重写。</font><font style="vertical-align: inherit;">UberFire提供类似Eclipse的工作台功能，包括插件中的面板和页面。</font><font style="vertical-align: inherit;">该项目独立于Drools和jBPM，任何人都可以将其作为构建灵活而强大的工作台的基础。</font><font style="vertical-align: inherit;">UberFire将用于整个JBoss的控制台和工作台开发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定Guvnor品牌从其预期角色中泄露了太多; </font><font style="vertical-align: inherit;">诸如决策表之类的创作隐喻被认为是Guvnor组件而不是Drools组件。</font><font style="vertical-align: inherit;">Guvnor在5.x中使用的整体项目结构没有帮助。</font><font style="vertical-align: inherit;">在6.0中，Guvnor的重点已经缩小到封装了一套UberFire插件，这些插件为构建基于Web的IDE提供了基础。</font><font style="vertical-align: inherit;">例如Maven集成用于构建和部署，Maven存储库的管理以及通过收件箱的活动通知。</font><font style="vertical-align: inherit;">Drools和jBPM构建工作台分发，使用Uberfire作为基础，包括一组插件，如Guvnor，以及他们自己的插件，用于决策表，指导编辑器，BPMN2设计器，人工任务等。</font><font style="vertical-align: inherit;">Drools工作台称为Drools-WB。</font><font style="vertical-align: inherit;">KIE-WB是结合了所有Guvnor，Drools和jBPM插件的超级工作台。</font><font style="vertical-align: inherit;">jBPM-WB由于实际上并不存在而被幻影显示，被KIE-WB视为冗余。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kielifecyclessection"><a class="anchor" href="index.html#_kielifecyclessection"></a><a class="link" href="index.html#_kielifecyclessection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.2。</font><font style="vertical-align: inherit;">生命周期</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用KIE系统的不同方面或生命周期，无论是Drools还是jBPM，通常可以分解为以下几点：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用UI隐喻创作知识，例如：DRL，BPMN2，决策表，类模型。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建立</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将创作的知识构建到可部署的单元中。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于KIE，这个单位是JAR。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在部署到应用程序之前测试KIE知识。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将单元部署到应用程序可以利用（使用）它们的位置。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE使用Maven风格的存储库。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">利用</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载JAR以提供应用程序可与之交互的KIE会话（KieSession）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE在运行时通过KIE容器（KieContainer）公开JAR。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSessions，用于与运行时进行交互，是从KieContainer创建的。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跑</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过API与KieSession进行系统交互。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户通过命令行或UI与KieSession进行交互。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理任何KieSession或KieContainer。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_builddeployutilizeandrunsection"><a class="anchor" href="index.html#_builddeployutilizeandrunsection"></a><a class="link" href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。</font><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a></h3>
<div class="sect3">
<h4 id="_kiemoduleintroductionbuildingintroductionsection"><a class="anchor" href="index.html#_kiemoduleintroductionbuildingintroductionsection"></a><a class="link" href="index.html#_kiemoduleintroductionbuildingintroductionsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.0引入了一种新的配置和约定方法来构建KIE基础，而不是使用5.x中的编程构建器方法。</font><font style="vertical-align: inherit;">仍然可以使用构建器，因为它用于工具集成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Building现在使用Maven，并与Maven实践保持一致。</font><font style="vertical-align: inherit;">KIE项目或模块只是一个Maven Java项目或模块; </font><font style="vertical-align: inherit;">使用额外的元数据文件META-INF / kmodule.xml。</font><font style="vertical-align: inherit;">kmodule.xml文件是为KIE库选择资源并配置这些KIE库和会话的描述符。</font><font style="vertical-align: inherit;">还有通过Spring和OSGi BluePrints提供的替代XML支持。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然标准Maven可以构建和打包KIE资源，但它不会在构建时提供验证。</font><font style="vertical-align: inherit;">有一个Maven插件，建议用于获取构建时间验证。</font><font style="vertical-align: inherit;">该插件还会生成许多类，从而使运行时加载速度更快。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕截图中显示了示例项目布局和Maven POM描述符</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/defaultkiesession.png" alt="defaultkiesession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图2.示例项目布局和Maven POM</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE使用默认值来最小化配置量。</font><font style="vertical-align: inherit;">空的kmodule.xml是最简单的配置。</font><font style="vertical-align: inherit;">必须始终有一个kmodule.xml文件，即使是空的，因为它用于发现JAR及其内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven可以'mvn install'将KieModule部署到本地计算机，本地计算机上的所有其他应用程序都使用它。</font><font style="vertical-align: inherit;">或者它可以'mvn deploy'将KieModule推送到远程Maven存储库。</font><font style="vertical-align: inherit;">构建应用程序将引入KieModule并在此过程中填充本地Maven存储库。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/maven.png" alt="行家">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图3.示例项目布局和Maven POM</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过两种方式之一部署JAR。</font><font style="vertical-align: inherit;">可以像在Maven依赖项列表中的任何其他JAR一样添加到类路径中，也可以在运行时动态加载它们。</font><font style="vertical-align: inherit;">KIE将扫描类路径以查找其中包含kmodule.xml的所有JAR。</font><font style="vertical-align: inherit;">每个找到的JAR都由KieModule接口表示。</font><font style="vertical-align: inherit;">术语类路径KieModule和动态KieModule用于指代两种加载方法。</font><font style="vertical-align: inherit;">虽然动态模块支持并排版本控制，但类路径模块却不支持。</font><font style="vertical-align: inherit;">此外，一旦模块在类路径上，就不能动态加载其他版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API的详细参考包含在下一节中，不耐烦的人可以直接跳到示例部分，这在不同的用例中是相当不言自明的。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kiebuildingsection"><a class="anchor" href="index.html#_kiebuildingsection"></a><a class="link" href="index.html#_kiebuildingsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2。</font><font style="vertical-align: inherit;">建造</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/builder.png" alt="建设者">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图4. org.kie.api.core.builder</font></font></div>
</div>
<div class="sect4">
<h5 id="_creatingandbuildingakieproject"><a class="anchor" href="index.html#_creatingandbuildingakieproject"></a><a class="link" href="index.html#_creatingandbuildingakieproject"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2.1。</font><font style="vertical-align: inherit;">创建和建立Kie项目</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie项目具有普通Maven项目的结构，其唯一的特点是包含一个kmodule.xml文件，以声明方式定义</font><font style="vertical-align: inherit;">可以从中创建</font><font style="vertical-align: inherit;">的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s。</font><font style="vertical-align: inherit;">此文件必须放在Maven项目的resources / META-INF文件夹中，而所有其他Kie工件（如DRL或Excel文件）必须存储在resources文件夹或其下的任何其他子文件夹中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于已为所有配置方面提供了有意义的默认值，因此最简单的kmodule.xml文件只能包含空的kmodule标记，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例1.空的kmodule.xml文件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过这种方式，kmodule将包含一个默认值</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">存储在resources文件夹或其任何子文件夹下的所有Kie资产都将被编译并添加到其中。</font><font style="vertical-align: inherit;">要触发构建这些工件，就可</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以为它们</font><font style="vertical-align: inherit;">创建一个</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieContainer.png" alt="KieContainer">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图5. KieContainer</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于这个简单的情况，创建一个</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从类路径中读取要构建的文件就足够了：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例2.从类路径创建KieContainer</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieContainer kContainer = kieServices.getKieClasspathContainer();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`KieServices`是可以访问所有Kie构建和运行时设施的接口：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieServices.png" alt="KieServices">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图6. KieServices</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过这种方式，所有Java源代码和Kie资源都被编译并部署到KieContainer中，使其内容可在运行时使用。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_thekmodulexmlfile"><a class="anchor" href="index.html#_thekmodulexmlfile"></a><a class="link" href="index.html#_thekmodulexmlfile"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2.2。</font><font style="vertical-align: inherit;">kmodule.xml文件</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前一节所述，kmodule.xml文件是可以声明性地配置</font><font style="vertical-align: inherit;">可以从KIE项目创建</font><font style="vertical-align: inherit;">的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（s）和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（s）的地方。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别是a </font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有应用程序知识定义的存储库。</font><font style="vertical-align: inherit;">它将包含规则，流程，函数和类型模型。</font><font style="vertical-align: inherit;">它</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身不包含数据; </font><font style="vertical-align: inherit;">相反，会话可以从</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以插入数据的</font><font style="vertical-align: inherit;">位置创建，</font><font style="vertical-align: inherit;">也可以从哪些流程实例启动。</font><font style="vertical-align: inherit;">创建</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能很重，而会话创建非常轻，因此建议</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽可能缓存以允许重复创建会话。</font><font style="vertical-align: inherit;">然而，最终用户通常不应该担心它，因为这个缓存机制已经自动提供了</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieBase.png" alt="KieBase">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图7. KieBase</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储和执行运行时数据。</font><font style="vertical-align: inherit;">如果已经在kmodule.xml文件中定义，</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则可以直接从</font><font style="vertical-align: inherit;">它创建</font><font style="vertical-align: inherit;">或者更容易创建</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieSession.png" alt="KieSession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图8. KieSession</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml允许定义和配置一个或多个</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s以及</font><font style="vertical-align: inherit;">可以从中创建的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有不同</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s，如下面的示例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例3.示例kmodule.xml文件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
        <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"drools.evaluator.supersetOf"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.mycompany.SupersetOfEvaluatorDefinition"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KBase1"</span> <span class="hljs-attribute">default</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">eventProcessingMode</span>=<span class="hljs-value">"cloud"</span> <span class="hljs-attribute">equalsBehavior</span>=<span class="hljs-value">"equality"</span> <span class="hljs-attribute">declarativeAgenda</span>=<span class="hljs-value">"enabled"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.domain.pkg1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KSession2_1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span> <span class="hljs-attribute">default</span>=<span class="hljs-value">"true"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KSession2_2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span> <span class="hljs-attribute">default</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">beliefSystem</span>=<span class="hljs-value">"jtms"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KBase2"</span> <span class="hljs-attribute">default</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">eventProcessingMode</span>=<span class="hljs-value">"stream"</span> <span class="hljs-attribute">equalsBehavior</span>=<span class="hljs-value">"equality"</span> <span class="hljs-attribute">declarativeAgenda</span>=<span class="hljs-value">"enabled"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.domain.pkg2, org.domain.pkg3"</span> <span class="hljs-attribute">includes</span>=<span class="hljs-value">"KBase1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KSession3_1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span> <span class="hljs-attribute">default</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">clockType</span>=<span class="hljs-value">"realtime"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">fileLogger</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"drools.log"</span> <span class="hljs-attribute">threaded</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">interval</span>=<span class="hljs-value">"10"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">workItemHandlers</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">workItemHandler</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"name"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"org.domain.WorkItemHandler"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">workItemHandlers</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">listeners</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ruleRuntimeEventListener</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"org.domain.RuleRuntimeListener"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">agendaEventListener</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"org.domain.FirstAgendaListener"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">agendaEventListener</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"org.domain.SecondAgendaListener"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">processEventListener</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"org.domain.ProcessListener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">listeners</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处标记包含键值对列表，这些键值对是用于配置</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建过程</font><font style="vertical-align: inherit;">的可选属性</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，此示例kmodule.xml文件定义了</font></font><code>supersetOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><code>org.mycompany.SupersetOfEvaluatorDefinition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类</font><font style="vertical-align: inherit;">命名</font><font style="vertical-align: inherit;">和实现</font><font style="vertical-align: inherit;">的其他自定义运算符</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了</font><font style="vertical-align: inherit;">这2 </font><font style="vertical-align: inherit;">秒</font><font style="vertical-align: inherit;">之后</font><font style="vertical-align: inherit;">，可以</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从第一个</font><font style="vertical-align: inherit;">实例中获得2个不同类型的</font><font style="vertical-align: inherit;">s，而从第二个</font><font style="vertical-align: inherit;">实例中</font><font style="vertical-align: inherit;">只有一个。</font><font style="vertical-align: inherit;">可以在kbase标记上定义的属性列表及其含义和默认值如下：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表1. kbase属性</font></font></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承认的价值观</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从KieContainer中检索此KieBase的名称。</font><font style="vertical-align: inherit;">这是唯一的强制属性。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何以逗号分隔的列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此kmodule中包含的其他KieBase的逗号分隔列表。</font><font style="vertical-align: inherit;">所有这些KieBases的工件也将包含在这个工具中。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何以逗号分隔的列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，资源文件夹下任何级别的所有Drools工件都包含在KieBase中。</font><font style="vertical-align: inherit;">此属性允许将在此KieBase中编译的工件限制为仅属于包列表的工件。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真假</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义此KieBase是否为此模块的默认值，因此可以从KieContainer创建它而不向其传递任何名称。</font><font style="vertical-align: inherit;">每个模块中最多只能有一个默认的KieBase。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equalsBehavior</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身分</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份，平等</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在将新事实插入工作记忆时定义Drools的行为。</font><font style="vertical-align: inherit;">对于身份，它总是创建一个新的FactHandle，除非工作内存中不存在相同的对象，而只有当新插入的对象与已存在的事实不相等（根据其相等的方法）时才相等。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eventProcessingMode</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">云</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">云，流</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在云模式下编译时，KieBase将事件视为正常事实，而在流模式下则允许对它们进行时间推理。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">declarativeAgenda</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">残</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用启用</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义是否启用声明性议程。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类似地，ksession标记的所有属性（当然除了名称）都具有有意义的默认值。</font><font style="vertical-align: inherit;">它们在下表中列出并描述：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表2. ksession属性</font></font></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承认的价值观</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此KieSession的唯一名称。</font><font style="vertical-align: inherit;">用于从KieContainer获取KieSession。</font><font style="vertical-align: inherit;">这是唯一的强制属性。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态的，无国籍的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态会话允许迭代地使用工作存储器，而无状态会话是使用提供的数据集一次性执行工作存储器。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真假</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义此KieSession是否是此模块的默认值，因此可以从KieContainer创建它而不向其传递任何名称。</font><font style="vertical-align: inherit;">在每个模块中，每种类型最多只能有一个默认的KieSession。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clockType</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即时的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时，伪</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义事件时间戳是由系统时钟还是由应用程序控制的伪时钟确定的。</font><font style="vertical-align: inherit;">该时钟对于单元测试时间规则特别有用。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信仰体系</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单，jtms，可废止</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义KieSession使用的信念系统的类型。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前一个kmodule.xml示例中所述，还可以在每个</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件（或控制台）记录器</font><font style="vertical-align: inherit;">上声明性地创建</font><font style="vertical-align: inherit;">一个或多个</font></font><code>WorkItemHandler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和一些可以是3种不同类型的侦听器：ruleRuntimeEventListener，agendaEventListener和processEventListener</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了像前一个示例中的kmodule.xml之类的kmodule.xml，现在可以使用它们的名称从KieContainer中简单地检索KieBases和KieSessions。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例4.从KieContainer中重新获取KieBases和KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieContainer kContainer = kieServices.getKieClasspathContainer();<font></font>
<font></font>
KieBase kBase1 = kContainer.getKieBase(<span class="hljs-string">"KBase1"</span>);<font></font>
KieSession kieSession1 = kContainer.newKieSession(<span class="hljs-string">"KSession2_1"</span>);<font></font>
StatelessKieSession kieSession2 = kContainer.newStatelessKieSession(<span class="hljs-string">"KSession2_2"</span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须注意的是，由于KSession2_1和KSession2_2有两种不同的类型（第一种是有状态的，而第二种是无状态的），因此必须</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据它们声明的类型</font><font style="vertical-align: inherit;">调用2种不同的方法</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求</font><font style="vertical-align: inherit;">的类型</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与kmodule.xml文件中声明的类型不一致，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会抛出一个</font></font><code>RuntimeException</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此外，由于a </font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和a </font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被标记为默认值，因此可以</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从不通过任何名称</font><font style="vertical-align: inherit;">获取它们</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例5.从KieContainer中重新获取默认的KieBase和KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieContainer kContainer = ...<font></font>
<font></font>
KieBase kBase1 = kContainer.getKieBase(); <span class="hljs-comment">// returns KBase1</span>
KieSession kieSession1 = kContainer.newKieSession(); <span class="hljs-comment">// returns KSession2_1</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于Kie项目也是Maven项目，因此在pom.xml文件中声明的groupId，artifactId和version用于生成</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序中唯一标识此项目的项目。</font><font style="vertical-align: inherit;">这允许通过简单地将其传递</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给</font><font style="vertical-align: inherit;">项目来从项目中创建新的KieContainer </font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例6.通过ReleaseId创建现有项目的KieContainer</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
ReleaseId releaseId = kieServices.newReleaseId( <span class="hljs-string">"org.acme"</span>, <span class="hljs-string">"myartifact"</span>, <span class="hljs-string">"1.0"</span> );<font></font>
KieContainer kieContainer = kieServices.newKieContainer( releaseId );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_buildingwithmaven"><a class="anchor" href="index.html#_buildingwithmaven"></a><a class="link" href="index.html#_buildingwithmaven"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2.3。</font><font style="vertical-align: inherit;">与Maven一起建设</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven的KIE插件可确保工件资源经过验证和预编译，建议始终使用它。</font><font style="vertical-align: inherit;">要使用该插件，只需将其添加到Maven pom.xml的构建部分，然后使用打包将其激活</font></font><code>kjar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例7.将KIE插件添加到Maven pom.xml并激活它</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">packaging</span>&gt;</span>kjar<span class="hljs-tag">&lt;/<span class="hljs-title">packaging</span>&gt;</span><font></font>
  ...<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugins</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">extensions</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extensions</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">plugins</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">build</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该插件支持所有Drools / jBPM知识资源。</font><font style="vertical-align: inherit;">但是，如果您在Java类中使用特定的KIE注释，例如</font></font><code>@kie.api.Position</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您需要将编译时依赖项添加</font></font><code>kie-api</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到项目中。</font><font style="vertical-align: inherit;">我们建议将所提供的范围用于所有其他KIE依赖项。</font><font style="vertical-align: inherit;">这样kjar尽可能保持轻量级，并且不依赖于任何特定的KIE版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在没有Maven插件的情况下构建KIE模块会将所有资源按原样复制到生成的JAR中。</font><font style="vertical-align: inherit;">当运行时加载JAR时，它将尝试构建所有资源。</font><font style="vertical-align: inherit;">如果存在编译问题，它将返回null KieContainer。</font><font style="vertical-align: inherit;">它还将编译开销推送到运行时。</font><font style="vertical-align: inherit;">通常不建议这样做，并且应始终使用Maven插件。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_definingakiemoduleprogrammatically"><a class="anchor" href="index.html#_definingakiemoduleprogrammatically"></a><a class="link" href="index.html#_definingakiemoduleprogrammatically"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2.4。</font><font style="vertical-align: inherit;">以编程方式定义KieModule</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过</font><font style="vertical-align: inherit;">编程</font><font style="vertical-align: inherit;">方式定义</font><font style="vertical-align: inherit;">属于KieModule </font><font style="vertical-align: inherit;">的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s，而不是kmodule.xml文件中的声明性定义。</font><font style="vertical-align: inherit;">相同的编程API还允许显式添加包含Kie工件的文件，而不是从项目的resources文件夹中自动读取它们。</font><font style="vertical-align: inherit;">为此，有必要创建一种</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚拟文件系统，并将项目中包含的所有资源添加到其中。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieFileSystem.png" alt="KieFileSystem">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图9. KieFileSystem</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像所有其他的纪伊核心部件，你可以得到的一个实例</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">必须将kmodule.xml配置文件添加到文件系统中。</font><font style="vertical-align: inherit;">这是必须的步骤。</font><font style="vertical-align: inherit;">Kie还提供了一个方便的流畅API，由the实现</font></font><code>KieModuleModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以编程方式创建此文件。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieModuleModel.png" alt="KieModuleModel">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图10. KieModuleModel</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在实践中执行此操作，必须创建一个</font></font><code>KieModuleModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from </font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使用所需的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font><font style="vertical-align: inherit;">对其进行配置</font><font style="vertical-align: inherit;">，将其转换为XML并将XML添加到</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例显示了此过程：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例8.以编程方式创建kmodule.xml并将其添加到KieFileSystem</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieModuleModel kieModuleModel = kieServices.newKieModuleModel();<font></font>
<font></font>
KieBaseModel kieBaseModel1 = kieModuleModel.newKieBaseModel( <span class="hljs-string">"KBase1 "</span>)<font></font>
        .setDefault( <span class="hljs-keyword">true</span> )<font></font>
        .setEqualsBehavior( EqualityBehaviorOption.EQUALITY )<font></font>
        .setEventProcessingMode( EventProcessingOption.STREAM );<font></font>
<font></font>
KieSessionModel ksessionModel1 = kieBaseModel1.newKieSessionModel( <span class="hljs-string">"KSession1"</span> )<font></font>
        .setDefault( <span class="hljs-keyword">true</span> )<font></font>
        .setType( KieSessionModel.KieSessionType.STATEFUL )<font></font>
        .setClockType( ClockTypeOption.get(<span class="hljs-string">"realtime"</span>) );<font></font>
<font></font>
KieFileSystem kfs = kieServices.newKieFileSystem();<font></font>
kfs.writeKModuleXML(kieModuleModel.toXML());</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，还需要</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过其流畅的API </font><font style="vertical-align: inherit;">添加</font><font style="vertical-align: inherit;">组成项目的所有其他Kie工件。</font><font style="vertical-align: inherit;">必须将这些工件添加到相应的常规Maven项目的相同位置。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例9.将Kie工件添加到KieFileSystem</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieFileSystem kfs = ...<font></font>
kfs.write( <span class="hljs-string">"src/main/resources/KBase1/ruleSet1.drl"</span>, stringContainingAValidDRL )<font></font>
        .write( <span class="hljs-string">"src/main/resources/dtable.xls"</span>,<font></font>
                kieServices.getResources().newInputStreamResource( dtableFileStream ) );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例显示可以将Kie工件添加为纯字符串和</font></font><code>Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s。</font><font style="vertical-align: inherit;">在后一种情况下，</font></font><code>Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s可以由</font></font><code>KieResources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工厂</font><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">，也由工厂提供</font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在</font></font><code>KieResources</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了许多便捷的工厂方法，将一个</font></font><code>InputStream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一个</font></font><code>URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，一个</font></font><code>File</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表你的文件系统的路径</font></font><code>Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以由管理</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieResources.png" alt="KieResources">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图11. KieResources</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，a的类型</font></font><code>Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从用于将其添加到的名称的扩展名推断出来</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，也可以不遵循关于文件扩展名的Kie约定，并明确地将特定分配</font></font><code>ResourceType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给a </font></font><code>Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例10.使用显式类型创建和添加资源</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieFileSystem kfs = ...<font></font>
kfs.write( <span class="hljs-string">"src/main/resources/myDrl.txt"</span>,<font></font>
           kieServices.getResources().newInputStreamResource( drlStream )<font></font>
                      .setResourceType(ResourceType.DRL) );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将所有资源添加到</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并通过传递</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给a来</font><font style="vertical-align: inherit;">构建它</font></font><code>KieBuilder</code></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieBuilder.png" alt="KieBuilder">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图12. KieBuilder</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功构建</font><font style="vertical-align: inherit;">a的内容后</font><font style="vertical-align: inherit;">，结果</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会自动添加到</font></font><code>KieRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这</font></font><code>KieRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个单例，充当所有可用</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font><font style="vertical-align: inherit;">的存储库</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieRepository.png" alt="KieRepository">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图13. KieRepository</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此之后，可以通过创建</font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个新的</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用它的</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，由于在这种情况下，</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不包含任何pom.xml文件（它是可以添加使用一个</font></font><code>KieFileSystem.writePomXML</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法），纪伊不能确定</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并分配给它一个默认的。</font><font style="vertical-align: inherit;">此默认值</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从中获取</font></font><code>KieRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并用于标识</font><font style="vertical-align: inherit;">自身</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部</font></font><code>KieRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例显示了整个过程。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例11.构建KieFileSystem的内容并创建KieContainer</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieFileSystem kfs = ...<font></font>
kieServices.newKieBuilder( kfs ).buildAll();<font></font>
KieContainer kieContainer = kieServices.newKieContainer(kieServices.getRepository().getDefaultReleaseId());</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，可以</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过与</font><font style="vertical-align: inherit;">直接从类路径创建</font><font style="vertical-align: inherit;">的情况相同的方式</font><font style="vertical-align: inherit;">获取</font><font style="vertical-align: inherit;">s并</font><font style="vertical-align: inherit;">从中</font><font style="vertical-align: inherit;">创建新的</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font><font style="vertical-align: inherit;">。</font></font><code>KieContainer</code><font style="vertical-align: inherit;"></font><code>KieContainer</code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查编译结果是最佳做法。</font><font style="vertical-align: inherit;">在</font></font><code>KieBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3个不同的严重性报道编译结果：ERROR，WARNING和INFO。</font><font style="vertical-align: inherit;">错误表示项目的编译失败，如果没有</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成，则没有添加任何内容</font></font><code>KieRepository</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">警告和INFO结果可以忽略，但可供检查。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例12.检查编译是否未产生任何错误</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieBuilder kieBuilder = kieServices.newKieBuilder( kfs ).buildAll();<font></font>
assertEquals( <span class="hljs-number">0</span>, kieBuilder.getResults().getMessages( Message.Level.ERROR ).size() );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_changingthedefaultbuildresultseverity"><a class="anchor" href="index.html#_changingthedefaultbuildresultseverity"></a><a class="link" href="index.html#_changingthedefaultbuildresultseverity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2.5。</font><font style="vertical-align: inherit;">更改默认构建结果严重性</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下，可以更改某种构建结果的默认严重性。</font><font style="vertical-align: inherit;">例如，当将具有相同名称的现有规则的新规则添加到包时，默认行为是用新规则替换旧规则并将其报告为INFO。</font><font style="vertical-align: inherit;">这可能是大多数用例的理想选择，但在某些部署中，用户可能希望阻止规则更新并将其报告为错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改结果类型的默认严重性（配置为Drools中的任何其他选项）可以通过API调用，系统属性或配置文件来完成。</font><font style="vertical-align: inherit;">从此版本开始，Drools支持规则更新和功能更新的可配置结果严重性。</font><font style="vertical-align: inherit;">要使用系统属性或配置文件对其进行配置，用户必须使用以下属性：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例13.使用属性设置严重性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// sets the severity of rule updates</span><font></font>
drools.kbuilder.severity.duplicateRule = &lt;INFO|WARNING|ERROR&gt;<font></font>
<span class="hljs-comment">// sets the severity of function updates</span>
drools.kbuilder.severity.duplicateFunction = &lt;INFO|WARNING|ERROR&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiedeployingsection"><a class="anchor" href="index.html#_kiedeployingsection"></a><a class="link" href="index.html#_kiedeployingsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3。</font><font style="vertical-align: inherit;">部署</font></font></a></h4>
<div class="sect4">
<h5 id="_kiebase"><a class="anchor" href="index.html#_kiebase"></a><a class="link" href="index.html#_kiebase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3.1。</font><font style="vertical-align: inherit;">KieBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有应用程序知识定义的存储库。</font><font style="vertical-align: inherit;">它将包含规则，流程，函数和类型模型。</font><font style="vertical-align: inherit;">它</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身不包含数据; </font><font style="vertical-align: inherit;">相反，会话可以从</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以插入数据的</font><font style="vertical-align: inherit;">位置创建，</font><font style="vertical-align: inherit;">也可以从哪些流程实例启动。</font><font style="vertical-align: inherit;">在</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从能够得到</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含有</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的其中</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被定义。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieBase.png" alt="KieBase">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图14. KieBase</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有时，例如在OSGi环境中，</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要解析不在默认类加载器中的类型。</font><font style="vertical-align: inherit;">在这种情况下，有必要创建一个</font></font><code>KieBaseConfiguration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有额外的类加载器，并在从中</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新的时</font><font style="vertical-align: inherit;">将其传递给</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例14.使用自定义ClassLoader创建新的KieBase</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieBaseConfiguration kbaseConf = kieServices.newKieBaseConfiguration( <span class="hljs-keyword">null</span>, MyType.class.getClassLoader() );<font></font>
KieBase kbase = kieContainer.newKieBase( kbaseConf );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kiesessions_and_kiebase_modifications"><a class="anchor" href="index.html#_kiesessions_and_kiebase_modifications"></a><a class="link" href="index.html#_kiesessions_and_kiebase_modifications"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3.2。</font><font style="vertical-align: inherit;">KieSessions和KieBase修改</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSessions将在“Running”部分中详细讨论。</font><font style="vertical-align: inherit;">在</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建并返回</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的对象，它可以选择保留这些引用。</font><font style="vertical-align: inherit;">当</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生修改时，这些修改将应用于会话中的数据。</font><font style="vertical-align: inherit;">此引用是弱引用，它也是可选的，由布尔标志控制。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_kiescanner"><a class="anchor" href="index.html#_kiescanner"></a><a class="link" href="index.html#_kiescanner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3.3。</font><font style="vertical-align: inherit;">KieScanner</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让你的Maven仓库的连续监测，检查项目乃纪伊的新版本是否已安装。</font><font style="vertical-align: inherit;">在该</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">包装中</font><font style="vertical-align: inherit;">部署了一个新版本</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-ci.jar需要在类路径上。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieScanner.png" alt="KieScanner">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图15. KieScanner</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在a上注册，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下例所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例15.在KieContainer上注册和启动KieScanner</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
ReleaseId releaseId = kieServices.newReleaseId( <span class="hljs-string">"org.acme"</span>, <span class="hljs-string">"myartifact"</span>, <span class="hljs-string">"1.0-SNAPSHOT"</span> );<font></font>
KieContainer kContainer = kieServices.newKieContainer( releaseId );<font></font>
KieScanner kScanner = kieServices.newKieScanner( kContainer );<font></font>
<font></font>
<span class="hljs-comment">// Start the KieScanner polling the Maven repository every 10 seconds</span>
kScanner.start( <span class="hljs-number">10000L</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此示例中，</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置为以固定的时间间隔运行，但也可以通过在其上调用</font></font><code>scanNow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">按需运行</font><font style="vertical-align: inherit;">它。</font><font style="vertical-align: inherit;">如果</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Maven存储库中找到所使用的Kie项目的更新版本，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它会自动下载新版本并触发新项目的增量构建。</font><font style="vertical-align: inherit;">在这一点上，现有的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制项下的</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会得到它自动升级-特别是那些</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有s的粘度</font></font><code>getKieBase()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与它们相关的一起</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒，任何</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接获得</font></font><code>KieContainer.newKieSession()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样引用默认</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此外，从这一刻开始，所有新的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font><font style="vertical-align: inherit;">都是由此</font><font style="vertical-align: inherit;">创建的</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用新的项目版本。</font><font style="vertical-align: inherit;">请注意</font><font style="vertical-align: inherit;">，在KieScanner升级之前</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得的</font><font style="vertical-align: inherit;">任何现有产品</font></font><code>newKieBase()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其任何相关产品</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都不会自动升级; </font><font style="vertical-align: inherit;">这是因为</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得的通过</font></font><code>newKieBase()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不受直接控制</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只会如果使用快照，版本范围，最新的，或松开设置拾音器更改已部署的罐子。</font><font style="vertical-align: inherit;">固定版本不会在运行时自动更新。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_maven_versions_and_dependencies"><a class="anchor" href="index.html#_maven_versions_and_dependencies"></a><a class="link" href="index.html#_maven_versions_and_dependencies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3.4。</font><font style="vertical-align: inherit;">Maven版本和依赖项</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven支持许多机制来管理应用程序中的版本控制和依赖关系。</font><font style="vertical-align: inherit;">可以使用特定版本号发布模块，也可以使用SNAPSHOT后缀。</font><font style="vertical-align: inherit;">依赖关系可以指定要使用的版本范围，或者采用SNAPSHOT机制的优势。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StackOverflow为此提供了非常好的描述，如下所示。</font></font></p>
</div>
<div class="paragraph">
<p><a href="http://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency</font></font></a></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于Maven 3.x metaversions RELEASE和LATEST不再支持可重现的构建。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关更多详细信息，请参阅Maven书籍的POM语法部分。</font></font></p>
</div>
<div class="paragraph">
<p><a href="http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-syntax.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-syntax.html </font></font></a></p>
</div>
<div class="paragraph">
<p><a href="http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-dependencies.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-project-dependencies.html</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个说明各种选项的示例。</font><font style="vertical-align: inherit;">在Maven存储库中，com.foo：my-foo具有以下元数据：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">metadata</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>com.foo<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>my-foo<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">versioning</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">release</span>&gt;</span>1.1.1<span class="hljs-tag">&lt;/<span class="hljs-title">release</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">versions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.1.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">versions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">lastUpdated</span>&gt;</span>20090722140000<span class="hljs-tag">&lt;/<span class="hljs-title">lastUpdated</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">versioning</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">metadata</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要依赖于该工件，则可以使用以下选项（当然可以指定其他版本范围，只显示相关的版本范围）：声明确切版本（将始终解析为1.0.1）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>[1.0.1]<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明一个显式版本（除非发生冲突，否则将始终解析为1.0.1，当Maven将选择匹配版本时）：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明所有1.x的版本范围（当前将解析为1.1.1）：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>[1.0.0,2.0.0)<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明一个开放式版本范围（将解析为2.0.0）：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>[1.0.0,)<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将版本声明为LATEST（将解析为2.0.0）：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>LATEST<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将版本声明为RELEASE（将解析为1.1.1）：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，默认情况下，您自己的部署将更新Maven元数据中的“最新”条目，但要更新“发布”条目，您需要激活Maven超级POM中的“发布配置文件”。</font><font style="vertical-align: inherit;">您可以使用“-Prelease-profile”或“-DperformRelease = true”执行此操作</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_settings_xml_and_remote_repository_setup"><a class="anchor" href="index.html#_settings_xml_and_remote_repository_setup"></a><a class="link" href="index.html#_settings_xml_and_remote_repository_setup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3.5。</font><font style="vertical-align: inherit;">Settings.xml和远程存储库设置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maven settings.xml用于配置Maven执行。</font><font style="vertical-align: inherit;">详细说明可在Maven网站上找到：</font></font></p>
</div>
<div class="paragraph">
<p><a href="http://maven.apache.org/settings.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://maven.apache.org/settings.html</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">settings.xml文件可以位于3个位置，使用的实际设置是这3个位置的合并。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven安装： </font></font><code>$M2_HOME/conf/settings.xml</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户的安装： </font></font><code>${user.home}/.m2/settings.xml</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性指定的文件夹位置 </font></font><code>kie.maven.settings.custom</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">settings.xml用于指定远程存储库的位置。</font><font style="vertical-align: inherit;">激活指定远程存储库的配置文件非常重要，通常可以使用“activeByDefault”来完成：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">profiles</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">id</span>&gt;</span>profile-1<span class="hljs-tag">&lt;/<span class="hljs-title">id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">activation</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">activeByDefault</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">activation</span>&gt;</span><font></font>
    ...<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-title">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">profiles</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven提供了有关使用多个远程存储库的详细文档：</font></font></p>
</div>
<div class="paragraph">
<p><a href="http://maven.apache.org/guides/mini/guide-multiple-repositories.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://maven.apache.org/guides/mini/guide-multiple-repositories.html</font></font></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kierunningsection"><a class="anchor" href="index.html#_kierunningsection"></a><a class="link" href="index.html#_kierunningsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4。</font><font style="vertical-align: inherit;">运行</font></font></a></h4>
<div class="sect4">
<h5 id="_kiebase_2"><a class="anchor" href="index.html#_kiebase_2"></a><a class="link" href="index.html#_kiebase_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.1。</font><font style="vertical-align: inherit;">KieBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是所有应用程序知识定义的存储库。</font><font style="vertical-align: inherit;">它将包含规则，流程，函数和类型模型。</font><font style="vertical-align: inherit;">它</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身不包含数据; </font><font style="vertical-align: inherit;">相反，会话可以从</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以插入数据的</font><font style="vertical-align: inherit;">位置创建，</font><font style="vertical-align: inherit;">也可以从哪些流程实例启动。</font><font style="vertical-align: inherit;">在</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从能够得到</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含有</font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的其中</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被定义。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例16.从KieContainer获取KieBase</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieBase kBase = kContainer.getKieBase();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kiesession"><a class="anchor" href="index.html#_kiesession"></a><a class="link" href="index.html#_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.2。</font><font style="vertical-align: inherit;">KieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对运行时数据存储和执行。</font><font style="vertical-align: inherit;">它是从</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">创建的</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieSession.png" alt="KieSession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图16. KieSession</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例17.从KieBase创建KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession ksession = kbase.newKieSession();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kieruntime"><a class="anchor" href="index.html#_kieruntime"></a><a class="link" href="index.html#_kieruntime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.3。</font><font style="vertical-align: inherit;">KieRuntime</font></font></a></h5>
<div class="sect5">
<h6 id="_kieruntime_2"><a class="anchor" href="index.html#_kieruntime_2"></a><a class="link" href="index.html#_kieruntime_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieRuntime</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规定，均适用于规则和过程的方法，如设置全局变量和注册信道。</font><font style="vertical-align: inherit;">（“退出点”是“频道”的过时同义词。）</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieRuntime.png" alt="KieRuntime">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图17. KieRuntime</font></font></div>
</div>
<div class="sect6">
<h7 id="_globals"><a class="anchor" href="index.html#_globals"></a><a class="link" href="index.html#_globals"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Globals是Drools引擎可见的命名对象，但其方式与事实基本不同：支持全局的对象的更改不会触发规则的重新评估。</font><font style="vertical-align: inherit;">尽管如此，全局变量对于提供静态信息非常有用，作为提供规则的RHS中使用的服务的对象，或者作为从Drools引擎返回对象的手段。</font><font style="vertical-align: inherit;">当您在规则的LHS上使用全局时，请确保它是不可变的，或者至少不要指望更改会对规则的行为产生任何影响。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须在规则文件中声明全局，然后需要使用Java对象进行备份。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-keyword">global</span> java.util.<span class="hljs-keyword">List</span> <span class="hljs-keyword">list</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在KIE基础知道全局标识符及其类型，现在可以</font></font><code>ksession.setGlobal()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用全局名称和对象</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">任何会话，以将对象与全局关联。</font><font style="vertical-align: inherit;">如果未在DRL代码中声明全局类型和标识符，将导致从此调用中抛出异常。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List list = <span class="hljs-keyword">new</span> ArrayList();<font></font>
ksession.setGlobal(<span class="hljs-string">"list"</span>, list);</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保在评估规则之前设置任何全局。</font><font style="vertical-align: inherit;">如果不这样做会导致a </font></font><code>NullPointerException</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_event_model"><a class="anchor" href="index.html#_event_model"></a><a class="link" href="index.html#_event_model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.4。</font><font style="vertical-align: inherit;">事件模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件包提供了通知Drools引擎事件的方法，包括触发规则，声明对象等。这允许将日志记录和审计活动与应用程序的主要部分（以及规则）分离。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>KieRuntimeEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口由实施</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其提供两个接口，</font></font><code>RuleRuntimeEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>ProcessEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们只会介绍</font></font><code>RuleRuntimeEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieRuntimeEventManager.png" alt="KieRuntimeEventManager">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图18. KieRuntimeEventManager</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>RuleRuntimeEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许添加和删除侦听程序，因此，对于工作记忆和议程事件就可以听了。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleRuntimeEventManager.png" alt="RuleRuntimeEventManager">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图19. RuleRuntimeEventManager</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下代码段显示了如何声明简单的议程侦听器并将其附加到会话。</font><font style="vertical-align: inherit;">它会在射击后打印匹配。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例18.添加AgendaEventListener</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.addEventListener( <span class="hljs-keyword">new</span> DefaultAgendaEventListener() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterMatchFired</span><span class="hljs-params">(AfterMatchFiredEvent event)</span> </span>{
        <span class="hljs-keyword">super</span>.afterMatchFired( event );<font></font>
        System.out.println( event );<font></font>
    }<font></font>
});</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还提供</font></font><code>DebugRuleRuntimeEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>DebugAgendaEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用调试print语句实现每个方法。</font><font style="vertical-align: inherit;">要打印所有工作内存事件，请添加如下监听器：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例19.添加DebugRuleRuntimeEventListener</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.addEventListener( <span class="hljs-keyword">new</span> DebugRuleRuntimeEventListener() );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有发出的事件都实现了</font></font><code>KieRuntimeEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口，</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">接口可用于检索</font></font><code>KnowlegeRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源自的事件</font><font style="vertical-align: inherit;">的实际</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieRuntimeEvent.png" alt="KieRuntimeEvent">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图20. KieRuntimeEvent</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前支持的事件是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MatchCreatedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MatchCancelledEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeforeMatchFiredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AfterMatchFiredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroupPushedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroupPoppedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectInsertEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectDeletedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectUpdatedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessCompletedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessNodeLeftEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessNodeTriggeredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessStartEvent</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_kieruntimelogger"><a class="anchor" href="index.html#_kieruntimelogger"></a><a class="link" href="index.html#_kieruntimelogger"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.5。</font><font style="vertical-align: inherit;">KieRuntimeLogger</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieRuntimeLogger使用Drools中的综合事件系统创建审计日志，该日志可用于记录应用程序的执行，以便以后使用Eclipse审计查看器等工具进行检查。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieLoggers.png" alt="KieLoggers">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图21. KieLoggers</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例20. FileLogger</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieRuntimeLogger logger =<font></font>
  KieServices.Factory.get().getLoggers().newFileLogger(ksession, <span class="hljs-string">"logdir/mylogfile"</span>);<font></font>
...<font></font>
logger.close();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_commands_and_the_commandexecutor"><a class="anchor" href="index.html#_commands_and_the_commandexecutor"></a><a class="link" href="index.html#_commands_and_the_commandexecutor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.6。</font><font style="vertical-align: inherit;">命令和CommandExecutor</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE拥有有状态或无状态会话的概念。</font><font style="vertical-align: inherit;">已经涵盖了使用标准KieRuntime的有状态会话，并且可以随着时间的推移迭代地进行。</font><font style="vertical-align: inherit;">Stateless是使用提供的数据集一次性执行KieRuntime。</font><font style="vertical-align: inherit;">它可能返回一些结果，会话在最后处理，禁止进一步的迭代交互。</font><font style="vertical-align: inherit;">您可以将无状态视为将函数调用视为具有可选返回结果的引擎。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其基础是</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态和无状态接口扩展的接口。</font><font style="vertical-align: inherit;">这返回一个</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/CommandExecutor.png" alt="CommandExecutor">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图22. CommandExecutor</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExecutionResults.png" alt="ExecutionResults">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图23. ExecutionResults</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许在这些会话要被执行的命令，唯一的区别在于StatelessKieSession执行</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在端设置会话之前。</font><font style="vertical-align: inherit;">可以使用</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">创建命令</font><font style="vertical-align: inherit;">.Javadocs使用提供的允许</font><font style="vertical-align: inherit;">命令</font><font style="vertical-align: inherit;">的完整列表</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setGlobal和getGlobal是两个与Drools和jBPM相关的命令。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下面设置全局调用setGlobal。</font><font style="vertical-align: inherit;">可选的boolean指示命令是否应该返回全局值作为的一部分</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果为true，则它使用与全局名称相同的名称。</font><font style="vertical-align: inherit;">如果需要替代名称，可以使用String代替布尔值。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例21.设置全局命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
ExecutionResults bresults =<font></font>
    ksession.execute( CommandFactory.newSetGlobal( <span class="hljs-string">"stilton"</span>, <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"stilton"</span> ), <span class="hljs-keyword">true</span>);<font></font>
Cheese stilton = bresults.getValue( <span class="hljs-string">"stilton"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许返回现有的全局。</font><font style="vertical-align: inherit;">第二个可选的String参数允许使用替代的返回名称。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例22.获取全局命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
ExecutionResults bresults =<font></font>
    ksession.execute( CommandFactory.getGlobal( <span class="hljs-string">"stilton"</span> );<font></font>
Cheese stilton = bresults.getValue( <span class="hljs-string">"stilton"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上所有示例都执行单个命令。</font><font style="vertical-align: inherit;">所述</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示的复合命令，从命令的列表创建。</font><font style="vertical-align: inherit;">它将遍历列表并依次执行每个命令。</font><font style="vertical-align: inherit;">这意味着您可以在一次</font></font><code>execute(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用中</font><font style="vertical-align: inherit;">插入一些对象，启动进程，调用fireAllRules并执行查询</font><font style="vertical-align: inherit;">，这非常强大。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessKieSession将</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在结束时自动</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，敏锐的读者可能已经注意到该</font></font><code>FireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，并想知道如何使用StatelessKieSession。</font></font><code>FireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">命令，使用它将禁止最后的自动执行; </font><font style="vertical-align: inherit;">想到将它用作一种手动覆盖功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批处理中具有out标识符集的任何命令都会将其结果添加到返回的</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例中。</font><font style="vertical-align: inherit;">让我们看一个简单的例子来看看它是如何工作的。</font><font style="vertical-align: inherit;">出于说明的目的，所呈现的示例包括来自Drools和jBPM的命令。</font><font style="vertical-align: inherit;">它们在Drool和jBPM特定部分中有更详细的介绍。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例23. BatchExecution命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
<font></font>
List cmds = <span class="hljs-keyword">new</span> ArrayList();<font></font>
cmds.add( CommandFactory.newInsertObject( <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"stilton"</span>, <span class="hljs-number">1</span>), <span class="hljs-string">"stilton"</span>) );<font></font>
cmds.add( CommandFactory.newStartProcess( <span class="hljs-string">"process cheeses"</span> ) );<font></font>
cmds.add( CommandFactory.newQuery( <span class="hljs-string">"cheeses"</span> ) );<font></font>
ExecutionResults bresults = ksession.execute( CommandFactory.newBatchExecution( cmds ) );<font></font>
Cheese stilton = ( Cheese ) bresults.getValue( <span class="hljs-string">"stilton"</span> );<font></font>
QueryResults qresults = ( QueryResults ) bresults.getValue( <span class="hljs-string">"cheeses"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，执行了多个命令，其中两个命令填充了</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">query命令默认使用与查询名称相同的标识符，但也可以映射到不同的标识符。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有命令都支持使用XStream进行XML和jSON编组，以及JAXB编组。</font><font style="vertical-align: inherit;">这在</font></font><a href="index.html#_commandsapisection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commands API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中介绍</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_statelesskiesession"><a class="anchor" href="index.html#_statelesskiesession"></a><a class="link" href="index.html#_statelesskiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.7。</font><font style="vertical-align: inherit;">StatelessKieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>StatelessKieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装的</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是扩展它。</font><font style="vertical-align: inherit;">其主要重点是决策服务类型方案。</font><font style="vertical-align: inherit;">它避免了打电话的需要</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无状态会话不支持迭代插入和</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java代码</font><font style="vertical-align: inherit;">调用方法</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">调用的行为</font></font><code>execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个单击方法，它将在内部实例化a </font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，添加所有用户数据并执行用户命令，调用</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后调用</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">虽然使用此类的主要方法是通过</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font></font><code>Command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">（子接口</font><font style="vertical-align: inherit;">）</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但提供了两种便捷方法，用于简单对象插入所需的全部内容。</font><font style="vertical-align: inherit;">该</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在自己的部分谈到细节。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/StatelessKieSession.png" alt="StatelessKieSession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图24. StatelessKieSession</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的简单示例显示了使用便捷API执行给定Java对象集合的无状态会话。</font><font style="vertical-align: inherit;">它将迭代集合，依次插入每个元素。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例24.使用Collection执行简单的StatelessKieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
ksession.execute( collection );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果这是作为单个命令完成的，它将如下：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例25.使用InsertElements命令执行简单的StatelessKieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.execute( CommandFactory.newInsertElements( collection ) );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你想插入集合本身，以及集合的各个元素，那么</font></font><code>CommandFactory.newInsert(collection)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就可以完成这项工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的方法</font></font><code>CommandFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建支持的命令，所有这些都可以使用XStream的和被整理</font></font><code>BatchExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>BatchExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供有关XML格式的详细信息，以及如何使用Drools Pipeline自动化编组</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">格式化</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><code>StatelessKieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持全局变量，以多种方式支持。</font><font style="vertical-align: inherit;">我们首先介绍非命令方式，因为命令的作用域是特定的执行调用。</font><font style="vertical-align: inherit;">Globals可以通过三种方式解决。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessKieSession方法</font></font><code>getGlobals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个Globals实例，该实例提供对会话的全局变量的访问。</font><font style="vertical-align: inherit;">这些是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行调用</font><font style="vertical-align: inherit;">共享的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">关于可变全局变量请谨慎，因为执行调用可以在不同的线程中同时执行。</font></font></p>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例26.会话作用域全局</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();
<span class="hljs-comment">// Set a global hbnSession, that can be used for DB interactions in the rules.</span>
ksession.setGlobal( <span class="hljs-string">"hbnSession"</span>, hibernateSession );
<span class="hljs-comment">// Execute while being able to resolve the "hbnSession" identifier.</span>
ksession.execute( collection );</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用委托是另一种全球解决方式。</font><font style="vertical-align: inherit;">为全局（with </font></font><code>setGlobal(String, Object)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）赋值会导致值存储在内部集合中，将标识符映射到值。</font><font style="vertical-align: inherit;">此内部集合中的标识符将优先于任何提供的委托。</font><font style="vertical-align: inherit;">仅当在此内部集合中找不到标识符时，才会使用全局委托（如果有）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决全局变量的第三种方法是使用执行范围的全局变量。</font><font style="vertical-align: inherit;">这里，</font></font><code>Command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置一个全局传递给</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面还提供通过“输出”参数导出数据的功能。</font><font style="vertical-align: inherit;">插入的事实，全局变量和查询结果都可以返回。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例27.输出标识符</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// Set up a list of commands</span>
List cmds = <span class="hljs-keyword">new</span> ArrayList();<font></font>
cmds.add( CommandFactory.newSetGlobal( <span class="hljs-string">"list1"</span>, <span class="hljs-keyword">new</span> ArrayList(), <span class="hljs-keyword">true</span> ) );<font></font>
cmds.add( CommandFactory.newInsert( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"jon"</span>, <span class="hljs-number">102</span> ), <span class="hljs-string">"person"</span> ) );<font></font>
cmds.add( CommandFactory.newQuery( <span class="hljs-string">"Get People"</span> <span class="hljs-string">"getPeople"</span> );<font></font>
<font></font>
<span class="hljs-comment">// Execute the list</span><font></font>
ExecutionResults results =<font></font>
  ksession.execute( CommandFactory.newBatchExecution( cmds ) );<font></font>
<font></font>
<span class="hljs-comment">// Retrieve the ArrayList</span>
results.getValue( <span class="hljs-string">"list1"</span> );
<span class="hljs-comment">// Retrieve the inserted Person fact</span>
results.getValue( <span class="hljs-string">"person"</span> );
<span class="hljs-comment">// Retrieve the query as a QueryResults instance.</span>
results.getValue( <span class="hljs-string">"Get People"</span> );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_marshalling"><a class="anchor" href="index.html#_marshalling"></a><a class="link" href="index.html#_marshalling"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.8。</font><font style="vertical-align: inherit;">编组</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>KieMarshallers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于编组和取消编组KieSessions。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KieMarshallers.png" alt="KieMarshallers">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图25. KieMarshallers</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>KieMarshallers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从中检索</font><font style="vertical-align: inherit;">一个实例</font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一个简单的例子如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例28.简单的Marshaller例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// ksession is the KieSession</span>
<span class="hljs-comment">// kbase is the KieBase</span>
ByteArrayOutputStream baos = <span class="hljs-keyword">new</span> ByteArrayOutputStream();<font></font>
Marshaller marshaller = KieServices.Factory.get().getMarshallers().newMarshaller( kbase );<font></font>
marshaller.marshall( baos, ksession );<font></font>
baos.close();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，通过编组，在处理引用的用户数据时，您将需要更大的灵活性。</font><font style="vertical-align: inherit;">要实现这一点，请使用</font></font><code>ObjectMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面。</font><font style="vertical-align: inherit;">提供了两种实现，但用户可以实现自己的实现。</font><font style="vertical-align: inherit;">提供的两个策略是</font></font><code>IdentityMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>SerializeMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>SerializeMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是默认值，如上例所示，它只是调用</font><font style="vertical-align: inherit;">用户实例上</font><font style="vertical-align: inherit;">的</font></font><code>Serializable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>Externalizable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font></font><code>IdentityMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个用户对象创建一个整数id，并将它们存储在Map中，同时将id写入流中。</font><font style="vertical-align: inherit;">解组时，它会访问</font></font><code>IdentityMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地图以检索实例。</font><font style="vertical-align: inherit;">这意味着，如果你使用</font></font><code>IdentityMarshallingStrategy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它对Marshaller实例的生命是有状态的，并将创建id并保持对它试图编组的所有对象的引用。</font><font style="vertical-align: inherit;">以下是使用身份编组策略的代码。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例29. IdentityMarshallingStrategy</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ByteArrayOutputStream baos = <span class="hljs-keyword">new</span> ByteArrayOutputStream();<font></font>
KieMarshallers kMarshallers = KieServices.Factory.get().getMarshallers()<font></font>
ObjectMarshallingStrategy oms = kMarshallers.newIdentityMarshallingStrategy()<font></font>
Marshaller marshaller =<font></font>
        kMarshallers.newMarshaller( kbase, <span class="hljs-keyword">new</span> ObjectMarshallingStrategy[]{ oms } );<font></font>
marshaller.marshall( baos, ksession );<font></font>
baos.close();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数情况下，单一策略是不够的。</font><font style="vertical-align: inherit;">为了增加灵活性，</font></font><code>ObjectMarshallingStrategyAcceptor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用界面。</font><font style="vertical-align: inherit;">这个Marshaller有一系列策略，在阅读或编写用户对象时，它会迭代策略，询问他们是否承担编组用户对象的责任。</font><font style="vertical-align: inherit;">提供的实现之一是</font></font><code>ClassFilterAcceptor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这允许字符串和通配符用于匹配类名。</font><font style="vertical-align: inherit;">默认值为“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”，因此在上面的示例中使用了Identity Marshalling Strategy，它具有默认的“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”接受器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假设我们要序列化除一个给定包之外的所有类，我们将使用身份查找，我们可以执行以下操作：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例30.具有Acceptor的IdentityMarshallingStrategy</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ByteArrayOutputStream baos = <span class="hljs-keyword">new</span> ByteArrayOutputStream();<font></font>
KieMarshallers kMarshallers = KieServices.Factory.get().getMarshallers()<font></font>
ObjectMarshallingStrategyAcceptor identityAcceptor =<font></font>
        kMarshallers.newClassFilterAcceptor( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"org.domain.pkg1.*"</span> } );<font></font>
ObjectMarshallingStrategy identityStrategy =<font></font>
        kMarshallers.newIdentityMarshallingStrategy( identityAcceptor );<font></font>
ObjectMarshallingStrategy sms = kMarshallers.newSerializeMarshallingStrategy();<font></font>
Marshaller marshaller =<font></font>
        kMarshallers.newMarshaller( kbase,<font></font>
                                    <span class="hljs-keyword">new</span> ObjectMarshallingStrategy[]{ identityStrategy, sms } );<font></font>
marshaller.marshall( baos, ksession );<font></font>
baos.close();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，验收检查顺序是所提供元素的自然顺序。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另请注意，如果您使用预定匹配（即某些规则使用计时器或日历），则只有在使用它之前，您才能将KieSession配置为使用可跟踪计时器作业工厂管理器，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例31.配置可跟踪计时器作业工厂管理器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration ksconf = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
ksconf.setOption(TimerJobFactoryOption.get(<span class="hljs-string">"trackable"</span>));<font></font>
KSession ksession = kbase.newKieSession(ksconf, <span class="hljs-keyword">null</span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_persistence_and_transactions"><a class="anchor" href="index.html#_persistence_and_transactions"></a><a class="link" href="index.html#_persistence_and_transactions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4.9。</font><font style="vertical-align: inherit;">持久性和交易</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Drools可以实现Java Persistence API（JPA）的长期开箱即用持久性。</font><font style="vertical-align: inherit;">必须安装一些Java Transaction API（JTA）实现。</font><font style="vertical-align: inherit;">出于开发目的，建议使用Bitronix事务管理器，因为它易于设置和嵌入式工作，但对于生产用途，建议使用JBoss事务。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例32.使用事务的简单示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
Environment env = kieServices.newEnvironment();<font></font>
env.set( EnvironmentName.ENTITY_MANAGER_FACTORY,<font></font>
         Persistence.createEntityManagerFactory( <span class="hljs-string">"emf-name"</span> ) );<font></font>
env.set( EnvironmentName.TRANSACTION_MANAGER,<font></font>
         TransactionManagerServices.getTransactionManager() );<font></font>
<font></font>
<span class="hljs-comment">// KieSessionConfiguration may be null, and a default will be used</span><font></font>
KieSession ksession =<font></font>
        kieServices.getStoreServices().newKieSession( kbase, <span class="hljs-keyword">null</span>, env );
<span class="hljs-keyword">int</span> sessionId = ksession.getId();<font></font>
<font></font>
UserTransaction ut =<font></font>
  (UserTransaction) <span class="hljs-keyword">new</span> InitialContext().lookup( <span class="hljs-string">"java:comp/UserTransaction"</span> );<font></font>
ut.begin();<font></font>
ksession.insert( data1 );<font></font>
ksession.insert( data2 );<font></font>
ksession.startProcess( <span class="hljs-string">"process1"</span> );<font></font>
ut.commit();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用JPA，环境必须与这两个被设置</font></font><code>EntityManagerFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>TransactionManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果发生回滚，ksession状态也会回滚，因此可以在回滚后继续使用它。</font><font style="vertical-align: inherit;">要加载以前保留的KieSession，您需要id，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例33.加载KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession ksession =<font></font>
        kieServices.getStoreServices().loadKieSession( sessionId, kbase, <span class="hljs-keyword">null</span>, env );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要启用持久性，必须将多个类添加到persistence.xml中，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例34.配置JPA</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">persistence-unit</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.drools.persistence.jpa"</span> <span class="hljs-attribute">transaction-type</span>=<span class="hljs-value">"JTA"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">provider</span>&gt;</span>org.hibernate.ejb.HibernatePersistence<span class="hljs-tag">&lt;/<span class="hljs-title">provider</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">jta-data-source</span>&gt;</span>jdbc/BitronixJTADataSource<span class="hljs-tag">&lt;/<span class="hljs-title">jta-data-source</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">class</span>&gt;</span>org.drools.persistence.info.SessionInfo<span class="hljs-tag">&lt;/<span class="hljs-title">class</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">class</span>&gt;</span>org.drools.persistence.info.WorkItemInfo<span class="hljs-tag">&lt;/<span class="hljs-title">class</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">properties</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"hibernate.dialect"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.hibernate.dialect.H2Dialect"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"hibernate.max_fetch_depth"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"3"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"hibernate.hbm2ddl.auto"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"update"</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"hibernate.show_sql"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"hibernate.transaction.manager_lookup_class"</span>
                      <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.hibernate.transaction.BTMTransactionManagerLookup"</span> /&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">properties</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">persistence-unit</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须首先配置jdbc JTA数据源。</font><font style="vertical-align: inherit;">Bitronix提供了许多方法，有关详细信息，请参阅其文档。</font><font style="vertical-align: inherit;">为了快速入门，这是程序化方法：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例35.配置JTA DataSource</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PoolingDataSource ds = <span class="hljs-keyword">new</span> PoolingDataSource();<font></font>
ds.setUniqueName( <span class="hljs-string">"jdbc/BitronixJTADataSource"</span> );<font></font>
ds.setClassName( <span class="hljs-string">"org.h2.jdbcx.JdbcDataSource"</span> );<font></font>
ds.setMaxPoolSize( <span class="hljs-number">3</span> );<font></font>
ds.setAllowLocalTransactions( <span class="hljs-keyword">true</span> );<font></font>
ds.getDriverProperties().put( <span class="hljs-string">"user"</span>, <span class="hljs-string">"sa"</span> );<font></font>
ds.getDriverProperties().put( <span class="hljs-string">"password"</span>, <span class="hljs-string">"sasa"</span> );<font></font>
ds.getDriverProperties().put( <span class="hljs-string">"URL"</span>, <span class="hljs-string">"jdbc:h2:mem:mydb"</span> );<font></font>
ds.init();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bitronix还提供简单的嵌入式JNDI服务，非常适合测试。</font><font style="vertical-align: inherit;">要使用它，请将jndi.properties文件添加到META-INF文件夹并向其添加以下行：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例36. JNDI属性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">java.naming.factory.initial=bitronix.tm.jndi.BitronixInitialContextFactory</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiedeploycheatsheets"><a class="anchor" href="index.html#_kiedeploycheatsheets"></a><a class="link" href="index.html#_kiedeploycheatsheets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.5。</font><font style="vertical-align: inherit;">安装和部署备忘单</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/cheatsheet1.png" alt="cheatsheet1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图26.安装概述</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/cheatsheet2.png" alt="cheatsheet2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图27.部署概述</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_kieexamplessection"><a class="anchor" href="index.html#_kieexamplessection"></a><a class="link" href="index.html#_kieexamplessection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6。</font><font style="vertical-align: inherit;">构建，部署和利用示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">学习新构建系统的最佳方法是通过示例。</font><font style="vertical-align: inherit;">源项目“drools-examples-api”包含许多示例，可以在GitHub中找到：</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/kiegroup/drools/tree/6.0.x/drools-examples-api" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/kiegroup/drools/tree/6.0.x/drools-examples-api</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面描述了每个示例，顺序从最简单的（大多数选项是默认的）开始，并逐步用于更复杂的用例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面显示的部署用例都涉及</font></font><code>mvn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Maven文档中详细介绍了在Maven中远程部署JAR。</font><font style="vertical-align: inherit;">Utilize是指加载资源并提供对KIE运行时的访问的初始行为。</font><font style="vertical-align: inherit;">Run表示与那些运行时交互的行为。</font></font></p>
</div>
<div class="sect4">
<h5 id="_default_kiesession"><a class="anchor" href="index.html#_default_kiesession"></a><a class="link" href="index.html#_default_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.1。</font><font style="vertical-align: inherit;">默认KieSession</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：default-kesession。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要：在类路径上清空kmodule.xml KieModule，其中包含单个默认KieBase中的所有资源。</font><font style="vertical-align: inherit;">该示例显示了从类路径中检索默认KieSession。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空的kmodule.xml将生成一个KieBase，其中包含在资源路径下找到的所有文件，无论是DRL，BPMN2，XLS等。单个KieBase是默认值，还包括一个默认的KieSession。</font><font style="vertical-align: inherit;">默认意味着可以在不知道名称的情况下创建它们。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例37.作者 -  kmodule.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例38.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ks.getKieClasspathContainer（）返回包含部署到环境类路径上的KieBases的KieContainer。</font><font style="vertical-align: inherit;">kContainer.newKieSession（）创建默认的KieSession。</font><font style="vertical-align: inherit;">请注意，您不再需要查找KieBase，以便创建KieSession。</font><font style="vertical-align: inherit;">KieSession知道它与哪个KieBase相关联，并使用它，在这种情况下是默认的KieBase。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例39.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession();<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_named_kiesession"><a class="anchor" href="index.html#_named_kiesession"></a><a class="link" href="index.html#_named_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.2。</font><font style="vertical-align: inherit;">命名为KieSession</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：命名为kiesession。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：kmodule.xml有一个名为KieBase，一个名为KieSession。</font><font style="vertical-align: inherit;">这些示例显示了从类路径中检索命名的KieSession。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml将生成一个名为KieBase的单个“kbase1”，其中包含在资源路径下找到的所有文件，无论是DRL，BPMN2，XLS等.KieSession“ksession1”与该KieBase相关联，可以通过名称创建。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例40.作者 -  kmodule.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例41.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ks.getKieClasspathContainer（）返回包含部署到环境类路径上的KieBases的KieContainer。</font><font style="vertical-align: inherit;">这次KieSession使用名称'ksession1'。</font><font style="vertical-align: inherit;">您不需要首先查找KieBase，因为它知道哪个KieBase'ksession1'与之关联。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例42.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kiebase_inheritence"><a class="anchor" href="index.html#_kiebase_inheritence"></a><a class="link" href="index.html#_kiebase_inheritence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.3。</font><font style="vertical-align: inherit;">KieBase继承</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：kiebase-inclusion。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：'kmodule.xml'演示了一个KieBase可以包含来自另一个KieBase的资源，来自另一个KieModule。</font><font style="vertical-align: inherit;">在这种情况下，它从'name-kiesession'示例继承了命名的KieBase。</font><font style="vertical-align: inherit;">包含的KieBase可以来自当前的KieModule或pom.xml依赖项列表中的任何其他KieModule。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml将生成一个名为KieBase的单个“kbase2”，其中包含在资源路径下找到的所有文件，无论是DRL，BPMN2，XLS等。此外，它还包括从KieBase'kbase1'中找到的所有资源，由于使用'includes'属性。</font><font style="vertical-align: inherit;">KieSession'ksession2'与该KieBase相关联，可以通过名称创建。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子43.作者 -  kmodule.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase2"</span> <span class="hljs-attribute">includes</span>=<span class="hljs-value">"kbase1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例要求先前的示例'named-kiesession'构建并首先安装到本地Maven存储库。</font><font style="vertical-align: inherit;">安装后，可以使用标准的Maven &lt;dependencies&gt;元素将其作为依赖项包含在内。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例44.作者 -  pom.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">project</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">modelVersion</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-examples-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>6.0.0/version&gt;
  <span class="hljs-tag">&lt;/<span class="hljs-title">parent</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kiebase-inclusion<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>Drools API examples - KieBase Inclusion<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>named-kiesession<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>6.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">project</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦构建并安装了“named-kiesession”，就可以正常构建和安装此示例。</font><font style="vertical-align: inherit;">再次安装的行为，将迫使单元测试运行，演示用例。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例45.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ks.getKieClasspathContainer（）返回包含部署到环境类路径上的KieBases的KieContainer。</font><font style="vertical-align: inherit;">这次KieSession使用名称'ksession2'。</font><font style="vertical-align: inherit;">您不需要首先查找KieBase，因为它知道哪个KieBase'ksession1'与之关联。</font><font style="vertical-align: inherit;">注意这次触发了两条规则，表明KieBase'kbase2'已经包含来自依赖关系KieBase'kbase1'的资源。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例46.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession2"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();<font></font>
<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Open the pod bay doors, HAL."</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_multiple_kiebases"><a class="anchor" href="index.html#_multiple_kiebases"></a><a class="link" href="index.html#_multiple_kiebases"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.4。</font><font style="vertical-align: inherit;">多个KieBases</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：'多个kbases。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：证明'kmodule.xml'可以包含任意数量的KieBase或KieSession声明。</font><font style="vertical-align: inherit;">引入'packages'属性以选择要包含在KieBase中的资源的文件夹。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml生成6个不同的命名KieBases。</font><font style="vertical-align: inherit;">'kbase1'包含来自KieModule的所有资源。</font><font style="vertical-align: inherit;">其他KieBases通过'packages'属性包含来自其他所选文件夹的资源。</font><font style="vertical-align: inherit;">请注意使用通配符'*'来选择此包及其下的所有包。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例47.作者 -  kmodule.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase2"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.some.pkg"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase3"</span> <span class="hljs-attribute">includes</span>=<span class="hljs-value">"kbase2"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.some.pkg2"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession3"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase4"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.some.pkg, org.other.pkg"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession4"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase5"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.*"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase6"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.some.*"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession6"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例48.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面仅包含示例的一部分，因为每个KieSession都有一个测试方法，但每个都是另一个的重复，具有不同的列表期望。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例49.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testSimpleKieBase</span><span class="hljs-params">()</span> </span>{<font></font>
    List&lt;Integer&gt; list = useKieSession(<span class="hljs-string">"ksession1"</span>);
    <span class="hljs-comment">// no packages imported means import everything</span>
    assertEquals(<span class="hljs-number">4</span>, list.size());<font></font>
    assertTrue( list.containsAll( asList(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) ) );<font></font>
}<font></font>
<font></font>
<span class="hljs-comment">//.. other tests for ksession2 to ksession6 here</span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">private</span> List&lt;Integer&gt; <span class="hljs-title">useKieSession</span><span class="hljs-params">(String name)</span> </span>{<font></font>
    KieServices ks = KieServices.Factory.get();<font></font>
    KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
    KieSession kSession = kContainer.newKieSession(name);<font></font>
<font></font>
    List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;Integer&gt;();<font></font>
    kSession.setGlobal(<span class="hljs-string">"list"</span>, list);<font></font>
    kSession.insert(<span class="hljs-number">1</span>);<font></font>
    kSession.fireAllRules();<font></font>
<font></font>
    <span class="hljs-keyword">return</span> list;<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kiecontainer_from_kierepository"><a class="anchor" href="index.html#_kiecontainer_from_kierepository"></a><a class="link" href="index.html#_kiecontainer_from_kierepository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.5。</font><font style="vertical-align: inherit;">来自KieRepository的KieContainer</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：kcontainer-from-repository</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：该项目不包含kmodule.xml，pom.xml也不包含其他KieModule的依赖项。</font><font style="vertical-align: inherit;">相反，Java代码演示了从Maven存储库加载动态KieModule。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pom.xml必须包含kie-ci作为depdency，以确保Maven在运行时可用。</font><font style="vertical-align: inherit;">由于这使用了Maven，您还可以使用标准的Maven settings.xml文件。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例50. Author-pom.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">project</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">modelVersion</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-examples-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>6.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">parent</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kiecontainer-from-kierepo<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>Drools API examples - KieContainer from KieRepo<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-ci<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">project</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例51.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的示例中，使用了类路径KieContainer。</font><font style="vertical-align: inherit;">此示例创建一个由ReleaseId指定的动态KieContainer。</font><font style="vertical-align: inherit;">ReleaseId对组ID，工件ID和版本使用Maven约定。</font><font style="vertical-align: inherit;">它还服从LATEST和SNAPSHOT版本。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例52.利用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
<font></font>
<span class="hljs-comment">// Install example1 in the local Maven repo before to do this</span>
KieContainer kContainer = ks.newKieContainer(ks.newReleaseId(<span class="hljs-string">"org.drools"</span>, <span class="hljs-string">"named-kiesession"</span>, <span class="hljs-string">"6.0.0-SNAPSHOT"</span>));<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
Object msg1 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>);<font></font>
kSession.insert(msg1);<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_default_kiesession_from_file"><a class="anchor" href="index.html#_default_kiesession_from_file"></a><a class="link" href="index.html#_default_kiesession_from_file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.6。</font><font style="vertical-align: inherit;">文件中的默认KieSession</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：default-kiesession-from-file</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：还可以从任何资源位置加载动态KieModule。</font><font style="vertical-align: inherit;">加载的KieModule提供默认的KieBase和KieSession定义。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有kmodue.xml文件。</font><font style="vertical-align: inherit;">必须首先构建项目'default-kiesession'，以便在目标文件夹中生成的JAR可以作为文件引用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例53.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何KieModule都可以从Resource位置加载并添加到KieRepository。</font><font style="vertical-align: inherit;">一旦部署在KieRepository中，就可以通过其ReleaseId解析它。</font><font style="vertical-align: inherit;">请注意，这里不需要Maven或kie-ci。</font><font style="vertical-align: inherit;">它不会设置传递依赖父类加载器。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例54.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieRepository kr = ks.getRepository();<font></font>
<font></font>
KieModule kModule = kr.addKieModule(ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"default-kiesession"</span>)));<font></font>
<font></font>
KieContainer kContainer = ks.newKieContainer(kModule.getReleaseId());<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession();<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
Object msg1 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>);<font></font>
kSession.insert(msg1);<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_named_kiesession_from_file"><a class="anchor" href="index.html#_named_kiesession_from_file"></a><a class="link" href="index.html#_named_kiesession_from_file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.7。</font><font style="vertical-align: inherit;">从File命名为KieSession</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：命名为kiesession-from-file</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：还可以从任何资源位置加载动态KieModule。</font><font style="vertical-align: inherit;">加载的KieModule提供了命名的KieBase和KieSession定义。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有kmodue.xml文件。</font><font style="vertical-align: inherit;">必须首先构建项目'named-kiesession'，以便在目标文件夹中生成的JAR可以作为文件引用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例55.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何KieModule都可以从Resource位置加载并添加到KieRepository。</font><font style="vertical-align: inherit;">进入KieRepository后，可以通过其ReleaseId解析它。</font><font style="vertical-align: inherit;">请注意，这里不需要Maven或kie-ci。</font><font style="vertical-align: inherit;">它不会设置传递依赖父类加载器。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例56.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieRepository kr = ks.getRepository();<font></font>
<font></font>
KieModule kModule = kr.addKieModule(ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"named-kiesession"</span>)));<font></font>
<font></font>
KieContainer kContainer = ks.newKieContainer(kModule.getReleaseId());<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
Object msg1 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>);<font></font>
kSession.insert(msg1);<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kiemodule_with_dependent_kiemodule"><a class="anchor" href="index.html#_kiemodule_with_dependent_kiemodule"></a><a class="link" href="index.html#_kiemodule_with_dependent_kiemodule"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.8。</font><font style="vertical-align: inherit;">KieModule与Dependent KieModule</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：kie-module-form-multiple-files</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：以编程方式提供依赖的KieModule列表，而不使用Maven来解决任何问题。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有kmodue.xml文件。</font><font style="vertical-align: inherit;">必须首先构建项目'named-kiesession'和'kiebase-include'，以便在目标文件夹中生成的JAR可以作为Files引用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例57.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建两个资源。</font><font style="vertical-align: inherit;">一个用于主要的KieModule'exRes1'，另一个用于依赖'exRes2'。</font><font style="vertical-align: inherit;">即使kie-ci不存在，因此Maven无法解析依赖关系，这也显示了如何为vararg手动指定依赖的KieModule。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例58.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieRepository kr = ks.getRepository();<font></font>
<font></font>
Resource ex1Res = ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"kiebase-inclusion"</span>));<font></font>
Resource ex2Res = ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"named-kiesession"</span>));<font></font>
<font></font>
KieModule kModule = kr.addKieModule(ex1Res, ex2Res);<font></font>
KieContainer kContainer = ks.newKieContainer(kModule.getReleaseId());<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession2"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
Object msg1 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>);<font></font>
kSession.insert(msg1);<font></font>
kSession.fireAllRules();<font></font>
<font></font>
Object msg2 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Open the pod bay doors, HAL."</span>);<font></font>
kSession.insert(msg2);<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_programmaticaly_build_a_simple_kiemodule_with_defaults"><a class="anchor" href="index.html#_programmaticaly_build_a_simple_kiemodule_with_defaults"></a><a class="link" href="index.html#_programmaticaly_build_a_simple_kiemodule_with_defaults"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.9。</font><font style="vertical-align: inherit;">Programmaticaly构建一个带默认值的简单KieModule</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：kiemoduelmodel-example</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：Programmaticaly只从一个文件中创建了一个KieModule。</font><font style="vertical-align: inherit;">POM和模型都是默认的。</font><font style="vertical-align: inherit;">这是最快的开箱即用方法，但不应添加到Maven存储库中。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例59.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这以编程方式构建了一个KieModule。</font><font style="vertical-align: inherit;">它填充代表ReleaseId和kmodule.xml的模型，并添加相关资源。</font><font style="vertical-align: inherit;">从ReleaseId生成pom.xml。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例60.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieRepository kr = ks.getRepository();<font></font>
KieFileSystem kfs = ks.newKieFileSystem();<font></font>
<font></font>
kfs.write(<span class="hljs-string">"src/main/resources/org/kie/example5/HAL5.drl"</span>, getRule());<font></font>
<font></font>
KieBuilder kb = ks.newKieBuilder(kfs);<font></font>
<font></font>
kb.buildAll(); <span class="hljs-comment">// kieModule is automatically deployed to KieRepository if successfully built.</span>
<span class="hljs-keyword">if</span> (kb.getResults().hasMessages(Level.ERROR)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">"Build Errors:\n"</span> + kb.getResults().toString());<font></font>
}<font></font>
<font></font>
KieContainer kContainer = ks.newKieContainer(kr.getDefaultReleaseId());<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession();<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_programmaticaly_build_a_kiemodule_using_meta_models"><a class="anchor" href="index.html#_programmaticaly_build_a_kiemodule_using_meta_models"></a><a class="link" href="index.html#_programmaticaly_build_a_kiemodule_using_meta_models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.6.10。</font><font style="vertical-align: inherit;">Programmaticaly使用Meta模型构建KieModule</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目：kiemoduelmodel-example</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简介：Programmaticaly通过创建其kmodule.xml元模型资源来构建KieModule。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例61.构建和安装 -  Maven</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> install</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这以编程方式构建了一个KieModule。</font><font style="vertical-align: inherit;">它填充代表ReleaseId和kmodule.xml的模型，并添加相关资源。</font><font style="vertical-align: inherit;">从ReleaseId生成pom.xml。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例62.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieFileSystem kfs = ks.newKieFileSystem();<font></font>
<font></font>
Resource ex1Res = ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"named-kiesession"</span>));<font></font>
Resource ex2Res = ks.getResources().newFileSystemResource(getFile(<span class="hljs-string">"kiebase-inclusion"</span>));<font></font>
<font></font>
ReleaseId rid = ks.newReleaseId(<span class="hljs-string">"org.drools"</span>, <span class="hljs-string">"kiemodulemodel-example"</span>, <span class="hljs-string">"6.0.0-SNAPSHOT"</span>);<font></font>
kfs.generateAndWritePomXML(rid);<font></font>
<font></font>
KieModuleModel kModuleModel = ks.newKieModuleModel();<font></font>
kModuleModel.newKieBaseModel(<span class="hljs-string">"kiemodulemodel"</span>)<font></font>
            .addInclude(<span class="hljs-string">"kiebase1"</span>)<font></font>
            .addInclude(<span class="hljs-string">"kiebase2"</span>)<font></font>
            .newKieSessionModel(<span class="hljs-string">"ksession6"</span>);<font></font>
<font></font>
kfs.writeKModuleXML(kModuleModel.toXML());<font></font>
kfs.write(<span class="hljs-string">"src/main/resources/kiemodulemodel/HAL6.drl"</span>, getRule());<font></font>
<font></font>
KieBuilder kb = ks.newKieBuilder(kfs);<font></font>
kb.setDependencies(ex1Res, ex2Res);<font></font>
kb.buildAll(); <span class="hljs-comment">// kieModule is automatically deployed to KieRepository if successfully built.</span>
<span class="hljs-keyword">if</span> (kb.getResults().hasMessages(Level.ERROR)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">"Build Errors:\n"</span> + kb.getResults().toString());<font></font>
}<font></font>
<font></font>
KieContainer kContainer = ks.newKieContainer(rid);<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession6"</span>);<font></font>
kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
<font></font>
Object msg1 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>);<font></font>
kSession.insert(msg1);<font></font>
kSession.fireAllRules();<font></font>
<font></font>
Object msg2 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Open the pod bay doors, HAL."</span>);<font></font>
kSession.insert(msg2);<font></font>
kSession.fireAllRules();<font></font>
<font></font>
Object msg3 = createMessage(kContainer, <span class="hljs-string">"Dave"</span>, <span class="hljs-string">"What's the problem?"</span>);<font></font>
kSession.insert(msg3);<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kiesecuritysection"><a class="anchor" href="index.html#_kiesecuritysection"></a><a class="link" href="index.html#_kiesecuritysection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3。</font><font style="vertical-align: inherit;">安全</font></font></a></h3>
<div class="sect3">
<h4 id="_securitymanager"><a class="anchor" href="index.html#_securitymanager"></a><a class="link" href="index.html#_securitymanager"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3.1。</font><font style="vertical-align: inherit;">安全经理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE引擎是一个用于建模和执行业务行为的平台，使用大量的声明性抽象和隐喻，如规则，流程，决策表等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很多时候，这些隐喻的创作是由第三方团体完成的，无论是同一家公司内部的不同团体，合作伙伴公司的团体，还是互联网上的匿名第三方。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则和流程旨在执行任意代码以完成其工作，但在这种情况下，可能需要限制他们可以执行的操作。</font><font style="vertical-align: inherit;">例如，不太可能允许规则创建类加载器（什么可以打开系统进行攻击），当然不应该允许它进行调用</font></font><code>System.exit()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java平台提供了一个非常全面且定义明确的安全框架，允许用户定义系统可以执行的操作的策略。</font><font style="vertical-align: inherit;">KIE平台利用该框架，并允许应用程序开发人员定义要应用于用户提供的代码的任何执行的特定策略，无论是在规则，流程，工作项处理程序等中。</font></font></p>
</div>
<div class="sect4">
<h5 id="_howtodefinekiepolicy"><a class="anchor" href="index.html#_howtodefinekiepolicy"></a><a class="link" href="index.html#_howtodefinekiepolicy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3.1.1。</font><font style="vertical-align: inherit;">如何定义KIE政策</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则和流程可以使用非常有限的权限运行，但引擎本身需要执行许多复杂的操作才能工作。</font><font style="vertical-align: inherit;">例如：它需要创建类加载器，读取系统属性，访问文件系统等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，一旦安装了安全管理器，它将根据定义的策略对JVM中执行的所有代码应用限制。</font><font style="vertical-align: inherit;">因此，KIE允许用户定义两个不同的策略文件：一个用于引擎本身，另一个用于部署到引擎中并由引擎执行的资产。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置环境的一个简单方法是为引擎本身提供一个非常宽松的策略，同时为规则和流程提供受限制的策略。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略文件遵循Java文档中描述的标准策略文件语法。</font><font style="vertical-align: inherit;">有关详细信息，请参阅：</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html#FileSyntax" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html#FileSyntax</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎的许可策略文件可能如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例63.示例engine.policy文件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">grant</span> {
    <span class="hljs-title">permission</span> java.security.AllPermission;<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的示例安全策略可以是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例64.示例rules.policy文件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">grant</span> {
    <span class="hljs-title">permission</span> java.util.PropertyPermission <span class="hljs-string">"*"</span>, <span class="hljs-string">"read"</span>;
    <span class="hljs-title">permission</span> java.lang.RuntimePermission <span class="hljs-string">"accessDeclaredMembers"</span>;<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，根据规则和进程应该执行的操作，可能需要授予更多权限，例如访问文件系统，数据库等中的文件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使用这些策略文件，所有必要的是使用这些文件作为JVM的参数来执行应用程序。</font><font style="vertical-align: inherit;">需要三个参数：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表3.参数</font></font></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">含义</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Djava.security.manager</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用安全管理器</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Djava.security.policy = &lt;jvm_policy_file&gt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义要应用于整个应用程序的全局策略文件，包括引擎</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Dkie.security.policy = &lt;kie_policy_file&gt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义要应用于规则和流程的策略文件</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="paragraph">
<p><code>java -Djava.security.manager -Djava.security.policy=global.policy -Dkie.security.policy=rules.policy
        foo.bar.MyApp</code></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在容器内执行引擎时，请使用容器的文档来了解如何配置安全管理器以及如何定义全局安全策略。</font><font style="vertical-align: inherit;">如上所述定义kie安全策略并设置</font></font><code>kie.security.policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性以配置引擎使用它。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，除非配置了安全管理器，否则</font></font><code>kie.security.policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将被忽略。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全管理器在JVM中具有高性能影响。</font><font style="vertical-align: inherit;">强烈建议不要使用具有严格性能要求的应用程序使用安全管理器。</font><font style="vertical-align: inherit;">另一种方法是使用其他安全过程，例如在测试和部署之前审核规则/流程，以防止恶意代码部署到环境中。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<h1 id="_drools_runtime_and_language" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools运行时和语言</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools是一个强大的混合推理系统。</font></font></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hybridreasoningchapter"><a class="anchor" href="index.html#_hybridreasoningchapter"></a><a class="link" href="index.html#_hybridreasoningchapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.混合推理</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_artificial_intelligence"><a class="anchor" href="index.html#_artificial_intelligence"></a><a class="link" href="index.html#_artificial_intelligence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">人工智能</font></font></a></h3>
<div class="sect3">
<h4 id="_a_little_history"><a class="anchor" href="index.html#_a_little_history"></a><a class="link" href="index.html#_a_little_history"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.1。</font><font style="vertical-align: inherit;">一点点历史</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在过去的几十年里，</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人工智能</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 （AI）成为一个不受欢迎的术语，有着名的</font></font><a href="http://en.wikipedia.org/wiki/AI_winter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“AI Winter”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">寻求资金的科学家和工程师大肆宣传，这些资金从未达到预期，导致许多失败的项目。</font></font><a href="http://en.wikipedia.org/wiki/Thinking_Machines_Corporation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thinking Machines Corporation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="http://en.wikipedia.org/wiki/Fifth-generation_computer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第五代计算机</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（5GP）项目可能是当时最好的问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thinking Machines Corporation是1990年领先的人工智能公司之一，销售额近6500万美元。</font><font style="vertical-align: inherit;">以下是其手册中的引用：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“有一天，我们将建立一个思维机器。</font><font style="vertical-align: inherit;">它将是一台真正的智能机器。</font><font style="vertical-align: inherit;">一个可以看，听，说的人。</font><font style="vertical-align: inherit;">一台以我们为荣的机器。“</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而5年后，它根据第11章申请破产保护。网站inc.com有一篇引人入胜的文章，名为</font></font><a href="http://www.inc.com/magazine/19950915/2622.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“思维机器的兴衰”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这篇文章涵盖了行业的发展以及与Thinking Machines和</font></font><a href="http://en.wikipedia.org/wiki/DARPA"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DARPA</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之间的舒适关系如何</font><font style="vertical-align: inherit;">使市场过热，直至崩溃。</font><font style="vertical-align: inherit;">它解释了商业如何以及为何从人工智能转向更实用的数字运算超级计算机。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第五代计算机项目是日本一个耗资4亿美元建造下一代计算机的项目。</font><font style="vertical-align: inherit;">阀门（或管）是第一代，晶体管是第二代，集成电路是第三代，最后是微处理器是第四代。</font><font style="vertical-align: inherit;">第五个旨在成为一个能够有效人工智能的机器。</font><font style="vertical-align: inherit;">这个项目引发了与英国和美国的“武器”竞赛，这引起了大部分人工智能泡沫。</font><font style="vertical-align: inherit;">5GP将通过</font><em class="term"><font style="vertical-align: inherit;">Prolog</font></em><font style="vertical-align: inherit;">提供大量的多CPU并行处理硬件以及强大的知识表示和推理软件</font></font><em class="term"><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
; </font><font style="vertical-align: inherit;">一种[术语] _专家系统_。</font><font style="vertical-align: inherit;">到1992年，该项目被视为失败并被取消。</font><font style="vertical-align: inherit;">它是Prolog最大和最明显的商业投资，许多失败都是针对尝试在多CPU硬件上同时运行基于逻辑的编程语言并产生有效结果的问题。</font><font style="vertical-align: inherit;">有些人认为5GP项目的失败玷污了Prolog并将其降级为学术界，请参阅</font><font style="vertical-align: inherit;">John C. Dvorak </font><font style="vertical-align: inherit;">撰写的</font></font><a href="http://www.dvorak.org/blog/whatever-happened-to-prolog/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“无论Prolog发生什么”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，虽然研究经费枯竭，人工智能这个词的使用越来越少，但在特定的学科名称下，许多绿芽被种植并继续更加安静：</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">认知系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器学习</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">智能系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，[术语] _知识表示和推理_。</font><font style="vertical-align: inherit;">这些分支随后进入商业系统，例如</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务规则管理系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 （BRMS）市场</font><font style="vertical-align: inherit;">中的专家系统</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><em class="term"><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
基于系统的</font><em class="term"><font style="vertical-align: inherit;">强制</font></em><font style="vertical-align: inherit;">语言，C，C ++，Java和C＃/ .Net等语言在过去20年中占据主导地位，这得益于语言的实用性和在商用硬件上以良好性能运行的能力。</font><font style="vertical-align: inherit;">然而，许多人认为，在人工智能领域正在进行复兴，这得益于硬件能力和人工智能研究的进步。</font><font style="vertical-align: inherit;">2005年，希瑟·海恩斯坦（Heather Havenstein）撰写了</font></font><a href="http://www.computerworld.com/s/article/99691/Spring_comes_to_AI_winter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“春天来到人工智能冬季”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中概述了这一复苏的案例。</font><font style="vertical-align: inherit;">Norvig和Russel在几页中分析了哪些因素使得该行业能够克服其问题以及由此产生的研究结果：</font></font></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">近年来，人工智能工作的内容和方法都发生了革命。</font><font style="vertical-align: inherit;">现在更常见的是建立在现有理论之上，而不是提出全新的理论，基于严格的定理或严格的实验证据，而不是直觉，并显示与现实世界的应用程序而不是玩具示例的相关性。</font></font></p>
</div>
</blockquote>
<div class="attribution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- 人工智能：现代方法
</font></font></div>
</div>
<div class="paragraph">
<p><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算机视觉</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">神经网络</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机器学习</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 以及</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知识表示和推理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 （KRR）已经朝着在商业环境中变得实用方面取得了很大进展。</font><font style="vertical-align: inherit;">例如，基于视觉的系统现在可以通过强大的识别技能完全映射和导航他们的环境。</font><font style="vertical-align: inherit;">因此，我们现在有自动驾驶汽车即将进入商业市场。</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本体论</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 基于描述逻辑的研究提供了非常丰富的语义来代表我们的世界。</font><font style="vertical-align: inherit;">诸如tableaux算法之类的算法使得在大型复杂本体中有效地使用这些丰富语义成为可能。</font><font style="vertical-align: inherit;">早期的KRR系统，如5GP中的Prolog，受到这些本体大小的有限语义能力和内存限制的困扰。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_knowledge_representation_and_reasoning"><a class="anchor" href="index.html#_knowledge_representation_and_reasoning"></a><a class="link" href="index.html#_knowledge_representation_and_reasoning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.2。</font><font style="vertical-align: inherit;">知识表征与推理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在A Little History中，人工智能作为一个更广泛的主题，涉及知识表示和推理（KRR）以及专家系统，我稍后会回到专家系统。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KRR是关于我们如何用符号形式表示我们的知识，即我们如何描述某些东西。</font><font style="vertical-align: inherit;">推理是关于我们如何利用这些知识进行思考的行为。</font><font style="vertical-align: inherit;">基于系统的面向对象语言，如C ++，Java和C＃，具有称为类的数据定义，用于描述建模实体的组成和行为。</font><font style="vertical-align: inherit;">在Java中，我们称这些描述的bean或实例为例。</font><font style="vertical-align: inherit;">然而，这些分类系统仅限于确保计算效率。</font><font style="vertical-align: inherit;">多年来，研究人员开发出越来越复杂的方式来代表我们的世界。</font><font style="vertical-align: inherit;">你们中的许多人可能已经听说过OWL（Web Ontology Language）。</font><font style="vertical-align: inherit;">在理论上可以表示的内容与可以在实际上及时地计算使用的内容之间总是存在差距，这就是OWL具有从Lite到Full的不同子语言的原因。</font><font style="vertical-align: inherit;">不相信任何推理系统都可以支持OWL Full。</font><font style="vertical-align: inherit;">然而，算法的进步继续缩小这种差距并提高推理引擎可用的表现力。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些系统如何思考也有很多方法。</font><font style="vertical-align: inherit;">您可能已经听过讨论将正向链接（反应性和数据驱动）的优点与反向链接进行比较，后向链接是被动的和查询驱动的。</font><font style="vertical-align: inherit;">存在许多其他类型的推理技术，每种推理技术都扩大了我们可以声明性地解决的问题的范围。</font><font style="vertical-align: inherit;">仅举几例：不完美推理（模糊逻辑，确定性因素），可废止逻辑，信念系统，时间推理和相关性。</font><font style="vertical-align: inherit;">您无需了解所有这些术语即可理解和使用Drools。</font><font style="vertical-align: inherit;">他们只是想知道研究主题的范围，实际上更广泛，并随着研究人员推动新的界限而不断发展。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KRR通常被称为人工智能的核心。</font><font style="vertical-align: inherit;">即使使用像神经网络这样的生物学方法来模拟大脑并且更多地关注模式识别而不是思考，它们仍然建立在KRR理论的基础上。</font><font style="vertical-align: inherit;">我对Drools的第一次努力是以工程为导向，因为我没有正式的培训或对KRR的理解。</font><font style="vertical-align: inherit;">学习KRR让我获得了更广泛的理论背景，更好地理解我所做的和我要去的地方，因为它为我们的Drools R＆D提供了几乎所有的理论方面。</font><font style="vertical-align: inherit;">这真是一个巨大而引人入胜的主题，它将为那些花时间学习的人带来红利。</font><font style="vertical-align: inherit;">我知道它确实并且仍然适合我。</font><font style="vertical-align: inherit;">Bracham和Levesque写了一篇开创性的作品，名为“知识表示和推理” </font><font style="vertical-align: inherit;">对于想要建立坚实基础的人来说，这是必读的。</font><font style="vertical-align: inherit;">我还会推荐Russel和Norvig的书“人工智能，一种现代的方法”，它也涵盖了KRR。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_rules_engines_and_production_rule_systems_prs"><a class="anchor" href="index.html#_rules_engines_and_production_rule_systems_prs"></a><a class="link" href="index.html#_rules_engines_and_production_rule_systems_prs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.3。</font><font style="vertical-align: inherit;">规则引擎和生产规则系统（PRS）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们现在已经介绍了AI的简史，并了解到AI的核心是围绕KRR形成的。</font><font style="vertical-align: inherit;">我们已经展示了KRR是一个巨大而引人入胜的主题，它构成了推动Drools R＆D的大部分理论。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools引擎是为开发人员提供KRR功能的计算机程序。</font><font style="vertical-align: inherit;">在高层次上它有三个组成部分：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本体论</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，本体是我们用于“事物”的表示模型。</font><font style="vertical-align: inherit;">它可以使用记录或Java类或基于本体的完整OWL。</font><font style="vertical-align: inherit;">规则执行推理，即它们促进“思考”。</font><font style="vertical-align: inherit;">规则和本体之间的区别在基于OWL的本体上有点模糊，其丰富性是基于规则的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">术语“规则引擎”非常模糊，因为它可以是任何使用任何形式的规则的系统，可以应用于数据以产生结果。</font><font style="vertical-align: inherit;">这包括简单的系统，如表单验证和动态表达引擎。</font><font style="vertical-align: inherit;">Malcolm Chisholm的“如何建立业务规则引擎”（2004）一书就是这种模糊性的例证。</font><font style="vertical-align: inherit;">本书实际上是关于如何构建和更改数据库模式以保存验证规则。</font><font style="vertical-align: inherit;">然后，本书将介绍如何从这些验证规则生成Visual Basic代码以验证数据输入。</font><font style="vertical-align: inherit;">虽然完全有效，但这与我们所谈论的完全不同。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools作为一种称为生产规则系统（PRS）的特定类型的规则引擎开始生活，并且基于Rete算法（通常发音为两个音节，例如REH-te或RAY-tay）。</font><font style="vertical-align: inherit;">由查尔斯福吉于1974年开发的Rete算法构成了生产规则系统的大脑，能够扩展到大量的规则和事实。</font><font style="vertical-align: inherit;">生产规则由两部分组成：引擎将事实和数据与生产规则（也称为生产或仅规则）相匹配，以推断导致行动的结论。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">when<font></font>
    &lt;conditions&gt;<font></font>
then<font></font>
    &lt;actions&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将新事物或现有事实与生产规则进行匹配的过程称为</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式匹配</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 

，由</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推理引擎</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">

。</font><font style="vertical-align: inherit;">动作执行以响应数据的变化，如数据库触发器; </font><font style="vertical-align: inherit;">我们说这是一种</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据驱动的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 

 推理方法。</font><font style="vertical-align: inherit;">这些动作本身可以改变数据，而这些数据又可以与其他规则相匹配，从而引发它们; </font><font style="vertical-align: inherit;">这被称为正向链接</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 5.x实现并扩展了</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rete</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 

 算法。</font><font style="vertical-align: inherit;">这个扩展的Rete算法名为</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReteOO</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 

，表示Drools对面向对象系统的Rete算法有增强和优化的实现。</font><font style="vertical-align: inherit;">其他基于Rete的引擎也有其对Rete的专有增强功能的营销术语，如RetePlus和Rete III。</font><font style="vertical-align: inherit;">最常见的增强功能在Robert B. Doorenbos的论文“1995年的大型学习系统的生产匹配”中有所介绍，该论文介绍了Rete / UL。</font><font style="vertical-align: inherit;">Drools 6.x引入了一个名为</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHREAK</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的新懒惰算法</font><font style="vertical-align: inherit;">

; </font><font style="vertical-align: inherit;">这在PHREAK算法部分有更详细的介绍。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则存储在生产存储器中，推理引擎匹配的事实保存在工作存储器中。</font><font style="vertical-align: inherit;">事实被置于工作记忆中，然后可以修改或撤回它们。</font><font style="vertical-align: inherit;">具有大量规则和事实的系统可能导致许多规则对于相同的事实断言是正确的; </font><font style="vertical-align: inherit;">据说这些规则存在冲突。</font><font style="vertical-align: inherit;">议程使用冲突解决策略管理这些冲突规则的执行顺序。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/rule-engine-inkscape.png" alt="规则引擎inkscape">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图28.生产规则系统的高级视图</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_hybrid_reasoning_systems_hrs"><a class="anchor" href="index.html#_hybrid_reasoning_systems_hrs"></a><a class="link" href="index.html#_hybrid_reasoning_systems_hrs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.4。</font><font style="vertical-align: inherit;">混合推理系统（HRS）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可能已经阅读了比较正向链接（被动和数据驱动）或反向链接（被动查询）的优点的讨论。</font><font style="vertical-align: inherit;">以下是对这两种主要推理类型的快速解释。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正向链接是“数据驱动的”，因此是反动的，事实被置于工作记忆中，这导致一个或多个规则同时成立并安排由议程执行。</font><font style="vertical-align: inherit;">简而言之，我们从一个事实开始，它通过规则传播，我们最终得出结论。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Forward_Chaining.png" alt="正向链接">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图29.正向链接</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向后链接是“目标驱动的”，这意味着我们从引擎试图满足的结论开始。</font><font style="vertical-align: inherit;">如果不能，那么它会搜索它可以满足的结论。</font><font style="vertical-align: inherit;">这些被称为子目标，将有助于满足当前目标的一些未知部分。</font><font style="vertical-align: inherit;">它继续这个过程，直到初步结论得到证实或没有更多的子目标。</font><font style="vertical-align: inherit;">Prolog是Backward Chaining引擎的一个例子。</font><font style="vertical-align: inherit;">Drools也可以进行反向链接，我们将其称为派生查询。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Backward_Chaining.png" alt="向后链接">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图30.向后链接</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从历史上看，您必须在OPS5（前进）或Prolog（后退）等系统之间进行选择。</font><font style="vertical-align: inherit;">如今，许多现代系统提供两种类型的推理能力。</font><font style="vertical-align: inherit;">还有许多其他类型的推理技术，每种推理技术都扩大了我们可以声明性地解决的问题的范围。</font><font style="vertical-align: inherit;">仅举几例：不完美推理（模糊逻辑，确定性因素），可废止逻辑，信念系统，时间推理和相关性。</font><font style="vertical-align: inherit;">现代系统正在合并这些功能，以及未列出的其他功能，以创建</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混合推理系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 （HRS）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然Drools最初是作为PRS开始的，但5.x引入了Prolog风格的后向链接推理以及一些函数式编程风格。</font><font style="vertical-align: inherit;">因此，在描述Drools时，我们现在更喜欢使用术语混合推理系统。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools目前提供清晰的推理，但不完美的推理几乎准备就绪。</font><font style="vertical-align: inherit;">最初，这将是模糊逻辑的不完美推理; </font><font style="vertical-align: inherit;">稍后我们会增加对其他类型不确定性的支持。</font><font style="vertical-align: inherit;">正在开展工作以实现基于OWL的本体推理，这将与我们的</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特征</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 系统相结合。</font><font style="vertical-align: inherit;">我们还将继续改进我们的功能编程功能。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_expert_systems"><a class="anchor" href="index.html#_expert_systems"></a><a class="link" href="index.html#_expert_systems"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.5。</font><font style="vertical-align: inherit;">专家系统</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您经常会听到</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专家系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 用于指代</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产规则系统</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 或</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prolog</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
类系统</font><font style="vertical-align: inherit;">的术语</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">虽然这通常是可以接受的，但它在技术上是不正确的，因为这些是构建专家系统的框架，而不是专家系统本身。</font><font style="vertical-align: inherit;">一旦存在表示领域的本体模型并且存在用于知识获取和解释的设施，它就变成专家系统。</font></font></p>
</div>
<div class="paragraph">
<p><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mycin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 是最着名的专家系统，建于70年代。</font><font style="vertical-align: inherit;">学术文献仍然大量报道，例如彼得杰克逊推荐的“专家系统”一书。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/expertsytem_history.png" alt="expertsytem历史">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图31.专家系统的早期历史</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_recommended_reading"><a class="anchor" href="index.html#_recommended_reading"></a><a class="link" href="index.html#_recommended_reading"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1.6。</font><font style="vertical-align: inherit;">推荐阅读</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*一般AI，KRR和专家系统书籍*</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于那些希望在KRR和专家系统中获得强大理论背景的人，我强烈推荐以下书籍。</font><font style="vertical-align: inherit;">对于任何人的书架来说，“人工智能：现代方法”是必须的。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专家系统简介</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">彼得杰克逊</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专家系统：原理和编程</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Joseph C. Giarratano，Gary D. Riley</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知识表征与推理</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ronald J. Brachman，Hector J. Levesque</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人工智能：现代方法。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stuart Russell和Peter Norvig</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/book_recommendations.png" alt="书籍推荐">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图32.推荐读物</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*论文*</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是一些推荐的论文，涵盖规则引擎研究中的有趣领域：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大型学习系统的生产匹配：Rete / UL（1993）</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Robert B. Doorenbos</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rete模式匹配的进展</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marshall Schor，Timothy P. Daly，Ho Soo Lee，Beth R. Tibbitts（AAAI 1986）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">面向收集的比赛</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anurag Acharya和Milind Tambe（1993）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">跳跃算法</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Don Batery（1990）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gator：用于主动数据库规则条件测试的优化判别网络</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eric Hanson，Mohammed S. Hasan（1993）</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Drools Books *</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前有三本Drools书籍，全部来自Packt Publishing。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JBoss Drools业务规则</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保罗布朗</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools JBoss Rules 5.0开发人员指南</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米哈尔巴厘岛</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Developer's Cookbook</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">卢卡斯阿马多尔</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/drools_book_recommendations.png" alt="流口水的书推荐">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图33.推荐读物</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reteoo"><a class="anchor" href="index.html#_reteoo"></a><a class="link" href="index.html#_reteoo"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">Rete算法</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的Rete</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算法是由查尔斯·福尔热博士发明的，并在1978 - 1979年在他的博士论文记录。</font><font style="vertical-align: inherit;">该论文的简化版本于1982年出版（</font></font><a href="http://citeseer.ist.psu.edu/context/505087/0" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://citeseer.ist.psu.edu/context/505087/0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">拉丁文“rete”的意思是“网络”或“网络”。</font><font style="vertical-align: inherit;">Rete算法可以分为两部分：规则编译和运行时执行。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译算法描述了如何处理生产存储器中的规则以生成有效的区分网络。</font><font style="vertical-align: inherit;">在非技术术语中，歧视网络用于在数据通过网络传播时对数据进行过滤。</font><font style="vertical-align: inherit;">网络顶部的节点会有很多匹配，当我们沿着网络走下去时，会有更少的匹配。</font><font style="vertical-align: inherit;">在网络的最底部是终端节点。</font><font style="vertical-align: inherit;">在Forgy博士的1982年论文中，他描述了4个基本节点：根，1输入，2输入和终端。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Rete_Nodes.png" alt="Rete Nodes">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图34. Rete节点</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根节点是所有对象进入网络的地方。</font><font style="vertical-align: inherit;">从那里，它立即转到ObjectTypeNode。</font><font style="vertical-align: inherit;">ObjectTypeNode的目的是确保引擎不会完成比它需要的更多的工作。</font><font style="vertical-align: inherit;">例如，假设我们有两个对象：Account和Order。</font><font style="vertical-align: inherit;">如果Drools引擎尝试针对每个对象评估每个节点，则会浪费很多周期。</font><font style="vertical-align: inherit;">为了提高效率，引擎应该只将对象传递给与对象类型匹配的节点。</font><font style="vertical-align: inherit;">最简单的方法是创建一个ObjectTypeNode，并让所有1输入和2输入节点都从它下降。</font><font style="vertical-align: inherit;">这样，如果应用程序断言新帐户，它将不会传播到Order对象的节点。</font><font style="vertical-align: inherit;">在Drools中，当一个对象被断言时，它通过在HashMap中从对象的Class中查找来检索有效ObjectTypesNodes的列表。</font><font style="vertical-align: inherit;">如果此列表不存在，它将扫描所有ObjectTypeNodes，查找它在列表中缓存的有效匹配项。</font><font style="vertical-align: inherit;">这使得Drools能够匹配任何与a匹配的Class类型</font></font><code>instanceof</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 检查。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Object_Type_Nodes.png" alt="对象类型节点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图35. ObjectTypeNodes</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectTypeNodes可以传播到AlphaNodes，LeftInputAdapterNodes和BetaNodes。</font><font style="vertical-align: inherit;">AlphaNodes用于评估文字条件。</font><font style="vertical-align: inherit;">虽然1982年的论文仅涉及平等条件，但许多RETE实现支持其他操作。</font><font style="vertical-align: inherit;">例如，</font></font><code>Account.name == "Mr
  Trout"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个文字条件。</font><font style="vertical-align: inherit;">当规则对单个对象类型具有多个文字条件时，它们将链接在一起。</font><font style="vertical-align: inherit;">这意味着如果应用程序声明了Account对象，它必须首先满足第一个字面条件才能进入下一个AlphaNode。</font><font style="vertical-align: inherit;">在Forgy博士的论文中，他将这些称为IntraElement条件。</font><font style="vertical-align: inherit;">下图显示了Cheese的AlphaNode组合（name ==“cheddar”，strength ==“strong”）：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Alpha_Nodes.png" alt="Alpha节点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图36. AlphaNodes</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools通过使用散列优化从ObjectTypeNode到AlphaNode的传播来扩展Rete。</font><font style="vertical-align: inherit;">每次将AlphaNode添加到ObjectTypeNode时，它都会将字面值作为键添加到HashMap，并将AlphaNode作为值。</font><font style="vertical-align: inherit;">当新实例进入ObjectType节点而不是传播到每个AlphaNode时，它可以从HashMap中检索正确的AlphaNode，从而避免不必要的文字检查。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两个双输入节点，JoinNode和NotNode，都是BetaNode的类型。</font><font style="vertical-align: inherit;">BetaNodes用于将2个对象及其字段相互比较。</font><font style="vertical-align: inherit;">对象可以是相同或不同的类型。</font><font style="vertical-align: inherit;">按照惯例，我们将两个输入称为左和右。</font><font style="vertical-align: inherit;">BetaNode的左输入通常是对象列表; </font><font style="vertical-align: inherit;">在Drools这是一个元组。</font><font style="vertical-align: inherit;">正确的输入是单个对象。</font><font style="vertical-align: inherit;">两个节点可用于实现“存在”检查。</font><font style="vertical-align: inherit;">BetaNodes也有内存。</font><font style="vertical-align: inherit;">左输入称为Beta内存，并记住所有传入的元组。</font><font style="vertical-align: inherit;">正确的输入称为Alpha存储器，并记住所有传入的对象。</font><font style="vertical-align: inherit;">Drools通过在BetaNodes上执行索引来扩展Rete。</font><font style="vertical-align: inherit;">例如，如果我们知道BetaNode正在对String字段执行检查，则每个对象进入时我们都可以对该String值进行哈希查找。</font><font style="vertical-align: inherit;">这意味着当事实从相反的一方进入时，我们不会迭代所有事实以找到有效的连接，而是返回可能有效的候选者。</font><font style="vertical-align: inherit;">在任何时候都会发现有效的连接，元组与Object连接在一起; </font><font style="vertical-align: inherit;">这被称为部分匹配; </font><font style="vertical-align: inherit;">然后传播到下一个节点。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Join_Node.png" alt="加入节点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图37. JoinNode</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了启用第一个Object，在上面的Case中，我们使用LeftInputNodeAdapter进入网络 - 这将Object作为输入并传播单个Object Tuple。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">终端节点用于指示匹配其所有条件的单个规则; </font><font style="vertical-align: inherit;">在这一点上，我们说规则有完全匹配。</font><font style="vertical-align: inherit;">具有'或'条件析取连接词的规则导致每个可能的逻辑分支的子规则生成; </font><font style="vertical-align: inherit;">因此，一个规则可以具有多个终端节点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还执行节点共享。</font><font style="vertical-align: inherit;">许多规则重复相同的模式，节点共享允许我们折叠这些模式，这样就不必为每个实例重新评估它们。</font><font style="vertical-align: inherit;">以下两个规则共享第一个模式，但不是最后一个：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule
<span class="hljs-keyword">when</span>
    <span class="hljs-constant">Cheese</span>( <span class="hljs-variable">$cheddar</span> <span class="hljs-symbol">:</span> name == <span class="hljs-string">"cheddar"</span> )
    <span class="hljs-variable">$person</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( favouriteCheese == <span class="hljs-variable">$cheddar</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-variable">$person</span>.getName() + <span class="hljs-string">" likes cheddar"</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule
<span class="hljs-keyword">when</span>
    <span class="hljs-constant">Cheese</span>( <span class="hljs-variable">$cheddar</span> <span class="hljs-symbol">:</span> name == <span class="hljs-string">"cheddar"</span> )
    <span class="hljs-variable">$person</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( favouriteCheese != <span class="hljs-variable">$cheddar</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-variable">$person</span>.getName() + <span class="hljs-string">" does not like cheddar"</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所示，编译后的Rete网络显示alpha节点是共享的，但beta节点不是。</font><font style="vertical-align: inherit;">每个beta节点都有自己的TerminalNode。</font><font style="vertical-align: inherit;">如果第二种模式是相同的，它也会被分享。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Node_Sharing.png" alt="节点共享">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图38.节点共享</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="_reteoosection"><a class="anchor" href="index.html#_reteoosection"></a><a class="link" href="index.html#_reteoosection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3。</font><font style="vertical-align: inherit;">ReteOO算法</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ReteOO</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在整个3，4和5系列版本开发的。</font><font style="vertical-align: inherit;">它采用RETE算法并应用众所周知的增强功能，所有这些功能都包含在现有的学术文献中：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点共享</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共享适用于alpha和beta网络。</font><font style="vertical-align: inherit;">测试版网络共享总是来自根模式。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alpha索引</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有许多子节点的Alpha节点使用散列查找机制来避免测试每个结果。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beta索引</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Join，Not和Exist节点使用散列索引其内存。</font><font style="vertical-align: inherit;">这减少了相等检查的连接尝试。</font><font style="vertical-align: inherit;">最近，范围索引被添加到Not and Exists中。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于树的图</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加入匹配项不包含对其父或子匹配的任何引用。</font><font style="vertical-align: inherit;">删除必须再次重新计算所有连接匹配，这涉及重新创建所有这些连接匹配对象，以便能够找到应删除元组的网络部分。</font><font style="vertical-align: inherit;">这称为对称传播。</font><font style="vertical-align: inherit;">树图提供父引用和子引用，因此删除只是遵循这些引用的问题。</font><font style="vertical-align: inherit;">这是不对称的传播。</font><font style="vertical-align: inherit;">结果更快，对GC的影响更小。</font><font style="vertical-align: inherit;">它也更加健壮，因为如果在没有通知引擎的情况下发生更改，则值不会导致内存泄漏。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改就地</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传统的RETE将修改实现为delete + insert。</font><font style="vertical-align: inherit;">这会导致所有连接元组都被GC'd，其中许多都将作为插入的一部分再次重新创建。</font><font style="vertical-align: inherit;">原位修改而是作为单个传递传播; </font><font style="vertical-align: inherit;">检查每个节点。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">财产反应</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也称为“新触发条件”。</font><font style="vertical-align: inherit;">允许更新的细粒度反应。</font><font style="vertical-align: inherit;">模式可以对特定属性的更改做出反应并忽略其他属性。</font><font style="vertical-align: inherit;">这减轻了递归问题并且还有助于提高性能。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子网络</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Not，Exists和Accumulate每个都有嵌套的条件元素，形成子网络。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向后链接</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持用于反向链接的Prolog样式派生树。</font><font style="vertical-align: inherit;">实现是基于堆栈的，因此没有大图的方法递归问题。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">懒惰的真理维护</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论是否使用TMS，真值维护都会产生运行时成本。</font><font style="vertical-align: inherit;">Lazy TMS仅在首次使用时启用; </font><font style="vertical-align: inherit;">此外，它是按对象类型激活的，因此不相关的对象类型不会产生运行时成本。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于堆的议程</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程使用二进制堆队列来按显着性排序规则匹配，而不是任何线性搜索或维护方法。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态规则</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在运行时添加和删除规则，同时引擎仍然填充数据。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_phreak"><a class="anchor" href="index.html#_phreak"></a><a class="link" href="index.html#_phreak"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">PHREAK算法</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 6引入了一种新算法，试图解决RETE的一些核心问题。</font><font style="vertical-align: inherit;">该算法不是从头开始重写的：它包含了ReteOO的所有现有代码和增强功能。</font><font style="vertical-align: inherit;">虽然PHREAK是RETE算法的演变，但它不再被归类为RETE实现。</font><font style="vertical-align: inherit;">一旦动物进化超过某一点并且关键特征发生变化，动物就会被归类为新物种; </font><font style="vertical-align: inherit;">以同样的方式，PHREAK不能被视为RETE。</font><font style="vertical-align: inherit;">无论优化如何，有两个关键的RETE特征可以强烈识别任何衍生应变：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一种急切的，面向数据的算法。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有工作都是使用插入，更新或删除操作完成的，并热切地为所有规则生成所有部分匹配。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，PHREAK被表征为一种懒惰的，面向目标的算法，其中部分匹配被积极地延迟。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RETE的这种渴望可能导致大型系统中的大量流失，以及大量浪费的工作，其中“浪费的工作”被定义为不会导致规则触发的匹配工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHREAK受到许多算法的启发，包括（但不限于）LEAPS，RETE / UL和面向收集的匹配。</font><font style="vertical-align: inherit;">PHREAK具有ReteOO部分中列出的所有增强功能。</font><font style="vertical-align: inherit;">此外，它还添加了以下一组增强功能，这些功能将在以下段落中进行更详细的说明。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三层情境记忆; </font><font style="vertical-align: inherit;">节点，段和规则存储器。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则，段和基于节点的链接。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">懒惰（延迟）规则评估。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">孤立的规则评估。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置面向传播。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于堆栈的评估，具有暂停和恢复。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当PHREAK引擎启动时，所有规则都被认为是不相关的; </font><font style="vertical-align: inherit;">规则取消关联时，不会发生规则评估。</font><font style="vertical-align: inherit;">插入，更新和删除操作在进入测试版网络之前排队。</font><font style="vertical-align: inherit;">基于最有可能导致发射的规则的简单启发式用于选择下一个评估规则; </font><font style="vertical-align: inherit;">这延迟了其他规则的评估和解雇。</font><font style="vertical-align: inherit;">只有在规则中填充了所有正确的输入后才会将规则视为链接，尽管尚未完成任何工作。</font><font style="vertical-align: inherit;">而是创建一个代表规则的目标，并放入优先级队列; </font><font style="vertical-align: inherit;">这是由显着性排序的。</font><font style="vertical-align: inherit;">每个队列本身都与一个AgendaGroup相关联。</font><font style="vertical-align: inherit;">只有活动的AgendaGroup才会检查其队列，弹出具有最高显着性的规则的目标并提交它进行评估。</font><font style="vertical-align: inherit;">所以完成的工作从插入转移，</font><font style="vertical-align: inherit;">更新，删除阶段到fireAllRules阶段。</font><font style="vertical-align: inherit;">仅评估创建目标的规则，延迟来自这些事实的其他潜在规则评估。</font><font style="vertical-align: inherit;">在评估各个规则的同时，仍然通过分段过程实现节点共享，这将在后面解释。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RETE中的每个成功连接尝试都会生成将传播到子节点的元组（或标记或部分匹配）。</font><font style="vertical-align: inherit;">因此，它被定性为面向元组的算法。</font><font style="vertical-align: inherit;">对于它到达的每个子节点，它将尝试与节点的另一侧连接; </font><font style="vertical-align: inherit;">再次，每次成功的连接尝试都将立即传播。</font><font style="vertical-align: inherit;">这会产生下降递归效应，当节点从进入β网络的点向上，向下，向左和向右波动到所有可到达的叶节点时，会破坏节点网络。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHREAK传播设置为面向（或面向集合），而不是面向元组。</font><font style="vertical-align: inherit;">对于正在评估的规则，它将访问第一个节点并处理所有排队的插入，更新和删除。</font><font style="vertical-align: inherit;">将结果添加到集合中，并将集合传播到子节点。</font><font style="vertical-align: inherit;">在子节点中，处理所有排队的插入，更新和删除，将结果添加到同一组。</font><font style="vertical-align: inherit;">完成后，该集合将传播到下一个子节点，依此类推，直到到达终端节点。</font><font style="vertical-align: inherit;">这将创建单个传递，管道类型效果，该效果与正在评估的当前规则隔离。</font><font style="vertical-align: inherit;">这会创建批处理效果，这可以为某些规则构造提供性能优势，例如具有累积的子网络。</font><font style="vertical-align: inherit;">在未来，它将能够以多种方式利用多核机器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接和取消链接使用基于网络分段的分层位掩码系统。</font><font style="vertical-align: inherit;">构建规则网络时，将为由同一组规则共享的节点创建段。</font><font style="vertical-align: inherit;">规则本身由段的路径组成，但如果没有共享将成为单个段。</font><font style="vertical-align: inherit;">将比特掩码偏移分配给段中的每个节点。</font><font style="vertical-align: inherit;">另外一个位掩码（分层）被分配给规则路径中的每个段。</font><font style="vertical-align: inherit;">当存在至少一个输入（数据传播）时，节点的位被设置为开。</font><font style="vertical-align: inherit;">当每个节点的位设置为on时，该段的位也设置为on。</font><font style="vertical-align: inherit;">相反，如果任何节点的位设置为关闭，则该段也将设置为关闭。</font><font style="vertical-align: inherit;">如果规则路径中的每个段都设置为on，则表示该规则已链接，并创建目标以计划评估规则。</font><font style="vertical-align: inherit;">相同的位掩码技术也用于跟踪脏节点，段和规则; </font><font style="vertical-align: inherit;">这允许已经链接的规则被安排进行评估，如果它被认为是脏的，因为它是上次评估的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可以确保任何规则都不会评估部分匹配，如果它不可能导致规则实例，因为其中一个连接没有数据。</font><font style="vertical-align: inherit;">这在RETE中是可能的，即使最后一个连接为空，它也会快速地为所有节点产生部分匹配尝试。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然增量规则评估始终从根节点开始，但脏位掩码用于允许跳过非脏的节点和段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用每个节点至少一个数据项的存在是一个相当基本的启发式算法。</font><font style="vertical-align: inherit;">未来的工作将尝试进一步延迟链接，使用诸如弧一致性之类的技术来确定匹配是否会导致规则实例触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RETE只有一个单位的内存，节点内存，PHREAK有3级内存。</font><font style="vertical-align: inherit;">这允许在评估规则期间进行更多的上下文理解。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/LayeredMemory.png" alt="LayeredMemory">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图39. PHREAK 3分层存储系统</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例1显示了具有三种模式的单个规则：A，B和C.它形成单个段，节点的位为1,2和4。</font><font style="vertical-align: inherit;">单个段的位偏移量为1。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/segment1.png" alt="SEGMENT1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图40.示例1：单一规则，无共享</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例2演示了当添加另一个共享模式A的规则时会发生什么.A放置在它自己的段中，每个规则产生两个段。</font><font style="vertical-align: inherit;">这两个部分构成了各自规则的路径。</font><font style="vertical-align: inherit;">第一个段由两个路径共享。</font><font style="vertical-align: inherit;">当A链接时，该段将被链接。</font><font style="vertical-align: inherit;">然后，它迭代段共享的每个路径，将位1设置为打开。</font><font style="vertical-align: inherit;">如果稍后打开B和C，则链接路径R1的第二段; </font><font style="vertical-align: inherit;">这会导致R1的位2打开。</font><font style="vertical-align: inherit;">将R1的第1位和第2位设置为on时，现在链接规则并创建目标以安排规则以供以后评估和触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估规则时，它是允许共享匹配结果的段。</font><font style="vertical-align: inherit;">每个段都有一个暂存内存，用于对该段的所有插入，更新和删除进行排队。</font><font style="vertical-align: inherit;">如果要评估R1，它将处理A并产生一组元组。</font><font style="vertical-align: inherit;">该算法检测到存在分段拆分，并为集合中的每个插入，更新和删除创建对等元组，并将它们添加到R2的临时存储器中。</font><font style="vertical-align: inherit;">这些元组将与任何现有的阶段元组合并，并等待R2最终进行评估。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/segment2.png" alt="分段2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图41.示例2：两个规则，共享</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例3添加了第三条规则，并演示了共享A和B时会发生什么。</font><font style="vertical-align: inherit;">此时仅显示段的位。</font><font style="vertical-align: inherit;">证明R4有3个段，R3有3个段，R1有2个段。</font><font style="vertical-align: inherit;">A，B由R1，R3和R4共享。</font><font style="vertical-align: inherit;">虽然D由R3和R4共享。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/segment3.png" alt="段3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图42.示例3：三个规则，共享</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当Not，Exists或Accumulate节点包含多个元素时，将形成子网络。</font><font style="vertical-align: inherit;">在示例4中，“B not（C）”形成子网络，注意“not（C）”是不需要子网络的单个元素，因此在Not节点内合并。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子网络有自己的段。</font><font style="vertical-align: inherit;">R1仍然有两个段的路径。</font><font style="vertical-align: inherit;">子网络形成另一个“内部”路径。</font><font style="vertical-align: inherit;">链接子网络时，它将链接到外部网段。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/segment4.png" alt="segment4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图43.示例4：单一规则，具有子网络且无共享</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例5示出了子网络节点可以由不具有子网络的规则共享。</font><font style="vertical-align: inherit;">这导致子网段被分成两部分。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/segment5.png" alt="segment5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图44.示例5：两个规则，一个具有子网和共享</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Constrained Not节点和Accumulate节点具有特殊行为：这些节点永远不会取消链接段，并且始终认为它们的位已打开。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有规则评估都是递增的，并且不会浪费重新计算已经生成的匹配项。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估算法是堆栈，而不是基于方法递归。</font><font style="vertical-align: inherit;">通过使用StackEntry表示当前正在评估的节点，可以随时暂停和恢复评估。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当规则评估到达子网时，为外部路径段和子网段创建StackEntry。</font><font style="vertical-align: inherit;">首先评估子网段; </font><font style="vertical-align: inherit;">当集合到达子网络路径的末尾时，它将合并到它所输入的外部节点的分段列表中。</font><font style="vertical-align: inherit;">然后恢复先前的StackEntry，现在可以处理子网络的结果。</font><font style="vertical-align: inherit;">这具有额外的好处，即在传播到子节点之前，批量处理所有工作; </font><font style="vertical-align: inherit;">这对Accumulate节点来说效率更高。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同的堆栈系统可用于有效的反向链接。</font><font style="vertical-align: inherit;">当规则评估到达查询节点时，它再次暂停当前评估，方法是将其放在堆栈上。</font><font style="vertical-align: inherit;">然后评估查询，该查询生成结果集，该结果集保存在内存位置，以便恢复的StackEntry获取并传播到子节点。</font><font style="vertical-align: inherit;">如果查询本身调用其他查询，则该过程将重复，暂停当前查询并为当前查询节点设置新的评估。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于性能的最后一点：一般情况下，单个规则使用PHREAK评估速度不会比使用RETE评估更快。</font><font style="vertical-align: inherit;">对于使用根上下文对象启用和禁用匹配的给定规则和相同数据集，两者都尝试相同数量的匹配，生成相同数量的规则实例并花费大致相同的时间量，但用例除外with subnetworks和Accumulates。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，PHREAK可以被认为是更为宽容的RETE，因为规则基础不良，并且随着规则数量和复杂性的增加，性能会更优雅地降低。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RETE也将为所有连接中没有数据的规则生成部分匹配，而PHREAK将避免这种情况。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以PHREAK并不比RETE快; </font><font style="vertical-align: inherit;">它不会像你的系统增长那样慢下来:)</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroups对RETE表现没有帮助，因为所有规则都在任何时候进行评估，无论是哪个组。</font><font style="vertical-align: inherit;">对于显着性也是如此，这就是为什么根上下文对象经常用于限制匹配尝试的原因。</font><font style="vertical-align: inherit;">PHREAK仅评估活动AgendaGroup的规则，并且该组内将尝试避免评估不会导致规则实例触发的规则（通过显着性）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">借助PHREAK，AgendaGroups和显着性现在成为有用的性能工具。</font><font style="vertical-align: inherit;">不再需要根上下文对象，并且可能会对性能产生反作用，因为它们会强制刷新和重新创建规则的匹配项。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_user_guide"><a class="anchor" href="index.html#_user_guide"></a><a class="link" href="index.html#_user_guide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.用户指南</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_basics"><a class="anchor" href="index.html#_the_basics"></a><a class="link" href="index.html#_the_basics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1。</font><font style="vertical-align: inherit;">基础</font></font></a></h3>
<div class="sect3">
<h4 id="_stateless_kie_session"><a class="anchor" href="index.html#_stateless_kie_session"></a><a class="link" href="index.html#_stateless_kie_session"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.1。</font><font style="vertical-align: inherit;">无国籍的KIE会议</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么我们从哪里开始呢？</font><font style="vertical-align: inherit;">在诸如Drools之类的规则引擎中有如此多的用例和如此多的功能，它变得迷人。</font><font style="vertical-align: inherit;">不要害怕我的勇敢的冒险家，复杂性是分层的，你可以通过简单的用例来放松自己。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无状态会话，不利用推理，形成最简单的用例。</font><font style="vertical-align: inherit;">无状态会话可以被调用，就像一个函数传递一些数据然后接收一些结果。</font><font style="vertical-align: inherit;">无状态会话的一些常见用例包括但不限于：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个人有资格获得抵押贷款吗？</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算抵押贷款保费。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路由和过滤</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将传入的消息（如电子邮件）过滤到文件夹中。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将传入的消息发送到目的地。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们从使用驾驶执照申请的一个非常简单的例子开始。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Applicant</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> valid;
    <span class="hljs-comment">// getter and setter methods here</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们有了数据模型，我们可以编写第一条规则。</font><font style="vertical-align: inherit;">我们假设应用程序使用规则来拒绝无效的应用程序。</font><font style="vertical-align: inherit;">由于这是一个简单的验证用例，我们将添加一条规则来取消任何年龄小于18岁的申请人的资格。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package com.company.license<font></font>
<font></font>
rule <span class="hljs-string">"Is of valid age"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Applicant</span>( age &lt; <span class="hljs-number">18</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-variable">$a</span>.setValid( <span class="hljs-keyword">false</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使引擎能够识别数据，因此可以根据规则进行处理，我们必须</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据，就像使用数据库一样。</font><font style="vertical-align: inherit;">当将Applicant实例插入引擎时，它将根据规则的约束进行评估，在这种情况下，对一个规则只有两个约束。</font><font style="vertical-align: inherit;">我们说</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为申请人类型是第一个对象类型约束，并且</font></font><code>age &lt; 18</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是第二个字段约束。</font><font style="vertical-align: inherit;">对象类型约束加上其零个或多个字段约束称为模式。</font><font style="vertical-align: inherit;">当插入的实例满足对象类型约束和所有字段约束时，它被称为匹配。</font><font style="vertical-align: inherit;">该</font></font><code>$a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个绑定变量，它允许我们在结果中引用匹配的对象。</font><font style="vertical-align: inherit;">它的属性可以更新。</font><font style="vertical-align: inherit;">美元字符（'$'）是可选的，但它有助于区分变量名称和字段名称。</font><font style="vertical-align: inherit;">毫无疑问，将模式与插入的数据匹配的过程通常被称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式匹配</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用此规则，必须将其设置为Drools文件，只是带有.drl扩展名的纯文本文件，“Drools Rule Language”的缩写。</font><font style="vertical-align: inherit;">我们将此文件称为licenseApplication.drl，并将其存储在Kie项目中。</font><font style="vertical-align: inherit;">Kie项目具有普通Maven项目的结构，其中包含一个定义</font><font style="vertical-align: inherit;">可以创建</font><font style="vertical-align: inherit;">的</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font><font style="vertical-align: inherit;">的附加文件（kmodule.xml）</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此文件必须放在Maven项目的resources / META-INF文件夹中，而所有其他Drools工件（例如包含前一规则的licenseApplication.drl）必须存储在resources文件夹或其下的任何其他子文件夹中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于已为所有配置方面提供了有意义的默认值，因此最简单的kmodule.xml文件只能包含空的kmodule标记，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，可以从类路径</font><font style="vertical-align: inherit;">创建一个</font><font style="vertical-align: inherit;">读取要构建的文件。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieContainer kContainer = kieServices.getKieClasspathContainer();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的代码片段编译了在类路径中找到的所有DRL文件，并将此编译的结果a </font></font><code>KieModule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放在</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有错误，我们现在可以从中创建会话</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并执行一些数据：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession kSession = kContainer.newStatelessKieSession();<font></font>
Applicant applicant = <span class="hljs-keyword">new</span> Applicant( <span class="hljs-string">"Mr John Smith"</span>, <span class="hljs-number">16</span> );<font></font>
assertTrue( applicant.isValid() );<font></font>
ksession.execute( applicant );<font></font>
assertFalse( applicant.isValid() );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的代码根据规则执行数据。</font><font style="vertical-align: inherit;">由于申请人未满18岁，申请被标记为无效。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到目前为止，我们只使用了一个实例，但是如果我们想要使用多个实例呢？</font><font style="vertical-align: inherit;">我们可以对任何实现Iterable的对象执行，例如集合。</font><font style="vertical-align: inherit;">让我们添加另一个名为的类</font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它具有应用程序的日期，我们还将布尔有效字段移动到</font></font><code>Application</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类中。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Applicant</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Application</span> </span>{
    <span class="hljs-keyword">private</span> Date dateApplied;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> valid;
    <span class="hljs-comment">// getter and setter methods here</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还将添加另一条规则来验证应用程序是在一段时间内完成的。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package com.company.license<font></font>
<font></font>
rule <span class="hljs-string">"Is of valid age"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-constant">Applicant</span>( age &lt; <span class="hljs-number">18</span> )
    <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Application</span>()
<span class="hljs-keyword">then</span>
    <span class="hljs-variable">$a</span>.setValid( <span class="hljs-keyword">false</span> );
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Application was made this year"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Application</span>( dateApplied &gt; <span class="hljs-string">"01-jan-2009"</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-variable">$a</span>.setValid( <span class="hljs-keyword">false</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不幸的是Java数组没有实现</font></font><code>Iterable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口，所以我们必须使用JDK转换器方法</font></font><code>Arrays.asList(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">下面显示的代码针对可迭代列表执行，其中在触发任何匹配规则之前插入所有集合元素。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession kSession = kContainer.newStatelessKieSession();<font></font>
Applicant applicant = <span class="hljs-keyword">new</span> Applicant( <span class="hljs-string">"Mr John Smith"</span>, <span class="hljs-number">16</span> );<font></font>
Application application = <span class="hljs-keyword">new</span> Application();<font></font>
assertTrue( application.isValid() );<font></font>
ksession.execute( Arrays.asList( <span class="hljs-keyword">new</span> Object[] { application, applicant } ) );<font></font>
assertFalse( application.isValid() );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个执行方法</font></font><code>execute(Object object)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>execute(Iterable objects)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上是为接口方便的方法</font></font><code>BatchExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的方法</font></font><code>execute(Command command)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>KieCommands</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从</font></font><code>KieServices</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE A​​PI的所有其他工厂</font><font style="vertical-align: inherit;">获得</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">命令工厂</font><font style="vertical-align: inherit;">用于创建命令，因此以下等同于</font></font><code>execute(Iterable it)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.execute( kieServices.getCommands().newInsertElements( Arrays.asList( <span class="hljs-keyword">new</span> Object[] { application, applicant } ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">批处理执行程序和命令工厂在处理多个命令和输出标识符以获取结果时特别有用。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieCommands kieCommands = kieServices.getCommands();<font></font>
List&lt;Command&gt; cmds = <span class="hljs-keyword">new</span> ArrayList&lt;Command&gt;();<font></font>
cmds.add( kieCommands.newInsert( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mr John Smith"</span> ), <span class="hljs-string">"mrSmith"</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">null</span> ) );<font></font>
cmds.add( kieCommands.newInsert( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mr John Doe"</span> ), <span class="hljs-string">"mrDoe"</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">null</span> ) );<font></font>
BatchExecutionResults results = ksession.execute( kieCommands.newBatchExecution( cmds ) );<font></font>
assertEquals( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mr John Smith"</span> ), results.getValue( <span class="hljs-string">"mrSmith"</span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>CommandFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持可在使用许多其它的命令</font></font><code>BatchExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一样</font></font><code>StartProcess</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>SetGlobal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_stateful_kie_session"><a class="anchor" href="index.html#_stateful_kie_session"></a><a class="link" href="index.html#_stateful_kie_session"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.2。</font><font style="vertical-align: inherit;">有状态的KIE会议</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态会话是长期存在的，并允许随着时间的推移进行迭代更改。</font><font style="vertical-align: inherit;">有状态会话的一些常见用例包括但不限于：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监控</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">半自动购买的股市监测和分析。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">诊断</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">故障查找，医疗诊断</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后勤</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包裹跟踪和交付配置</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合规</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证市场交易的合法性。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与无状态会话相比，</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之后必须调用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">方法以确保没有内存泄漏，因为KieBase在创建时包含对有状态KIE会话的引用。</font><font style="vertical-align: inherit;">由于有状态KIE会话是最常用的会话类型，因此它仅</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在KIE A​​PI中</font><font style="vertical-align: inherit;">命名</font><font style="vertical-align: inherit;">。</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也支持</font></font><code>BatchExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口，例如</font></font><code>StatelessKieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，唯一的区别是</font></font><code>FireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令不会在有状态会话结束时自动调用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们以监控用例为例说明了发出火警的示例。</font><font style="vertical-align: inherit;">仅使用四个班级，我们代表一个房子里的房间，每个房间都有一个洒水车。</font><font style="vertical-align: inherit;">如果在房间内发生火灾，我们用单个</font></font><code>Fire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例表示。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Room</span> </span>{
    <span class="hljs-keyword">private</span> String name
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sprinkler</span> </span>{
    <span class="hljs-keyword">private</span> Room room;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> on;
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fire</span> </span>{
    <span class="hljs-keyword">private</span> Room room;
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Alarm</span> </span>{<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上一节“无状态会话”中，介绍了插入和匹配数据的概念。</font><font style="vertical-align: inherit;">该示例假定只插入了每个对象类型的单个实例，因此仅使用了文字约束。</font><font style="vertical-align: inherit;">然而，房子有许多房间，因此规则必须表达物体之间的关系，例如在某个房间内的洒水器。</font><font style="vertical-align: inherit;">最好通过使用绑定变量作为模式中的约束来完成。</font><font style="vertical-align: inherit;">这种“加入”过程产生了所谓的交叉产品，这将在下一节中介绍。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当发生火灾时</font></font><code>Fire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将为该房间创建该类</font><font style="vertical-align: inherit;">的实例</font><font style="vertical-align: inherit;">，并将其插入到会话中。</font><font style="vertical-align: inherit;">该规则使用</font><font style="vertical-align: inherit;">对象</font></font><code>room</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">上的绑定</font></font><code>Fire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来约束与当前关闭的房间的喷洒器的匹配。</font><font style="vertical-align: inherit;">当此规则触发并执行后果时，喷洒器将打开。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"When there is a fire turn on the sprinkler"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-constant">Fire</span>(<span class="hljs-variable">$room</span> <span class="hljs-symbol">:</span> room)
    <span class="hljs-variable">$sprinkler</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Sprinkler</span>( room == <span class="hljs-variable">$room</span>, on == <span class="hljs-keyword">false</span> )
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$sprinkler</span> ) { setOn( <span class="hljs-keyword">true</span> ) };
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"Turn on the sprinkler for room "</span> + <span class="hljs-variable">$room</span>.getName() );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无状态会话使用标准Java语法来修改字段，而在上面的规则中，我们使用</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，该语句充当一种“with”语句。</font><font style="vertical-align: inherit;">它可能包含一系列逗号分隔的Java表达式，即调用由</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句的控制表达式</font><font style="vertical-align: inherit;">选择的对象的setter </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这会修改数据，并使引擎知道这些更改，以便它可以再次推理它们。</font><font style="vertical-align: inherit;">这个过程称为推理，对于有状态会议的工作至关重要。</font><font style="vertical-align: inherit;">无状态会话通常不使用推理，因此引擎无需了解数据更改。</font><font style="vertical-align: inherit;">也可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺序模式</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">明确地关闭推理</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到目前为止，我们已经告诉我们，当规则匹配的数据存在，但什么时候什么它</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在吗？</font><font style="vertical-align: inherit;">我们如何确定火已经熄灭，即不再有</font></font><code>Fire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体了？</font><font style="vertical-align: inherit;">以前，约束是根据命题逻辑的句子，其中引擎约束个体实例。</font><font style="vertical-align: inherit;">Drools还支持First Order Logic，允许您查看数据集。</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当某些内容不存在时</font><font style="vertical-align: inherit;">，关键字下的模式会</font><font style="vertical-align: inherit;">匹配。</font><font style="vertical-align: inherit;">下面给出的规则一旦房间内的火焰消失，就会关闭喷水灭火器。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"When the fire is gone turn off the sprinkler"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$room</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Room</span>( )
    <span class="hljs-variable">$sprinkler</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Sprinkler</span>( room == <span class="hljs-variable">$room</span>, on == <span class="hljs-keyword">true</span> )
    <span class="hljs-keyword">not</span> <span class="hljs-constant">Fire</span>( room == <span class="hljs-variable">$room</span> )
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$sprinkler</span> ) { setOn( <span class="hljs-keyword">false</span> ) };
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"Turn off the sprinkler for room "</span> + <span class="hljs-variable">$room</span>.getName() );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然每个房间有一个喷水器，但建筑物只有一个警报器。</font></font><code>Alarm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发生火灾时会创建</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">物体，但</font></font><code>Alarm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论发生多少火灾，整个建筑物</font><font style="vertical-align: inherit;">都只</font><font style="vertical-align: inherit;">需要</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">物体</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">之前</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被引入以匹配事实的缺失; </font><font style="vertical-align: inherit;">现在我们使用它的补码</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配某个类别的一个或多个实例。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"Raise the alarm when we have one or more fires"</span>
<span class="hljs-keyword">when</span><font></font>
    exists Fire()<font></font>
<span class="hljs-keyword">then</span>
    insert( <span class="hljs-keyword">new</span> Alarm() );<font></font>
    System.out.println( <span class="hljs-string">"Raise the alarm"</span> );<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样，当没有火灾时我们想要删除警报，因此</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以再次使用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">关键字。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Cancel the alarm when all the fires have gone"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-keyword">not</span> <span class="hljs-constant">Fire</span>()
    <span class="hljs-variable">$alarm</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Alarm</span>()
<span class="hljs-keyword">then</span>
    delete( <span class="hljs-variable">$alarm</span> );
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"Cancel the alarm"</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，在应用程序首次启动时以及在取消警报并且所有洒水喷头都已关闭后，将打印一般健康状态消息。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"Status output when things are ok"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-keyword">not</span> Alarm()
    <span class="hljs-keyword">not</span> Sprinkler( <span class="hljs-literal">on</span> == <span class="hljs-literal">true</span> )
<span class="hljs-keyword">then</span>
    System.out.println( <span class="hljs-string">"Everything is ok"</span> );<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如我们在无状态会话示例中所做的那样，上述规则应放在单个DRL文件中并保存到Maven项目或其任何子文件夹的resouces文件夹中。</font><font style="vertical-align: inherit;">和以前一样，我们就可以得到一个</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">唯一的区别是，这次我们创建了一个有状态会话，而在我们创建一个无状态会话之前。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
KieContainer kContainer = kieServices.getKieClasspathContainer();<font></font>
KieSession ksession = kContainer.newKieSession();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随着会话的创建，现在可以随着时间的推移迭代地使用它。</font></font><code>Room</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建并插入</font><font style="vertical-align: inherit;">四个</font><font style="vertical-align: inherit;">对象，以及</font></font><code>Sprinkler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个房间的</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">此时引擎已完成所有匹配，但尚未启动任何规则。</font><font style="vertical-align: inherit;">调用</font></font><code>ksession.fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许匹配的规则触发，但没有火将产生健康消息。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String[] names = <span class="hljs-keyword">new</span> String[]{<span class="hljs-string">"kitchen"</span>, <span class="hljs-string">"bedroom"</span>, <span class="hljs-string">"office"</span>, <span class="hljs-string">"livingroom"</span>};<font></font>
Map&lt;String,Room&gt; name2room = <span class="hljs-keyword">new</span> HashMap&lt;String,Room&gt;();
<span class="hljs-keyword">for</span>( String name: names ){<font></font>
    Room room = <span class="hljs-keyword">new</span> Room( name );<font></font>
    name2room.put( name, room );<font></font>
    ksession.insert( room );<font></font>
    Sprinkler sprinkler = <span class="hljs-keyword">new</span> Sprinkler( room );<font></font>
    ksession.insert( sprinkler );<font></font>
}<font></font>
<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">&gt; Everything <span class="hljs-keyword">is</span> ok</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们现在制造两个火焰并插入它们; </font><font style="vertical-align: inherit;">这次保留了返回的参考</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">事实句柄是插入实例的内部引擎引用，允许在稍后的时间点撤消或修改实例。</font><font style="vertical-align: inherit;">现在发动机发生火灾，一旦</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">呼叫，警报就会升起，相应的洒水喷头也会打开。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Fire kitchenFire = <span class="hljs-keyword">new</span> Fire( name2room.get( <span class="hljs-string">"kitchen"</span> ) );<font></font>
Fire officeFire = <span class="hljs-keyword">new</span> Fire( name2room.get( <span class="hljs-string">"office"</span> ) );<font></font>
<font></font>
FactHandle kitchenFireHandle = ksession.insert( kitchenFire );<font></font>
FactHandle officeFireHandle = ksession.insert( officeFire );<font></font>
<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">&gt; Raise the alarm<font></font>
&gt; Turn <span class="hljs-literal">on</span> the sprinkler <span class="hljs-keyword">for</span> room kitchen<font></font>
&gt; Turn <span class="hljs-literal">on</span> the sprinkler <span class="hljs-keyword">for</span> room office</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一段时间后，火灾将被扑灭，</font></font><code>Fire</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例将被收回。</font><font style="vertical-align: inherit;">这导致洒水器关闭，警报被取消，最终再次打印健康信息。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.delete( kitchenFireHandle );<font></font>
ksession.delete( officeFireHandle );<font></font>
<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">&gt; Cancel the alarm<font></font>
&gt; Turn <span class="hljs-literal">off</span> the sprinkler <span class="hljs-keyword">for</span> room office<font></font>
&gt; Turn <span class="hljs-literal">off</span> the sprinkler <span class="hljs-keyword">for</span> room kitchen<font></font>
&gt; Everything <span class="hljs-keyword">is</span> ok</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个人还和我在一起？</font><font style="vertical-align: inherit;">那不是那么难，我希望你能开始看到声明性规则系统的价值和力量。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_methods_versus_rules"><a class="anchor" href="index.html#_methods_versus_rules"></a><a class="link" href="index.html#_methods_versus_rules"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.3。</font><font style="vertical-align: inherit;">方法与规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人们常常混淆方法和规则，而新规则用户经常会问：“我如何称呼规则？” </font><font style="vertical-align: inherit;">在最后一节之后，你现在感觉自己像一个规则专家，答案很明显，但我们总结一下这些差异。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">helloWorld</span><span class="hljs-params">(Person person)</span> </span>{
    <span class="hljs-keyword">if</span> ( person.getName().equals( <span class="hljs-string">"Chuck"</span> ) ) {<font></font>
        System.out.println( <span class="hljs-string">"Hello Chuck"</span> );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法直接调用。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过特定实例。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一次调用导致单次执行。</font></font></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Hello World"</span> <span class="hljs-function"><span class="hljs-keyword">when</span>
    <span class="hljs-title">Person</span>(<span class="hljs-params"> name == <span class="hljs-string">"Chuck"</span> </span>)
then
    System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"Hello Chuck"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要将规则插入引擎，规则就可以通过匹配任何数据来执行。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">永远不能直接调用规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法将特定实例传递给规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据匹配，规则可能会触发一次或多次，或者根本不会触发。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_cross_products"><a class="anchor" href="index.html#_cross_products"></a><a class="link" href="index.html#_cross_products"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1.4。</font><font style="vertical-align: inherit;">跨产品</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前提到过“交叉产品”一词，这是加入的结果。</font><font style="vertical-align: inherit;">想象一下，火灾报警示例中的数据与以下规则结合使用，其中没有字段约束：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Show Sprinklers"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$room</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Room</span>()
    <span class="hljs-variable">$sprinkler</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Sprinkler</span>()
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"room:"</span> + <span class="hljs-variable">$room</span>.getName() +
                        <span class="hljs-string">" sprinkler:"</span> + <span class="hljs-variable">$sprinkler</span>.getRoom().getName() );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在SQL术语中，这就像在做，</font></font><code>select * from Room,
    Sprinkler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且Room表中的每一行都将与Sprinkler表中的每一行连接，从而产生以下输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">room</span><span class="hljs-pseudo">:office</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:office</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:office</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:kitchen</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:office</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:livingroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:office</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:bedroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:kitchen</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:office</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:kitchen</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:kitchen</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:kitchen</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:livingroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:kitchen</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:bedroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:livingroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:office</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:livingroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:kitchen</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:livingroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:livingroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:livingroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:bedroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:bedroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:office</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:bedroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:kitchen</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:bedroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:livingroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:bedroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:bedroom</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些交叉产品显然会变得庞大，并且很可能包含虚假数据。</font><font style="vertical-align: inherit;">交叉产品的大小通常是新规则作者的性能问题的根源。</font><font style="vertical-align: inherit;">由此可以看出，总是希望约束交叉乘积，这是用变量约束完成的。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$room</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Room</span>()
    <span class="hljs-variable">$sprinkler</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Sprinkler</span>( room == <span class="hljs-variable">$room</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"room:"</span> + <span class="hljs-variable">$room</span>.getName() +
                        <span class="hljs-string">" sprinkler:"</span> + <span class="hljs-variable">$sprinkler</span>.getRoom().getName() );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这导致只有四行数据，每个房间都有正确的洒水喷头。</font><font style="vertical-align: inherit;">在SQL（实际上是HQL）中，相应的查询将是</font></font><code>select * from Room, Sprinkler where Room ==
    Sprinkler.room</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">room</span><span class="hljs-pseudo">:office</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:office</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:kitchen</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:kitchen</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:livingroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:livingroom</span>
<span class="hljs-tag">room</span><span class="hljs-pseudo">:bedroom</span> <span class="hljs-tag">sprinkler</span><span class="hljs-pseudo">:bedroom</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_execution_control"><a class="anchor" href="index.html#_execution_control"></a><a class="link" href="index.html#_execution_control"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2。</font><font style="vertical-align: inherit;">执行控制</font></font></a></h3>
<div class="sect3">
<h4 id="_agenda"><a class="anchor" href="index.html#_agenda"></a><a class="link" href="index.html#_agenda"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.1。</font><font style="vertical-align: inherit;">议程</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程是一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rete</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">它维护着一组能够执行的规则，其工作是以确定的顺序安排执行。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在对行动采取行动时</font></font><code>RuleRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，规则可能完全匹配并有资格执行; </font><font style="vertical-align: inherit;">单个规则运行时操作可以生成多个符合条件的规则。</font><font style="vertical-align: inherit;">当规则完全匹配时，将创建规则匹配，引用规则和匹配的事实，并将其置于议程中。</font><font style="vertical-align: inherit;">议程使用冲突解决策略控制这些匹配的执行顺序。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发动机反复循环两个阶段：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则运行时操作。</font><font style="vertical-align: inherit;">这是大多数工作发生的地方，无论是在Consequence（RHS本身）还是主要的Java应用程序进程中。</font><font style="vertical-align: inherit;">一旦结果完成或主Java应用程序进程调用</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎切换到议程评估阶段。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程评估。</font><font style="vertical-align: inherit;">这会尝试选择要触发的规则。</font><font style="vertical-align: inherit;">如果没有找到规则则退出，否则它会触发找到的规则，将阶段切换回规则运行时操作。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/Two_Phase.png" alt="两阶段">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图45.两阶段执行</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复该过程直到议程清楚，在这种情况下，控制返回到调用应用程序。</font><font style="vertical-align: inherit;">当正在执行规则运行时操作时，不会触发任何规则。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_rule_matches_and_conflict_sets"><a class="anchor" href="index.html#_rule_matches_and_conflict_sets"></a><a class="link" href="index.html#_rule_matches_and_conflict_sets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2。</font><font style="vertical-align: inherit;">规则匹配和冲突集。</font></font></a></h4>
<div class="sect4">
<h5 id="_cashflow_example"><a class="anchor" href="index.html#_cashflow_example"></a><a class="link" href="index.html#_cashflow_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2.1。</font><font style="vertical-align: inherit;">现金流量示例</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到目前为止，数据和匹配过程一直很简单。</font><font style="vertical-align: inherit;">为了混合起来，将探索一个新的例子来处理日期期间的现金流量计算。</font><font style="vertical-align: inherit;">将在关键阶段说明性地显示发动机的状态，以帮助更好地了解发动机罩下的实际情况。</font><font style="vertical-align: inherit;">将使用三个类，如下所示。</font><font style="vertical-align: inherit;">这将有助于我们增加对模式匹配的理解并进一步加入。</font><font style="vertical-align: inherit;">然后我们将使用它来说明执行控制的不同技术。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CashFlow</span> </span>{
    <span class="hljs-keyword">private</span> Date   date;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> amount;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>    type;
    <span class="hljs-keyword">long</span>           accountNo;
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span>   accountNo;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> balance;
    <span class="hljs-comment">// getter and setter methods here</span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">public</span> AccountPeriod {
    <span class="hljs-keyword">private</span> Date start;
    <span class="hljs-keyword">private</span> Date end;
    <span class="hljs-comment">// getter and setter methods here</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到目前为止，您已经知道如何创建KieBase以及如何实例化填充事实</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此表将用于显示插入数据的状态，因为它使事情更加清晰。</font><font style="vertical-align: inherit;">下表显示为此插入了一个事实</font></font><code>Account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">还插入了一系列借记和贷记作为</font></font><code>CashFlow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该帐户的对象，延长了两个季度。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables1.png" alt="tables1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图46. CashFlows和Account</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用两个规则来确定该季度的借方和贷方，并更新帐户余额。</font><font style="vertical-align: inherit;">以下两条规则限制了特定时间段内帐户的现金流量。</font><font style="vertical-align: inherit;">注意“&amp;&amp;”使用快捷语法来避免重复两次字段名称。</font></font></p>
</div>
<table class="tableblock frame-void grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"increase balance for credits"</span>
<span class="hljs-keyword">when</span>
  ap <span class="hljs-symbol">:</span> <span class="hljs-constant">AccountPeriod</span>()<font></font>
  acc <span class="hljs-symbol">:</span> <span class="hljs-constant">Account</span>( <span class="hljs-variable">$accountNo</span> <span class="hljs-symbol">:</span> accountNo )
  <span class="hljs-constant">CashFlow</span>( type == <span class="hljs-constant">CREDIT</span>,<font></font>
            accountNo == <span class="hljs-variable">$accountNo</span>,<font></font>
            date &gt;= ap.start &amp;&amp; &lt;= ap.<span class="hljs-keyword">end</span>,
            <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount )
<span class="hljs-keyword">then</span>
  acc.balance  += <span class="hljs-variable">$amount</span>;
<span class="hljs-keyword">end</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"decrease balance for debits"</span>
<span class="hljs-keyword">when</span>
  ap <span class="hljs-symbol">:</span> <span class="hljs-constant">AccountPeriod</span>()<font></font>
  acc <span class="hljs-symbol">:</span> <span class="hljs-constant">Account</span>( <span class="hljs-variable">$accountNo</span> <span class="hljs-symbol">:</span> accountNo )
  <span class="hljs-constant">CashFlow</span>( type == <span class="hljs-constant">DEBIT</span>,<font></font>
            accountNo == <span class="hljs-variable">$accountNo</span>,<font></font>
            date &gt;= ap.start &amp;&amp; &lt;= ap.<span class="hljs-keyword">end</span>,
            <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount )
<span class="hljs-keyword">then</span>
  acc.balance -= <span class="hljs-variable">$amount</span>;
<span class="hljs-keyword">end</span></code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前我们展示了规则如何等同于SQL，这通常可以帮助具有SQL背景的人理解规则。</font><font style="vertical-align: inherit;">上面的两个规则可以用两个视图表示，每个视图都有一个触发器，如下所示：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql"><span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">Account</span> <span class="hljs-keyword">acc</span>,
              Cashflow cf,
              AccountPeriod ap
<span class="hljs-keyword">where</span> <span class="hljs-keyword">acc</span>.accountNo == cf.accountNo <span class="hljs-keyword">and</span>
      cf.<span class="hljs-keyword">type</span> == CREDIT <span class="hljs-keyword">and</span>
      cf.<span class="hljs-built_in">date</span> &gt;= ap.<span class="hljs-keyword">start</span> <span class="hljs-keyword">and</span>
      cf.<span class="hljs-built_in">date</span> &lt;= ap.<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql hljs" data-lang="sql"><span class="hljs-operator"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">Account</span> <span class="hljs-keyword">acc</span>,
              Cashflow cf,
              AccountPeriod ap
<span class="hljs-keyword">where</span> <span class="hljs-keyword">acc</span>.accountNo == cf.accountNo <span class="hljs-keyword">and</span>
      cf.<span class="hljs-keyword">type</span> == DEBIT <span class="hljs-keyword">and</span>
      cf.<span class="hljs-built_in">date</span> &gt;= ap.<span class="hljs-keyword">start</span> <span class="hljs-keyword">and</span>
      cf.<span class="hljs-built_in">date</span> &lt;= ap.<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">trigger</span> : acc.balance += cf.amount</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">trigger</span> : acc.balance -= cf.amount</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code>AccountPeriod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为第一季度，我们约束规则“增加信用余额”以触发两行数据并“减少借记余额”以对一行数据进行操作。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables2.png" alt="tables2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图47. AccountingPeriod，CashFlows和Account</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的两个现金流表表示两个规则的匹配数据。</font><font style="vertical-align: inherit;">数据在插入阶段匹配，正如您在上一章中发现的那样，不会直接触发，而是仅在</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">之后触发</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同时，规则及其匹配数据被放在议程上，称为Ruie匹配或规则实例。</font><font style="vertical-align: inherit;">议程是一个规则匹配表，只要调用fireAllRules（），就可以触发并执行其后果。</font><font style="vertical-align: inherit;">议程上的规则匹配被称为</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冲突集</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ，其执行由冲突解决策略决定。</font><font style="vertical-align: inherit;">请注意，到目前为止执行的顺序被认为是任意的。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables7.png" alt="tables7">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图48. CashFlows和Account</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在触发所有上述激活后，该帐户的余额为-25。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables3.png" alt="tables3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图49. CashFlows和Account</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code>AccountPeriod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新到第二季度，我们只有一个匹配的数据行，因此在议程上只有一个规则匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活该激活会导致25的余额。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables4.png" alt="tables4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图50. CashFlows和Account</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables5.png" alt="tables5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图51. CashFlows和Account</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_conflict_resolution"><a class="anchor" href="index.html#_conflict_resolution"></a><a class="link" href="index.html#_conflict_resolution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2.2。</font><font style="vertical-align: inherit;">解决冲突</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您不希望规则执行的顺序是任意的，该怎么办？</font><font style="vertical-align: inherit;">当议程中存在一个或多个规则匹配时，它们被认为存在冲突，并且冲突解决策略用于确定执行的顺序。</font><font style="vertical-align: inherit;">Drools策略非常简单，基于显着性值，为规则赋予优先级。</font><font style="vertical-align: inherit;">每个规则的默认值为0，值越高，优先级越高。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为一般规则，最好不要依赖以任何特定顺序触发的规则，并且在不担心“流程”的情况下编写规则。</font><font style="vertical-align: inherit;">然而，当需要流动时，除了显着性之外还存在许多可能性：议程组，规则流组，激活组和控制/信号量事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Drools 6.0开始，源文件中的规则定义顺序用于在显着性之后设置优先级。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_salience"><a class="anchor" href="index.html#_salience"></a><a class="link" href="index.html#_salience"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2.3。</font><font style="vertical-align: inherit;">凸显</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了说明Salience，我们添加了一个规则来打印帐户余额，我们希望在所有帐户的所有借记和贷记都应用之后执行此规则。</font><font style="vertical-align: inherit;">我们通过为此规则指定负面显着性来实现此目的，以便在具有默认显着性0的所有规则之后触发。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Print balance for AccountPeriod"</span>
        salience -<span class="hljs-number">50</span>
    <span class="hljs-keyword">when</span>
        ap <span class="hljs-symbol">:</span> <span class="hljs-constant">AccountPeriod</span>()<font></font>
        acc <span class="hljs-symbol">:</span> <span class="hljs-constant">Account</span>()
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println( acc.accountNo + <span class="hljs-string">" : "</span> + acc.balance );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下表描述了由此产生的议程。</font><font style="vertical-align: inherit;">三个借记和贷记规则显示为任意顺序，而打印规则排在最后，以后执行。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/tables6.png" alt="tables6">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图52. CashFlows和账户</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_agenda_groups"><a class="anchor" href="index.html#_agenda_groups"></a><a class="link" href="index.html#_agenda_groups"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2.4。</font><font style="vertical-align: inherit;">议程小组</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组允许您将规则放入组中，并将这些组放入堆栈中。</font><font style="vertical-align: inherit;">堆栈有push / pop bevaviour。</font><font style="vertical-align: inherit;">调用“setFocus”将组放入堆栈：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getAgenda().getAgendaGroup( <span class="hljs-string">"Group A"</span> ).setFocus();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程总是评估堆栈的顶部。</font><font style="vertical-align: inherit;">当为组触发了所有规则时，它将从堆栈中弹出，并评估下一个组。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">rule <span class="hljs-string">"increase balance for credits"</span>
  agenda-group <span class="hljs-string">"calculation"</span><font></font>
when<font></font>
  ap : AccountPeriod()<font></font>
  acc : Account( $accountNo : accountNo )<font></font>
  CashFlow( type == CREDIT,<font></font>
            accountNo == $accountNo,<font></font>
            date &gt;= ap.start &amp;&amp; &lt;= ap.end,<font></font>
            $amount : amount )<font></font>
then<font></font>
  acc.balance  += $amount;<font></font>
end</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">rule <span class="hljs-string">"Print balance for AccountPeriod"</span>
  agenda-group <span class="hljs-string">"report"</span><font></font>
when<font></font>
  ap : AccountPeriod()<font></font>
  acc : Account()<font></font>
then<font></font>
  System.out.println( acc.accountNo +<font></font>
                      <span class="hljs-string">" : "</span> + acc.balance );<font></font>
end</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先将焦点设置为“报告”组，然后将焦点放在“计算”上，我们确保首先评估组。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Agenda agenda = ksession.getAgenda();<font></font>
agenda.getAgendaGroup( <span class="hljs-string">"report"</span> ).setFocus();<font></font>
agenda.getAgendaGroup( <span class="hljs-string">"calculation"</span> ).setFocus();<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rule_flow"><a class="anchor" href="index.html#_rule_flow"></a><a class="link" href="index.html#_rule_flow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2.2.5。</font><font style="vertical-align: inherit;">规则流程</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还具有规则流组属性，允许工作流程图以声明方式指定何时允许触发规则。</font><font style="vertical-align: inherit;">下面的截图是使用Drools插件从Eclipse中获取的。</font><font style="vertical-align: inherit;">它有两个规则流组节点，可确保在报告规则之前执行计算规则。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ruleflow.png" alt="规则流">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则中ruleflow-group属性的使用如下所示。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"increase balance for credits"</span>
  ruleflow-group <span class="hljs-string">"calculation"</span>
<span class="hljs-keyword">when</span>
  ap <span class="hljs-symbol">:</span> <span class="hljs-constant">AccountPeriod</span>()<font></font>
  acc <span class="hljs-symbol">:</span> <span class="hljs-constant">Account</span>( <span class="hljs-variable">$accountNo</span> <span class="hljs-symbol">:</span> accountNo )
  <span class="hljs-constant">CashFlow</span>( type == <span class="hljs-constant">CREDIT</span>,<font></font>
            accountNo == <span class="hljs-variable">$accountNo</span>,<font></font>
            date &gt;= ap.start &amp;&amp; &lt;= ap.<span class="hljs-keyword">end</span>,
            <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount )
<span class="hljs-keyword">then</span>
  acc.balance  += <span class="hljs-variable">$amount</span>;
<span class="hljs-keyword">end</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Print balance for AccountPeriod"</span>
  ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"report"</span>
<span class="hljs-keyword">when</span><font></font>
  ap : AccountPeriod()<font></font>
  acc : Account()<font></font>
then<font></font>
  System.<span class="hljs-keyword">out</span>.println( acc.accountNo +
                      <span class="hljs-string">" : "</span> + acc.balance );<font></font>
end</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inference"><a class="anchor" href="index.html#_inference"></a><a class="link" href="index.html#_inference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3。</font><font style="vertical-align: inherit;">推理</font></font></a></h3>
<div class="sect3">
<h4 id="_bus_pass_example"><a class="anchor" href="index.html#_bus_pass_example"></a><a class="link" href="index.html#_bus_pass_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3.1。</font><font style="vertical-align: inherit;">巴士通行证示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如今，推理有一个糟糕的名称，因为它与业务用例无关，而且太复杂而无法使用。</font><font style="vertical-align: inherit;">确实，人为和复杂的例子都是通过推理出现的，但这不应该减损这样一个事实，那就是存在简单而有用的事实。</font><font style="vertical-align: inherit;">但更重要的是，正确使用推理可以创建更灵活，更容易出错的业务规则，这些规则更易于维护。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么什么是推论呢？</font><font style="vertical-align: inherit;">当我们通过使用先前的知识获得某些知识时，会推断出一些东西。</font><font style="vertical-align: inherit;">例如，给定具有年龄字段的人事实和提供年龄政策控制的规则，我们可以推断出一个人是成人还是孩子，并对此采取行动。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Infer Adult"</span>
<span class="hljs-keyword">when</span>
  <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &gt;= <span class="hljs-number">18</span> )
<span class="hljs-keyword">then</span>
  insert( new <span class="hljs-constant">IsAdult</span>( <span class="hljs-variable">$p</span> ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于前面的规则，每个18岁或以上的人都会为他们插入一个IsAdult实例。</font><font style="vertical-align: inherit;">这个事实很特别，因为它被称为一种关系。</font><font style="vertical-align: inherit;">我们可以在任何规则中使用此推断关系：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$p</span> : Person()<font></font>
IsAdult( person == <span class="hljs-variable">$p</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以现在我们知道推理是什么，并有一个基本的例子，这如何促进良好的规则设计和维护？</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们带一个政府部门负责在儿童成年后签发身份证，以后称为身份证部门。</font><font style="vertical-align: inherit;">他们可能有一个包含这样的逻辑的决策表，其中说当一个居住在伦敦的成年人年满18岁或以上时，发卡：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/monolithic.png" alt="单片">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是ID部门没有制定关于成年人的政策。</font><font style="vertical-align: inherit;">这是在中央政府层面完成的。</font><font style="vertical-align: inherit;">如果中央政府将这个年龄改为21岁，这将启动变革管理流程。</font><font style="vertical-align: inherit;">有人必须与身份证部门保持联络，并确保他们的系统得到更新，以便法律上线。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这种变更管理流程和部门之间的通信对于敏捷环境来说并不理想，变更变得昂贵且容易出错。</font><font style="vertical-align: inherit;">此外，卡部门正在管理比其需要了解的更多信息，其“规则管理”的“单一”方法是“泄漏”更好地放置在其他地方的信息。</font><font style="vertical-align: inherit;">我的意思是，它并不关心明确的</font></font><span class="menuseq"><span class="menu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;▸ </font></font><span class="menuitem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 18</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信息决定某人是否是成年人，只知道他们是成年人。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与此相反，让我们采用一种方法来分离（分离）创作职责，以便中央政府和ID部门都保持自己的规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定谁是成年人是中央政府的职责。</font><font style="vertical-align: inherit;">如果他们改变法律，他们只需使用新规则更新其中央存储库，其他人使用：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InferIsAdult.png" alt="InferIsAdult">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，IsAdult事实是从策略规则中推断出来的。</font><font style="vertical-align: inherit;">它封装了看似随意的逻辑</font></font><span class="menuseq"><span class="menu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年代</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;▸ </font></font><span class="menuitem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 18，</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其含义提供了语义抽象。</font><font style="vertical-align: inherit;">现在，如果有人使用上述规则，他们就不再需要知道确定某人是否是成年人的明确信息。</font><font style="vertical-align: inherit;">他们可以使用推断的事实：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/IssueIdCard.png" alt="IssueIdCard">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然这个例子非常简单而且微不足道，但它说明了一些重点。</font><font style="vertical-align: inherit;">我们从知识工程的整体和漏洞开始。</font><font style="vertical-align: inherit;">我们创建了一个单一的决策表，其中包含所有可能的信息，并从中央政府那里泄漏了ID部门不关心且不想管理的信息。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们首先将知识过程解耦，因此每个部门只负责它需要知道的事情。</font><font style="vertical-align: inherit;">然后，我们使用推断的事实IsAdult封装了这个泄漏的知识。</font><font style="vertical-align: inherit;">IsAdult一词的使用也给以前任意逻辑</font></font><span class="menuseq"><span class="menu"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;▸ </font></font><span class="menuitem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= 18</font></font></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了语义抽象</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，在进行知识工程时，一般的经验法则是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坏</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单片</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">漏</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">好</font></font></strong></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分离知识责任</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">封装知识</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为这些封装提供语义抽象</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_truth_maintenance_with_logical_objects"><a class="anchor" href="index.html#_truth_maintenance_with_logical_objects"></a><a class="link" href="index.html#_truth_maintenance_with_logical_objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4。</font><font style="vertical-align: inherit;">使用逻辑对象进行真相维护</font></font></a></h3>
<div class="sect3">
<h4 id="_overview"><a class="anchor" href="index.html#_overview"></a><a class="link" href="index.html#_overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4.1。</font><font style="vertical-align: inherit;">概观</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经常插入后，您必须明确地收回事实。</font><font style="vertical-align: inherit;">使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断言时，断言的事实将在首先断言它的条件不再成立时自动收回。</font><font style="vertical-align: inherit;">实际上，它甚至更聪明，因为只有在没有任何单一条件支持逻辑断言的情况下它才会被收回。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">据说可以</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">说明</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正常插入</font><font style="vertical-align: inherit;">，即，就像“陈述事实”的直观含义所暗示的那样。</font><font style="vertical-align: inherit;">使用a </font></font><code>HashMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和计数器，我们跟踪特定平等的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陈述次数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">这意味着我们计算有多少不同的实例是相等的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们</font><font style="vertical-align: inherit;">在RHS执行期间</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入对象时，我们被认为是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合理的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且它被认为是由触发规则证明的。</font><font style="vertical-align: inherit;">对于每个逻辑插入，只能有一个相等的对象，并且每个后续的相等逻辑插入增加了该逻辑断言的调整计数器。</font><font style="vertical-align: inherit;">LHS认为创建规则变得不真实，并且计数器相应减少。</font><font style="vertical-align: inherit;">只要我们没有理由，逻辑对象就会自动收回。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们试图</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在逻辑上</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入一个对象时，有一个平等的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规定</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，这将失败并返回null。</font><font style="vertical-align: inherit;">如果我们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个具有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的对象，那么</font><font style="vertical-align: inherit;">我们会覆盖Fact; </font><font style="vertical-align: inherit;">此覆盖的工作方式取决于配置设置</font></font><code>WM_BEHAVIOR_PRESERVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当属性设置为discard时，我们使用现有句柄并用新Object替换现有实例，这是默认行为; </font><font style="vertical-align: inherit;">否则我们将其覆盖到</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">陈述</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但我们创建一个新的</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这可能会在第一次阅读时引起混淆，因此希望下面的流程图有所帮助。</font><font style="vertical-align: inherit;">当它表示它返回一个新的时</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这也表明它</font></font><code>Object</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是通过网络传播的。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Stated_Assertion.png" alt="陈述断言">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图53.陈述插入</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Logical_Assertion.png" alt="逻辑断言">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图54.逻辑插入</font></font></div>
</div>
<div class="sect4">
<h5 id="_bus_pass_example_with_inference_and_tms"><a class="anchor" href="index.html#_bus_pass_example_with_inference_and_tms"></a><a class="link" href="index.html#_bus_pass_example_with_inference_and_tms"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4.1.1。</font><font style="vertical-align: inherit;">具有推理和TMS的总线通行示例</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的例子是向18岁以上的人发行身份证，在这个例子中，我们现在发出公共汽车通行证，无论是儿童通行证还是成人通行证。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Issue Child Bus Pass"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &lt; <span class="hljs-number">16</span> )
<span class="hljs-keyword">then</span>
    insert(new <span class="hljs-constant">ChildBusPass</span>( <span class="hljs-variable">$p</span> ) );
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Issue Adult Bus Pass"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &gt;= <span class="hljs-number">16</span> )
<span class="hljs-keyword">then</span>
    insert(new <span class="hljs-constant">AdultBusPass</span>( <span class="hljs-variable">$p</span> ) );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，上述示例被认为是整体的，泄漏并且提供不良的关注点分离。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和以前一样，我们可以提供更强大的应用程序，并使用推理分离关注点。</font><font style="vertical-align: inherit;">注意这次我们不只是插入推断的对象，我们使用“insertLogical”：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Infer Child"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &lt; <span class="hljs-number">16</span> )
<span class="hljs-keyword">then</span>
    insertLogical( new <span class="hljs-constant">IsChild</span>( <span class="hljs-variable">$p</span> ) )
<span class="hljs-keyword">end</span>
rule <span class="hljs-string">"Infer Adult"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &gt;= <span class="hljs-number">16</span> )
<span class="hljs-keyword">then</span>
    insertLogical( new <span class="hljs-constant">IsAdult</span>( <span class="hljs-variable">$p</span> ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“insertLogical”是Drools Truth Maintenance System（TMS）的一部分。</font><font style="vertical-align: inherit;">当逻辑插入事实时，这个事实取决于“when”子句的真实性。</font><font style="vertical-align: inherit;">这意味着当规则变为假时，事实会自动收回。</font><font style="vertical-align: inherit;">由于两个规则是互斥的，因此效果特别好。</font><font style="vertical-align: inherit;">因此，在上述规则中，如果此人未满16岁，则会插入一个IsChild事实，一旦此人为16岁或以上，IsChild事实将自动收回并插入IsAdult事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回到代码发出总线传递，这两个规则可以+逻辑插入ChildBusPass和AdultBusPass事实，因为TMS +支持链接一组级联缩进的逻辑插入。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Issue Child Bus Pass"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( )
         <span class="hljs-constant">IsChild</span>( person == <span class="hljs-variable">$p</span> )
<span class="hljs-keyword">then</span>
    insertLogical(new <span class="hljs-constant">ChildBusPass</span>( <span class="hljs-variable">$p</span> ) );
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Issue Adult Bus Pass"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( age &gt;= <span class="hljs-number">16</span> )
         <span class="hljs-constant">IsAdult</span>( person =<span class="hljs-variable">$p</span> )
<span class="hljs-keyword">then</span>
    insertLogical(new <span class="hljs-constant">AdultBusPass</span>( <span class="hljs-variable">$p</span> ) );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，当一个人从15变为16时，不仅IsChild事实会自动收回，那么该人的ChildBusPass事实也是如此。</font><font style="vertical-align: inherit;">对于奖励积分，我们可以将其与“非”条件元素结合起来处理通知，在这种情况下，请求返回通行证。</font><font style="vertical-align: inherit;">因此，当TMS自动缩回ChildBusPass对象时，此规则会触发并向该人发送请求：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Return ChildBusPass Request "</span><span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( )
         <span class="hljs-keyword">not</span>( <span class="hljs-constant">ChildBusPass</span>( person == <span class="hljs-variable">$p</span> ) )
<span class="hljs-keyword">then</span>
    requestChildBusPass( <span class="hljs-variable">$p</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_important_note_equality_for_java_objects"><a class="anchor" href="index.html#_important_note_equality_for_java_objects"></a><a class="link" href="index.html#_important_note_equality_for_java_objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4.1.2。</font><font style="vertical-align: inherit;">重要说明：Java对象的平等性</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要注意，要使Truth Maintenance（和逻辑断言）完全正常工作，Fact对象（可能是JavaBeans）必须正确地覆盖equals和hashCode方法（来自java.lang.Object）。</font><font style="vertical-align: inherit;">由于真值维护系统需要知道，当两个不同的物理对象的值相等，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于和hashCode必须正确重写，按照Java标准。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当它们的equals方法为彼此返回true并且它们的hashCode方法返回相同的值时，两个对象是相等的。</font><font style="vertical-align: inherit;">有关更多详细信息，请参阅Java API（但请记住，您</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖equals和hashCode）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TMS行为不受Identity与Equality的theruntime配置的影响，TMS始终是相等的。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_deleting_stated_or_logically_asserted_facts_from_the_working_memory"><a class="anchor" href="index.html#_deleting_stated_or_logically_asserted_facts_from_the_working_memory"></a><a class="link" href="index.html#_deleting_stated_or_logically_asserted_facts_from_the_working_memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4.1.3。</font><font style="vertical-align: inherit;">从工作记忆中删除陈述或逻辑断言的事实</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，当从工作内存中删除事实时，Drools会尝试将其从所声明的事实集合中删除，并且在逻辑声明的情况下也从真理维护系统中删除它。</font><font style="vertical-align: inherit;">但是，使用delete方法的重载，也可以仅从其中一个中删除它。例如，调用：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">ksession</span><span class="hljs-class">.delete</span>( <span class="hljs-tag">factHandle</span>, <span class="hljs-tag">FactHandle</span><span class="hljs-class">.State</span><span class="hljs-class">.LOGICAL</span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在逻辑上断言的情况下才会删除该事实，但如果它是一个陈述的事实则不会被删除。</font><font style="vertical-align: inherit;">在这种情况下，如果已经声明其删除失败，则会被忽略。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decision_tables_in_spreadsheets"><a class="anchor" href="index.html#_decision_tables_in_spreadsheets"></a><a class="link" href="index.html#_decision_tables_in_spreadsheets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5。</font><font style="vertical-align: inherit;">电子表格中的决策表</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表是表示条件逻辑的“精确但紧凑”（参考维基百科）方式，非常适合</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持以电子表格格式管理规则。</font><font style="vertical-align: inherit;">支持的格式是Excel（XLS）和CSV，这意味着可以使用各种电子表格程序（例如Microsoft Excel，OpenOffice.org Calc等）。</font><font style="vertical-align: inherit;">预计基于Web的决策表编辑器将包含在不久的将来版本中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表是一个旧概念（用软件术语表示），但多年来证明是有用的。</font><font style="vertical-align: inherit;">简而言之，在Drools中，决策表是一种根据输入电子表格的数据生成规则的方法。</font><font style="vertical-align: inherit;">可以利用用于数据捕获和操纵的电子表格的所有常规特征。</font></font></p>
</div>
<div class="sect3">
<h4 id="_when_to_use_decision_tables"><a class="anchor" href="index.html#_when_to_use_decision_tables"></a><a class="link" href="index.html#_when_to_use_decision_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.1。</font><font style="vertical-align: inherit;">何时使用决策表</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果存在可以表示为规则模板和数据的规则，则将决策表视为一种行动方案：决策表的每一行都提供与模板组合以生成规则的数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许多企业已经使用电子表格来管理数据，计算等。如果您乐意继续这种方式，您也可以通过这种方式管理业务规则。</font><font style="vertical-align: inherit;">这也假设您很乐意在</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.xls</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 或</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.csv</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 文件中</font><font style="vertical-align: inherit;">管理规则包</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于不遵循一组模板的规则，或者存在少量规则（或者如果不喜欢Excel或OpenOffice.org等软件），建议不要使用决策表。</font><font style="vertical-align: inherit;">它们是理想的，可以控制</font><font style="vertical-align: inherit;">可以编辑规则的</font><font style="vertical-align: inherit;">哪些</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不直接暴露规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表还提供与基础对象模型的一定程度的隔离。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_overview_2"><a class="anchor" href="index.html#_overview_2"></a><a class="link" href="index.html#_overview_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.2。</font><font style="vertical-align: inherit;">概观</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是现实世界决策表的一些示例（略微编辑以保护无辜者）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/excel.png" alt="高强">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图55.使用Excel编辑决策表</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/actions.png" alt="行动">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图56.规则行的多个操作</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/open_office.png" alt="开发办公室">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图57.使用OpenOffice.org</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，决策表的技术方面已被折叠（使用标准电子表格功能）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则从第17行开始，每行产生一个规则。</font><font style="vertical-align: inherit;">条件在列C，D，E等中，操作在屏幕外。</font><font style="vertical-align: inherit;">单元格中的值非常简单，其含义由第16行中的标题指示。列B只是一个描述。</font><font style="vertical-align: inherit;">通常使用颜色来明确表中不同区域的含义。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，尽管决策表看起来像是自上而下处理，但情况并非如此。</font><font style="vertical-align: inherit;">理想情况下，编写规则时不考虑行的顺序，只是因为这样可以使维护更容易，因为行不需要一直移动。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于每行都是规则，因此适用相同的原则。</font><font style="vertical-align: inherit;">当Drools引擎处理事实时，任何匹配的规则都可能触发。</font><font style="vertical-align: inherit;">（有些人对此感到困惑。当规则触发并模拟一个非常简单的决策表时，可以清除议程，其中只有第一个匹配影响一个动作。）另请注意，您可以在一个电子表格上有多个表。</font><font style="vertical-align: inherit;">这样，规则可以在共享公共模板的位置进行分组，但在一天结束时，它们都被合并到一个规则包中。</font><font style="vertical-align: inherit;">决策表本质上是一种自动生成DRL规则的工具。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/multi_table.png" alt="多表">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图58.使用多个表进行分组规则的真实示例</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_how_decision_tables_work"><a class="anchor" href="index.html#_how_decision_tables_work"></a><a class="link" href="index.html#_how_decision_tables_work"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.3。</font><font style="vertical-align: inherit;">决策表的工作原理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要记住的关键点是，在决策表中，每一行都是一条规则，该行中的每一列都是该规则的条件或操作。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/row_col.png" alt="行col">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图59.行和列</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电子表格查找</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleTable</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 关键字以指示规则表的开始（起始行和列）。</font><font style="vertical-align: inherit;">其他关键字也用于定义其他包级别属性（稍后介绍）。</font><font style="vertical-align: inherit;">将关键字保留在一列中非常重要。</font><font style="vertical-align: inherit;">按照惯例，第二列（“B”）用于此，但它可以是任何列（惯例是在左侧留下边距用于注释）。</font><font style="vertical-align: inherit;">在下图中，C实际上是它开始的列。</font><font style="vertical-align: inherit;">忽略了左边的所有内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们扩展隐藏的部分，它开始更有意义的工作方式; </font><font style="vertical-align: inherit;">请注意C列中的关键字。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/expanded.png" alt="扩大">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图60.扩展了规则模板</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以看到让它起作用的隐藏魔法。</font><font style="vertical-align: inherit;">RuleSet关键字指示要在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则包</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">使用的名称，该名称</font><font style="vertical-align: inherit;">将包含所有规则。</font><font style="vertical-align: inherit;">此名称是可选的，使用默认值，但它</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在右侧单元格中</font><font style="vertical-align: inherit;">具有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleSet</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C列中可见的其他关键字是导入和顺序，稍后将介绍。</font><font style="vertical-align: inherit;">RuleTable关键字非常重要，因为它表示将根据某些规则模板遵循一大块规则。</font><font style="vertical-align: inherit;">在RuleTable关键字之后有一个名称，用于为生成的规则的名称添加前缀。</font><font style="vertical-align: inherit;">附加工作表名称和行号以保证唯一的规则名称。</font></font></p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleTable名称与工作表名称相结合，在同一个KieBase中的所有电子表格文件中必须是唯一的。</font><font style="vertical-align: inherit;">如果不是这种情况，则某些规则可能具有相同的名称，并且只应用其中一个规则。</font><font style="vertical-align: inherit;">要显示此类被忽略的规则，请</font></font><a href="index.html#_changingthedefaultbuildresultseverity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提高此类规则名称冲突的严重性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleTable列表示规则开始的列; </font><font style="vertical-align: inherit;">左侧的列将被忽略。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，关键字组成名称 - 值对。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考第14行（紧接在RuleTable之后的行），关键字CONDITION和ACTION指示下面列中的数据用于规则的LHS或RHS部分。</font><font style="vertical-align: inherit;">规则上还有其他属性，也可以选择这种方式设置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第15行包含</font></font><em class="term"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectTypes的声明</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
。</font><font style="vertical-align: inherit;">此行中的内容是可选的，但如果未使用此选项，则该行必须留空; </font><font style="vertical-align: inherit;">但是这个选项通常非常有用。</font><font style="vertical-align: inherit;">使用此行时，下面单元格（第16行）中的值将成为该对象类型的约束。</font><font style="vertical-align: inherit;">在上面的例子中，它生成</font></font><code>Person(age=="42")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>Cheese(type=="stilton")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中42和“stilton”来自第18行。在上面的例子中，“==”是隐含的; </font><font style="vertical-align: inherit;">如果仅给出字段名称，则翻译者假定它是生成完全匹配。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectType声明可以跨越列（通过合并单元格），这意味着合并范围下的所有列将组合成单个模式中的一组约束，一次匹配单个事实，而不是包含该组合的非合并单元格。相同的ObjectType，但导致不同的模式，可能匹配不同或相同的事实。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第16行包含规则模板本身。</font><font style="vertical-align: inherit;">他们可以使用“$ param”占位符来指示应插入下面单元格的数据。</font><font style="vertical-align: inherit;">（对于多次插入，请使用“$ 1”，“$ 2”等，指示下面单元格中逗号分隔列表中的参数。）第17行被忽略; </font><font style="vertical-align: inherit;">它可能包含列的用途的文本描述。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行18和19示出了数据，其将与行15中的模板组合（插值）以生成规则。</font><font style="vertical-align: inherit;">如果单元格不包含任何数据，则忽略其模板。</font><font style="vertical-align: inherit;">（这意味着某些条件或操作不适用于该规则行。）读取规则行，直到存在空行。</font><font style="vertical-align: inherit;">工作表中可以存在多个RuleTable。</font><font style="vertical-align: inherit;">第20行包含另一个关键字和值。</font><font style="vertical-align: inherit;">像这样的关键字的行位置无关紧要（大多数人将它们放在顶部），但它们的列应该与RuleTable或RuleSet关键字应该出现的列相同。</font><font style="vertical-align: inherit;">在我们的例子中，选择C列是重要的，但可以使用任何其他列。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，规则将呈现如下（因为它使用“ObjectType”行）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//第18行</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
规则“Cheese_fans_18”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
什么时候</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    人（年龄== “42”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    奶酪（类型==“斯蒂尔顿”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
然后</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    list.add（“老人斯蒂尔顿”）;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
结束</font></font></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束</font></font><code>age=="42"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>type=="stilton"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解释为单个约束，将被添加到上面单元格中的相应ObjectType。</font><font style="vertical-align: inherit;">如果上面的单元格被跨越，则一个“列”可能存在多个约束。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常大的决策表可能具有非常大的内存要求。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_spreadsheet_syntax"><a class="anchor" href="index.html#_spreadsheet_syntax"></a><a class="link" href="index.html#_spreadsheet_syntax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4。</font><font style="vertical-align: inherit;">电子表格语法</font></font></a></h4>
<div class="sect4">
<h5 id="_spreadsheet_structure"><a class="anchor" href="index.html#_spreadsheet_structure"></a><a class="link" href="index.html#_spreadsheet_structure"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4.1。</font><font style="vertical-align: inherit;">电子表格结构</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两种类型的矩形区域定义用于生成DRL文件的数据。</font><font style="vertical-align: inherit;">其中一个标有标记的单元格</font></font><code>RuleSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，定义除规则之外的所有DRL项目。</font><font style="vertical-align: inherit;">另一个可能重复出现，位于内容开头的单元格的右侧和下方</font></font><code>RuleTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些区域代表实际的决策表，每个区域产生一组类似结构的规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则集区域可以包含单元格对，单元格对应于</font></font><code>RuleSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单元</font><font style="vertical-align: inherit;">格对，</font><font style="vertical-align: inherit;">并且包含指定包含在同一行中的另一个中包含的值类型的关键字。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则表区域的列定义了从中派生的规则左侧的模式和约束，规则后果的操作以及各个规则属性的值。</font><font style="vertical-align: inherit;">因此，规则表区域应包含一个或多个列，包括条件和操作，以及规则属性的任意列选择，每个列最多一列。</font><font style="vertical-align: inherit;">带有标记单元格的行后面的前四行</font></font><code>RuleTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被指定为标题区域，主要用于构造规则的代码定义。</font><font style="vertical-align: inherit;">这四个标题行下面的任何附加行都会产生另一个规则，其数据提供了规则表标题中定义的代码的变体。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有关键字都不区分大小写。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅检查第一个工作表的决策表。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_rule_set_entries"><a class="anchor" href="index.html#_rule_set_entries"></a><a class="link" href="index.html#_rule_set_entries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4.2。</font><font style="vertical-align: inherit;">规则集条目</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则集区域中的条目可以定义DRL构造（规则除外），并指定规则属性。</font><font style="vertical-align: inherit;">虽然可以重复使用构造的条目，但每个规则属性最多可以给出一次，并且它适用于所有规则，除非它被规则表区域中定义的相同属性否决。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条目必须以垂直堆叠的单元对序列给出。</font><font style="vertical-align: inherit;">第一个包含一个关键字，右边一个包含值，如下表所示。</font><font style="vertical-align: inherit;">只要标记的列</font></font><code>RuleSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被保留为包含关键字</font><font style="vertical-align: inherit;">的列，</font><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">该单元格序列可以被空白行或甚至规则表中断</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表4.规则集区域中的条目</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键词</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用法</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则集</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的DRL文件的包名称。</font><font style="vertical-align: inherit;">可选，默认为</font></font><code>rule_table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是第一次入场。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺序</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“对或错”。</font><font style="vertical-align: inherit;">如果“是”，那么突出用于确保规则从上到下发射。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，最多一次。</font><font style="vertical-align: inherit;">如果省略，则不施加点火顺序。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SequentialMaxPriority</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数数值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，最多一次。</font><font style="vertical-align: inherit;">在顺序模式下，此选项用于设置突出显示的起始值。</font><font style="vertical-align: inherit;">如果省略，则默认值为65535。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SequentialMinPriority</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数数值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，最多一次。</font><font style="vertical-align: inherit;">在顺序模式下，此选项用于检查是否未违反此最小显着性值。</font><font style="vertical-align: inherit;">如果省略，则默认值为0。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EscapeQuotes</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“对或错”。</font><font style="vertical-align: inherit;">如果为“true”，则引号将被转义，以便它们在字面上显示在DRL中。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，最多一次。</font><font style="vertical-align: inherit;">如果省略，则转义引号。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumericDisabled</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“对或错”。</font><font style="vertical-align: inherit;">如果为“true”，则String表示用于DRL而不是Numeric单元格的double值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，最多一次。</font><font style="vertical-align: inherit;">如果省略，则使用double值。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进口</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要导入的以逗号分隔的Java类列表。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，可反复使用。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL全局变量的声明，即一个后跟变量名的类型。</font><font style="vertical-align: inherit;">必须使用逗号分隔多个全局定义。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，可反复使用。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据DRL语法，一个或多个函数定义。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，可反复使用。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据DRL语法，一个或多个查询定义。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，可反复使用。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宣布</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据DRL语法，一个或多个声明类型。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，可反复使用。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些语言环境中，MS Office，LibreOffice和OpenOffice将以</font></font><code>"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同的方式</font><font style="vertical-align: inherit;">编码双引号</font><font style="vertical-align: inherit;">，这将导致编译错误。</font><font style="vertical-align: inherit;">差异往往很难看出来。</font><font style="vertical-align: inherit;">例如：</font></font><code>“A”</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会失败，但</font></font><code>"A"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会起作用。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要定义适用于生成的DRL文件中所有规则的规则属性，可以使用下表中的任何条目。</font><font style="vertical-align: inherit;">但请注意，必须使用正确的关键字。</font><font style="vertical-align: inherit;">而且，这些属性中的每一个只能使用一次。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则集区域中指定的规则属性将影响同一包中的所有规则资产（不仅在电子表格中）。</font><font style="vertical-align: inherit;">除非您确定电子表格是包中唯一的一个规则资产，否则建议不要在规则集区域中指定规则属性，而是在每个规则的规则表列中指定规则属性。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表5.“规则集”区域中的规则属性条目</font></font></caption>
<colgroup>
<col style="width: 35%;">
<col style="width: 5%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键词</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优先</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义规则的“显着性”值的整数。</font><font style="vertical-align: inherit;">被“顺序”标志覆盖。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DATE有效</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含日期和时间定义的字符串。</font><font style="vertical-align: inherit;">仅当当前日期和时间在</font></font><code>date-effective</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">之后时，才能激活规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例：</font></font><code>"4-Sep-2018"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DATE-EXPIRES</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ž</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含日期和时间定义的字符串。</font><font style="vertical-align: inherit;">如果当前日期和时间在</font></font><code>date-expires</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font><font style="vertical-align: inherit;">之后，则无法激活规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例：</font></font><code>"4-Oct-2018"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">期限</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义规则的“持续时间”值的长整数值。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TIMER</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ť</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计时器定义。</font><font style="vertical-align: inherit;">请参阅“计时器和日历”。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乙</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个布尔值。</font><font style="vertical-align: inherit;">“真实”使规则; </font><font style="vertical-align: inherit;">“false”禁用该规则。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CALENDARS</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ë</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日历定义。</font><font style="vertical-align: inherit;">请参阅“计时器和日历”。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NO-LOOP</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ü</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个布尔值。</font><font style="vertical-align: inherit;">“true”禁止由于其后果所做的更改而导致的规则循环。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LOCK-ON-ACTIVE</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大号</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个布尔值。</font><font style="vertical-align: inherit;">“true”禁止在同一规则流或议程组中设置此标志的所有规则的其他激活。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动对焦</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个布尔值。</font><font style="vertical-align: inherit;">对于议程组中的规则，“true”会导致规则的激活自动将焦点集中到该组。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活GROUP</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识激活（或XOR）组的字符串。</font><font style="vertical-align: inherit;">激活组中只有一个规则将被触发，即，第一个激活取消激活同一组内其他规则的任何现有激活。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程-GROUP</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识议程组的字符串，必须通过赋予其“焦点”来激活，这是控制规则组之间流动的一种方式。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则流-GROUP</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[R</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识规则流组的字符串。</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_rule_tables"><a class="anchor" href="index.html#_rule_tables"></a><a class="link" href="index.html#_rule_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4.3。</font><font style="vertical-align: inherit;">规则表</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有规则表都以包含“RuleTable”的单元格开头，可选地后跟同一单元格中的字符串。</font><font style="vertical-align: inherit;">该字符串用作从此规则表派生的所有规则的名称的初始部分，并附加行号以进行区分。</font><font style="vertical-align: inherit;">（可以使用NAME列覆盖此自动命名。）定义此规则表规则的所有其他单元格位于此单元格的下方和右侧。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一行定义列类型，每列导致条件或结果的一部分，或提供一些规则属性，规则名称或注释。</font><font style="vertical-align: inherit;">下表显示了哪些列标题可用; </font><font style="vertical-align: inherit;">根据显示上一节中给出的规则属性条目的表，可以使用其他列。</font><font style="vertical-align: inherit;">请注意，每个属性列最多只能使用一次。</font><font style="vertical-align: inherit;">对于列标题，请使用关键字或以这些表的“初始”列中给出的字母开头的任何其他单词。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表6.规则表中的列标题</font></font></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键词</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用法</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ñ</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供从该行生成的规则的名称。</font><font style="vertical-align: inherit;">默认值由RuleTable标记和行号后面的文本构成。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多一列</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一世</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本，在生成的规则中生成注释。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多一列</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在条件中的模式内构造约束的代码片段和插值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个规则表至少有一个</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行动</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于构造规则结果的操作的代码片段和插值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个规则表至少有一个</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于构造规则的元数据条目的代码片段和插值。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选，任意数量的列</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定一个标题为CONDITION的列，连续行中的单元格将生成条件元素。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONDITION下面的第一个单元格中的文本发展成规则条件的模式，下一行中的片段成为约束。</font><font style="vertical-align: inherit;">如果单元格与一个或多个邻居合并，则形成具有多个约束的单个模式：将所有约束组合到带括号的列表中并附加到该单元格中的文本。</font><font style="vertical-align: inherit;">单元格可以留空，这意味着下一行中的代码片段必须自己生成有效的条件元素。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要包含没有约束的模式，可以在文本前面为另一个模式编写模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用或不使用一对空括号来写入模式。</font><font style="vertical-align: inherit;">“from”子句可以附加到模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果模式以“eval”结尾，则代码片段应该生成布尔表达式，以便在“eval”之后包含在一对括号中。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONDITION下面的第二个单元格中的文本分两步处理。</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过插入列中较远的单元格中的值来修改此单元格中的代码段。</font><font style="vertical-align: inherit;">如果要创建一个约束，该约束包含使用“==”与下面单元格中的值进行比较，则仅使用字段选择器就足够了。</font><font style="vertical-align: inherit;">必须将任何其他比较运算符指定为代码段中的最后一项，并附加下面单元格中的值。</font><font style="vertical-align: inherit;">对于所有其他约束形式，您必须标记包含符号的单元格内容的位置</font></font><code>$param</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">多个插入是可能的，通过使用码元</font></font><code>$1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>$2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等等，和值在下面的细胞中的逗号分隔的列表。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据模式</font></font><code>forall(</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔符</font></font></em><code>){</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">片段的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本</font></font><code>}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过对</font><font style="vertical-align: inherit;">下面每个单元格中以逗号分隔的值列表的每个值</font><font style="vertical-align: inherit;">重复</font><font style="vertical-align: inherit;">一次</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">片段</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，插入值代替符号</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并通过加入这些扩展来扩展。给定</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔符</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">注意，forall构造可以被其他文本包围。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果前一行中的单元格不为空，则将完成的代码段添加到该单元格的条件元素中。</font><font style="vertical-align: inherit;">如果将多个约束添加到合并单元格中的模式，则会自动提供一对括号，以及分隔逗号。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果上面的单元格为空，则按原样使用插值结果。</font></font></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CONDITION下方第三个单元格中的文本仅供参考。</font><font style="vertical-align: inherit;">它应该用于向人类读者表明该列的目的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从第四行开始，非空白条目提供用于插值的数据，如上所述。</font><font style="vertical-align: inherit;">空白单元格导致省略此规则的条件元素或约束。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定一个标题为ACTION的列，连续行中的单元格将生成一个操作语句。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACTION下面的第一个单元格中的文本是可选的。</font><font style="vertical-align: inherit;">如果存在，则将其解释为对象引用。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACTION下面的第二个单元格中的文本分两步处理。</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过插入列中较远的单元格中的值来修改此单元格中的代码段。</font><font style="vertical-align: inherit;">对于单数插入，标记包含符号的单元格内容的位置</font></font><code>$param</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">多个插入是可能的，通过使用码元</font></font><code>$1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>$2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等等，和值在下面的细胞中的逗号分隔的列表。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有插值的方法调用可以通过没有任何标记符号的文本来实现。</font><font style="vertical-align: inherit;">在这种情况下，请使用下面一行中的任何非空白条目来包含该语句。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">forall构造也可以在这里找到。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果第一个单元格不为空，其文本后跟一个句点，则第二个单元格中的文本和终止分号被串在一起，从而产生一个方法调用，该调用将作为结果的操作语句添加。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果上面的单元格为空，则按原样使用插值结果。</font></font></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACTION下面的第三个单元格中的文本仅供参考。</font><font style="vertical-align: inherit;">它应该用于向人类读者表明该列的目的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从第四行开始，非空白条目提供用于插值的数据，如上所述。</font><font style="vertical-align: inherit;">空白单元格会导致省略此规则的操作声明。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数情况下</font><font style="vertical-align: inherit;">使用</font></font><code>$1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是</font></font><code>$param</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作，但如果替换文本包含逗号则会失败：然后，只插入第一个逗号前面的部分。</font><font style="vertical-align: inherit;">明智地使用这个“缩写”。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定一个标题为METADATA的列，连续行中的单元格会为生成的规则生成元数据注释。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">METADATA下面的第一个单元格中的文本将被忽略。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如上所述，METADATA下面的第二个单元格中的文本使用来自规则行中单元格的值进行插值。</font><font style="vertical-align: inherit;">元数据标记字符</font></font><code>@</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会自动添加前缀，因此不应包含在此单元格的文本中。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">METADATA下面的第三个单元格中的文本仅供参考。</font><font style="vertical-align: inherit;">它应该用于向人类读者表明该列的目的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从第四行开始，非空白条目提供用于插值的数据，如上所述。</font><font style="vertical-align: inherit;">空白单元格导致省略此规则的元数据注释。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_examples"><a class="anchor" href="index.html#_examples"></a><a class="link" href="index.html#_examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.4.4。</font><font style="vertical-align: inherit;">例子</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例说明了各种插值。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例65.插值单元数据</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果模板是</font></font><code>Foo(bar == $param)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和单元格</font></font><code>42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则结果是</font></font><code>Foo(bar == 42)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果模板是</font></font><code>Foo(bar &lt; $1, baz == $2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且单元格包含</font></font><code>42,43</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则结果为</font></font><code>Foo(bar &lt; 42, baz ==43)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>forall(&amp;&amp;){bar != $}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有包含</font></font><code>42,43</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font><font style="vertical-align: inherit;">的单元格</font><font style="vertical-align: inherit;">的模板</font></font><code>bar != 42 &amp;&amp; bar != 43</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个示例演示了定义模式类型的单元格和它下面的代码片段的联合效果。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/spanned_column.png" alt="跨栏">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此电子表格部分显示了</font></font><code>Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型声明</font><font style="vertical-align: inherit;">如何</font><font style="vertical-align: inherit;">跨越2列，因此两个约束都将显示为</font></font><code>Person(age == …​, type == …​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">由于只有字段名称出现在代码段中，因此它们意味着进行相等性测试。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下示例中，使用标记符号</font></font><code>$param</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/with_param.png" alt="与param">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此列的结果是模式</font></font><code>Person(age == "42"))</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可能已经注意到标记和运算符“==”是多余的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个示例说明可以省略尾随插入标记。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/operator_completion.png" alt="运营商完成">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，暗示附加来自单元格的值，从而产生 </font></font><code>Person(age &lt; "42")).</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以提供绑定变量的定义，如下例所示。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/with_binding.png" alt="有约束力">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，结果是</font></font><code>c: Cheese(type == "stilton").</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意引号是自动提供的。</font><font style="vertical-align: inherit;">实际上，任何东西都可以放在对象类型行中。</font><font style="vertical-align: inherit;">除了绑定变量的定义之外，它还可以是字面插入的附加模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面显示了插入单个值的动作语句的简单构造。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/consequence.png" alt="后果">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ACTION标题下方的单元格留空。</font><font style="vertical-align: inherit;">使用这种风格，任何东西都可以放在结果中，而不仅仅是单个方法调用。</font><font style="vertical-align: inherit;">（同样的技术也适用于CONDITION列。）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面是一个综合示例，显示了各种列标题的使用。</font><font style="vertical-align: inherit;">在列标题下面没有值（如在NO-LOOP列中），这不是错误：这里，该属性不会应用于任何规则。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Key.png" alt="键">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图61.导入，标题等关键字的示例用法</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，这是一个导入，变量和函数的示例。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/keywords.png" alt="关键字">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图62.函数关键字的示例用法等</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同一单元格中的多个包名称必须用逗号分隔。</font><font style="vertical-align: inherit;">此外，类型和变量名称对必须以逗号分隔。</font><font style="vertical-align: inherit;">但是，函数必须按照它们出现在DRL文件中的方式编写。</font><font style="vertical-align: inherit;">这应该与“RuleSet”关键字出现在同一列中; </font><font style="vertical-align: inherit;">它可以在所有规则行之上，之间或之下。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复使用导入，变量，函数和查询可能更方便，而不是将多个定义打包到单个单元格中。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_and_integrating_spreadsheet_based_decision_tables"><a class="anchor" href="index.html#_creating_and_integrating_spreadsheet_based_decision_tables"></a><a class="link" href="index.html#_creating_and_integrating_spreadsheet_based_decision_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.5。</font><font style="vertical-align: inherit;">创建和集成基于电子表格的决策表</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用基于电子表格的决策表的API位于drools-decisiontables模块中。</font><font style="vertical-align: inherit;">实际上只有一个课程要看：</font></font><code>SpreadsheetCompiler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该课程将采用各种格式的电子表格，并在DRL中生成规则（然后您可以按正常方式使用）。</font><font style="vertical-align: inherit;">如果需要，</font></font><code>SpreadsheetCompiler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以仅用于生成部分规则文件，并在事后将其组装成完整的规则包（这允许在需要时分离规则的技术和非技术方面）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，可以使用示例电子表格作为基础。</font><font style="vertical-align: inherit;">或者，如果正在使用插件（Rule Workbench IDE），向导可以从模板生成电子表格（要编辑它，需要使用xls兼容的电子表格编辑器）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wizard.png" alt="巫师">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图63. IDE中的向导</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_business_rules_in_decision_tables"><a class="anchor" href="index.html#_managing_business_rules_in_decision_tables"></a><a class="link" href="index.html#_managing_business_rules_in_decision_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.6。</font><font style="vertical-align: inherit;">管理决策表中的业务规则</font></font></a></h4>
<div class="sect4">
<h5 id="_workflow_and_collaboration"><a class="anchor" href="index.html#_workflow_and_collaboration"></a><a class="link" href="index.html#_workflow_and_collaboration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.6.1。</font><font style="vertical-align: inherit;">工作流程和协作</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电子表格是完善的商业工具（使用超过25年）。</font><font style="vertical-align: inherit;">决策表有助于IT和领域专家之间的密切合作，同时使业务分析师明确业务规则，这是一个理想的关​​注点分离。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，创作规则的整个过程（提出新的决策表）将类似于：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务分析师采用模板决策表（来自存储库或来自IT）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在表格中输入决策表业务语言描述</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入决策表规则（行）（粗略地）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表交给技术资源，技术资源将业务语言（描述）映射到脚本（当然，这可能涉及软件开发，如果它是新的应用程序或数据模型）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">技术人员与业务分析师交回并审核修改。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务分析师可以根据需要继续编辑规则行（移动列也很好等）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同时，技术人员可以为规则开发测试用例（与业务分析师联络），因为这些测试用例可用于在系统运行后验证规则和规则更改。</font></font></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_using_spreadsheet_features"><a class="anchor" href="index.html#_using_spreadsheet_features"></a><a class="link" href="index.html#_using_spreadsheet_features"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.6.2。</font><font style="vertical-align: inherit;">使用电子表格功能</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Excel等应用程序的功能可用于协助将数据输入电子表格，例如验证字段。</font><font style="vertical-align: inherit;">存储在其他工作表中的列表可用于为单元格提供有效的值列表，如下图所示。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/lists.png" alt="名单">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些应用程序提供了保留更改历史记录的有限能力，但建议使用替代的修订控制方法。</font><font style="vertical-align: inherit;">随着时间的推移对规则进行更改时，旧版本将被归档（存在许多开源解决方案，例如Subversion或Git）。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rule_templates"><a class="anchor" href="index.html#_rule_templates"></a><a class="link" href="index.html#_rule_templates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5.7。</font><font style="vertical-align: inherit;">规则模板</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与决策表相关（但不一定需要电子表格）是“规则模板”（在drools-templates模块中）。</font><font style="vertical-align: inherit;">它们使用任何表格数据源作为规则数据的来源 - 填充模板以生成许多规则。</font><font style="vertical-align: inherit;">这可以允许更灵活的电子表格，但也可以允许现有数据库中的规则（以预先开发模板以生成规则为代价）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用规则模板，数据与规则分离，并且对规则的哪个部分是数据驱动没有限制。</font><font style="vertical-align: inherit;">因此，虽然您可以在决策表中执行所有操作，但您也可以执行以下操作：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将数据存储在数据库（或任何其他格式）中</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有条件地根据数据中的值生成规则</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将数据用于规则的任何部分（例如条件运算符，类名，属性名）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在相同的数据上运行不同的模板</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为示例，显示了更经典的决策表，但没有任何隐藏的行用于规则元数据（因此电子表格仅包含用于生成规则的原始数据）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/template1.png" alt="模板1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图64.模板数据</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">上述电子表格，</font><font style="vertical-align: inherit;">请参阅</font><font style="vertical-align: inherit;">示例下载中</font><font style="vertical-align: inherit;">的</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ExampleCheese.xls</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果这是常规决策表，则在第1行之前以及包含规则元数据的第1行和第2行之间将存在隐藏行。</font><font style="vertical-align: inherit;">使用规则模板，数据与规则完全分开。</font><font style="vertical-align: inherit;">这有两个方便的后果 - 您可以将多个规则模板应用于相同的数据，并且您的数据根本不依赖于您的规则。</font><font style="vertical-align: inherit;">那么模板是什么样的？</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-number">1</span>  <span class="hljs-keyword">template</span> header
<span class="hljs-number">2</span>  age
<span class="hljs-number">3</span>  type
<span class="hljs-number">4</span>  <span class="hljs-built_in">log</span>
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>  package org.drools.examples.templates;
<span class="hljs-number">7</span>
<span class="hljs-number">8</span>  global java.util.List <span class="hljs-built_in">list</span>;
<span class="hljs-number">9</span>
<span class="hljs-number">10</span> <span class="hljs-keyword">template</span> <span class="hljs-string">"cheesefans"</span>
<span class="hljs-number">11</span>
<span class="hljs-number">12</span> rule <span class="hljs-string">"Cheese fans_@{row.rowNumber}"</span>
<span class="hljs-number">13</span> when
<span class="hljs-number">14</span>    Person(age == @{age})
<span class="hljs-number">15</span>    Cheese(type == <span class="hljs-string">"@{type}"</span>)
<span class="hljs-number">16</span> then
<span class="hljs-number">17</span>    <span class="hljs-built_in">list</span>.add(<span class="hljs-string">"@{log}"</span>);
<span class="hljs-number">18</span> end
<span class="hljs-number">19</span>
<span class="hljs-number">20</span> end <span class="hljs-keyword">template</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的程序清单的注释：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1行：所有规则模板都以</font></font><code>template header</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2-4行：标题后面是列表中的列表，它们出现在数据中。</font><font style="vertical-align: inherit;">在这种情况下，我们调用第一列</font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，第二</font><font style="vertical-align: inherit;">列</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和第三列</font></font><code>log</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5行：空行表示列定义的结束。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第6-9行：标准规则标题文本。</font><font style="vertical-align: inherit;">这是标准规则DRL，将出现在生成的DRL的顶部。</font><font style="vertical-align: inherit;">将package语句以及任何导入以及全局和函数定义放入此部分。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第10行：关键字</font></font><code>template</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示规则模板的开头。</font><font style="vertical-align: inherit;">模板文件中可以有多个模板，但每个模板都应具有唯一的名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第11-18行：规则模板 - 有关详细信息，请参见下文。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第20行：关键字</font></font><code>end template</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示模板的结尾。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则模板依赖MVEL使用语法@ {token_name}进行替换。</font><font style="vertical-align: inherit;">目前有一个内置表达式@ {row.rowNumber}，它为每行数据提供唯一编号，并使您能够生成唯一的规则名称。</font><font style="vertical-align: inherit;">对于每行数据，将生成规则，其中数据中的值替换模板中的标记。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则模板必须包含在扩展名为.drt的文件中，并在kmodule.xml文件中定义kbase时与相应的决策表相关联，如下例所示</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://drools.org/xsd/kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"TemplatesKB"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.drools.examples.templates"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ruleTemplate</span> <span class="hljs-attribute">dtable</span>=<span class="hljs-value">"org/drools/examples/templates/ExampleCheese.xls"</span>
                  <span class="hljs-attribute">template</span>=<span class="hljs-value">"org/drools/examples/templates/Cheese.drt"</span>
                  <span class="hljs-attribute">row</span>=<span class="hljs-value">"2"</span> <span class="hljs-attribute">col</span>=<span class="hljs-value">"2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"TemplatesKS"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用上面的示例数据，将生成以下规则文件：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.drools.examples.templates;<font></font>
<font></font>
global java.util.<span class="hljs-constant">List</span> list;<font></font>
<font></font>
rule <span class="hljs-string">"Cheese fans_1"</span>
<span class="hljs-keyword">when</span>
  <span class="hljs-constant">Person</span>(age == <span class="hljs-number">42</span>)
  <span class="hljs-constant">Cheese</span>(type == <span class="hljs-string">"stilton"</span>)
<span class="hljs-keyword">then</span>
  list.add(<span class="hljs-string">"Old man stilton"</span>);
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Cheese fans_2"</span>
<span class="hljs-keyword">when</span>
  <span class="hljs-constant">Person</span>(age == <span class="hljs-number">21</span>)
  <span class="hljs-constant">Cheese</span>(type == <span class="hljs-string">"cheddar"</span>)
<span class="hljs-keyword">then</span>
  list.add(<span class="hljs-string">"Young man cheddar"</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名为“TemplatesKS”并包含从模板生成的规则可以简单地创建</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并用作任何其他规则</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession ksession = kc.newKieSession( <span class="hljs-string">"TemplatesKS"</span> );<font></font>
<font></font>
<span class="hljs-comment">// now create some test data</span>
ksession.insert( <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"stilton"</span>, <span class="hljs-number">42</span> ) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"michael"</span>, <span class="hljs-string">"stilton"</span>, <span class="hljs-number">42</span> ) );
<span class="hljs-keyword">final</span> List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<font></font>
ksession.setGlobal( <span class="hljs-string">"list"</span>, list );<font></font>
<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_logging"><a class="anchor" href="index.html#_logging"></a><a class="link" href="index.html#_logging"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6。</font><font style="vertical-align: inherit;">记录</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">照亮Drools引擎的黑匣子的一种方法是使用记录级别。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有内容都记录到</font></font><a href="http://www.slf4j.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SLF4J</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是一个简单的日志记录，可以将任何日志委托给Logback，Apache Commons Logging，Log4j或java.util.logging。</font><font style="vertical-align: inherit;">为日志选择的日志记录框架添加依赖项。</font><font style="vertical-align: inherit;">如果您还没有使用任何日志记录框架，可以通过添加此Maven依赖项来使用Logback：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.x<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您正在开发超轻环境，请使用</font></font><code>slf4j-nop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>slf4j-simple</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替代。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置程序包的日志记录级别</font></font><code>org.drools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Logback中，在</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logback.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 文件中</font><font style="vertical-align: inherit;">配置它</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">logger</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.drools"</span> <span class="hljs-attribute">level</span>=<span class="hljs-value">"debug"</span>/&gt;</span><font></font>
<font></font>
    ...<font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Log4J中，在</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">log4j.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 文件中</font><font style="vertical-align: inherit;">配置它</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">log4j:configuration</span> <span class="hljs-attribute">xmlns:log4j</span>=<span class="hljs-value">"http://jakarta.apache.org/log4j/"</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.drools"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">priority</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"debug"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">category</span>&gt;</span><font></font>
<font></font>
    ...<font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">log4j:configuration</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running"><a class="anchor" href="index.html#_running"></a><a class="link" href="index.html#_running"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.跑步</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些部分扩展了KIE Running部分，应首先读取，并详细说明Drools运行时。</font></font></p>
</div>
<div class="sect2">
<h3 id="_kieruntime_3"><a class="anchor" href="index.html#_kieruntime_3"></a><a class="link" href="index.html#_kieruntime_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1。</font><font style="vertical-align: inherit;">KieRuntime</font></font></a></h3>
<div class="sect3">
<h4 id="_entrypoint"><a class="anchor" href="index.html#_entrypoint"></a><a class="link" href="index.html#_entrypoint"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1。</font><font style="vertical-align: inherit;">入口点</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>EntryPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供周围插入，更新和删除事实的方法。</font><font style="vertical-align: inherit;">术语“入口点”与我们在工作内存中有多个分区这一事实有关，您可以选择要插入的分区。</font><font style="vertical-align: inherit;">在事件处理用例中使用多个入口点更常见，但它们也可以由纯规则应用程序使用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口提供了与发动机的主要相互作用。</font><font style="vertical-align: inherit;">它可用于规则后果和流程操作。</font><font style="vertical-align: inherit;">在本手册中，重点是与规则相关的方法和接口，现在将忽略与流程相关的方法。</font><font style="vertical-align: inherit;">但是你会注意到，</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">它们都继承了方法</font></font><code>ProcessRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而提供了一个统一的API来处理流程和规则。</font><font style="vertical-align: inherit;">当使用规则，三个接口组成</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>EntryPoint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本身。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/EntryPoint.png" alt="入口点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图65. EntryPoint</font></font></div>
</div>
<div class="sect4">
<h5 id="_insert"><a class="anchor" href="index.html#_insert"></a><a class="link" href="index.html#_insert"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1.1。</font><font style="vertical-align: inherit;">插</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了根据a中的规则评估事实，必须</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其插入到会话中。</font><font style="vertical-align: inherit;">这是通过调用方法完成的</font></font><code>insert(yourObject)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当事实被插入到会话中时，可以立即评估其某些属性（急切评估），并且可以推迟一些属性以供稍后评估（延迟评估）。</font><font style="vertical-align: inherit;">确切的行为取决于所使用的Drools引擎算法。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专家系统通常使用术语</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断言</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断言</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来指代系统可用的事实。</font><font style="vertical-align: inherit;">但是，由于“assert”是大多数语言中的关键字，我们决定使用该</font></font><code>insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字; </font><font style="vertical-align: inherit;">在本手册中，这两个术语可互换使用。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入Object时，返回一个</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用于表示插入对象的标记</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它还用于与</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您希望删除或修改对象时的</font><font style="vertical-align: inherit;">交互</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Cheese stilton = <span class="hljs-keyword">new</span> Cheese(<span class="hljs-string">"stilton"</span>);<font></font>
FactHandle stiltonHandle = ksession.insert( stilton );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如KieBase部分所述，工作内存可以以两种断言模式运行：相等或同一性。</font><font style="vertical-align: inherit;">身份是默认的。</font></font></p>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着工作内存使用a </font></font><code>IdentityHashMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来存储所有声明的对象。</font><font style="vertical-align: inherit;">新的实例断言总是导致返回new </font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是如果一个实例再次被断言，那么它返回原始的事实句柄，即它忽略了对同一个对象的重复插入。</font></font></p>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平等</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着工作记忆使用a </font></font><code>HashMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来存储所有断言的对象。</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果插入的对象</font></font><code>equal()/hashcode()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与已存在的事实</font><font style="vertical-align: inherit;">不相等（根据其</font><font style="vertical-align: inherit;">方法），</font><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">对象实例断言将仅返回new </font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_delete"><a class="anchor" href="index.html#_delete"></a><a class="link" href="index.html#_delete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1.2。</font><font style="vertical-align: inherit;">删除</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了从会话中移除事实，使用该方法</font></font><code>delete()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">删除事实后，将取消任何处于活动状态且依赖于该事实的匹配项。</font><font style="vertical-align: inherit;">请注意，可能存在依赖于事实不存在的规则，在这种情况下，删除事实可能会导致规则激活。</font><font style="vertical-align: inherit;">（参见</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">专家系统通常使用术语</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩进</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩回</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来指代从工作记忆中移除事实的操作。</font><font style="vertical-align: inherit;">Drools喜欢使用关键字</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行对称关键字</font></font><code>insert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">Drools也支持关键字</font></font><code>retract</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它被弃用了</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在本手册中，这两个术语可互换使用。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><code>FactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入调用返回的</font><font style="vertical-align: inherit;">撤消来完成撤回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在规则的右侧，使用</font></font><code>delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句，该语句适用于简单的对象引用。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Cheese stilton = <span class="hljs-keyword">new</span> Cheese(<span class="hljs-string">"stilton"</span>);<font></font>
FactHandle stiltonHandle = ksession.insert( stilton );<font></font>
....<font></font>
ksession.delete( stiltonHandle );</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_update"><a class="anchor" href="index.html#_update"></a><a class="link" href="index.html#_update"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.1.3。</font><font style="vertical-align: inherit;">更新</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须通知Drools引擎修改的事实，以便可以对它们进行重新处理。</font><font style="vertical-align: inherit;">您必须使用该</font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法来通知已</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改的对象，以查找那些无法通知</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自己的对象。</font><font style="vertical-align: inherit;">请注意，</font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终将修改后的对象作为第二个参数，允许您为不可变对象指定新实例。</font><font style="vertical-align: inherit;">在规则的右侧，</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建议使用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">语句，因为它进行更改并在单个语句中通知引擎。</font><font style="vertical-align: inherit;">或者，在通过调用setter方法更改事实对象的字段值之后，必须</font></font><code>update</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在更改其他事实之前立即</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">事件，否则将导致Drools引擎内的索引出现问题。</font><font style="vertical-align: inherit;">modify语句避免了这个问题。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Cheese stilton = <span class="hljs-keyword">new</span> Cheese(<span class="hljs-string">"stilton"</span>);<font></font>
FactHandle stiltonHandle = workingMemory.insert( stilton );<font></font>
...<font></font>
stilton.setPrice( <span class="hljs-number">100</span> );<font></font>
workingMemory.update( stiltonHandle, stilton );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruleruntime"><a class="anchor" href="index.html#_ruleruntime"></a><a class="link" href="index.html#_ruleruntime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2。</font><font style="vertical-align: inherit;">RuleRuntime</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleRuntime提供对议程的访问，允许查询执行，并允许您访问命名的入口点。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleRuntime.png" alt="RuleRuntime">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图66. RuleRuntime</font></font></div>
</div>
<div class="sect4">
<h5 id="_query"><a class="anchor" href="index.html#_query"></a><a class="link" href="index.html#_query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2.1。</font><font style="vertical-align: inherit;">询问</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询用于根据模式检索事实集，因为它们在规则中使用。</font><font style="vertical-align: inherit;">模式可以使用可选参数。</font><font style="vertical-align: inherit;">可以在KIE基础中定义查询，从中调用它们以返回匹配结果。</font><font style="vertical-align: inherit;">迭代结果集合时，查询中绑定的任何标识符都可以通过调用</font></font><code>get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定变量名称作为参数</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">来访问相应的事实或事实字段</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果绑定引用了一个事实对象，则可以通过</font></font><code>getFactHandle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再次使用变量的名称作为参数</font><font style="vertical-align: inherit;">来检索其FactHandle </font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QueryResults.png" alt="QueryResults">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图67. QueryResults</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QueryResultsRow.png" alt="QueryResultsRow">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图68. QueryResultsRow</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例66.简单查询示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">QueryResults results =<font></font>
    ksession.getQueryResults( <span class="hljs-string">"my query"</span>, <span class="hljs-keyword">new</span> Object[] { <span class="hljs-string">"string"</span> } );
<span class="hljs-keyword">for</span> ( QueryResultsRow row : results ) {<font></font>
    System.out.println( row.get( <span class="hljs-string">"varName"</span> ) );<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_live_queries"><a class="anchor" href="index.html#_live_queries"></a><a class="link" href="index.html#_live_queries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.2.2。</font><font style="vertical-align: inherit;">实时查询</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过迭代返回的集来调用查询和处理结果不是监视一段时间内变化的好方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了缓解这种情况，Drools提供了实时查询，它附加了一个监听器，而不是返回一个可迭代的结果集。</font><font style="vertical-align: inherit;">通过为此视图的内容创建视图和发布更改事件，这些实时查询保持打开状态。</font><font style="vertical-align: inherit;">要激活，您可以使用参数启动查询并在结果视图中监听更改。</font><font style="vertical-align: inherit;">该</font></font><code>dispose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法终止查询并中断此反应方案。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例67.实现ViewChangedEventListener</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">final</span> List updated = <span class="hljs-keyword">new</span> ArrayList();
<span class="hljs-keyword">final</span> List removed = <span class="hljs-keyword">new</span> ArrayList();
<span class="hljs-keyword">final</span> List added = <span class="hljs-keyword">new</span> ArrayList();<font></font>
<font></font>
ViewChangedEventListener listener = <span class="hljs-keyword">new</span> ViewChangedEventListener() {
 <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rowUpdated</span><span class="hljs-params">(Row row)</span> </span>{<font></font>
  updated.add( row.get( <span class="hljs-string">"$price"</span> ) );<font></font>
 }<font></font>
<font></font>
 <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rowRemoved</span><span class="hljs-params">(Row row)</span> </span>{<font></font>
  removed.add( row.get( <span class="hljs-string">"$price"</span> ) );<font></font>
 }<font></font>
<font></font>
 <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rowAdded</span><span class="hljs-params">(Row row)</span> </span>{<font></font>
  added.add( row.get( <span class="hljs-string">"$price"</span> ) );<font></font>
 }<font></font>
};<font></font>
<font></font>
<span class="hljs-comment">// Open the LiveQuery</span>
LiveQuery query = ksession.openLiveQuery( <span class="hljs-string">"cheeses"</span>,
                                          <span class="hljs-keyword">new</span> Object[] { <span class="hljs-string">"cheddar"</span>, <span class="hljs-string">"stilton"</span> },<font></font>
                                          listener );<font></font>
...<font></font>
...<font></font>
query.dispose() <span class="hljs-comment">// calling dispose to terminate the live query</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools博客文章包含实时查询的Glazed Lists集成示例：</font></font></p>
</div>
<div class="paragraph">
<p><a href="http://blog.athico.com/2010/07/glazed-lists-examples-for-drools-live.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://blog.athico.com/2010/07/glazed-lists-examples-for-drools-live.html</font></font></a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_statefulrulesession"><a class="anchor" href="index.html#_statefulrulesession"></a><a class="link" href="index.html#_statefulrulesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.3。</font><font style="vertical-align: inherit;">StatefulRuleSession</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code>StatefulRuleSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由the继承</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提供与引擎外部相关的规则相关方法。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/StatefulRuleSession.png" alt="StatefulRuleSession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图69. StatefulRuleSession</font></font></div>
</div>
<div class="sect4">
<h5 id="_agenda_filters"><a class="anchor" href="index.html#_agenda_filters"></a><a class="link" href="index.html#_agenda_filters"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1.3.1。</font><font style="vertical-align: inherit;">议程过滤器</font></font></a></h5>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AgendaFilter.png" alt="AgendaFilter">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图70. AgendaFilters</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`AgendaFilter`对象是过滤器接口的可选实现，用于允许或拒绝匹配的触发。</font><font style="vertical-align: inherit;">您过滤的内容完全取决于实施。</font><font style="vertical-align: inherit;">Drools 4.0用于提供一些开箱即用的过滤器，这些过滤器没有暴露在drools 5.0 knowledge-api中，但它们很容易实现，并且可以参考Drools 4.0代码库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用过滤器，请在调用时指定它</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下示例仅允许以字符串结尾的规则</font></font><code>"Test"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所有其他人将被过滤掉。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.fireAllRules( <span class="hljs-keyword">new</span> RuleNameEndsWithAgendaFilter( <span class="hljs-string">"Test"</span> ) );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_agenda_2"><a class="anchor" href="index.html#_agenda_2"></a><a class="link" href="index.html#_agenda_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2。</font><font style="vertical-align: inherit;">议程</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程是一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rete</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">在对行动采取行动时</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，规则可能完全匹配并有资格执行; </font><font style="vertical-align: inherit;">单个工作记忆动作可以产生多个符合条件的规则。</font><font style="vertical-align: inherit;">当规则完全匹配时，将创建匹配，引用规则和匹配的事实，并将其置于议程中。</font><font style="vertical-align: inherit;">议程使用冲突解决策略控制这些匹配的执行顺序。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发动机反复循环两个阶段：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作记忆动作。</font><font style="vertical-align: inherit;">这是大多数工作发生的地方，无论是在Consequence（RHS本身）还是主要的Java应用程序进程中。</font><font style="vertical-align: inherit;">一旦结果完成或主Java应用程序进程调用</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎切换到议程评估阶段。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程评估。</font><font style="vertical-align: inherit;">这会尝试选择要触发的规则。</font><font style="vertical-align: inherit;">如果没有找到规则则退出，否则它将触发找到的规则，将阶段切换回工作内存操作。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Two_Phase(1).png" alt="两阶段">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图71.两阶段执行</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复该过程直到议程清楚，在这种情况下，控制返回到调用应用程序。</font><font style="vertical-align: inherit;">当正在进行工作记忆动作时，没有触发任何规则。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Agenda.png" alt="议程">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图72.议程</font></font></div>
</div>
<div class="sect3">
<h4 id="_conflict_resolution_2"><a class="anchor" href="index.html#_conflict_resolution_2"></a><a class="link" href="index.html#_conflict_resolution_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.1。</font><font style="vertical-align: inherit;">解决冲突</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果议程上有多个规则，则需要解决冲突。</font><font style="vertical-align: inherit;">（“快速入门”一章中介绍了基本知识。）由于触发规则可能会对工作记忆产生副作用，因此Drools引擎需要知道规则应该以什么顺序触发（例如，触发规则A可能会导致规则B）被从议程中删除）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools采用的默认冲突解决策略是：Salience和LIFO（后进先出）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最明显的是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显着性</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或优先级），在这种情况下，用户可以指定某个规则具有比其他规则更高的优先级（通过赋予它更高的数字）。</font><font style="vertical-align: inherit;">在这种情况下，具有较高显着性的规则将是优选的。</font><font style="vertical-align: inherit;">LIFO优先级基于分配的工作内存操作计数器值，在同一操作期间创建的所有规则都接收相同的值。</font><font style="vertical-align: inherit;">具有相同优先级值的一组点火的执行顺序是任意的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为一般规则，最好不要依赖以任何特定顺序触发的规则，并且在不担心“流程”的情况下编写规则。</font><font style="vertical-align: inherit;">然而，当需要流程时，存在许多可能性，包括但不限于：议程组，规则流组，激活组，控制/信号量事实。</font><font style="vertical-align: inherit;">这些将在后面的章节中讨论。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 4.0支持自定义冲突解决策略; </font><font style="vertical-align: inherit;">虽然Drools中仍然存在此功能，但尚未通过Drools 5.0中的knowledge-api向最终用户公开。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_agendagroup"><a class="anchor" href="index.html#_agendagroup"></a><a class="link" href="index.html#_agendagroup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.2。</font><font style="vertical-align: inherit;">AgendaGroup</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AgendaGroup.png" alt="AgendaGroup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图73.议程小组</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程小组是一种在议程上划分规则（实际上是匹配）的方法。</font><font style="vertical-align: inherit;">在任何时候，只有一个组具有“焦点”，这意味着该组中规则的匹配仅生效。</font><font style="vertical-align: inherit;">您还可以使用“自动对焦”规则，这意味着当该规则的条件成立时，将重点关注其议程组。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组在CLIPS术语中称为“模块”。</font><font style="vertical-align: inherit;">虽然最好设计不需要控制流的规则，但这并不总是可行的。</font><font style="vertical-align: inherit;">议程组提供了一种在分组规则之间创建“流程”的便捷方法。</font><font style="vertical-align: inherit;">您可以在Drools引擎内或通过API切换具有焦点的组。</font><font style="vertical-align: inherit;">如果您的规则明确需要处理的多个“阶段”或“序列”，请考虑使用议程组来实现此目的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每次</font></font><code>setFocus()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用它都会将Agenda Group推入堆栈。</font><font style="vertical-align: inherit;">当焦点组为空时，它将从堆栈中弹出，并且现在位于顶部的焦点组将进行评估。</font><font style="vertical-align: inherit;">议程组可以出现在堆栈的多个位置。</font><font style="vertical-align: inherit;">默认议程组为“MAIN”，所有规则均未指定此组中的议程组。</font><font style="vertical-align: inherit;">它始终是堆栈中的第一个组，默认情况下最初给定焦点。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getAgenda().getAgendaGroup( <span class="hljs-string">"Group A"</span> ).setFocus();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>clear()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法可用于在有机会发射之前取消属于给定议程组的规则所产生的所有激活。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getAgenda().getAgendaGroup( <span class="hljs-string">"Group A"</span> ).clear();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，由于Drools使用的phreak算法的惰性，默认情况下激活仅在触发时实现，但是有可能在事实发生时预测评估然后激活给定规则。</font></font><code>@Propagation(IMMEDIATE)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如传播模式部分</font><font style="vertical-align: inherit;">所述，通过注释将其插入到会话中</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_activationgroup"><a class="anchor" href="index.html#_activationgroup"></a><a class="link" href="index.html#_activationgroup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.3。</font><font style="vertical-align: inherit;">的ActivationGroup</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ActivationGroup.png" alt="的ActivationGroup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图74. ActivationGroup</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活组是由同一“激活组”规则属性绑定在一起的一组规则。</font><font style="vertical-align: inherit;">在该组中，只有一个规则可以触发，并且在该规则触发后，所有其他规则都将从议程中取消。</font></font><code>clear()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以随时调用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">方法，</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">方法在有机会发射之前取消所有激活。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getAgenda().getActivationGroup( <span class="hljs-string">"Group B"</span> ).clear();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruleflowgroup"><a class="anchor" href="index.html#_ruleflowgroup"></a><a class="link" href="index.html#_ruleflowgroup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2.4。</font><font style="vertical-align: inherit;">RuleFlowGroup</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleFlowGroup.png" alt="RuleFlowGroup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图75. RuleFlowGroup</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则流组是由“ruleflow-group”规则属性关联的一组规则。</font><font style="vertical-align: inherit;">这些规则只能在激活组时触发。</font><font style="vertical-align: inherit;">只有在详细说明规则流图到达表示组的节点时，组本身才能变为活动状态。</font><font style="vertical-align: inherit;">在这里，也</font></font><code>clear()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以随时调用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">方法来取消议程中仍然存在的所有比赛。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getAgenda().getRuleFlowGroup( <span class="hljs-string">"Group C"</span> ).clear();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_model_2"><a class="anchor" href="index.html#_event_model_2"></a><a class="link" href="index.html#_event_model_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3。</font><font style="vertical-align: inherit;">事件模型</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件包提供了通知Drools引擎事件的方法，包括触发规则，声明对象等。例如，这允许您将日志记录和审计活动与应用程序的主要部分（以及规则）分开。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>WorkingMemoryEventManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许添加和删除侦听程序，因此，对于工作记忆和议程事件就可以听了。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/WorkingMemoryEventManager.png" alt="WorkingMemoryEventManager">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图76. WorkingMemoryEventManager</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下代码段显示了如何声明简单的议程侦听器并将其附加到会话。</font><font style="vertical-align: inherit;">它会在射击后打印匹配。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子68.添加一个AgendaEventListener</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.addEventListener( <span class="hljs-keyword">new</span> DefaultAgendaEventListener() {
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterMatchFired</span><span class="hljs-params">(AfterMatchFiredEvent event)</span> </span>{
       <span class="hljs-keyword">super</span>.afterMatchFired( event );<font></font>
       System.out.println( event );<font></font>
   }<font></font>
});</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还提供</font></font><code>DebugRuleRuntimeEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>DebugAgendaEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用调试print语句实现每个方法。</font><font style="vertical-align: inherit;">要打印所有工作内存事件，请添加如下监听器：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例69.添加DebugRuleRuntimeEventListener</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.addEventListener( <span class="hljs-keyword">new</span> DebugRuleRuntimeEventListener() );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前支持的事件是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MatchCreatedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MatchCancelledEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BeforeMatchFiredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AfterMatchFiredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroupPushedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroupPoppedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectInsertEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectDeletedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectUpdatedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessCompletedEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessNodeLeftEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessNodeTriggeredEvent</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessStartEvent</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_statelesskiesession_2"><a class="anchor" href="index.html#_statelesskiesession_2"></a><a class="link" href="index.html#_statelesskiesession_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4。</font><font style="vertical-align: inherit;">StatelessKieSession</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>StatelessKieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装的</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是扩展它。</font><font style="vertical-align: inherit;">其主要重点是决策服务类型方案。</font><font style="vertical-align: inherit;">它避免了打电话的需要</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">无状态会话不支持迭代插入和</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java代码</font><font style="vertical-align: inherit;">调用方法</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">调用的行为</font></font><code>execute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个单击方法，它将在内部实例化a </font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，添加所有用户数据并执行用户命令，调用</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后调用</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">虽然使用此类的主要方法是通过</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font></font><code>Command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">（子接口</font><font style="vertical-align: inherit;">）</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但提供了两种便捷方法，用于简单对象插入所需的全部内容。</font><font style="vertical-align: inherit;">该</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在自己的部分谈到细节。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/StatelessKieSession(1).png" alt="StatelessKieSession">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图77. StatelessKieSession</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的简单示例显示了使用便捷API执行给定Java对象集合的无状态会话。</font><font style="vertical-align: inherit;">它将迭代集合，依次插入每个元素。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子70.使用Collection执行简单的StatelessKieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
ksession.execute( collection );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果这是作为单个命令完成的，它将如下：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例71.使用InsertElements命令执行简单的StatelessKieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.execute( CommandFactory.newInsertElements( collection ) );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你想插入集合本身，以及集合的各个元素，那么</font></font><code>CommandFactory.newInsert(collection)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就可以完成这项工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的方法</font></font><code>CommandFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建支持的命令，所有这些都可以使用XStream的和被整理</font></font><code>BatchExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>BatchExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供有关XML格式的详细信息，以及如何使用Drools Pipeline自动化编组</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">格式化</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><code>StatelessKieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持全局变量，以多种方式支持。</font><font style="vertical-align: inherit;">我将首先介绍非命令方式，因为命令的作用域是特定的执行调用。</font><font style="vertical-align: inherit;">Globals可以通过三种方式解决。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StatelessKieSession方法</font></font><code>getGlobals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个Globals实例，该实例提供对会话的全局变量的访问。</font><font style="vertical-align: inherit;">这些是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行调用</font><font style="vertical-align: inherit;">共享的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">关于可变全局变量请谨慎，因为执行调用可以在不同的线程中同时执行。</font></font></p>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子72.会话作用域全局</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();
<span class="hljs-comment">// Set a global hbnSession, that can be used for DB interactions in the rules.</span>
ksession.setGlobal( <span class="hljs-string">"hbnSession"</span>, hibernateSession );
<span class="hljs-comment">// Execute while being able to resolve the "hbnSession" identifier.</span>
ksession.execute( collection );</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用委托是另一种全球解决方式。</font><font style="vertical-align: inherit;">为全局（with </font></font><code>setGlobal(String, Object)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）赋值会导致值存储在内部集合中，将标识符映射到值。</font><font style="vertical-align: inherit;">此内部集合中的标识符将优先于任何提供的委托。</font><font style="vertical-align: inherit;">仅当在此内部集合中找不到标识符时，才会使用全局委托（如果有）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决全局变量的第三种方法是使用执行范围的全局变量。</font><font style="vertical-align: inherit;">这里，</font></font><code>Command</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置一个全局传递给</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面还提供通过“输出”参数导出数据的功能。</font><font style="vertical-align: inherit;">插入的事实，全局变量和查询结果都可以返回。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子73.输出标识符</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// Set up a list of commands</span>
List cmds = <span class="hljs-keyword">new</span> ArrayList();<font></font>
cmds.add( CommandFactory.newSetGlobal( <span class="hljs-string">"list1"</span>, <span class="hljs-keyword">new</span> ArrayList(), <span class="hljs-keyword">true</span> ) );<font></font>
cmds.add( CommandFactory.newInsert( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"jon"</span>, <span class="hljs-number">102</span> ), <span class="hljs-string">"person"</span> ) );<font></font>
cmds.add( CommandFactory.newQuery( <span class="hljs-string">"Get People"</span> <span class="hljs-string">"getPeople"</span> );<font></font>
<font></font>
<span class="hljs-comment">// Execute the list</span><font></font>
ExecutionResults results =<font></font>
  ksession.execute( CommandFactory.newBatchExecution( cmds ) );<font></font>
<font></font>
<span class="hljs-comment">// Retrieve the ArrayList</span>
results.getValue( <span class="hljs-string">"list1"</span> );
<span class="hljs-comment">// Retrieve the inserted Person fact</span>
results.getValue( <span class="hljs-string">"person"</span> );
<span class="hljs-comment">// Retrieve the query as a QueryResults instance.</span>
results.getValue( <span class="hljs-string">"Get People"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sequential_mode"><a class="anchor" href="index.html#_sequential_mode"></a><a class="link" href="index.html#_sequential_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4.1。</font><font style="vertical-align: inherit;">顺序模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Rete，您可以进行有状态会话，可以随时间断言和修改对象，也可以添加和删除规则。</font><font style="vertical-align: inherit;">现在如果我们假设一个无状态会话会发生什么，在初始数据集之后，不能再断言或修改更多数据，并且不能添加或删除规则？</font><font style="vertical-align: inherit;">当然，没有必要重新评估规则，引擎将能够以简化的方式运行。</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过规则集中的突出和位置来排序规则（通过在规则终端节点上设置序列属性）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个元素，每个可能的规则匹配一个元素; </font><font style="vertical-align: inherit;">元素位置表示点火顺序。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭所有节点存储器，右输入对象存储器除外。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断开左输入适配器节点传播，并在Command对象中引用Object和Node，该对象被添加到工作存储器上的列表中以供稍后执行。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">断言所有对象，并且当所有断言都完成并因此填充右输入节点存储器时，检查命令列表并依次执行每个对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据确定的规则序列号，应将所有结果匹配放置在元素中。</font><font style="vertical-align: inherit;">记录第一个和最后一个填充元素，以减少迭代范围。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迭代匹配的元素，依次执行填充的元素。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们有最大数量的允许规则执行，我们可以提前退出网络评估以触发元素中的所有规则。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>LeftInputAdapterNode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再创建一个元组，添加对象，然后传播的元组-而不是创建一个Command对象，并加入到工作记忆列表。</font><font style="vertical-align: inherit;">此Command对象包含</font></font><code>LeftInputAdapterNode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对传播对象</font><font style="vertical-align: inherit;">的引用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这会在插入时停止任何左输入传播，因此我们知道右输入传播永远不需要尝试与左输入的连接（不需要左输入内存）。</font><font style="vertical-align: inherit;">所有节点都关闭了内存，包括左输入元组内存但不包括右输入对象内存，这意味着记住插入传播的唯一节点是右输入对象内存。</font><font style="vertical-align: inherit;">一旦完成所有断言并填充所有正确输入的存储器，我们就可以迭代列表</font></font><code>LeftInputAdatperNode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令对象依次调用每个。</font><font style="vertical-align: inherit;">它们将沿着网络传播，试图与右输入对象连接，但是它们将不会被记住在左输入中，因为我们知道不再有对象断言，因此传播到右输入存储器中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再有议程，优先排队安排元组; </font><font style="vertical-align: inherit;">相反，只有一些规则的元素。</font><font style="vertical-align: inherit;">序列号</font></font><code>RuleTerminalNode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示元素放置匹配的元素。</font><font style="vertical-align: inherit;">一旦所有Command对象完成，我们可以迭代我们的元素，依次检查每个元素，并在匹配时激活它们。</font><font style="vertical-align: inherit;">为了提高性能，我们记住元素中的第一个和最后一个填充的单元格。</font><font style="vertical-align: inherit;">构建网络，每个网络</font></font><code>RuleTerminalNode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据突出数量及其添加到网络的顺序给出序列号。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，右输入节点存储器是哈希映射，用于快速删除对象; </font><font style="vertical-align: inherit;">在这里，我们知道没有对象删除，我们可以在没有索引对象的值时使用列表。</font><font style="vertical-align: inherit;">对于大量对象，索引的Hash Maps可以提高性能; </font><font style="vertical-align: inherit;">如果我们知道对象类型只有几个实例，索引可能不是有利的，并且可以使用列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顺序模式只能与无状态会话一起使用，默认情况下处于关闭状态。</font><font style="vertical-align: inherit;">要打开它，请调用</font></font><code>RuleBaseConfiguration.setSequential(true)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或将规则库配置属性设置</font></font><code>drools.sequential</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为true。</font><font style="vertical-align: inherit;">顺序模式可以通过调用回落到一个动态的议程</font></font><code>setSequentialAgenda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有</font></font><code>SequentialAgenda.DYNAMIC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您还可以将“drools.sequential.agenda”属性设置为“顺序”或“动态”。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rule_execution_modes"><a class="anchor" href="index.html#_rule_execution_modes"></a><a class="link" href="index.html#_rule_execution_modes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5。</font><font style="vertical-align: inherit;">规则执行模式</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools为规则执行提供了两种模式 - 被动和主动。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为一般准则，被动模式最适合需要明确控制引擎何时评估和触发规则的Drools引擎应用，或者适用于使用伪时钟的CEP应用。</font><font style="vertical-align: inherit;">活动模式对于Drools引擎应用程序最有效，后者委托控制何时评估规则并将其触发到引擎，或者用于使用实时时钟的典型CEP应用程序。</font></font></p>
</div>
<div class="sect3">
<h4 id="_passive_mode"><a class="anchor" href="index.html#_passive_mode"></a><a class="link" href="index.html#_passive_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5.1。</font><font style="vertical-align: inherit;">被动模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用被动模式不仅是用户负责工作的内存操作，例如</font></font><code>insert()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，还有规则用于评估数据并触发生成的规则实例 - 使用</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用被动模式的CEP应用程序的Drools代码的示例概述：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration config = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
config.setOption( ClockTypeOption.get(<span class="hljs-string">"pseudo"</span>) );<font></font>
KieSession session = kbase.newKieSession( conf, <span class="hljs-keyword">null</span> );<font></font>
SessionPseudoClock clock = session.getSessionClock();<font></font>
<font></font>
session.insert( tick1 );<font></font>
session.fireAllRules();<font></font>
<font></font>
clock.advanceTime(<span class="hljs-number">1</span>, TimeUnit.SECONDS);<font></font>
session.insert( tick2 );<font></font>
session.fireAllRules();<font></font>
<font></font>
clock.advanceTime(<span class="hljs-number">1</span>, TimeUnit.SECONDS);<font></font>
session.insert( tick3 );<font></font>
session.fireAllRules();<font></font>
<font></font>
session.dispose();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_active_mode"><a class="anchor" href="index.html#_active_mode"></a><a class="link" href="index.html#_active_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5.2。</font><font style="vertical-align: inherit;">活动模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools提供了一种</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法，它在活动模式下启动引擎，这在行为上是异步的，其中规则将被持续评估和触发，直到进行</font></font><code>halt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这对于需要通常称为“活动查询”的CEP场景特别有用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意调用</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻塞当前线程，而引擎将启动并继续异步运行，直到</font></font><code>halt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在KieSession上调用。</font><font style="vertical-align: inherit;">因此建议</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从专用线程</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">，这样当前线程不会无限期地被阻塞; </font><font style="vertical-align: inherit;">这也使得当前线程能够</font></font><code>halt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在稍后阶段</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">ref。</font><font style="vertical-align: inherit;">以下示例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用活动模式的CEP应用程序的Drools代码示例概述：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration config = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
config.setOption( ClockTypeOption.get(<span class="hljs-string">"realtime"</span>) );<font></font>
KieSession session = kbase.newKieSession( conf, <span class="hljs-keyword">null</span> );<font></font>
<font></font>
<span class="hljs-keyword">new</span> Thread( <span class="hljs-keyword">new</span> Runnable() {
  <span class="hljs-annotation">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{<font></font>
      session.fireUntilHalt();<font></font>
  }<font></font>
} ).start();<font></font>
<font></font>
session.insert( tick1 );<font></font>
<font></font>
... Thread.sleep( <span class="hljs-number">1000L</span> ); ...<font></font>
<font></font>
session.insert( tick2 );<font></font>
<font></font>
... Thread.sleep( <span class="hljs-number">1000L</span> ); ...<font></font>
<font></font>
session.insert( tick3 );<font></font>
<font></font>
session.halt();<font></font>
session.dispose();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
一般来说，不建议混合</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，尤其是从不同的线程。</font><font style="vertical-align: inherit;">然而，由于内部状态机，发动机能够安全地处理这种情况。</font><font style="vertical-align: inherit;">如果</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在运行并且进行了呼叫</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则引擎将一直等到</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成然后再启动</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，如果</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在运行并被</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用，则稍后将被忽略，并且将直接返回。</font><font style="vertical-align: inherit;">有关线程安全和内部状态机的更多详细信息，请参考“改进的多线程行为”部分。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_performing_kiesession_operations_atomically_when_in_active_mode"><a class="anchor" href="index.html#_performing_kiesession_operations_atomically_when_in_active_mode"></a><a class="link" href="index.html#_performing_kiesession_operations_atomically_when_in_active_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5.2.1。</font><font style="vertical-align: inherit;">在活动模式下以原子方式执行KieSession操作</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在活动模式下，Drools引擎控制何时评估和触发规则; </font><font style="vertical-align: inherit;">因此，以线程安全的方式执行KieSession上的操作非常重要。</font><font style="vertical-align: inherit;">此外，从客户端的角度来看，可能需要在规则评估之间在KieSession上调用多个操作，但是引擎要将这些操作视为原子操作：例如，在多个事实处插入一个事实给定的时间，但是在重新评估规则之前，引擎要等到所有插入完成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>submit()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在活动模式下，</font><font style="vertical-align: inherit;">Drools提供了</font><font style="vertical-align: inherit;">一种在KieSession上作为线程安全原子动作进行分组和执行操作</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在活动模式下以原子方式执行KieSession操作的Drools代码的示例概述：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession session = ...;<font></font>
<font></font>
<span class="hljs-keyword">new</span> Thread( <span class="hljs-keyword">new</span> Runnable() {
  <span class="hljs-annotation">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{<font></font>
      session.fireUntilHalt();<font></font>
  }<font></font>
} ).start();<font></font>
<font></font>
<span class="hljs-keyword">final</span> FactHandle fh = session.insert( fact_a );<font></font>
<font></font>
... Thread.sleep( <span class="hljs-number">1000L</span> ); ...<font></font>
<font></font>
session.submit( <span class="hljs-keyword">new</span> KieSession.AtomicAction() {
  <span class="hljs-annotation">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">execute</span><span class="hljs-params">( KieSession kieSession )</span> </span>{<font></font>
    fact_a.setField(<span class="hljs-string">"value"</span>);<font></font>
    kieSession.update( fh, fact_a );<font></font>
    kieSession.insert( fact_1 );<font></font>
    kieSession.insert( fact_2 );<font></font>
    kieSession.insert( fact_3 );<font></font>
  }<font></font>
} );<font></font>
<font></font>
... Thread.sleep( <span class="hljs-number">1000L</span> ); ...<font></font>
<font></font>
session.insert( fact_z );<font></font>
<font></font>
session.halt();<font></font>
session.dispose();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为提示示例，也可以从KieSession中检索事实句柄：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">...<font></font>
session.insert( fact_a );<font></font>
<font></font>
... Thread.sleep( <span class="hljs-number">1000L</span> ); ...<font></font>
<font></font>
session.submit( <span class="hljs-keyword">new</span> KieSession.AtomicAction() {
  <span class="hljs-annotation">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">execute</span><span class="hljs-params">( KieSession kieSession )</span> </span>{
    <span class="hljs-keyword">final</span> FactHandle fh = kieSession.getFactHandle( fact_a );<font></font>
    fact_a.setField(<span class="hljs-string">"value"</span>);<font></font>
    kieSession.update( fh, fact_a );<font></font>
    kieSession.insert( fact_1 );<font></font>
    kieSession.insert( fact_2 );<font></font>
    kieSession.insert( fact_3 );<font></font>
  }<font></font>
} );<font></font>
<font></font>
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_propagation_modes"><a class="anchor" href="index.html#_propagation_modes"></a><a class="link" href="index.html#_propagation_modes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6。</font><font style="vertical-align: inherit;">传播模式</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入PHREAK作为Drools引擎的默认算法使得规则的评估变得懒惰。</font><font style="vertical-align: inherit;">这种新的Drools懒惰行为允许相关的性能提升，但在某些非常特殊的情况下，打破了一些Drools功能的语义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更确切地说，在某些情况下，有必要立即将新事实的插入传播到会话中。</font><font style="vertical-align: inherit;">例如，Drools允许通过预先设置'？'来在只拉（或被动）模式下执行查询。</font><font style="vertical-align: inherit;">调用符号，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例74.被动查询</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function">query <span class="hljs-title">Q</span> <span class="hljs-params">(Integer i)</span>
    <span class="hljs-title">String</span><span class="hljs-params">( <span class="hljs-keyword">this</span> == i.toString()</span> )
end
rule R when
    $i : <span class="hljs-title">Integer</span><span class="hljs-params">()</span>
    ?<span class="hljs-title">Q</span><span class="hljs-params">( $i; )</span>
then
    System.out.<span class="hljs-title">println</span><span class="hljs-params">( $i )</span></span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，由于查询是被动的，因此它不应对插入与查询本身中的连接条件匹配的String作出反应。</font><font style="vertical-align: inherit;">换句话说，这个命令序列</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession ksession = ...<font></font>
ksession.insert(<span class="hljs-number">1</span>);<font></font>
ksession.insert(<span class="hljs-string">"1"</span>);<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不应该导致规则R触发，因为在Integer之后插入了满足查询条件的String，并且被动查询不应该对此插入做出反应。</font><font style="vertical-align: inherit;">相反，如果插入序列被反转，则应该触发规则，因为当已经存在的字符串的存在可以满足被动查询时，插入整数将触发它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不幸的是，PHREAK的懒惰性质不允许引擎对两个事实的插入顺序做出任何区分，因此规则将在两种情况下触发。</font><font style="vertical-align: inherit;">在这种情况下，有必要像旧的基于RETEOO的引擎一样急切地评估规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其他情况下，要求传播是急切的，这意味着它不是即时的，但无论如何必须在引擎/议程开始预定的评估之前发生。</font><font style="vertical-align: inherit;">例如，当规则具有no-loop或lock-on-active属性时，这是必要的，实际上当发生这种情况时，引擎会自动强制执行此传播模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了覆盖这些用例，并且在需要立即或急切规则评估的所有其他情况下，可以通过使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Propagation（Propagation.Type）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释规则本身来声明性地指定</font><font style="vertical-align: inherit;">，其中Propagation.Type是枚举3个可能的值：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IMMEDIATE</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示传播立即执行。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EAGER</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着传播是在计划的评估之前懒惰地进行但是热切地评估。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LAZY</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着传播完全是懒惰的，这是默认的PHREAK行为</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着以下drl：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例75.使用被动查询的数据驱动规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function">query <span class="hljs-title">Q</span> <span class="hljs-params">(Integer i)</span>
    <span class="hljs-title">String</span><span class="hljs-params">( <span class="hljs-keyword">this</span> == i.toString()</span> )
end
rule R @<span class="hljs-title">Propagation</span><span class="hljs-params">(IMMEDIATE)</span> when
    $i : <span class="hljs-title">Integer</span><span class="hljs-params">()</span>
    ?<span class="hljs-title">Q</span><span class="hljs-params">( $i; )</span>
then
    System.out.<span class="hljs-title">println</span><span class="hljs-params">( $i )</span></span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当在String之后插入Integer时，才会使规则R触发，从而根据被动查询的语义进行操作。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_commands_and_the_commandexecutor_2"><a class="anchor" href="index.html#_commands_and_the_commandexecutor_2"></a><a class="link" href="index.html#_commands_and_the_commandexecutor_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7。</font><font style="vertical-align: inherit;">命令和CommandExecutor</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>CommandFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许在这些会话要被执行的命令，唯一的不同之处在于无状态会话KIE执行</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在端设置会话之前。</font><font style="vertical-align: inherit;">目前支持的命令是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FireAllRules</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetGlobal</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetGlobal</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertObject</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertElements</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">询问</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StartProcess</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BatchExecution</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`InsertObject`将插入一个带有可选“out”标识符的对象。</font></font><code>InsertElements</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将迭代一个Iterable，插入每个元素。</font><font style="vertical-align: inherit;">这意味着无状态KIE会话不再仅限于插入对象，它现在可以启动进程或执行查询，并以任何顺序执行此操作。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例76.插入命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
ExecutionResults bresults =<font></font>
  ksession.execute( CommandFactory.newInsert( <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"stilton"</span> ), <span class="hljs-string">"stilton_id"</span> ) );<font></font>
Stilton stilton = bresults.getValue( <span class="hljs-string">"stilton_id"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execute方法总是返回一个</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例，如果它们指定了一个out标识符，例如上面的“stilton_id”，它允许访问任何命令结果。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例77. InsertElements命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">StatelessKieSession ksession = kbase.newStatelessKieSession();<font></font>
Command cmd = CommandFactory.newInsertElements( Arrays.asList( Object[] {<font></font>
                  <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"stilton"</span> ),
                  <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"brie"</span> ),
                  <span class="hljs-keyword">new</span> Cheese( <span class="hljs-string">"cheddar"</span> ),<font></font>
              });<font></font>
ExecutionResults bresults = ksession.execute( cmd );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execute方法只允许一个命令。</font><font style="vertical-align: inherit;">这就是</font></font><code>BatchExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进来</font><font style="vertical-align: inherit;">的地方</font><font style="vertical-align: inherit;">，它代表一个复合命令，由命令列表创建。</font><font style="vertical-align: inherit;">现在，execute将遍历列表并依次执行每个命令。</font><font style="vertical-align: inherit;">这意味着您可以在一次</font></font><code>execute(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用中</font><font style="vertical-align: inherit;">插入一些对象，启动进程，调用fireAllRules并执行查询</font><font style="vertical-align: inherit;">，这非常强大。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，StatelessKieSession将</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在最后自动</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，敏锐的读者可能已经注意到该</font></font><code>FireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，并想知道如何使用StatelessKieSession。</font></font><code>FireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">命令，使用它将禁止最后的自动执行; </font><font style="vertical-align: inherit;">想到将它用作一种手动覆盖功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义XStream marshaller可与Drools Pipeline一起使用，以实现XML脚本，这非常适合服务。</font><font style="vertical-align: inherit;">这里有两个简单的XML示例，一个用于BatchExecution，另一个用于</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例78.简单的BatchExecution XML</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">insert</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">'outStilton'</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">oldPrice</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">oldPrice</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子79. Simple ExecutionResults XML</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">execution-results</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">'outStilton'</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">oldPrice</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">oldPrice</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">result</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">execution-results</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集成书中介绍的Spring和Camel促进了声明性服务。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例80.批处理执行到XML的BatchExecution</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">insert</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"stilton"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">oldPrice</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">oldPrice</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">query</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">'cheeses2'</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">'cheesesWithParams'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>cheddar<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">query</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>CommandExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回报的</font></font><code>ExecutionResults</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是由管道代码片段，以及处理。</font><font style="vertical-align: inherit;">上面的&lt;batch-execution&gt; XML示例的类似输出将是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子81. ExecutionResults Marshalled to XML</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">execution-results</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"stilton"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">result</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">'cheeses2'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">query-results</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">identifiers</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">identifier</span>&gt;</span>cheese<span class="hljs-tag">&lt;/<span class="hljs-title">identifier</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">identifiers</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">row</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>cheddar<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">oldPrice</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">oldPrice</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">row</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">row</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>cheddar<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">price</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">price</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">oldPrice</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-title">oldPrice</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.Cheese</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">row</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">query-results</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">result</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">execution-results</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code>BatchExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了一个配置的XStream实例来支持批处理执行的编组，其中生成的XML可以用作消息格式，如上所示。</font><font style="vertical-align: inherit;">仅对通过Command Factory支持的命令存在已配置的转换器。</font><font style="vertical-align: inherit;">用户可以为其用户对象添加其他转换器。</font><font style="vertical-align: inherit;">这对于编写无状态或有状态KIE会话的脚本非常有用，尤其是涉及服务时。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前没有XML模式来支持模式验证。</font><font style="vertical-align: inherit;">这里概述了基本格式，drools-pipeline模块在单元测试中有一个说明性的</font></font><code>XStreamBatchExecutionTest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单元测试。</font><font style="vertical-align: inherit;">根元素是&lt;batch-execution&gt;，它可以包含零个或多个命令元素。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例82.根XML元素</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span><font></font>
...<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它包含表示命令的元素列表，支持的命令仅限于命令工厂提供的命令。</font><font style="vertical-align: inherit;">其中最基本的是插入对象的&lt;insert&gt;元素。</font><font style="vertical-align: inherit;">insert元素的内容是用户对象，由XStream指示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例83.插入</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">insert</span>&gt;</span>
      ...<span class="hljs-comment">&lt;!-- any user object --&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">insert元素具有“out-identifier”属性，要求插入的对象也将作为结果有效负载的一部分返回。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例84.使用Out Identifier命令插入</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">insert</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">'userVar'</span>&gt;</span><font></font>
      ...<font></font>
   <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用&lt;insert-elements&gt;元素插入对象集合。</font><font style="vertical-align: inherit;">此命令不支持out-identifier。</font><font style="vertical-align: inherit;">这</font></font><code>org.domain.UserClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只是XStream将序列化的说明性用户对象。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例85. Insert Elements命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">insert-elements</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">org.domain.UserClass</span>&gt;</span><font></font>
         ...<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-title">org.domain.UserClass</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">org.domain.UserClass</span>&gt;</span><font></font>
         ...<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-title">org.domain.UserClass</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">org.domain.UserClass</span>&gt;</span><font></font>
         ...<font></font>
      <span class="hljs-tag">&lt;/<span class="hljs-title">org.domain.UserClass</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">insert-elements</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然该</font></font><code>out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性在将特定实例作为结果有效负载返回时很有用，但我们通常希望运行实际查询。</font><font style="vertical-align: inherit;">支持参数和无参数查询。</font><font style="vertical-align: inherit;">该</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性是要调用的查询的名称，并且</font></font><code>out-identifier</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code>&lt;execution-results&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效负载中</font><font style="vertical-align: inherit;">用于查询结果的标识符</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子86.查询命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">query</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">'cheeses'</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">'cheeses'</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">query</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">'cheeses2'</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">'cheesesWithParams'</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>stilton<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">string</span>&gt;</span>cheddar<span class="hljs-tag">&lt;/<span class="hljs-title">string</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">query</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_droolslanguagereferencechapter"><a class="anchor" href="index.html#_droolslanguagereferencechapter"></a><a class="link" href="index.html#_droolslanguagereferencechapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.规则语言参考</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="anchor" href="index.html#_overview_3"></a><a class="link" href="index.html#_overview_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1。</font><font style="vertical-align: inherit;">概观</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools有一种“原生”规则语言。</font><font style="vertical-align: inherit;">这种格式在标点符号方面非常轻，并且通过“扩展器”支持自然和域特定语言，允许语言转换到您的问题域。</font><font style="vertical-align: inherit;">本章主要与本机规则格式协调一致。</font><font style="vertical-align: inherit;">用于呈现语法的图表被称为“铁路”图，它们基本上是语言术语的流程图。</font><font style="vertical-align: inherit;">技术上非常敏锐也可以参考</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL.g</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ，它是规则语言的Antlr3语法。</font><font style="vertical-align: inherit;">如果您使用Rule Workbench，许多规则结构都是通过内容帮助为您完成的，例如，键入“ru”并按ctrl + space，它将为您构建规则结构。</font></font></p>
</div>
<div class="sect3">
<h4 id="_a_rule_file"><a class="anchor" href="index.html#_a_rule_file"></a><a class="link" href="index.html#_a_rule_file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1.1。</font><font style="vertical-align: inherit;">规则文件</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则文件通常是扩展名为.drl的文件。</font><font style="vertical-align: inherit;">在DRL文件中，您可以拥有多个规则，查询和函数，以及一些资源声明，例如由规则和查询分配和使用的导入，全局变量和属性。</font><font style="vertical-align: inherit;">但是，您还可以跨多个规则文件传播规则（在这种情况下，建议使用扩展名.rule，但不是必需的） - 跨文件传播规则可以帮助管理大量规则。</font><font style="vertical-align: inherit;">DRL文件只是一个文本文件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则文件的整体结构是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子87.规则文件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs java"><span class="hljs-keyword">package</span> <span class="hljs-keyword">package</span>-name<font></font>
<font></font>
imports<font></font>
<font></font>
globals<font></font>
<font></font>
functions<font></font>
<font></font>
queries<font></font>
<font></font>
rules</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明元素的顺序并不重要，除了声明的包名称必须是rules文件中的第一个元素。</font><font style="vertical-align: inherit;">所有元素都是可选的，因此您将只使用您需要的元素。</font><font style="vertical-align: inherit;">我们将在以下部分中讨论它们中的每一个。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_what_makes_a_rule"><a class="anchor" href="index.html#_what_makes_a_rule"></a><a class="link" href="index.html#_what_makes_a_rule"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1.2。</font><font style="vertical-align: inherit;">什么是规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于不耐烦的人，就像早期观点一样，规则具有以下粗略结构：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"name"</span><font></font>
    attributes<font></font>
    <span class="hljs-keyword">when</span>
        <span class="hljs-constant">LHS</span>
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">RHS</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这真的很简单。</font><font style="vertical-align: inherit;">大多数标点符号都不需要，即使是“name”的双引号也是可选的，换行符也是如此。</font><font style="vertical-align: inherit;">属性是规则应该如何表现的简单（始终是可选的）提示。</font><font style="vertical-align: inherit;">LHS是规则的条件部分，遵循下面涵盖的特定语法。</font><font style="vertical-align: inherit;">RHS基本上是允许执行方言特定语义代码的块。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要注意，空格并不重要，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定于域的语言，其中逐行处理行，并且空格可能对域语言很重要。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_keywords"><a class="anchor" href="index.html#_keywords"></a><a class="link" href="index.html#_keywords"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2。</font><font style="vertical-align: inherit;">关键词</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 5引入了</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">的概念</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">硬关键字是保留的，在命名域对象，属性，方法，函数和规则文本中使用的其他元素时，不能使用任何硬关键字。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是编写规则时必须避免作为标识符的硬关键字列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code></p>
</li>
<li>
<p><code>false</code></p>
</li>
<li>
<p><code>null</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软关键字只是在其上下文中被识别，如果您愿意，您可以在任何其他地方使用这些单词，但仍建议避免使用这些单词，以避免混淆，如果可能的话。</font><font style="vertical-align: inherit;">以下是软关键字列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>lock-on-active</code></p>
</li>
<li>
<p><code>date-effective</code></p>
</li>
<li>
<p><code>date-expires</code></p>
</li>
<li>
<p><code>no-loop</code></p>
</li>
<li>
<p><code>auto-focus</code></p>
</li>
<li>
<p><code>activation-group</code></p>
</li>
<li>
<p><code>agenda-group</code></p>
</li>
<li>
<p><code>ruleflow-group</code></p>
</li>
<li>
<p><code>entry-point</code></p>
</li>
<li>
<p><code>duration</code></p>
</li>
<li>
<p><code>package</code></p>
</li>
<li>
<p><code>import</code></p>
</li>
<li>
<p><code>dialect</code></p>
</li>
<li>
<p><code>salience</code></p>
</li>
<li>
<p><code>enabled</code></p>
</li>
<li>
<p><code>attributes</code></p>
</li>
<li>
<p><code>rule</code></p>
</li>
<li>
<p><code>extend</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么时候</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font></font></p>
</li>
<li>
<p><code>template</code></p>
</li>
<li>
<p><code>query</code></p>
</li>
<li>
<p><code>declare</code></p>
</li>
<li>
<p><code>function</code></p>
</li>
<li>
<p><code>global</code></p>
</li>
<li>
<p><code>eval</code></p>
</li>
<li>
<p><code>not</code></p>
</li>
<li>
<p><code>in</code></p>
</li>
<li>
<p><code>or</code></p>
</li>
<li>
<p><code>and</code></p>
</li>
<li>
<p><code>exists</code></p>
</li>
<li>
<p><code>forall</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">积累</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜集</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font></p>
</li>
<li>
<p><code>action</code></p>
</li>
<li>
<p><code>reverse</code></p>
</li>
<li>
<p><code>result</code></p>
</li>
<li>
<p><code>end</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过度</font></font></p>
</li>
<li>
<p><code>init</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，你可以将这些（硬和软）单词作为camel case中方法名称的一部分，比如notSomething（）或accumulateSomething（） - 这个场景没有问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然上面的3个硬关键字不太可能在您现有的域模型中使用，但如果您绝对需要将它们用作标识符而不是关键字，则DRL语言提供了在规则文本上转义硬关键字的功能。</font><font style="vertical-align: inherit;">要逃避一个单词，只需将其包含在严重的重音中，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Holiday( `<span class="hljs-literal">true</span>` == <span class="hljs-string">"yes"</span> ) <span class="hljs-comment">// please note that Drools will resolve that reference to the method Holiday.isTrue()</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comments"><a class="anchor" href="index.html#_comments"></a><a class="link" href="index.html#_comments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3。</font><font style="vertical-align: inherit;">注释</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释是Drools引擎忽略的文本部分。</font><font style="vertical-align: inherit;">遇到它们时会被剥离，除了语义代码块之外，比如规则的RHS。</font></font></p>
</div>
<div class="sect3">
<h4 id="_single_line_comment"><a class="anchor" href="index.html#_single_line_comment"></a><a class="link" href="index.html#_single_line_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3.1。</font><font style="vertical-align: inherit;">单行评论</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要创建单行注释，可以使用“//”。</font><font style="vertical-align: inherit;">解析器将忽略注释符号后面的行中的任何内容。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"Testing Comments"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-regexp">//</span> <span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> a single line comment<font></font>
    eval( <span class="hljs-literal">true</span> ) <span class="hljs-regexp">//</span> <span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> a comment <span class="hljs-keyword">in</span> the same line <span class="hljs-keyword">of</span> a pattern
<span class="hljs-keyword">then</span>
    <span class="hljs-regexp">//</span> <span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> a comment inside a semantic code block<font></font>
end</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论的“＃”已被删除。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_multi_line_comment"><a class="anchor" href="index.html#_multi_line_comment"></a><a class="link" href="index.html#_multi_line_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3.2。</font><font style="vertical-align: inherit;">多行评论</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/multi_line_comment.png" alt="多行评论">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图78.多行注释</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多行注释用于在语义代码块内外注释文本块。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Test Multi-line Comments"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-comment">/* this is a multi-line comment
       in the left hand side of a rule */</span>
    eval( <span class="hljs-keyword">true</span> )<font></font>
then<font></font>
    <span class="hljs-comment">/* and this is a multi-line comment
       in the right hand side of a rule */</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_error_messages"><a class="anchor" href="index.html#_error_messages"></a><a class="link" href="index.html#_error_messages"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4。</font><font style="vertical-align: inherit;">错误消息</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 5引入了标准化的错误消息。</font><font style="vertical-align: inherit;">此标准化旨在帮助用户以更轻松，更快捷的方式查找和解决问题。</font><font style="vertical-align: inherit;">在本节中，您将学习如何识别和解释这些错误消息，并且您还将获得有关如何解决与之相关的问题的一些提示。</font></font></p>
</div>
<div class="sect3">
<h4 id="_message_format"><a class="anchor" href="index.html#_message_format"></a><a class="link" href="index.html#_message_format"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.1。</font><font style="vertical-align: inherit;">消息格式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准化包括错误消息格式，为了更好地解释这种格式，让我们使用以下示例：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/error_message.png" alt="错误信息">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图79.错误消息格式</font></font></div>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1块：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此区域标识错误代码。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二块：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行和列信息。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3块：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些描述问题的文字。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第4块：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是第一个背景。</font><font style="vertical-align: inherit;">通常表示发生错误的规则，函数，模板或查询。</font><font style="vertical-align: inherit;">该块不是强制性的。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第5块：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识发生错误的模式。</font><font style="vertical-align: inherit;">该块不是强制性的。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_error_messages_description"><a class="anchor" href="index.html#_error_messages_description"></a><a class="link" href="index.html#_error_messages_description"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2。</font><font style="vertical-align: inherit;">错误消息说明</font></font></a></h4>
<div class="sect4">
<h5 id="_101_no_viable_alternative"><a class="anchor" href="index.html#_101_no_viable_alternative"></a><a class="link" href="index.html#_101_no_viable_alternative"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2.1。</font><font style="vertical-align: inherit;">101：没有可行的选择</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示最常见的错误，解析器进入决策点但无法识别替代方案。</font><font style="vertical-align: inherit;">这里有些例子：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">rule one</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">  when</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">    exists Foo()</span>
<span class="hljs-attribute">4</span>: <span class="hljs-string">    exits Bar()  // "exits"</span>
<span class="hljs-attribute">5</span>: <span class="hljs-string">  then</span>
<span class="hljs-attribute">6</span>: <span class="hljs-string">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的示例生成此消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 101]第4：4行在第一条规则的输入“退出”中没有可行的替代方案</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乍一看，这似乎是有效的语法，但它不是（退出！=存在）。</font><font style="vertical-align: inherit;">我们来看看下一个例子：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">package org.drools.examples;</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">rule</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">  when</span>
<span class="hljs-attribute">4</span>: <span class="hljs-string">    Object()</span>
<span class="hljs-attribute">5</span>: <span class="hljs-string">  then</span>
<span class="hljs-attribute">6</span>: <span class="hljs-string">    System.out.println("A RHS");</span>
<span class="hljs-attribute">7</span>: <span class="hljs-string">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在上面的代码生成了这条消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 101]第3行：2在输入'WHEN'时没有可行的选择</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此消息表示解析器遇到令牌</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WHEN</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，实际上是一个硬关键字，但由于缺少规则名称，它位于错误的位置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你犯一个简单的词汇错误时，也会出现错误“没有可行的选择”。</font><font style="vertical-align: inherit;">这是一个词汇问题的示例：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">rule simple_rule</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">  when</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">    Student( name == "Andy )</span>
<span class="hljs-attribute">4</span>: <span class="hljs-string">  then</span>
<span class="hljs-attribute">5</span>: <span class="hljs-string">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的代码错过了关闭引号，因此解析器生成此错误消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 101]第0行：-1在模式Student的规则simple_rule中输入'&lt;eof&gt;'没有可行的替代方法</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常行和列信息是准确的，但在某些情况下（如未闭合的引号），解析器生成0：-1位置。</font><font style="vertical-align: inherit;">在这种情况下，您应该检查是否忘记关闭引号，撇号或括号。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_102_mismatched_input"><a class="anchor" href="index.html#_102_mismatched_input"></a><a class="link" href="index.html#_102_mismatched_input"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2.2。</font><font style="vertical-align: inherit;">102：输入不匹配</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此错误表示解析器正在查找它未在当前输入位置找到的特定符号。</font><font style="vertical-align: inherit;">以下是一些示例：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">rule simple_rule</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">  when</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">    foo3 : Bar(</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的示例生成此消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 102]第0行：-1不匹配的输入'&lt;eof&gt;'期待'）'在规则simple_rule中的模式栏</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决此问题，必须完成规则语句。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常当你得到一个0：-1的位置时，就意味着解析器到达了源的末尾。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下代码生成多个错误消息：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-number">1</span>: package org.drools.examples;
<span class="hljs-number">2</span>:
<span class="hljs-number">3</span>: rule <span class="hljs-string">"Avoid NPE on wrong syntax"</span>
<span class="hljs-number">4</span>:   when
<span class="hljs-number">5</span>:     not( Cheese( ( type == <span class="hljs-string">"stilton"</span>, price == <span class="hljs-number">10</span> ) || ( type == <span class="hljs-string">"brie"</span>, price == <span class="hljs-number">15</span> ) ) from $cheeseList )
<span class="hljs-number">6</span>:   then
<span class="hljs-number">7</span>:     System.out.println(<span class="hljs-string">"OK"</span>);
<span class="hljs-number">8</span>: end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是与此来源相关的错误：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 102]第5:36行输入'，'期待'）'在规则“避免NPE错误语法”模式奶酪中不匹配</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 101]第5:57行在规则“避免NPE语法错误”的输入“类型”中没有可行的选择</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 102]第5行：106不匹配的输入'）'期望'然后'在规则中“避免错误语法上的NPE”</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，第二个问题与第一个问题有关。</font><font style="vertical-align: inherit;">要修复它，只需用AND运算符（'&amp;&amp;'）替换逗号（'，'）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下，您可以收到多条错误消息。</font><font style="vertical-align: inherit;">尝试从第一个开始逐个修复。</font><font style="vertical-align: inherit;">仅产生一些错误消息是其他错误的结果。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_103_failed_predicate"><a class="anchor" href="index.html#_103_failed_predicate"></a><a class="link" href="index.html#_103_failed_predicate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2.3。</font><font style="vertical-align: inherit;">103：谓词失败</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证语义谓词评估为false。</font><font style="vertical-align: inherit;">通常这些语义谓词用于识别软关键字。</font><font style="vertical-align: inherit;">此示例显示了这种情况：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"> <span class="hljs-number">1</span>: package nesting;
 <span class="hljs-number">2</span>: dialect <span class="hljs-string">"mvel"</span>
 <span class="hljs-number">3</span>:
 <span class="hljs-number">4</span>: import org.drools.compiler.Person
 <span class="hljs-number">5</span>: import org.drools.compiler.Address
 <span class="hljs-number">6</span>:
 <span class="hljs-number">7</span>: fdsfdsfds
 <span class="hljs-number">8</span>:
 <span class="hljs-number">9</span>: rule <span class="hljs-string">"test something"</span>
<span class="hljs-number">10</span>:   when
<span class="hljs-number">11</span>:     p: Person( name==<span class="hljs-string">"Michael"</span> )
<span class="hljs-number">12</span>:   then
<span class="hljs-number">13</span>:     p.name = <span class="hljs-string">"other"</span>;
<span class="hljs-number">14</span>:     System.out.println(p.name);
<span class="hljs-number">15</span>: end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用此示例，我们收到以下错误消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 103]第7行：0规则'rule_key'失败的谓词：{（validateIdentifierKey（DroolsSoftKeywords.RULE））}？</font><font style="vertical-align: inherit;">在规则中</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fdsfdsfds</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字无效，分析器无法识别它作为软关键字</font></font><code>rule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此错误与102：输入不匹配非常相似，但通常涉及软关键字。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_104_trailing_semi_colon_not_allowed"><a class="anchor" href="index.html#_104_trailing_semi_colon_not_allowed"></a><a class="link" href="index.html#_104_trailing_semi_colon_not_allowed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2.4。</font><font style="vertical-align: inherit;">104：不允许使用尾随分号</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此错误与</font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">相关联，其</font><font style="vertical-align: inherit;">子句的表达式不能以分号结束。</font><font style="vertical-align: inherit;">检查此示例：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">rule simple_rule</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">  when</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">    eval(abc();)</span>
<span class="hljs-attribute">4</span>: <span class="hljs-string">  then</span>
<span class="hljs-attribute">5</span>: <span class="hljs-string">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于eval中的尾随分号，我们收到以下错误消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 104]第3行：规则simple_rule中不允许使用4个尾部分号</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个问题很容易解决：只需删除分号。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_105_early_exit"><a class="anchor" href="index.html#_105_early_exit"></a><a class="link" href="index.html#_105_early_exit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.2.5。</font><font style="vertical-align: inherit;">105：提前退出</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">识别器来到语法中的一个子规则，必须至少匹配一次替代，但是子规则与任何东西都不匹配。</font><font style="vertical-align: inherit;">简单地说：解析器已经进入了一个没有出路的分支。</font><font style="vertical-align: inherit;">这个例子说明了它：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">1</span>: <span class="hljs-string">template test_error</span>
<span class="hljs-attribute">2</span>: <span class="hljs-string">  aa s  11;</span>
<span class="hljs-attribute">3</span>: <span class="hljs-string">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是与上述示例相关的消息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ERR 105]第2行：2所需（...）+循环与模板test_error中输入'aa'处的任何内容都不匹配</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决此问题，必须删除数值，因为它既不是可能开始新模板槽的有效数据类型，也不是任何其他规则文件构造的可能启动。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_other_messages"><a class="anchor" href="index.html#_other_messages"></a><a class="link" href="index.html#_other_messages"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4.3。</font><font style="vertical-align: inherit;">其他消息</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何其他消息表示发生了不好的事情，请联系开发团队。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_package"><a class="anchor" href="index.html#_package"></a><a class="link" href="index.html#_package"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5。</font><font style="vertical-align: inherit;">包</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包是规则和其他相关结构的集合，例如导入和全局变量。</font><font style="vertical-align: inherit;">包成员通常彼此相关 - 例如，可能是HR规则。</font><font style="vertical-align: inherit;">包表示命名空间，理想情况下，该命名空间对于给定的规则分组保持唯一。</font><font style="vertical-align: inherit;">包名称本身就是命名空间，并且以任何方式与文件或文件夹无关。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从多个规则源汇编规则，并且具有一个顶级包配置，所有规则都保存在（当规则组装时）。</font><font style="vertical-align: inherit;">虽然，不可能合并到以不同名称声明的相同包资源中。</font><font style="vertical-align: inherit;">但是，单个Rulebase可能包含多个构建在其上的包。</font><font style="vertical-align: inherit;">一个常见的结构是将包的所有规则与包声明放在同一个文件中（因此它完全是自包含的）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下铁路图显示了可构成封装的所有组件。</font><font style="vertical-align: inherit;">请注意，包</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有命名空间，并使用包名称的标准Java约定声明; </font><font style="vertical-align: inherit;">即，没有空格，不像允许空格的规则名称。</font><font style="vertical-align: inherit;">就元素的顺序而言，它们可以在规则文件中以任何顺序出现，但</font></font><code>package</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">除外，该</font><font style="vertical-align: inherit;">语句必须位于文件的顶部。</font><font style="vertical-align: inherit;">在所有情况下，分号都是可选的。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/package.png" alt="包">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图80.包</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，任何规则属性（如规则属性一节所述）也可以在包级别写入，取代属性的默认值。</font><font style="vertical-align: inherit;">修改后的默认值仍可由规则中的属性设置替换。</font></font></p>
</div>
<div class="sect3">
<h4 id="_import"><a class="anchor" href="index.html#_import"></a><a class="link" href="index.html#_import"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5.1。</font><font style="vertical-align: inherit;">进口</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/import.png" alt="进口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图81.导入</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Import语句的工作方式类似于Java中的import语句。</font><font style="vertical-align: inherit;">您需要为要在规则中使用的任何对象指定完全限定的路径和类型名称。</font><font style="vertical-align: inherit;">Drools会自动从同名的Java包以及包中导入类</font></font><code>java.lang</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_global"><a class="anchor" href="index.html#_global"></a><a class="link" href="index.html#_global"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5.2。</font><font style="vertical-align: inherit;">全球</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/global.png" alt="全球">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图82.全球</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随</font></font><code>global</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您定义全局变量。</font><font style="vertical-align: inherit;">它们用于使应用程序对象可用于规则。</font><font style="vertical-align: inherit;">通常，它们用于提供规则使用的数据或服务，尤其是规则结果中使用的应用程序服务，以及从规则返回数据，如规则后果中添加的日志或值，或者规则与应用程序交互，做回调。</font><font style="vertical-align: inherit;">全局变量未插入到工作存储器中，因此除非具有常量不可变值，否则永远不应使用全局规则来建立规则。</font><font style="vertical-align: inherit;">无法通知引擎有关全局变量的值变化，也不会跟踪它们的变化。</font><font style="vertical-align: inherit;">在约束中错误地使用全局变量可能会产生令人惊讶的结果 - 这种方式令人惊讶。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果多个包声明具有相同标识符的全局变量，则它们必须属于同一类型，并且所有包都将引用相同的全局值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用全局变量，您必须：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在规则文件中声明全局变量并在规则中使用它。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-built_in">global</span> java.util.List myGlobalList;<font></font>
<font></font>
rule <span class="hljs-string">"Using a global"</span>
<span class="hljs-keyword">when</span>
    eval( <span class="hljs-literal">true</span> )
<span class="hljs-keyword">then</span>
    myGlobalList.add( <span class="hljs-string">"Hello World"</span> );<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在工作记忆中设置全局值。</font><font style="vertical-align: inherit;">在将任何事实断言到工作内存之前设置所有全局值是最佳做法。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List list = <span class="hljs-keyword">new</span> ArrayList();<font></font>
KieSession kieSession = kiebase.newKieSession();<font></font>
kieSession.setGlobal( <span class="hljs-string">"myGlobalList"</span>, list );</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，这些只是您从应用程序传递到工作内存的对象的命名实例。</font><font style="vertical-align: inherit;">这意味着您可以传入您想要的任何对象：您可以传入服务定位器，也可以传递服务本身。</font><font style="vertical-align: inherit;">使用新</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素，现在通常将Hibernate会话作为全局传递，以允许</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从命名的Hibernate查询中提取数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个示例可以是电子邮件服务的实例。</font><font style="vertical-align: inherit;">在调用Drools引擎的集成代码中，获取emailService对象，然后将其设置在工作内存中。</font><font style="vertical-align: inherit;">在DRL中，您声明您具有类型为EmailService的全局，并将其命名为“email”。</font><font style="vertical-align: inherit;">然后在您的规则后果中，您可以使用email.sendSMS（数字，消息）之类的内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Globals不是为了在规则之间共享数据而设计的，它们绝不应该用于此目的。</font><font style="vertical-align: inherit;">规则总是推理并对工作内存状态作出反应，因此如果要将数据从规则传递到规则，请将数据作为事实声明到工作内存中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在更改全局变量所持有的数据时必须小心，因为Drools引擎不知道这些变化，因此无法对它们作出反应。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_function"><a class="anchor" href="index.html#_function"></a><a class="link" href="index.html#_function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6。</font><font style="vertical-align: inherit;">功能</font></font></a></h3>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/function.png" alt="功能">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图83.功能</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数是将语义代码放入规则源文件中的一种方法，而不是普通的Java类。</font><font style="vertical-align: inherit;">他们无法做任何事情，而不是你可以用帮助类做什么。</font><font style="vertical-align: inherit;">（实际上，编译器会在幕后为您生成辅助类。）在规则中使用函数的主要优点是可以将逻辑保存在一个位置，并且可以根据需要更改函数（可以是好事还是坏事）。</font><font style="vertical-align: inherit;">函数对于调用</font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则</font><font style="vertical-align: inherit;">的result（</font><font style="vertical-align: inherit;">）部分的</font><font style="vertical-align: inherit;">操作最有用</font><font style="vertical-align: inherit;">，特别是如果一次又一次地使用该特定操作，可能每个规则只有不同的参数。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">典型的函数声明如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">String</span> <span class="hljs-title">hello</span>(<span class="hljs-params">String name</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello "</span>+name+<span class="hljs-string">"!"</span>;<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，使用</font></font><code>function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字，即使它不是Java的一部分。</font><font style="vertical-align: inherit;">函数的参数定义为方法，如果不需要参数，则不必具有参数。</font><font style="vertical-align: inherit;">返回类型的定义与常规方法类似。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，您可以在辅助类中使用静态方法，例如</font></font><code>Foo.hello()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Drools支持使用函数导入，所以您需要做的就是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">import</span> <span class="hljs-tag">function</span> <span class="hljs-tag">my</span><span class="hljs-class">.package</span><span class="hljs-class">.Foo</span><span class="hljs-class">.hello</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论定义或导入函数的方式如何，都可以通过名称，结果或语义代码块内部调用函数来使用函数。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"using a static function"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
    <span class="hljs-title">eval</span>(<span class="hljs-params"> <span class="hljs-keyword">true</span> </span>)
then
    System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> hello( <span class="hljs-string">"Bob"</span> </span>) )</span>;<font></font>
end</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_type_declaration"><a class="anchor" href="index.html#_type_declaration"></a><a class="link" href="index.html#_type_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7。</font><font style="vertical-align: inherit;">输入声明</font></font></a></h3>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/meta_data.png" alt="元数据">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图84. meta_data</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/type_declaration.png" alt="类型声明">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图85. type_declaration</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型声明在Drools引擎中有两个主要目标：允许声明新类型，并允许声明类型的元数据。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明新类型：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Drools使用普通Java对象作为事实开箱即用。</font><font style="vertical-align: inherit;">但是，有时用户可能希望直接将模型定义到Drools引擎，而不必担心像Java这样的低级语言创建模型。</font><font style="vertical-align: inherit;">在其他时候，已经构建了一个域模型，但最终用户希望或需要使用主要在推理过程中使用的其他实体来补充此模型。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明元数据：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实可能包含与之关联的元信息。</font><font style="vertical-align: inherit;">元信息的示例包括未由事实属性表示的任何类型的数据，并且在该事实类型的所有实例之间是一致的。</font><font style="vertical-align: inherit;">该元信息可以在运行时由引擎查询并在推理过程中使用。</font></font></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_declaring_new_types"><a class="anchor" href="index.html#_declaring_new_types"></a><a class="link" href="index.html#_declaring_new_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.1。</font><font style="vertical-align: inherit;">声明新类型</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要声明一个新类型，您需要做的就是使用关键字</font></font><code>declare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，后跟字段列表和关键字</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一个新的事实必须有一个字段列表，否则引擎将在类路径中查找现有的事实类，如果找不到则引发错误。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子88.声明一个新的事实类型：地址</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Address
   <span class="hljs-built_in">number</span> : <span class="hljs-built_in">int</span>
   streetName : <span class="hljs-keyword">String</span>
   city : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的示例声明了一个名为的新事实类型</font></font><code>Address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这一事实类型将有三个属性：</font></font><code>number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>streetName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>city</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个属性都有一个类型，可以是任何有效的Java类型，包括用户创建的任何其他类，甚至是之前声明的其他事实类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，我们可能想要声明另一个事实类型</font></font><code>Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例89.声明一个新的事实类型：Person</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    dateOfBirth : <span class="hljs-keyword">java</span>.util.<span class="hljs-built_in">Date</span>
    address : Address
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如我们在前面的示例中所看到的，</font></font><code>dateOfBirth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font><code>java.util.Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Java API </font><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">，</font></font><code>address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而是先前定义的事实类型Address。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>import</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，</font><font style="vertical-align: inherit;">每次使用该</font><font style="vertical-align: inherit;">子句</font><font style="vertical-align: inherit;">编写时，都可以避免编写类的完全限定名称</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子90.通过使用import避免使用完全限定的类名</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">import java.util.Date<font></font>
<font></font>
<span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    dateOfBirth : <span class="hljs-built_in">Date</span>
    address : Address
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您声明一个新的事实类型时，Drools将在编译时生成实现表示事实类型的Java类的字节码。</font><font style="vertical-align: inherit;">生成的Java类将是类型定义的一对一Java Bean映射。</font><font style="vertical-align: inherit;">因此，对于前面的示例，生成的Java类将是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子91.为前一个Person事实类型声明生成了Java类</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> java.util.Date dateOfBirth;
    <span class="hljs-keyword">private</span> Address address;<font></font>
<font></font>
    <span class="hljs-comment">// empty constructor</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">()</span> </span>{...}<font></font>
<font></font>
    <span class="hljs-comment">// constructor with all fields</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">( String name, Date dateOfBirth, Address address )</span> </span>{...}<font></font>
<font></font>
    <span class="hljs-comment">// if keys are defined, constructor with keys</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Person</span><span class="hljs-params">( ...keys... )</span> </span>{...}<font></font>
<font></font>
    <span class="hljs-comment">// getters and setters</span>
    <span class="hljs-comment">// equals/hashCode</span>
    <span class="hljs-comment">// toString</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于生成的类是一个简单的Java类，因此它可以在规则中透明地使用，就像任何其他事实一样。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子92.在规则中使用声明的类型</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Using a declared Type"</span>
<span class="hljs-keyword">when</span>&lt;<font></font>
    $p : Person( name == <span class="hljs-string">"Bob"</span> )<font></font>
then<font></font>
    <span class="hljs-comment">// Insert Mark, who is Bob's mate.</span>
    Person mark = <span class="hljs-keyword">new</span> Person();<font></font>
    mark.setName(<span class="hljs-string">"Mark"</span>);<font></font>
    insert( mark );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_declaring_enumerative_types"><a class="anchor" href="index.html#_declaring_enumerative_types"></a><a class="link" href="index.html#_declaring_enumerative_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.1.1。</font><font style="vertical-align: inherit;">声明枚举类型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL还支持枚举类型的声明。</font><font style="vertical-align: inherit;">此类型声明需要附加关键字</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，后跟逗号分隔的由分号终止的可允许值列表。</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Using a declared Type"</span>
<span class="hljs-keyword">when</span>
    $p : Person( name == <span class="hljs-string">"Bob"</span> )<font></font>
then<font></font>
    <span class="hljs-comment">// Insert Mark, who is Bob's mate.</span>
    Person mark = <span class="hljs-keyword">new</span> Person();<font></font>
    mark.setName(<span class="hljs-string">"Mark"</span>);<font></font>
    insert( mark );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译器将使用静态方法valueOf（）和values（）以及实例方法ordinal（），compareTo（）和name（）生成有效的Java枚举。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复杂枚举也得到部分支持，声明内部字段与常规类型声明类似。</font><font style="vertical-align: inherit;">请注意，从版本6.x开始，枚举字段</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持其他声明的类型或枚举</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> enum DaysOfWeek
   SUN(<span class="hljs-string">"Sunday"</span>),MON(<span class="hljs-string">"Monday"</span>),TUE(<span class="hljs-string">"Tuesday"</span>),WED(<span class="hljs-string">"Wednesday"</span>),THU(<span class="hljs-string">"Thursday"</span>),FRI(<span class="hljs-string">"Friday"</span>),SAT(<span class="hljs-string">"Saturday"</span>);</span><font></font>
<font></font>
   fullName : String<font></font>
<span class="hljs-operator"><span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后可以在规则中使用枚举</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子93.在规则中使用声明性枚举</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Using a declared Enum"</span>
<span class="hljs-keyword">when</span>
   <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Employee</span>( dayOff == <span class="hljs-constant">DaysOfWeek</span>.<span class="hljs-constant">MONDAY</span> )
<span class="hljs-keyword">then</span><font></font>
   ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_declaring_metadata"><a class="anchor" href="index.html#_declaring_metadata"></a><a class="link" href="index.html#_declaring_metadata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.2。</font><font style="vertical-align: inherit;">声明元数据</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将元数据分配给Drools中的几个不同构造：事实类型，事实属性和规则。</font><font style="vertical-align: inherit;">Drools使用at符号（'@'）来引入元数据，它总是使用以下形式：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-property">@metadata_key</span>( metadata_value )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带括号的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metadata_value</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可选的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果要声明一个元数据属性，例如</font></font><code>author</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其值为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bob</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，则可以简单地写：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子94.声明元数据属性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-property">@author</span>( Bob )</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools允许声明任何任意元数据属性，但有些属性对引擎具有特殊含义，而其他属性仅可用于在运行时查询。</font><font style="vertical-align: inherit;">Drools允许为事实类型和事实属性声明元数据。</font><font style="vertical-align: inherit;">在事实类型的属性之前声明的任何元数据都被分配给事实类型，而在属性之后声明的元数据被分配给该特定属性。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子95.声明事实类型和属性的元数据属性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">import java.util.Date<font></font>
<font></font>
<span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    @author( Bob )
    @dateOfCreation( <span class="hljs-number">01</span>-Feb-<span class="hljs-number">2009</span> )

    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">key</span> @maxLength( <span class="hljs-number">30</span> )
    dateOfBirth : <span class="hljs-built_in">Date</span>
    address : Address
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的示例中，为事实类型（</font></font><code>@author</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>@dateOfCreation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">声明了两个元数据项，</font><font style="vertical-align: inherit;">为name属性（</font></font><code>@key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>@maxLength</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">定义了</font><font style="vertical-align: inherit;">两个元数据项</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，</font></font><code>@key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据没有必需的值，因此括号和值被省略：</font></font></p>
</div>
<div class="sect4">
<h5 id="_predefined_class_level_annotations"><a class="anchor" href="index.html#_predefined_class_level_annotations"></a><a class="link" href="index.html#_predefined_class_level_annotations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.2.1。</font><font style="vertical-align: inherit;">预定义的类级别注释</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些注释具有由引擎解释的预定义语义。</font><font style="vertical-align: inherit;">以下是一些预定义注释及其含义的列表。</font></font></p>
</div>
<div class="sect5">
<h6 id="__role_fact_event"><a class="anchor" href="index.html#__role_fact_event"></a><a class="link" href="index.html#__role_fact_event"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@role（&lt;fact | event&gt;）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@role注释定义引擎应如何处理该类型的实例：作为常规事实或事件。</font><font style="vertical-align: inherit;">它接受两个可能的值：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实：这是默认值，声明该类型将作为常规事实处理。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event：声明该类型将作为事件处理。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例声明股票代理应用程序中的事实类型StockTick将作为事件处理。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子96.将事实类型声明为事件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">import some.package.StockTick<font></font>
<font></font>
<span class="hljs-operator"><span class="hljs-keyword">declare</span> StockTick
    @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这同样适用于内联声明的事实。</font><font style="vertical-align: inherit;">如果StockTick是在DRL本身中声明的事实类型，而不是以前存在的类，则代码将是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例97.声明一个事实类型并为其指定事件角色</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> StockTick
    @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )

    datetime : <span class="hljs-keyword">java</span>.util.<span class="hljs-built_in">Date</span>
    symbol : <span class="hljs-keyword">String</span>
    price : <span class="hljs-keyword">double</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="__typesafe_boolean"><a class="anchor" href="index.html#__typesafe_boolean"></a><a class="link" href="index.html#__typesafe_boolean"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@typesafe（&lt;boolean&gt;）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，所有类型声明都在启用类型安全的情况下编译 </font><font style="vertical-align: inherit;">@typesafe（false）提供了一种通过允许回退来覆盖此行为的方法，键入不安全评估，其中所有约束都作为MVEL约束生成并动态执行。</font><font style="vertical-align: inherit;">在处理没有任何泛型或混合类型集合的集合时，这很重要。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="__timestamp_attribute_name"><a class="anchor" href="index.html#__timestamp_attribute_name"></a><a class="link" href="index.html#__timestamp_attribute_name"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@timestamp（&lt;属性名称&gt;）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个事件都有一个分配给它的相关时间戳。</font><font style="vertical-align: inherit;">默认情况下，给定事件的时间戳从会话时钟读取，并在事件插入工作存储器时分配给事件。</font><font style="vertical-align: inherit;">虽然有时候事件将时间戳作为其自身属性之一。</font><font style="vertical-align: inherit;">在这种情况下，用户可以告诉引擎使用事件属性的时间戳，而不是从会话时钟中读取它。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-property">@timestamp</span>( &lt;attributeName&gt; )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要告诉引擎要使用哪个属性作为事件时间戳的来源，只需将属性名称列为@timestamp标记的参数。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例98.声明VoiceCall时间戳属性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> VoiceCall
    @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )
    @<span class="hljs-keyword">timestamp</span>( callDateTime )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="__duration_attribute_name"><a class="anchor" href="index.html#__duration_attribute_name"></a><a class="link" href="index.html#__duration_attribute_name"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@duration（&lt;attribute name&gt;）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持两种事件语义：时间点事件和基于时间间隔的事件。</font><font style="vertical-align: inherit;">时间点事件表示为基于时间间隔的事件，其持续时间为零。</font><font style="vertical-align: inherit;">默认情况下，所有事件的持续时间为零。</font><font style="vertical-align: inherit;">用户可以通过声明事件类型中的哪个属性包含事件的持续时间来为事件归属不同的持续时间。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-property">@duration</span>( &lt;attributeName&gt; )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，对于我们的VoiceCall事实类型，声明将是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例99.声明VoiceCall持续时间属性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> VoiceCall
    @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )
    @<span class="hljs-keyword">timestamp</span>( callDateTime )
    @<span class="hljs-keyword">duration</span>( callDuration )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="__expires_time_interval"><a class="anchor" href="index.html#__expires_time_interval"></a><a class="link" href="index.html#__expires_time_interval"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@expires（&lt;时间间隔&gt;）</font></font></a></h6>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅在STREAM模式下运行引擎时才考虑此标记。</font><font style="vertical-align: inherit;">此外，还有关于使用此标记的影响的其他讨论在内存管理部分进行。</font><font style="vertical-align: inherit;">它包含在这里是为了完整。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在工作存储器中一段时间​​后，事件可能会自动过期。</font><font style="vertical-align: inherit;">通常，当基于KIE基础中的现有规则，事件不再匹配并激活任何规则时，就会发生这种情况。</font><font style="vertical-align: inherit;">虽然，可以明确定义事件何时到期。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-property">@expires</span>( &lt;timeOffset&gt; )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">timeOffset</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">是以下形式的时间间隔：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">[#d][#h][#m][#s][#[ms]]</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[]</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示可选参数，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\＃</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示数值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，要声明VoiceCall事实应在插入工作内存后1小时35分钟后过期，用户将写入：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例100.声明VoiceCall事件的到期偏移量</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> VoiceCall
    @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )
    @<span class="hljs-keyword">timestamp</span>( callDateTime )
    @<span class="hljs-keyword">duration</span>( callDuration )
    @expires( <span class="hljs-number">1</span>h35m )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@expires策略将优先并覆盖从KIE库中的时间约束和滑动窗口计算的隐式到期偏移。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="__propertychangesupport"><a class="anchor" href="index.html#__propertychangesupport"></a><a class="link" href="index.html#__propertychangesupport"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@propertyChangeSupport</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以对Javabean（tm）规范中定义的实现对属性更改的支持的事实进行注释，以便引擎注册自己以侦听事实属性的更改。</font><font style="vertical-align: inherit;">不推荐使用Drools 4 API中insert（）方法中使用的布尔参数，并且drools-api模块中不存在该参数。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例101. @propertyChangeSupport</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">declare</span> Person
    <span class="hljs-variable">@propertyChangeSupport</span>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="__propertyreactive"><a class="anchor" href="index.html#__propertyreactive"></a><a class="link" href="index.html#__propertyreactive"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@propertyReactive</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使此类型属性具有反应性。</font><font style="vertical-align: inherit;">有关详细信息，请参阅细粒度属性更改侦听器部分。</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_predefined_attribute_level_annotations"><a class="anchor" href="index.html#_predefined_attribute_level_annotations"></a><a class="link" href="index.html#_predefined_attribute_level_annotations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.2.2。</font><font style="vertical-align: inherit;">预定义的属性级别注释</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，Drools还支持类型属性中的注释。</font><font style="vertical-align: inherit;">以下是预定义属性注释的列表。</font></font></p>
</div>
<div class="sect5">
<h6 id="__key"><a class="anchor" href="index.html#__key"></a><a class="link" href="index.html#__key"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@键</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将属性声明为键属性对生成的类型有两个主要影响：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该属性将用作类型的键标识符，因此，生成的类将实现equals（）和hashCode（）方法，在比较此类型的实例时将该属性考虑在内。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools将使用所有关键属性作为参数生成构造函数。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子102.类型的@key声明的例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    firstName : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">key</span>
    lastName : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">key</span>
    age : <span class="hljs-built_in">int</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于前面的示例，Drools将生成equals（）和hashCode（）方法，这些方法将检查firstName和lastName属性以确定Person的两个实例是否彼此相等，但不会检查age属性。</font><font style="vertical-align: inherit;">它还将生成一个构造函数，将firstName和lastName作为参数，允许用以下代码创建实例：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子103.使用密钥构造函数创建实例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Person person = <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"John"</span>, <span class="hljs-string">"Doe"</span> );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="__position"><a class="anchor" href="index.html#__position"></a><a class="link" href="index.html#__position"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@位置</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式支持类型声明的位置参数。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置参数是您不需要指定字段名称的参数，因为位置映射到已知的命名字段。</font><font style="vertical-align: inherit;">即Person（name ==“mark”）可以重写为Person（“mark”;）。</font><font style="vertical-align: inherit;">分号';' </font><font style="vertical-align: inherit;">很重要，以便引擎知道它之前的所有内容都是位置参数。</font><font style="vertical-align: inherit;">否则我们可能会认为它是一个布尔表达式，它就是在分号后解释它的方式。</font><font style="vertical-align: inherit;">您可以使用分号';'在模式上混合使用位置和命名参数 </font><font style="vertical-align: inherit;">分开他们。</font><font style="vertical-align: inherit;">在尚未绑定的位置中使用的任何变量将绑定到映射到该位置的字段。</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Cheese
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    shop : <span class="hljs-keyword">String</span>
    price : <span class="hljs-built_in">int</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认顺序是声明的顺序，但可以使用@position覆盖它</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Cheese
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">1</span>)
    shop : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">2</span>)
    price : <span class="hljs-built_in">int</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.drools.definition.type包中的@Position注释可用于在类路径上注释原始pojos。</font><font style="vertical-align: inherit;">目前，只能对类上的字段进行注释。</font><font style="vertical-align: inherit;">支持类的继承，但不支持方法的接口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例模式，具有两个约束和绑定。</font><font style="vertical-align: inherit;">记住分号';' </font><font style="vertical-align: inherit;">用于区分位置部分和命名参数部分。</font><font style="vertical-align: inherit;">位置参数支持仅使用文字的变量和文字和表达式，但不支持变量。</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>, <span class="hljs-string">"Cheese Shop"</span>, p; )
<span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>, <span class="hljs-string">"Cheese Shop"</span>; p : price )
<span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>; shop == <span class="hljs-string">"Cheese Shop"</span>, p : price )
<span class="hljs-keyword">Cheese</span>( name == <span class="hljs-string">"stilton"</span>; shop == <span class="hljs-string">"Cheese Shop"</span>, p : price )</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当bean相互扩展时，@ Position继承; </font><font style="vertical-align: inherit;">虽然不推荐，但两个字段可能具有相同的@position值，并且不需要声明所有连续值。</font><font style="vertical-align: inherit;">如果重复@position，则使用继承（超类中的字段具有优先级）和声明顺序来解决冲突。</font><font style="vertical-align: inherit;">如果缺少@position值，则选择没有显式@position（如果有）的第一个字段来填补空白。</font><font style="vertical-align: inherit;">与往常一样，冲突通过继承和声明顺序来解决。</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Cheese
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    shop : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">2</span>)
    price : <span class="hljs-built_in">int</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> SeasonedCheese extends Cheese
    <span class="hljs-keyword">year</span> : <span class="hljs-built_in">Date</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">0</span>)
    origin : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">6</span>)
    country : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在示例中，字段顺序为：price（超类中的@position 0），year（子类中的@position 0），name（没有@position的第一个字段），shop（@position 2），country（second）没有@position的字段），来源。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_declaring_metadata_for_existing_types"><a class="anchor" href="index.html#_declaring_metadata_for_existing_types"></a><a class="link" href="index.html#_declaring_metadata_for_existing_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.3。</font><font style="vertical-align: inherit;">声明现有类型的元数据</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools允许以与为新事实类型声明元数据属性时相同的方式声明现有类型的元数据属性。</font><font style="vertical-align: inherit;">唯一的区别是该声明中没有字段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果有一个类org.drools.examples.Person，并且想要为其声明元数据，则可以编写以下代码：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例104.声明现有类型的元数据</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">import</span> <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.Person</span><font></font>
<font></font>
<span class="hljs-tag">declare</span> <span class="hljs-tag">Person</span>
    <span class="hljs-at_rule">@<span class="hljs-keyword">author(</span> Bob )
    @<span class="hljs-function">dateOfCreation</span>( <span class="hljs-number">01</span>-Feb-<span class="hljs-number">2009</span> )
end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了使用导入之外，还可以通过其完全限定名称引用该类，但由于该类也将在规则中引用，因此添加导入并在任何地方使用短类名称通常更短。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例105.使用完全限定的类名称声明元数据</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">declare</span> <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.Person</span>
    <span class="hljs-at_rule">@<span class="hljs-keyword">author(</span> Bob )
    @<span class="hljs-function">dateOfCreation</span>( <span class="hljs-number">01</span>-Feb-<span class="hljs-number">2009</span> )
end</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_parametrized_constructors_for_declared_types"><a class="anchor" href="index.html#_parametrized_constructors_for_declared_types"></a><a class="link" href="index.html#_parametrized_constructors_for_declared_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.4。</font><font style="vertical-align: inherit;">声明类型的参数化构造函数</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用声明类型的参数生成构造函数。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例：对于声明的类型，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    firstName : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">key</span>
    lastName : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">key</span>
    age : <span class="hljs-built_in">int</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译器将隐式生成3个构造函数：一个没有参数，一个带有@key字段，另一个带有所有字段。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript">Person() <span class="hljs-comment">// parameterless constructor</span>
Person( <span class="hljs-built_in">String</span> firstName, <span class="hljs-built_in">String</span> lastName )<font></font>
Person( <span class="hljs-built_in">String</span> firstName, <span class="hljs-built_in">String</span> lastName, int age )</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_non_typesafe_classes"><a class="anchor" href="index.html#_non_typesafe_classes"></a><a class="link" href="index.html#_non_typesafe_classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.5。</font><font style="vertical-align: inherit;">非类型安全类</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@typesafe（&lt;boolean&gt;）已添加到类型声明中。</font><font style="vertical-align: inherit;">默认情况下，所有类型声明都在启用类型安全的情况下编译 </font><font style="vertical-align: inherit;">@typesafe（false）提供了一种通过允许回退来覆盖此行为的方法，键入不安全评估，其中所有约束都作为MVEL约束生成并动态执行。</font><font style="vertical-align: inherit;">在处理没有任何泛型或混合类型集合的集合时，这很重要。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_declared_types_from_the_application_code"><a class="anchor" href="index.html#_accessing_declared_types_from_the_application_code"></a><a class="link" href="index.html#_accessing_declared_types_from_the_application_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.6。</font><font style="vertical-align: inherit;">从应用程序代码访问声明的类型</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明的类型通常在规则文件中使用，而在模型和应用程序之间共享模型时使用Java模型。</font><font style="vertical-align: inherit;">虽然有时候应用程序可能需要访问和处理声明类型的事实，特别是当应用程序包装Drools引擎并为规则管理提供更高级别的特定于域的用户界面时。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，生成的类可以像往常一样使用Java Reflection API进行处理，但是，正如我们所知，这通常需要大量工作才能获得较小的结果。</font><font style="vertical-align: inherit;">因此，Drools为应用程序可能要执行的最常见事实处理提供了简化的API。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要认识到的第一个重要事项是声明的事实将属于声明它的包。</font><font style="vertical-align: inherit;">因此，例如，在下面的示例中，</font></font><code>Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将属于</font></font><code>org.drools.examples</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包，因此生成的类的完全限定名称将是</font></font><code>org.drools.examples.Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子106.在org.drools.examples包中声明一个类型</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">package org.drools.examples<font></font>
<font></font>
import java.util.Date<font></font>
<font></font>
<span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    dateOfBirth : <span class="hljs-built_in">Date</span>
    address : Address
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，声明的类型是在KIE基本编译时生成的，即应用程序只能在应用程序运行时访问它们。</font><font style="vertical-align: inherit;">因此，这些类不可从应用程序直接引用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，Drools提供了一个接口，用户可以通过该接口处理来自应用程序代码的声明类型：</font></font><code>org.drools.definition.type.FactType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通过此接口，用户可以在声明的事实类型中实例化，读取和写入字段。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子107.通过API处理声明的事实类型</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// get a reference to a KIE base with a declared type:</span><font></font>
KieBase kbase = ...<font></font>
<font></font>
<span class="hljs-comment">// get the declared FactType</span>
FactType personType = kbase.getFactType( <span class="hljs-string">"org.drools.examples"</span>,
                                         <span class="hljs-string">"Person"</span> );<font></font>
<font></font>
<span class="hljs-comment">// handle the type as necessary:</span>
<span class="hljs-comment">// create instances:</span><font></font>
Object bob = personType.newInstance();<font></font>
<font></font>
<span class="hljs-comment">// set attributes values</span><font></font>
personType.set( bob,<font></font>
                <span class="hljs-string">"name"</span>,
                <span class="hljs-string">"Bob"</span> );<font></font>
personType.set( bob,<font></font>
                <span class="hljs-string">"age"</span>,
                <span class="hljs-number">42</span> );<font></font>
<font></font>
<span class="hljs-comment">// insert fact into a session</span><font></font>
KieSession ksession = ...<font></font>
ksession.insert( bob );<font></font>
ksession.fireAllRules();<font></font>
<font></font>
<span class="hljs-comment">// read attributes</span>
String name = personType.get( bob, <span class="hljs-string">"name"</span> );
<span class="hljs-keyword">int</span> age = personType.get( bob, <span class="hljs-string">"age"</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API还包括其他有用的方法，例如一次设置所有属性，从Map读取值或一次读取所有属性到Map中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然API类似于Java反射（但使用起来更简单），但它不使用下面的反射，依赖于使用生成的字节码实现的更高性能的访问器。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_type_declaration_extends"><a class="anchor" href="index.html#_type_declaration_extends"></a><a class="link" href="index.html#_type_declaration_extends"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7.7。</font><font style="vertical-align: inherit;">类型声明'延伸'</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型声明现在支持继承的'extends'关键字</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了扩展由DRL声明的子类型在Java中声明的类型，请在没有任何字段的declare语句中重复超类型。</font></font></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">import org.people.Person<font></font>
<font></font>
<span class="hljs-operator"><span class="hljs-keyword">declare</span> Person <span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> Student extends Person
    school : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> LongTermStudent extends Student
    <span class="hljs-keyword">years</span> : <span class="hljs-built_in">int</span>
    course : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rule"><a class="anchor" href="index.html#_rule"></a><a class="link" href="index.html#_rule"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8。</font><font style="vertical-align: inherit;">规则</font></font></a></h3>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/rule.png" alt="规则">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图86.规则</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则指定</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在左手侧（LHS）中指定发生特定条件集</font><em><font style="vertical-align: inherit;">时</font></em><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行在右手侧（RHS）中指定为操作列表的查询。</font><font style="vertical-align: inherit;">用户常见的问题是“为何使用when而不是if？” </font><font style="vertical-align: inherit;">选择“当”是否超过“if”，因为“if”通常是程序执行流程的一部分，其中，在特定时间点，要检查条件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，“何时”表示条件评估与特定评估序列或时间点无关，而是在发动机的使用寿命期间的任何时间连续发生; </font><font style="vertical-align: inherit;">只要满足条件，就执行操作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则必须具有名称，在其规则包中是唯一的。</font><font style="vertical-align: inherit;">如果在同一DRL中定义规则两次，则在加载时会产生错误。</font><font style="vertical-align: inherit;">如果添加包含规则名称的DRL，则它将替换先前的规则。</font><font style="vertical-align: inherit;">如果规则名称要包含空格，则需要用双引号括起来（最好始终使用双引号）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性 - 如下所述 - 是可选的。</font><font style="vertical-align: inherit;">它们最好每行编写一个。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的LHS遵循</font></font><code>when</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字（理想情况下在新行上），类似地，RHS遵循</font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字（理想情况下，在换行符上）。</font><font style="vertical-align: inherit;">该规则由关键字终止</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">规则不能嵌套。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子108.规则语法概述</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml">rule "<span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>"
    <span class="hljs-tag">&lt;<span class="hljs-title">attribute</span>&gt;</span>*<font></font>
when<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">conditional</span> <span class="hljs-attribute">element</span>&gt;</span>*<font></font>
then<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">action</span>&gt;</span>*<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子109.一个简单的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Approve if not rejected"</span>
  salience -<span class="hljs-number">100</span>
  agenda-group <span class="hljs-string">"approval"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-keyword">not</span> <span class="hljs-constant">Rejection</span>()<font></font>
        p <span class="hljs-symbol">:</span> <span class="hljs-constant">Policy</span>(approved == <span class="hljs-keyword">false</span>, <span class="hljs-symbol">policyState:</span>status)<font></font>
        exists <span class="hljs-constant">Driver</span>(age &gt; <span class="hljs-number">25</span>)
        <span class="hljs-constant">Process</span>(status == policyState)
    <span class="hljs-keyword">then</span>
        log(<span class="hljs-string">"APPROVED: due to no objections."</span>);<font></font>
        p.setApproved(<span class="hljs-keyword">true</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rule_attributes"><a class="anchor" href="index.html#_rule_attributes"></a><a class="link" href="index.html#_rule_attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.1。</font><font style="vertical-align: inherit;">规则属性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则属性提供了一种影响规则行为的声明方式。</font><font style="vertical-align: inherit;">有些很简单，有些则是规则流等复杂子系统的一部分。</font><font style="vertical-align: inherit;">为了充分利用Drools，您应该确保对每个属性有正确的理解。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/rule_attributes.png" alt="规则属性">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图87.规则属性</font></font></div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>no-loop</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值： </font></font><code>false</code></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：Boolean</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当规则的结果修改事实时，它可能导致规则再次激活，从而导致无限循环。</font><font style="vertical-align: inherit;">将no-loop设置为true将跳过为具有当前事实集的规则创建另一个Activation。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>ruleflow-group</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：N / A.</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ruleflow是一种Drools功能，可让您控制规则的触发。</font><font style="vertical-align: inherit;">由相同规则流组标识符汇编的规则仅在其组处于活动状态时触发。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>lock-on-active</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值： </font></font><code>false</code></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：Boolean</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每当规则流组变为活动状态或者议程组获得焦点时，该组中具有锁定活动设置为true的任何规则将不再被激活; </font><font style="vertical-align: inherit;">不管更新的起源如何，都丢弃匹配规则的激活。</font><font style="vertical-align: inherit;">这是一个更强大的版本</font></font><code>no-loop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为改变现在不仅可以由规则本身引起。</font><font style="vertical-align: inherit;">它是计算规则的理想选择，在这些规则中，您有许多修改事实的规则，并且您不希望任何规则重新匹配并再次触发。</font><font style="vertical-align: inherit;">只有当规则流组不再处于活动状态或者议程组失去焦点时，那些具有锁定活动设置为true的规则才能再次符合其激活条件的规则。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>salience</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值： </font></font><code>0</code></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型：整数</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个规则都有一个整数显着性属性，默认为零，可以是负数或正数。</font><font style="vertical-align: inherit;">显着性是一种优先级形式，其中具有较高显着性值的规则在激活队列中排序时被赋予较高优先级。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还支持动态显着性，您可以使用涉及绑定变量的表达式。</font></font></p>
</div>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例110.动态显着性</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Fire in rank order 1,2,.."</span>
        salience( -<span class="hljs-variable">$rank</span> )
    <span class="hljs-keyword">when</span>
        <span class="hljs-constant">Element</span>( <span class="hljs-variable">$rank</span> <span class="hljs-symbol">:</span> rank,... )
    <span class="hljs-keyword">then</span><font></font>
        ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>agenda-group</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：MAIN</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组允许用户对议程进行划分，从而提供更多的执行控制。</font><font style="vertical-align: inherit;">只有获得焦点的议程组中的规则才能被触发。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>auto-focus</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值： </font></font><code>false</code></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：Boolean</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当激活规则且</font></font><code>auto-focus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值为true并且规则的议程组尚未具有焦点时，则会给予焦点，允许规则可能触发。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>activation-group</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：N / A.</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属于同一激活组的规则（由此属性的字符串值标识）将仅以独占方式触发。</font><font style="vertical-align: inherit;">更确切地说，要激活的激活组中的第一个规则将取消组中所有规则的所有未决激活，即阻止它们触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：这曾经被称为Xor组，但从技术上讲，它不是一个Xor组。</font><font style="vertical-align: inherit;">你可能还会听到人们提到Xor组; </font><font style="vertical-align: inherit;">只需在激活组中交换该术语即可。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>dialect</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：由包指定</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能的值：“java”或“mvel”</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方言种类是用于LHS或RHS代码块中的任何代码表达式的语言。</font><font style="vertical-align: inherit;">目前有两种方言，Java和MVEL。</font><font style="vertical-align: inherit;">虽然可以在包级别指定方言，但此属性允许为规则覆盖包定义。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>date-effective</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：N / A.</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String，包含日期和时间定义</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有当前日期和时间在日期有效属性之后时，才能激活规则。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>date-expires</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：N / A.</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：String，包含日期和时间定义</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前日期和时间在date-expires属性之后，则无法激活规则。</font></font></p>
</div>
</dd>
<dt class="hdlist1"><code>duration</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：无默认值</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型：长</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续时间规定规则将在指定的持续时间后触发，如果它仍然为真。</font></font></p>
</div>
</dd>
</dl>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子111.一些属性例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"my rule"</span>
  salience <span class="hljs-number">42</span>
  agenda-<span class="hljs-keyword">group</span> <span class="hljs-string">"number 1"</span>
    <span class="hljs-keyword">when</span> ...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_timers_and_calendars"><a class="anchor" href="index.html#_timers_and_calendars"></a><a class="link" href="index.html#_timers_and_calendars"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.2。</font><font style="vertical-align: inherit;">计时器和日历</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则现在支持基于区间和基于cron的计时器，它们取代现在已弃用的持续时间属性。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例112.样本计时器属性使用</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">timer ( <span class="hljs-keyword">int</span>: &lt;initial delay&gt; &lt;repeat interval&gt;? )<font></font>
timer ( <span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s )<font></font>
timer ( <span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s <span class="hljs-number">5</span>m )<font></font>
<font></font>
timer ( cron: &lt;cron expression&gt; )<font></font>
timer ( cron:* <span class="hljs-number">0</span>/<span class="hljs-number">15</span> * * * ? )</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interval（由“int：”表示）计时器遵循java.util.Timer对象的语义，具有初始延迟和可选的重复间隔。</font><font style="vertical-align: inherit;">Cron（由“cron：”表示）计时器遵循标准的Unix cron表达式：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施例113.Cron实施例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">rule <span class="hljs-string">"Send SMS every 15 minutes"</span>
    timer (cron:* <span class="hljs-number">0</span>/<span class="hljs-number">15</span> * * * ?)<font></font>
when<font></font>
    $a : Alarm( on == <span class="hljs-keyword">true</span> )<font></font>
then<font></font>
    channels[ <span class="hljs-string">"sms"</span> ].insert( <span class="hljs-keyword">new</span> Sms( $a.mobileNumber, <span class="hljs-string">"The alarm is still on"</span> );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由计时器控制的规则在匹配时变为活动状态，并且对于每个单独匹配变为一次。</font><font style="vertical-align: inherit;">根据计时器的设置，重复执行其结果。</font><font style="vertical-align: inherit;">一旦条件不再匹配，这就会停止。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使在对fireUntilHalt的调用返回控制之后，也会执行后果。</font><font style="vertical-align: inherit;">此外，引擎仍然可以对工作记忆的任何变化做出反应。</font><font style="vertical-align: inherit;">例如，删除触发定时器规则执行所涉及的事实会导致重复执行终止或插入事实，以便某些规则匹配将导致该规则触发。</font><font style="vertical-align: inherit;">但是，只有在规则触发后，无论出于何种原因，引擎都不会持续活跃。</font><font style="vertical-align: inherit;">因此，在下次执行定时器控制的规则之前，不会发生对异步完成的插入的反应。</font><font style="vertical-align: inherit;">处置会话会结束所有计时器活动。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，当Drools引擎默认运行时（即：使用fireAllRules而不是fireUntilHalt）它不会触发定时规则的后果，除非再次调用fireAllRules。</font><font style="vertical-align: inherit;">但是，可以通过使用</font></font><code>TimedRuleExecutionOption</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例中所示</font><font style="vertical-align: inherit;">的配置KieSession来更改此默认行为</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例114.配置KieSession以自动执行定时规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration ksconf = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
ksconf.setOption( TimedRuleExecutionOption.YES );<font></font>
KSession ksession = kbase.newKieSession(ksconf, <span class="hljs-keyword">null</span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还可以对必须自动执行的定时规则进行更细粒度的控制。</font><font style="vertical-align: inherit;">要做到这一点，有必要设置一个</font></font><code>FILTERED</code> <code>TimedRuleExecutionOption</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许定义回调来过滤这些规则的方法，如下一个例子所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例115.配置过滤器以选择应自动执行的定时规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration ksconf = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
conf.setOption( <span class="hljs-keyword">new</span> TimedRuleExecutionOption.FILTERED(<span class="hljs-keyword">new</span> TimedRuleExecutionFilter() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">accept</span><span class="hljs-params">(Rule[] rules)</span> </span>{
        <span class="hljs-keyword">return</span> rules[<span class="hljs-number">0</span>].getName().equals(<span class="hljs-string">"MyRule"</span>);<font></font>
    }<font></font>
}) );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于间隔计时器，还可以将延迟和间隔定义为表达式而不是固定值。</font><font style="vertical-align: inherit;">要做到这一点，有必要使用表达式计时器（由“expr：”表示），如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例116.表达式计时器示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">declare Bean<font></font>
    delay   : String = <span class="hljs-string">"30s"</span>
    period  : <span class="hljs-keyword">long</span> = <span class="hljs-number">60000</span><font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"Expression timer"</span><font></font>
    timer( expr: $d, $p )<font></font>
<span class="hljs-function">when
    <span class="hljs-title">Bean</span><span class="hljs-params">( $d : delay, $p : period )</span>
then
end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的表达，</font></font><code>$d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>$p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，可以使用在规则的图案匹配的部分定义的任何可变的，并且可以是能够在一个时间持续时间或将被内部被转换为长表示的持续时间表示的任何数值解析任何字符串以毫秒为单位。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间隔和表达式计时器都可以有3个可选参数，分别名为“start”，“end”和“repeat-limit”。</font><font style="vertical-align: inherit;">当使用这些参数中的一个或多个时，定时器定义的第一部分必须后跟分号';' </font><font style="vertical-align: inherit;">并且参数必须用逗号'，'分隔，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例117.具有开始和结束的间隔定时器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">timer (<span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s <span class="hljs-number">10</span>s; start=<span class="hljs-number">3</span>-JAN-<span class="hljs-number">2010</span>, end=<span class="hljs-number">5</span>-JAN-<span class="hljs-number">2010</span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start和end参数的值可以是Date，表示Date或long的字符串，或者通常是任何Number的字符串，将在应用以下转换的Java Date中进行转换：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">new</span> Date( ((Number) n).longValue() )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，repeat-limit只能是一个整数，它定义了计时器允许的最大重复次数。</font><font style="vertical-align: inherit;">如果设置了结束和重复限制参数，则当两个中的第一个匹配时，计时器将停止。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用start参数意味着定时器的相位定义，其中相位的开始由开始本身加上最终延迟给出。</font><font style="vertical-align: inherit;">换句话说，在这种情况下，定时规则将被安排：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">start + delay + n*period</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多重复限制次数，不迟于结束时间戳（以先到者为准）。</font><font style="vertical-align: inherit;">例如，具有以下间隔计时器的规则</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">timer ( <span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s <span class="hljs-number">1</span>m; start=<span class="hljs-string">"3-JAN-2010"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将于2010年1月3日午夜后的每分钟第30秒安排。</font><font style="vertical-align: inherit;">这也意味着，例如，如果您在3-FEB-2010的午夜打开系统，它将不会立即安排，但会保留计时器定义的阶段，因此将在30秒后第一次安排午夜。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果由于某种原因系统暂停（例如会话被序列化然后在一段时间后反序列化），规则将只安排一次以从缺失的激活中恢复（无论我们错过了多少次激活），随后它将再次安排在与计时器相。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日历用于控制规则何时可以触发。</font><font style="vertical-align: inherit;">Calendar API以</font></font><a href="http://www.quartz-scheduler.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quartz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为模型
 </font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子118.调整Quartz日历</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Calendar weekDayCal = QuartzHelper.quartzCalendarAdapter(org.quartz.Calendar quartzCal)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日历在以下位置注册</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例119.注册日历</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.getCalendars().set( <span class="hljs-string">"weekday"</span>, weekDayCal );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们可以与包括计时器在内的常规规则和规则一起使用。</font><font style="vertical-align: inherit;">规则属性“日历”可能包含一个或多个以逗号分隔的日历名称，这些日历名称写为字符串文字。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例120.一起使用日历和计时器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">rule <span class="hljs-string">"weekdays are high priority"</span>
   calendars <span class="hljs-string">"weekday"</span>
   timer (<span class="hljs-keyword">int</span>:<span class="hljs-number">0</span> <span class="hljs-number">1</span>h)
<span class="hljs-function">when
    <span class="hljs-title">Alarm</span><span class="hljs-params">()</span>
then
    <span class="hljs-title">send</span><span class="hljs-params">( <span class="hljs-string">"priority high - we have an alarm"</span> )</span></span>;<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"weekend are low priority"</span>
   calendars <span class="hljs-string">"weekend"</span>
   timer (<span class="hljs-keyword">int</span>:<span class="hljs-number">0</span> <span class="hljs-number">4</span>h)
<span class="hljs-function">when
    <span class="hljs-title">Alarm</span><span class="hljs-params">()</span>
then
    <span class="hljs-title">send</span><span class="hljs-params">( <span class="hljs-string">"priority low - we have an alarm"</span> )</span></span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_left_hand_side_when_syntax"><a class="anchor" href="index.html#_left_hand_side_when_syntax"></a><a class="link" href="index.html#_left_hand_side_when_syntax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3。</font><font style="vertical-align: inherit;">左手边（何时）语法</font></font></a></h4>
<div class="sect4">
<h5 id="_what_is_the_left_hand_side"><a class="anchor" href="index.html#_what_is_the_left_hand_side"></a><a class="link" href="index.html#_what_is_the_left_hand_side"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.1。</font><font style="vertical-align: inherit;">什么是左手边？</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">左手侧（LHS）是规则的条件部分的通用名称。</font><font style="vertical-align: inherit;">它由零个或多个条件元素组成。</font><font style="vertical-align: inherit;">如果LHS为空，则它将被视为始终为true的条件元素，并且在创建新的WorkingMemory会话时将激活一次。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/lhs.png" alt="LHS">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图88.左手侧</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子121.没有条件元素的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"no CEs"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-comment">// empty</span><font></font>
then<font></font>
    ... <span class="hljs-comment">// actions (executed once)</span><font></font>
end<font></font>
<font></font>
<span class="hljs-comment">// The above rule is internally rewritten as:</span><font></font>
<font></font>
rule <span class="hljs-string">"eval(true)"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
    <span class="hljs-title">eval</span>(<span class="hljs-params"> <span class="hljs-keyword">true</span> </span>)
then
    ... <span class="hljs-comment">// actions (executed once)</span>
end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素用于一个或多个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（下面描述）。</font><font style="vertical-align: inherit;">最常见的条件元素是“ </font></font><code>and"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。因此，当规则的LHS中有多个模式没有以任何方式连接时，它是隐式的：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例122.隐含和</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"2 unconnected patterns"</span>
<span class="hljs-keyword">when</span><font></font>
    Pattern1()<font></font>
    Pattern2()<font></font>
<span class="hljs-keyword">then</span>
    ... <span class="hljs-regexp">//</span> actions<font></font>
end<font></font>
<font></font>
<span class="hljs-regexp">//</span> The above rule <span class="hljs-keyword">is</span> internally rewritten <span class="hljs-attribute">as</span>:<font></font>
<font></font>
rule <span class="hljs-string">"2 and connected patterns"</span>
<span class="hljs-keyword">when</span><font></font>
    Pattern1()<font></font>
    <span class="hljs-keyword">and</span> Pattern2()
<span class="hljs-keyword">then</span>
    ... <span class="hljs-regexp">//</span> actions<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“和”不能具有前导声明绑定（与例如不同</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">这是显而易见的，因为声明一次只能引用一个事实，当“和”满足时它匹配两个事实 - 那么声明绑定到哪个事实？</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">// Compile error</span>
<span class="hljs-variable">$person</span> : (Person( name == <span class="hljs-string">"Romeo"</span> ) <span class="hljs-keyword">and</span> Person( name == <span class="hljs-string">"Juliet"</span>))</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_pattern_conditional_element"><a class="anchor" href="index.html#_pattern_conditional_element"></a><a class="link" href="index.html#_pattern_conditional_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.2。</font><font style="vertical-align: inherit;">模式（条件元素）</font></font></a></h5>
<div class="sect5">
<h6 id="_what_is_a_pattern"><a class="anchor" href="index.html#_what_is_a_pattern"></a><a class="link" href="index.html#_what_is_a_pattern"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是模式？</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式元素是最重要的条件元素。</font><font style="vertical-align: inherit;">它可能与插入工作内存中的每个事实相匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式包含零个或多个约束，并具有可选的模式绑定。</font><font style="vertical-align: inherit;">下面的铁路图显示了这个的语法。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Pattern.png" alt="模式">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图89.模式</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在最简单的形式中，没有约束，模式匹配给定类型的事实。</font><font style="vertical-align: inherit;">在以下情况中，类型为</font></font><code>Cheese</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这意味着模式将与</font></font><code>Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作内存</font><font style="vertical-align: inherit;">中的所有</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">Person()</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型不必是某个事实对象的实际类。</font><font style="vertical-align: inherit;">模式可以引用超类甚至接口，从而潜在地匹配来自许多不同类的事实。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript"><span class="hljs-built_in">Object</span>() <span class="hljs-comment">// matches all objects in the working memory</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式括号内部是所有动作发生的地方：它定义了该模式的约束。</font><font style="vertical-align: inherit;">例如，与年龄相关的约束：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( age == <span class="hljs-number">100</span> )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于向后兼容性原因，允许使用</font></font><code>;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">后缀模式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但不建议这样做。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_pattern_binding"><a class="anchor" href="index.html#_pattern_binding"></a><a class="link" href="index.html#_pattern_binding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图案绑定</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要引用匹配的对象，请使用模式绑定变量，例如</font></font><code>$p</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子123.带有绑定变量的模式</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule ...
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>()
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"Person "</span> + <span class="hljs-variable">$p</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀美元符号（</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）只是一个约定; </font><font style="vertical-align: inherit;">它可以在复杂的规则中使用，它有助于轻松区分变量和字段，但它不是强制性的。</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_constraint_part_of_a_pattern"><a class="anchor" href="index.html#_constraint_part_of_a_pattern"></a><a class="link" href="index.html#_constraint_part_of_a_pattern"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.3。</font><font style="vertical-align: inherit;">约束（模式的一部分）</font></font></a></h5>
<div class="sect5">
<h6 id="_what_is_a_constraint"><a class="anchor" href="index.html#_what_is_a_constraint"></a><a class="link" href="index.html#_what_is_a_constraint"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么是约束？</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束是一个返回</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">的表达式</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此示例具有状态</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5小于6</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的约束</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( <span class="hljs-number">5</span> &lt; <span class="hljs-number">6</span> )  <span class="hljs-comment">// just an example, as constraints like this would be useless in a real pattern</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从本质上讲，它是一个Java表达式，带有一些增强功能（例如属性访问）和一些差异（例如</font></font><code>equals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语义</font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">让我们深入了解一下。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_property_access_on_java_beans_pojo_s"><a class="anchor" href="index.html#_property_access_on_java_beans_pojo_s"></a><a class="link" href="index.html#_property_access_on_java_beans_pojo_s"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Bean上的属性访问（POJO）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何bean属性都可以直接使用。</font><font style="vertical-align: inherit;">使用标准Java bean getter公开bean属性：一个方法</font></font><code>getMyProperty()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或</font></font><code>isMyProperty()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个原始布尔值），它不带参数并返回一些东西。</font><font style="vertical-align: inherit;">例如：age属性用</font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL而不是getter </font><font style="vertical-align: inherit;">编写</font></font><code>getAge()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( age == <span class="hljs-number">50</span> )<font></font>
<font></font>
<span class="hljs-comment">// this is the same as:</span>
Person( getAge() == <span class="hljs-number">50</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools使用标准JDK </font></font><code>Introspector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类来执行此映射，因此它遵循标准Java bean规范。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们建议使用属性访问（</font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）而不是使用getters explicit（</font></font><code>getAge()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），因为通过字段索引增强了性能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性访问器不得以可能影响规则的方式更改对象的状态。</font><font style="vertical-align: inherit;">请记住，Drools引擎有效地在调用之间缓存其匹配结果，以使其更快。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>{<font></font>
    age++; <span class="hljs-comment">// Do NOT do this</span>
    <span class="hljs-keyword">return</span> age;<font></font>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getAge</span><span class="hljs-params">()</span> </span>{<font></font>
    Date now = DateUtil.now(); <span class="hljs-comment">// Do NOT do this</span>
    <span class="hljs-keyword">return</span> DateUtil.differenceInYears(now, birthday);<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决后一种情况，请插入一个将当前日期包装到工作内存中的事实，</font></font><code>fireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并根据需要</font><font style="vertical-align: inherit;">更新该事实</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下回调适用：如果找不到属性的getter，编译器将使用属性名称作为方法名称而不使用参数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( age == <span class="hljs-number">50</span> )<font></font>
<font></font>
<span class="hljs-comment">// If Person.getAge() does not exists, this falls back to:</span>
Person( age() == <span class="hljs-number">50</span> )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持嵌套属性访问：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( address.houseNumber == <span class="hljs-number">50</span> )<font></font>
<font></font>
<span class="hljs-comment">// this is the same as:</span>
Person( getAddress().getHouseNumber() == <span class="hljs-number">50</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套属性也被编入索引。</font></font></p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在有状态会话中，在使用嵌套访问器时应小心，因为工作内存不知道任何嵌套值，并且不知道它们何时更改。</font><font style="vertical-align: inherit;">在将任何父引用插入工作内存时，将它们视为不可变。</font><font style="vertical-align: inherit;">或者，如果您希望修改嵌套值，则应将所有外部事实标记为已更新。</font><font style="vertical-align: inherit;">在上面的示例中，当</font></font><code>houseNumber</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改时，任何</font></font><code>Person</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font><font style="vertical-align: inherit;">此</font><font style="vertical-align: inherit;">更改</font></font><code>Address</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须标记为已更新。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_java_expression"><a class="anchor" href="index.html#_java_expression"></a><a class="link" href="index.html#_java_expression"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java表达式</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用任何Java表达式</font></font><code>boolean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在模式的括号内</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">约束作为约束。</font><font style="vertical-align: inherit;">Java表达式可以与其他表达式增强功能混合使用，例如属性访问：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( age == <span class="hljs-number">50</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过使用括号来更改评估优先级，如在任何逻辑或数学表达式中一样：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( age &gt; <span class="hljs-number">100</span> &amp;&amp; ( age % <span class="hljs-number">10</span> == <span class="hljs-number">0</span> ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以重用Java方法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( Math.round( weight / ( height * height ) ) &lt; <span class="hljs-number">25.0</span> )</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于属性访问器，方法不得以可能影响规则的方式更改对象的状态。</font><font style="vertical-align: inherit;">对LHS中的事实执行的任何方法都应该是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只读</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">Person( incrementAndGetAge() == 10 ) // <span class="hljs-operator"><span class="hljs-keyword">Do</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">do</span> this</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实的状态不应在规则调用之间改变（除非这些事实在每次更改时都标记为更新到工作内存）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( System.currentTimeMillis() % <span class="hljs-number">1000</span> == <span class="hljs-number">0</span> ) <span class="hljs-comment">// Do NOT do this</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正常的Java运算符优先级适用，请参阅下面的运算符优先级列表。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了</font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之外，所有运算符都具有正常的Java语义</font></font><code>!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商拥有空安全的</font></font><code>equals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-regexp">//</span> Similar <span class="hljs-attribute">to</span>: java.util.Objects.equals(person.getFirstName(), <span class="hljs-string">"John"</span>)
<span class="hljs-regexp">//</span> so (because <span class="hljs-string">"John"</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span>) similar <span class="hljs-attribute">to</span>:
<span class="hljs-regexp">//</span> <span class="hljs-string">"John"</span>.equals(person.getFirstName())<font></font>
Person( firstName == <span class="hljs-string">"John"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商拥有空安全的</font></font><code>!equals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">// Similar to: !java.util.Objects.equals(person.getFirstName(), <span class="hljs-string">"John"</span>)<font></font>
Person( firstName != <span class="hljs-string">"John"</span> )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果字段和值的类型不同，则始终尝试类型强制; </font><font style="vertical-align: inherit;">如果尝试不当强制，将抛出异常。</font><font style="vertical-align: inherit;">例如，如果在数字赋值器中提供“ten”作为字符串，则抛出异常，而“10”将强制转换为数字10.强制总是支持字段类型而不是值类型：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Person( age == <span class="hljs-string">"10"</span> ) <span class="hljs-regexp">//</span> <span class="hljs-string">"10"</span> <span class="hljs-keyword">is</span> coerced to <span class="hljs-number">10</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_comma_separated_and"><a class="anchor" href="index.html#_comma_separated_and"></a><a class="link" href="index.html#_comma_separated_and"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔AND</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号字符（'`，`'）用于分隔约束组。</font><font style="vertical-align: inherit;">它具有隐含的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AND</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接语义。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Person is at least 50 and weighs at least 80 kg</span>
Person( age &gt; <span class="hljs-number">50</span>, weight &gt; <span class="hljs-number">80</span> )</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Person is at least 50, weighs at least 80 kg and is taller than 2 meter.</span>
Person( age &gt; <span class="hljs-number">50</span>, weight &gt; <span class="hljs-number">80</span>, height &gt; <span class="hljs-number">2</span> )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管</font></font><code>&amp;&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符具有相同的语义，但它们的解析具有不同的优先级：</font></font><code>&amp;&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">优先</font><font style="vertical-align: inherit;">于</font></font><code>||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符。</font></font><code>&amp;&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">都在</font><font style="vertical-align: inherit;">运算符之前</font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅下面的运算符优先级列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号运算符应该是顶级约束的首选，因为它使约束更容易阅读，并且引擎通常能够更好地优化它们。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">comma（</font></font><code>,</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）运算符不能嵌入复合约束表达式中，例如括号：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( ( age &gt; <span class="hljs-number">50</span>, weight &gt; <span class="hljs-number">80</span> ) || height &gt; <span class="hljs-number">2</span> ) <span class="hljs-comment">// Do NOT do this: compile error</span><font></font>
<font></font>
<span class="hljs-comment">// Use this instead</span>
Person( ( age &gt; <span class="hljs-number">50</span> &amp;&amp; weight &gt; <span class="hljs-number">80</span> ) || height &gt; <span class="hljs-number">2</span> )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_binding_variables"><a class="anchor" href="index.html#_binding_variables"></a><a class="link" href="index.html#_binding_variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定变量</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性可以绑定到变量：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">// 2 persons of the same age</span>
Person( <span class="hljs-variable">$firstAge</span> : age ) <span class="hljs-comment">// binding</span>
Person( age == <span class="hljs-variable">$firstAge</span> ) <span class="hljs-comment">// constraint expression</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀美元符号（</font></font><code>$</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）只是一个约定; </font><font style="vertical-align: inherit;">它可以在复杂的规则中使用，它有助于轻松区分变量和字段。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于向后兼容性原因，允许（但不建议）混合约束绑定和约束表达式，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Not recommended</span>
Person( $age : age * <span class="hljs-number">2</span> &lt; <span class="hljs-number">100</span> )</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Recommended (separates bindings and constraint expressions)</span>
Person( age * <span class="hljs-number">2</span> &lt; <span class="hljs-number">100</span>, $age : age )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用运算符的绑定变量限制</font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了非常快速的执行，因为它使用哈希索引来提高性能。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_unification"><a class="anchor" href="index.html#_unification"></a><a class="link" href="index.html#_unification"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">统一</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools不允许绑定到同一声明。</font><font style="vertical-align: inherit;">然而，这是派生查询统一的一个重要方面。</font><font style="vertical-align: inherit;">虽然位置参数始终使用统一处理，但是为名为arguments的命名参数引入了一个特殊的统一符号'：='。</font><font style="vertical-align: inherit;">以下“统一”两个人的年龄论证。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( <span class="hljs-variable">$age</span> := age )<font></font>
Person( <span class="hljs-variable">$age</span> := age)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实质上，统一将声明第一次出现的绑定，并约束到序列出现的绑定字段的相同值。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_grouped_accessors_for_nested_objects"><a class="anchor" href="index.html#_grouped_accessors_for_nested_objects"></a><a class="link" href="index.html#_grouped_accessors_for_nested_objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套对象的分组访问器</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，有必要访问嵌套对象的多个属性，如下例所示</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Person</span>( name == <span class="hljs-string">"mark"</span>, address.city == <span class="hljs-string">"london"</span>, address.country == <span class="hljs-string">"uk"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌套对象的这些访问器可以使用'。（...）'语法进行分组，从而提供更具可读性的规则，如</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Person</span>( name == <span class="hljs-string">"mark"</span>, address.( city == <span class="hljs-string">"london"</span>, country == <span class="hljs-string">"uk"</span>) )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意'。' </font><font style="vertical-align: inherit;">前缀，这是区分嵌套对象约束和方法调用所必需的。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_inline_casts_and_coercion"><a class="anchor" href="index.html#_inline_casts_and_coercion"></a><a class="link" href="index.html#_inline_casts_and_coercion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内联演员和强制</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在处理嵌套对象时，还需要强制转换为子类型。</font><font style="vertical-align: inherit;">可以通过＃符号执行此操作，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( name == <span class="hljs-string">"mark"</span>, address<span class="hljs-preprocessor">#LongAddress.country == <span class="hljs-string">"uk"</span> )</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例将Address转换为LongAddress，使其getter可用。</font><font style="vertical-align: inherit;">如果无法进行强制转换（instanceof返回false），则评估将被视为false。</font><font style="vertical-align: inherit;">还支持完全限定名称：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( name == <span class="hljs-string">"mark"</span>, address<span class="hljs-preprocessor">#org.domain.LongAddress.country == <span class="hljs-string">"uk"</span> )</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在同一表达式中使用多个内联强制转换：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person( name == <span class="hljs-string">"mark"</span>, address<span class="hljs-preprocessor">#LongAddress.country#DetailedCountry.population &gt; <span class="hljs-number">10000000</span> )</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，由于我们还支持instanceof运算符，如果使用了它，我们将在该模式中推断其结果以进一步使用该字段：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Person( name == <span class="hljs-string">"mark"</span>, address <span class="hljs-keyword">instanceof</span> LongAddress, address.country == <span class="hljs-string">"uk"</span> )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_special_literal_support"><a class="anchor" href="index.html#_special_literal_support"></a><a class="link" href="index.html#_special_literal_support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别的文字支持</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了普通的Java文字（包括Java 5枚举）外，还支持这个文字：</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_date_literal"><a class="anchor" href="index.html#_date_literal"></a><a class="link" href="index.html#_date_literal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期文字</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>dd-mmm-yyyy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下支持</font><font style="vertical-align: inherit;">日期格式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以通过提供备用日期格式掩码作为名为的System属性来自定义此选项</font></font><code>drools.dateformat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果需要更多控制，请使用限制。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子124.日期文字限制</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Cheese</span>( bestBefore &lt; <span class="hljs-string">"27-Oct-2009"</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_list_and_map_access"><a class="anchor" href="index.html#_list_and_map_access"></a><a class="link" href="index.html#_list_and_map_access"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表和地图访问</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过索引</font><font style="vertical-align: inherit;">直接访问</font><font style="vertical-align: inherit;">值：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Same as childList(0).getAge() == 18</span>
Person( childList[<span class="hljs-number">0</span>].age == <span class="hljs-number">18</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以</font></font><code>Map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过键</font><font style="vertical-align: inherit;">直接访问</font><font style="vertical-align: inherit;">值：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs python">// Same <span class="hljs-keyword">as</span> credentialMap.get(<span class="hljs-string">"jsmith"</span>).isValid()<font></font>
Person( credentialMap[<span class="hljs-string">"jsmith"</span>].valid )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_abbreviated_combined_relation_condition"><a class="anchor" href="index.html#_abbreviated_combined_relation_condition"></a><a class="link" href="index.html#_abbreviated_combined_relation_condition"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缩写组合关系条件</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这允许您使用限制连接符</font></font><code>&amp;&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">字符对字段放置多个限制</font></font><code>||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">允许通过括号进行分组，从而产生递归语法模式。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/abbreviatedCombinedRelationCondition.png" alt="abbreviatedCombinedRelationCondition">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图90.缩写组合关系条件</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/abbreviatedCombinedRelationConditionGroup.png" alt="abbreviatedCombinedRelationConditionGroup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图91.带有父元的简短组合关系条件</font></font></div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Simple abbreviated combined relation condition using a single &amp;&amp;</span>
Person( age &gt; <span class="hljs-number">30</span> &amp;&amp; &lt; <span class="hljs-number">40</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Complex abbreviated combined relation using groupings</span>
Person( age ( (&gt; <span class="hljs-number">30</span> &amp;&amp; &lt; <span class="hljs-number">40</span>) ||<font></font>
              (&gt; <span class="hljs-number">20</span> &amp;&amp; &lt; <span class="hljs-number">25</span>) ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-comment">// Mixing abbreviated combined relation with constraint connectives</span>
Person( age &gt; <span class="hljs-number">30</span> &amp;&amp; &lt; <span class="hljs-number">40</span> || location == <span class="hljs-string">"london"</span> )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_special_drl_operators"><a class="anchor" href="index.html#_special_drl_operators"></a><a class="link" href="index.html#_special_drl_operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特殊DRL运营商</font></font></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/operator.png" alt="操作者">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图92.运营商</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将尝试强制评估者和该领域的正确值。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_the_operators_code_code"><a class="anchor" href="index.html#_the_operators_code_code"></a><a class="link" href="index.html#_the_operators_code_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>&lt; ⇐ &gt; &gt;=</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些运算符可用于具有自然排序的属性。</font><font style="vertical-align: inherit;">例如，对于日期字段，</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，对于</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段，它表示按字母顺序较低。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( firstName &lt; <span class="hljs-variable">$otherFirstName</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( birthDate &lt; <span class="hljs-variable">$otherBirthDate</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于</font></font><code>Comparable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_null_safe_dereferencing_operator"><a class="anchor" href="index.html#_null_safe_dereferencing_operator"></a><a class="link" href="index.html#_null_safe_dereferencing_operator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空安全解除引用运算符</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font><font style="vertical-align: inherit;">运算符允许以零安全的方式进行derefencing。</font><font style="vertical-align: inherit;">更详细地说，匹配算法需要！左边的值。</font><font style="vertical-align: inherit;">运算符不为null，以便为模式匹配本身提供正结果。</font><font style="vertical-align: inherit;">换句话说，模式：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( <span class="hljs-variable">$streetName</span> : address!.street )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在内部翻译成：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php">Person( address != <span class="hljs-keyword">null</span>, <span class="hljs-variable">$streetName</span> : address.street )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_matches_code"><a class="anchor" href="index.html#_the_operator_code_matches_code"></a><a class="link" href="index.html#_the_operator_code_matches_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>matches</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任何有效Java正则表达式的字段。</font><font style="vertical-align: inherit;">通常，regexp是字符串文字，但也允许解析为有效正则表达式的变量。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例125.正则表达式约束</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Cheese( <span class="hljs-built_in">type</span> matches <span class="hljs-string">"(Buffalo)?\\S*Mozzarella"</span> )</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像在Java中一样，正则表达式写成字符串文字 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要转义'\\'</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于 </font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业。</font></font><code>matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">始终求值为false。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_not_matches_code"><a class="anchor" href="index.html#_the_operator_code_not_matches_code"></a><a class="link" href="index.html#_the_operator_code_not_matches_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>not matches</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果String与正则表达式不匹配，则运算符返回true。</font><font style="vertical-align: inherit;">适用于</font></font><code>matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商的</font><font style="vertical-align: inherit;">规则相同</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例126.正则表达式约束</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Cheese( <span class="hljs-built_in">type</span> not matches <span class="hljs-string">"(Buffalo)?\\S*Mozzarella"</span> )</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业。</font><font style="vertical-align: inherit;">运用</font></font><code>not matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">始终求值为true。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_contains_code"><a class="anchor" href="index.html#_the_operator_code_contains_code"></a><a class="link" href="index.html#_the_operator_code_contains_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>contains</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><code>contains</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查作为Collection的元素或元素是否包含指定的值。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子127.包含集合</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">CheeseCounter( cheeses contains <span class="hljs-string">"stilton"</span> ) <span class="hljs-comment">// contains with a String literal</span>
CheeseCounter( cheeses contains $<span class="hljs-keyword">var</span> ) <span class="hljs-comment">// contains with a variable</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于 </font></font><code>Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>contains</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用</font><font style="vertical-align: inherit;">代替</font></font><code>String.contains()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束检查。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子128.包含String文字</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript">Cheese( name contains <span class="hljs-string">"tilto"</span> )<font></font>
Person( fullName contains <span class="hljs-string">"Jr"</span> )
<span class="hljs-built_in">String</span>( <span class="hljs-keyword">this</span> contains <span class="hljs-string">"foo"</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_not_contains_code"><a class="anchor" href="index.html#_the_operator_code_not_contains_code"></a><a class="link" href="index.html#_the_operator_code_not_contains_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>not contains</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><code>not contains</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查作为Collection的字段或元素是否</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含指定的值。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例129.带集合的文字约束</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs python">CheeseCounter( cheeses <span class="hljs-keyword">not</span> contains <span class="hljs-string">"cheddar"</span> ) // <span class="hljs-keyword">not</span> contains <span class="hljs-keyword">with</span> a String literal<font></font>
CheeseCounter( cheeses <span class="hljs-keyword">not</span> contains $var ) // <span class="hljs-keyword">not</span> contains <span class="hljs-keyword">with</span> a variable</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅适用于</font></font><code>Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了向后兼容，</font></font><code>excludes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持运算符作为其同义词</font></font><code>not contains</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></em></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><code>not contains</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可用于代替</font></font><code>String.contains()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束检查</font><font style="vertical-align: inherit;">的逻辑否定</font><font style="vertical-align: inherit;">- 即：</font></font><code>! String.contains()</code></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例130.包含String文字</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Cheese( name <span class="hljs-keyword">not</span> contains <span class="hljs-string">"tilto"</span> )<font></font>
Person( fullName <span class="hljs-keyword">not</span> contains <span class="hljs-string">"Jr"</span> )<font></font>
String( <span class="hljs-keyword">this</span> <span class="hljs-keyword">not</span> contains <span class="hljs-string">"foo"</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_memberof_code"><a class="anchor" href="index.html#_the_operator_code_memberof_code"></a><a class="link" href="index.html#_the_operator_code_memberof_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>memberOf</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><code>memberOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查字段是否是集合或元素的成员; </font><font style="vertical-align: inherit;">该集合必须是一个变量。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子131.带集合的文字约束</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">CheeseCounter( cheese memberOf <span class="hljs-variable">$matureCheeses</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_not_memberof_code"><a class="anchor" href="index.html#_the_operator_code_not_memberof_code"></a><a class="link" href="index.html#_the_operator_code_not_memberof_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>not memberOf</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><code>not memberOf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查字段是否不是集合或元素的成员; </font><font style="vertical-align: inherit;">该集合必须是一个变量。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子132.带集合的文字约束</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">CheeseCounter( cheese <span class="hljs-keyword">not</span> memberOf <span class="hljs-variable">$matureCheeses</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_soundslike_code"><a class="anchor" href="index.html#_the_operator_code_soundslike_code"></a><a class="link" href="index.html#_the_operator_code_soundslike_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>soundslike</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此运算符类似于</font></font><code>matches</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它检查单词是否具有与给定值几乎相同的声音（使用英语发音）。</font><font style="vertical-align: inherit;">这是基于Soundex算法（参见参考资料</font></font><code><a href="http://en.wikipedia.org/wiki/Soundex" class="bare">http://en.wikipedia.org/wiki/Soundex</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例133.用声音测试</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-regexp">//</span> match cheese <span class="hljs-string">"fubar"</span> <span class="hljs-keyword">or</span> <span class="hljs-string">"foobar"</span>
Cheese( name soundslike <span class="hljs-string">'foobar'</span> )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operator_code_str_code"><a class="anchor" href="index.html#_the_operator_code_str_code"></a><a class="link" href="index.html#_the_operator_code_str_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商 </font></font><code>str</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此运算符</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检查</font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以某个值开头或以某个值结尾的字段。</font><font style="vertical-align: inherit;">它还可以用于检查String的长度。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Message</span>( routingValue str[startsWith] <span class="hljs-string">"R1"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Message</span>( routingValue str[endsWith] <span class="hljs-string">"R2"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Message( routingValue str[length] <span class="hljs-number">17</span> )</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_the_operators_code_in_code_and_code_notin_code_compound_value_restriction"><a class="anchor" href="index.html#_the_operators_code_in_code_and_code_notin_code_compound_value_restriction"></a><a class="link" href="index.html#_the_operators_code_in_code_and_code_notin_code_compound_value_restriction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>notin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（复合价值限制）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在有多个可能值匹配的情况下使用复合值限制。</font><font style="vertical-align: inherit;">目前只有</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>not in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估人员支持这一点。</font><font style="vertical-align: inherit;">此运算符的第二个操作数必须是以逗号分隔的值列表，括在括号中。</font><font style="vertical-align: inherit;">值可以作为变量，文字，返回值或限定标识符给出。</font><font style="vertical-align: inherit;">两个评估者实际上都是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法糖</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，内部重写为使用运算符</font></font><code>!=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">多个限制的列表</font></font><code>==</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/compoundValueRestriction.png" alt="compoundValueRestriction">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图93. compoundValueRestriction</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施例134.使用“in”的化合物限制</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( <span class="hljs-variable">$cheese</span> : favouriteCheese )<font></font>
Cheese( <span class="hljs-built_in">type</span> <span class="hljs-keyword">in</span> ( <span class="hljs-string">"stilton"</span>, <span class="hljs-string">"cheddar"</span>, <span class="hljs-variable">$cheese</span> ) )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_inline_eval_operator_deprecated"><a class="anchor" href="index.html#_inline_eval_operator_deprecated"></a><a class="link" href="index.html#_inline_eval_operator_deprecated"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内联eval运算符（已弃用）</font></font></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/inlineEvalConstraint.png" alt="inlineEvalConstraint">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图94.内联Eval表达式</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内联eval约束可以使用任何有效的方言表达式，只要它产生一个原始布尔值。</font><font style="vertical-align: inherit;">表达式必须随时间不变。</font><font style="vertical-align: inherit;">可以使用来自当前或先前模式的任何先前绑定的变量; </font><font style="vertical-align: inherit;">autovivification还用于自动创建字段绑定变量。</font><font style="vertical-align: inherit;">当找到不是当前变量的标识符时，构建器将查看标识符是否是当前对象类型上的字段，如果是，则将字段绑定自动创建为同名变量。</font><font style="vertical-align: inherit;">这称为内联eval内的字段变量的自动生成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个例子将找到所有雄性 - 雌性对，其中雄性比雌性大2岁; </font><font style="vertical-align: inherit;">该变量</font></font><code>age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由自动生成过程在第二种模式中自动创建。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子135.返回值运算符</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( girlAge : age, sex = <span class="hljs-string">"F"</span> )<font></font>
Person( <span class="hljs-built_in">eval</span>( age == girlAge + <span class="hljs-number">2</span> ), sex = <span class="hljs-string">'M'</span> ) // <span class="hljs-built_in">eval</span>() is actually obsolete <span class="hljs-keyword">in</span> this example</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内联eval实际上已经过时，因为它们的内部语法现在可以直接支持。</font><font style="vertical-align: inherit;">建议不要使用它们。</font><font style="vertical-align: inherit;">只需编写表达式而不在其周围包装eval（）。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_operator_precedence"><a class="anchor" href="index.html#_operator_precedence"></a><a class="link" href="index.html#_operator_precedence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符优先级</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符的优先级为：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表7.运算符优先级</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商类型</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">笔记</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（嵌套/ null安全）属性访问</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code><code>!.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是普通的Java语义</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表/地图访问</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[ ]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是普通的Java语义</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束绑定</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是普通的Java语义</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乘</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\*</code><code>/</code><code>%</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加剂</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>\+</code><code>-</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转移</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code><code>&gt;&gt;</code><code>&gt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相关的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code><code>&gt;</code><code>⇐</code><code>&gt;=</code><code>instanceof</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平等</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code><code>!=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不使用普通的Java（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）
                 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语义：使用（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
                语义。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非短路和</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非短路异或</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非短路包括OR</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑AND</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;&amp;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑或</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>||</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三元</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>? :</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔AND</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是普通的Java语义</font></font></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_positional_arguments"><a class="anchor" href="index.html#_positional_arguments"></a><a class="link" href="index.html#_positional_arguments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.4。</font><font style="vertical-align: inherit;">位置参数</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式现在支持类型声明的位置参数。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置参数是您不需要指定字段名称的参数，因为位置映射到已知的命名字段。</font><font style="vertical-align: inherit;">即Person（name ==“mark”）可以重写为Person（“mark”;）。</font><font style="vertical-align: inherit;">分号';' </font><font style="vertical-align: inherit;">很重要，以便引擎知道它之前的所有内容都是位置参数。</font><font style="vertical-align: inherit;">否则我们可能会认为它是一个布尔表达式，它就是在分号后解释它的方式。</font><font style="vertical-align: inherit;">您可以使用分号';'在模式上混合使用位置和命名参数 </font><font style="vertical-align: inherit;">分开他们。</font><font style="vertical-align: inherit;">在尚未绑定的位置中使用的任何变量将绑定到映射到该位置的字段。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Cheese
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
    shop : <span class="hljs-keyword">String</span>
    price : <span class="hljs-built_in">int</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例模式，具有两个约束和绑定。</font><font style="vertical-align: inherit;">记住分号';' </font><font style="vertical-align: inherit;">用于区分位置部分和命名参数部分。</font><font style="vertical-align: inherit;">位置参数支持仅使用文字的变量和文字和表达式，但不支持变量。</font><font style="vertical-align: inherit;">始终使用统一解决位置参数。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>, <span class="hljs-string">"Cheese Shop"</span>, p; )
<span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>, <span class="hljs-string">"Cheese Shop"</span>; p : price )
<span class="hljs-keyword">Cheese</span>( <span class="hljs-string">"stilton"</span>; shop == <span class="hljs-string">"Cheese Shop"</span>, p : price )
<span class="hljs-keyword">Cheese</span>( name == <span class="hljs-string">"stilton"</span>; shop == <span class="hljs-string">"Cheese Shop"</span>, p : price )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定先前声明的绑定的位置参数将使用统一约束; </font><font style="vertical-align: inherit;">这些被称为输入参数。</font><font style="vertical-align: inherit;">如果绑定尚不存在，它将创建将其绑定到position参数表示的字段的声明; </font><font style="vertical-align: inherit;">这些被称为输出参数。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_fine_grained_property_change_listeners"><a class="anchor" href="index.html#_fine_grained_property_change_listeners"></a><a class="link" href="index.html#_fine_grained_property_change_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.5。</font><font style="vertical-align: inherit;">细粒度的属性改变了听众</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您对给定对象调用modify（）（请参阅modify语句部分）时，它将触发对KIE库中匹配对象类型的所有模式的重新评估。</font><font style="vertical-align: inherit;">这可能导致不必要的和无用的评估，并且在最坏的情况下会导致无限递归。</font><font style="vertical-align: inherit;">避免它的唯一解决方法是将对象拆分为与原始对象具有1对1关系的较小对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这已被引入以提供更容易和更一致的方式来克服该问题。</font><font style="vertical-align: inherit;">实际上，它允许模式匹配仅对实际约束或绑定在给定模式内的属性的修改作出反应。</font><font style="vertical-align: inherit;">这将有助于性能和递归，并避免人为的对象分裂。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下启用此功能，但是如果您需要或想要在特定bean上对其进行禁用，则可以使用@classReactive对其进行注释。</font><font style="vertical-align: inherit;">此注释适用于DRL类型声明：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
@classReactive
    firstName : <span class="hljs-keyword">String</span>
    lastName : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及Java类：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs java"><span class="hljs-annotation">@ClassReactive</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
    <span class="hljs-keyword">private</span> String firstName;
    <span class="hljs-keyword">private</span> String lastName;<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，通过使用此功能，如果您有如下规则：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Every person named Mario is a male"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$person</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>( firstName == <span class="hljs-string">"Mario"</span> )
<span class="hljs-keyword">then</span>
    modify ( <span class="hljs-variable">$person</span> )  { setMale( <span class="hljs-keyword">true</span> ) }
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你不必为它添加no-loop属性以避免无限递归，因为引擎识别出模式匹配是在'firstName'属性上完成的，而规则的RHS修改了'male'属性。</font><font style="vertical-align: inherit;">请注意，此功能不适用于update（），这是我们提升modify（）的原因之一，因为它封装了语句中的字段更改。</font><font style="vertical-align: inherit;">此外，在Java类上，您还可以注释任何方法，以表明其调用实际上修改了其他属性。</font><font style="vertical-align: inherit;">例如，在前Person类中，您可以使用以下方法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">@Modifies( { <span class="hljs-string">"firstName"</span>, <span class="hljs-string">"lastName"</span> } )
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{<font></font>
    String[] names = name.split(<span class="hljs-string">"\\s"</span>);
    <span class="hljs-keyword">this</span>.firstName = names[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">this</span>.lastName = names[<span class="hljs-number">1</span>];<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着如果规则具有如下的RHS：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">modify(<span class="hljs-variable">$person</span>) { <span class="hljs-built_in">set</span>Name(<span class="hljs-string">"Mario Fusco"</span>) }</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它将正确地识别出属性'firstName'和'lastName'的值可能已经被修改并相应地行动，而不是缺少重新评估约束它们的模式。</font><font style="vertical-align: inherit;">目前，字段上不允许使用@Modifies，而只允许使用方法。</font><font style="vertical-align: inherit;">这与最常见的情况一致，其中@Modifies将用于与类字段无关的方法，如前一示例中的Person.setName（）。</font><font style="vertical-align: inherit;">另请注意，@Modifies不是传递性的，这意味着如果另一个方法在内部调用Person.setName（），则使用@Modifies（{“name”}）注释它是不够的，但是有必要使用@甚至修改（{“firstName”，“lastName”}）。</font><font style="vertical-align: inherit;">很可能@Modifies transitivity将在下一个版本中实现。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于嵌套访问器，只会通知顶级字段引擎。</font><font style="vertical-align: inherit;">换句话说，模式匹配如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">Person</span> ( address.city.name == <span class="hljs-string">"London )</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将仅重新评估Person对象的'address'属性。</font><font style="vertical-align: inherit;">以同样的方式，约束分析目前严格限于模式内部的内容。</font><font style="vertical-align: inherit;">另一个例子可以帮助澄清这一点。</font><font style="vertical-align: inherit;">LHS如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$p</span> : Person( )<font></font>
Car( owner = <span class="hljs-variable">$p</span>.name )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不会听取对这个人姓名的修改，而这个会做：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Person( <span class="hljs-variable">$name</span> : name )<font></font>
Car( owner = <span class="hljs-variable">$name</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决这个问题，可以使用@watch注释模式，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-variable">$p</span> : Person( ) <span class="hljs-variable">@watch</span> ( name )<font></font>
Car( owner = <span class="hljs-variable">$p</span>.name )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上，使用@watch注释模式允许您修改该模式将作出反应的推断的属性集。</font><font style="vertical-align: inherit;">请注意，@ watch注释中指定的属性实际上已添加到自动推断的属性中，但也可以明确地排除其中一个或多个在其名称前加上！</font><font style="vertical-align: inherit;">并使模式分别使用wildcrds *和！*监听模式中使用的类型的所有属性或不属性。</font><font style="vertical-align: inherit;">因此，例如，您可以在规则的LHS中注释模式，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-regexp">//</span> listens <span class="hljs-keyword">for</span> changes <span class="hljs-literal">on</span> both firstName (inferred) <span class="hljs-keyword">and</span> lastName<font></font>
Person( firstName == $expectedFirstName ) <span class="hljs-property">@watch</span>( lastName )<font></font>
<font></font>
<span class="hljs-regexp">//</span> listens <span class="hljs-keyword">for</span> all the properties <span class="hljs-keyword">of</span> the Person bean<font></font>
Person( firstName == $expectedFirstName ) <span class="hljs-property">@watch</span>( * )<font></font>
<font></font>
<span class="hljs-regexp">//</span> listens <span class="hljs-keyword">for</span> changes <span class="hljs-literal">on</span> lastName <span class="hljs-keyword">and</span> explicitly exclude firstName<font></font>
Person( firstName == $expectedFirstName ) <span class="hljs-property">@watch</span>( lastName, !firstName )<font></font>
<font></font>
<span class="hljs-regexp">//</span> listens <span class="hljs-keyword">for</span> changes <span class="hljs-literal">on</span> all the properties except the age one<font></font>
Person( firstName == $expectedFirstName ) <span class="hljs-property">@watch</span>( *, !age )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于使用带有@ClassReactive注释的类型在模式上使用此注释没有意义，因此如果您尝试这样做，规则编译器将引发编译错误。</font><font style="vertical-align: inherit;">另外，@ watch中相同属性的重复使用（例如：@ watch（firstName，！firstName））将最终出现编译错误。</font><font style="vertical-align: inherit;">在下一个版本中，我们将通过在模式之外进行分析来自动检测要更智能地监听的属性。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以仅在特定类型的模型上启用此功能，或者通过使用KnowledgeBuilderConfiguration的on选项完全禁用此功能。</font><font style="vertical-align: inherit;">特别是这个新的PropertySpecificOption可以具有以下3个值之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">- DISABLED =&gt; the feature <span class="hljs-keyword">is</span> turned <span class="hljs-literal">off</span> <span class="hljs-keyword">and</span> all the other related annotations are just ignored<font></font>
- ALLOWED =&gt; types are <span class="hljs-keyword">not</span> property reactive <span class="hljs-keyword">unless</span> they are <span class="hljs-keyword">not</span> annotated with <span class="hljs-property">@PropertyReactive</span> (which <span class="hljs-keyword">is</span> the dual <span class="hljs-keyword">of</span> <span class="hljs-property">@ClassReactive</span>)<font></font>
- ALWAYS =&gt; all types are property reactive. This <span class="hljs-keyword">is</span> the default behavior</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，例如，要拥有一个默认禁用属性反应性的KnowledgeBuilder：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">KnowledgeBuilderConfiguration config = KnowledgeBuilderFactory.newKnowledgeBuilderConfiguration();<font></font>
config.setOption(PropertySpecificOption.ALLOWED);<font></font>
KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder(config);</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在最后一种情况下，可以通过使用@PropertyReactive注释特定类型的属性反应性功能来重新启用它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要注意，属性反应性仅可自动用于在规则结果内执行的修改。</font><font style="vertical-align: inherit;">相反，程序更新不知道已更改的对象属性，因此无法使用此功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决此限制，可以在update语句中指定已修改对象中已更改的属性的名称，如以下示例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person me = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"me"</span>, <span class="hljs-number">40</span>);<font></font>
FactHandle meHandle = ksession.insert( me );<font></font>
<font></font>
me.setAge(<span class="hljs-number">41</span>);<font></font>
me.setAddress(<span class="hljs-string">"California Avenue"</span>);<font></font>
ksession.update( meHandle, me, <span class="hljs-string">"age"</span>, <span class="hljs-string">"address"</span> );</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_basic_conditional_elements"><a class="anchor" href="index.html#_basic_conditional_elements"></a><a class="link" href="index.html#_basic_conditional_elements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.6。</font><font style="vertical-align: inherit;">基本条件元素</font></font></a></h5>
<div class="sect5">
<h6 id="_conditional_element_code_and_code"><a class="anchor" href="index.html#_conditional_element_code_and_code"></a><a class="link" href="index.html#_conditional_element_code_and_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>and</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>"and"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于将其他条件元素分组为逻辑连接。</font><font style="vertical-align: inherit;">Drools支持前缀</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和中缀</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/infixAnd.png" alt="infixAnd">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图95. infixAnd</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font><font style="vertical-align: inherit;">传统中缀</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">//infixAnd</span>
Cheese( cheeseType : type ) <span class="hljs-keyword">and</span> Person( favouriteCheese == cheeseType )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持使用括号进行显式分组：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">//infixAnd with grouping</span>
( Cheese( cheeseType : type ) <span class="hljs-keyword">and</span>
  ( Person( favouriteCheese == cheeseType ) <span class="hljs-keyword">or</span>
    Person( favouriteCheese == cheeseType ) )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不推荐使用</font><font style="vertical-align: inherit;">该符号</font></font><code>&amp;&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（作为替代</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">但是在向后兼容性的语法中仍然支持它。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/prefixAnd.png" alt="prefixAnd">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图96. prefixAnd</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持</font><font style="vertical-align: inherit;">前缀</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">(and Cheese( cheeseType : <span class="hljs-built_in">type</span> )<font></font>
     Person( favouriteCheese == cheeseType ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LHS的根元素是隐式前缀</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，不需要指定：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子136.隐式根前缀和</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">when<font></font>
    Cheese( cheeseType : <span class="hljs-built_in">type</span> )<font></font>
    Person( favouriteCheese == cheeseType )<font></font>
<span class="hljs-keyword">then</span>
    ...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_or_code"><a class="anchor" href="index.html#_conditional_element_code_or_code"></a><a class="link" href="index.html#_conditional_element_code_or_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>or</code></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于将其他条件元素分组为逻辑分离。</font><font style="vertical-align: inherit;">Drools支持前缀</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和中缀</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/infixOr.png" alt="infixOr">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图97. infixOr</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font><font style="vertical-align: inherit;">传统中缀</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">//infixOr</span>
Cheese( cheeseType : type ) <span class="hljs-keyword">or</span> Person( favouriteCheese == cheeseType )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持使用括号进行显式分组：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">//infixOr with grouping</span>
( Cheese( cheeseType : type ) <span class="hljs-keyword">or</span>
  ( Person( favouriteCheese == cheeseType ) <span class="hljs-keyword">and</span>
    Person( favouriteCheese == cheeseType ) )</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不推荐使用</font><font style="vertical-align: inherit;">该符号</font></font><code>||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（作为替代</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">但是在向后兼容性的语法中仍然支持它。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/prefixOr.png" alt="prefixOr">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图98. prefixOr</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持</font><font style="vertical-align: inherit;">前缀</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">(<span class="hljs-keyword">or</span> Person( sex == <span class="hljs-string">"f"</span>, age &gt; <span class="hljs-number">60</span> )<font></font>
    Person( sex == <span class="hljs-string">"m"</span>, age &gt; <span class="hljs-number">65</span> )<font></font>
)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素的行为</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同于</font></font><code>||</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段约束中的约束和限制</font><font style="vertical-align: inherit;">的连接</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">引擎实际上并不了解条件元素</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">相反，通过许多不同的逻辑转换，规则</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被重写为多个子规则。</font><font style="vertical-align: inherit;">此过程最终会产生一个规则，该规则具有单个</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为根节点和每个CE的</font><font style="vertical-align: inherit;">一个子规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个子规则都可以像任何正常规则一样激活和触发; </font><font style="vertical-align: inherit;">这些子规则之间没有特殊的行为或相互作用。</font><font style="vertical-align: inherit;"> - 这对新规则作者来说可能是最令人困惑的。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还允许可选的模式绑定。</font><font style="vertical-align: inherit;">这意味着每个生成的子规则将其模式绑定到模式绑定。</font><font style="vertical-align: inherit;">每个模式必须使用同名变量分别绑定：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">pensioner : ( Person( sex == <span class="hljs-string">"f"</span>, age &gt; <span class="hljs-number">60</span> ) <span class="hljs-keyword">or</span> Person( sex == <span class="hljs-string">"m"</span>, age &gt; <span class="hljs-number">65</span> ) )</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">(or pensioner : Person( sex == <span class="hljs-string">"f"</span>, age &gt; <span class="hljs-number">60</span> )<font></font>
    pensioner : Person( sex == <span class="hljs-string">"m"</span>, age &gt; <span class="hljs-number">65</span> ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于条件元素</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致多个子规则生成，每个可能的逻辑结果一个，上面的示例将导致内部生成两个规则。</font><font style="vertical-align: inherit;">这两个规则在工作记忆中独立工作，这意味着两者都可以匹配，激活和激活 - 没有捷径。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考虑条件元素的最佳方法</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是生成两个或多个类似规则的快捷方式。</font><font style="vertical-align: inherit;">当你以这种方式想到它时，很明显，如果两个或多个析取项是真的，那么对于单个规则可能会有多次激活。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_not_code"><a class="anchor" href="index.html#_conditional_element_code_not_code"></a><a class="link" href="index.html#_conditional_element_code_not_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>not</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/not.png" alt="不">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图99.不是</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE </font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一阶逻辑的非存在量词，并检查工作记忆中某些事物的不存在。</font><font style="vertical-align: inherit;">认为“不”意思是“一定不能......”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该关键字</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后面可以跟适用于它的CE的括号。</font><font style="vertical-align: inherit;">在单个模式的最简单情况下（如下所示），您可以选择省略括号。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例137.没有总线</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-keyword">not</span> Bus()</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子138.没有红色总线</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">// Brackets are optional:</span>
not Bus(color == <span class="hljs-string">"red"</span>)
<span class="hljs-comment">// Brackets are optional:</span>
not ( Bus(color == <span class="hljs-string">"red"</span>, number == <span class="hljs-number">42</span>) )
<span class="hljs-comment">// "not" with nested infix and - two patterns,</span>
<span class="hljs-comment">// brackets are requires:</span>
not ( Bus(color == <span class="hljs-string">"red"</span>) <span class="hljs-keyword">and</span>
      Bus(color == <span class="hljs-string">"blue"</span>) )</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_exists_code"><a class="anchor" href="index.html#_conditional_element_code_exists_code"></a><a class="link" href="index.html#_conditional_element_code_exists_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>exists</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/exists.png" alt="存在">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图100.存在</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE </font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一阶逻辑的存在量词，并检查工作记忆中存在的东西。</font><font style="vertical-align: inherit;">将“存在”想象为“至少有一个......”。</font><font style="vertical-align: inherit;">它不仅仅是拥有自己的模式，更像是“为每一个......”。</font><font style="vertical-align: inherit;">如果使用</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式，则规则最多只激活一次，无论工作内存中与</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式</font><font style="vertical-align: inherit;">内部条件匹配的数据量是多少</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">由于只有存在才重要，因此不会建立任何约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须后跟适用于它的CE周围的括号。</font><font style="vertical-align: inherit;">在单个模式的最简单情况下（如下所示），您可以省略括号。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例139.至少一个总线</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">exists</span> Bus()</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例140.至少一个红色总线</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">exists</span> Bus(color == <span class="hljs-string">"red"</span>)<font></font>
// brackets are optional:<font></font>
<span class="hljs-keyword">exists</span> ( Bus(color == <span class="hljs-string">"red"</span>, number == <span class="hljs-number">42</span>) )<font></font>
// <span class="hljs-string">"exists"</span> with nested infix <span class="hljs-keyword">and</span>,
<span class="hljs-regexp">//</span> brackets are required:
<span class="hljs-keyword">exists</span> ( Bus(color == <span class="hljs-string">"red"</span>) <span class="hljs-keyword">and</span>
         Bus(color == <span class="hljs-string">"blue"</span>) )</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_advanced_conditional_elements"><a class="anchor" href="index.html#_advanced_conditional_elements"></a><a class="link" href="index.html#_advanced_conditional_elements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.7。</font><font style="vertical-align: inherit;">高级条件元素</font></font></a></h5>
<div class="sect5">
<h6 id="_conditional_element_code_forall_code"><a class="anchor" href="index.html#_conditional_element_code_forall_code"></a><a class="link" href="index.html#_conditional_element_code_forall_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>forall</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/forall.png" alt="对全部">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图101. forall</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成了Drools中的First Order Logic支持。</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当与第一个模式匹配的所有事实与所有剩余模式匹配时</font><font style="vertical-align: inherit;">，条件元素的</font><font style="vertical-align: inherit;">计算结果为true。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"All English buses are red"</span><font></font>
when<font></font>
    forall( <span class="hljs-variable">$bus</span> : Bus( <span class="hljs-built_in">type</span> == <span class="hljs-string">'english'</span>)<font></font>
                   Bus( this == <span class="hljs-variable">$bus</span>, color = <span class="hljs-string">'red'</span> ) )
<span class="hljs-keyword">then</span><font></font>
    // all English buses are red<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的规则中，我们“选择”所有类型为“english”的Bus对象。</font><font style="vertical-align: inherit;">然后，对于匹配此模式的每个事实，我们评估以下模式，如果它们匹配，则forall CE将评估为true。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了说明工作存储器中给定类型的所有事实必须与一组约束匹配，</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为简单起见</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">可以用单个模式写入。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例141. Single Pattern Forall</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"All Buses are Red"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
    <span class="hljs-title">forall</span>(<span class="hljs-params"> Bus( color == <span class="hljs-string">'red'</span> </span>) )
then
    <span class="hljs-comment">// all Bus facts are red</span>
end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个例子显示了内部的多个模式</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施例142.多模式Forall</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"all employees have health and dental care programs"</span>
<span class="hljs-keyword">when</span>
    forall( <span class="hljs-variable">$emp</span> : Employee()<font></font>
            HealthCare( employee == <span class="hljs-variable">$emp</span> )<font></font>
            DentalCare( employee == <span class="hljs-variable">$emp</span> )<font></font>
          )<font></font>
then<font></font>
    // all employees have health <span class="hljs-keyword">and</span> dental care<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Forall可以嵌套在其他CE中。</font><font style="vertical-align: inherit;">例如，</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE </font><font style="vertical-align: inherit;">内部使用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，只有单个模式具有可选括号，因此</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须使用</font><font style="vertical-align: inherit;">嵌套</font><font style="vertical-align: inherit;">括号：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施例143.将Foral1与非CE组合</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"not all employees have health and dental care"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-keyword">not</span> ( forall( <span class="hljs-variable">$emp</span> : Employee()<font></font>
                  HealthCare( employee == <span class="hljs-variable">$emp</span> )<font></font>
                  DentalCare( employee == <span class="hljs-variable">$emp</span> ) )<font></font>
        )<font></font>
then<font></font>
    // <span class="hljs-keyword">not</span> all employees have health <span class="hljs-keyword">and</span> dental care<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为旁注，</font></font><code>forall( p1 p2 p3…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当于写作：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-keyword">not</span>(p1 <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span>(<span class="hljs-keyword">and</span> p2 p3...))</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，重要的是要注意这</font></font><code>forall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围分隔符</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，它可以使用任何先前绑定的变量，但其中的变量绑定不可用于其外部。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_from_code"><a class="anchor" href="index.html#_conditional_element_code_from_code"></a><a class="link" href="index.html#_conditional_element_code_from_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>from</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/from.png" alt="从">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图102.来自</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用户能够为LHS模式匹配的数据指定任意源。</font><font style="vertical-align: inherit;">这允许引擎对不在工作存储器中的数据进行推理。</font><font style="vertical-align: inherit;">数据源可以是绑定变量上的子字段或方法调用的结果。</font><font style="vertical-align: inherit;">它是一种强大的结构，允许与其他应用程序组件和框架进行开箱即用的集成。</font><font style="vertical-align: inherit;">一个常见的例子是使用hibernate命名查询与数据库按需检索的数据集成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于定义对象源的表达式是遵循常规MVEL语法的任何表达式。</font><font style="vertical-align: inherit;">因此，它允许您轻松使用对象属性导航，执行方法调用以及访问地图和集合元素。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个推理和绑定另一个模式子字段的简单示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"validate zipcode"</span><font></font>
when<font></font>
    Person( <span class="hljs-variable">$personAddress</span> : address )<font></font>
    Address( zipcode == <span class="hljs-string">"23920W"</span>) from <span class="hljs-variable">$personAddress</span>
<span class="hljs-keyword">then</span><font></font>
    // zip code is ok<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭借Drools引擎中新表现力的所有灵活性，您可以通过多种方式切割和切割此问题。</font><font style="vertical-align: inherit;">这是相同的，但显示了如何使用带有'from'的图形符号：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"validate zipcode"</span><font></font>
when<font></font>
    <span class="hljs-variable">$p</span> : Person( )
    <span class="hljs-variable">$a</span> : Address( zipcode == <span class="hljs-string">"23920W"</span>) from <span class="hljs-variable">$p</span>.address
<span class="hljs-keyword">then</span><font></font>
    // zip code is ok<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的例子是使用单一模式的评估。</font><font style="vertical-align: inherit;">CE </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还支持返回对象集合的对象源。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将迭代集合中的所有对象并尝试单独匹配它们中的每一个。</font><font style="vertical-align: inherit;">例如，如果我们想要一个规则对订单中的每个项目应用10％的折扣，我们可以这样做：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"apply 10% discount to all items over US$ 100,00 in an order"</span><font></font>
when<font></font>
    <span class="hljs-variable">$order</span> : Order()
    <span class="hljs-variable">$item</span>  : OrderItem( value &gt; <span class="hljs-number">100</span> ) from <span class="hljs-variable">$order</span>.items
<span class="hljs-keyword">then</span>
    // apply discount to <span class="hljs-variable">$item</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的示例将导致规则为每个给定订单的值大于100的项目触发一次。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，在使用时必须小心，</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特别是与</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rule属性</font><font style="vertical-align: inherit;">一起</font><font style="vertical-align: inherit;">使用时</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">因为它可能会产生意外结果。</font><font style="vertical-align: inherit;">考虑前面提供的示例，但现在稍微修改如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule "Assign people in North Carolina (NC) to sales region 1"<font></font>
ruleflow-group "test"<font></font>
<span class="hljs-operator"><span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person( )
    $a : Address( state == <span class="hljs-string">"NC"</span>) <span class="hljs-keyword">from</span> $<span class="hljs-keyword">p</span>.address
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} // Assign person <span class="hljs-keyword">to</span> sales region <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span>

rule <span class="hljs-string">"Apply a discount to people in the city of Raleigh"</span>
ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"test"</span>
<span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person( )
    $a : Address( city == <span class="hljs-string">"Raleigh"</span>) <span class="hljs-keyword">from</span> $<span class="hljs-keyword">p</span>.address
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} // <span class="hljs-keyword">Apply</span> discount <span class="hljs-keyword">to</span> person <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，北卡罗来纳州罗利市的人员应被分配到销售区域1并获得折扣; </font><font style="vertical-align: inherit;">也就是说，你会期望两个规则都被激活和激活。</font><font style="vertical-align: inherit;">相反，你会发现只有第二条规则才会触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要打开审核日志，您还会看到当第二个规则触发时，它会停用第一个规则。</font><font style="vertical-align: inherit;">由于规则属性</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阻止规则在一组事实发生更改时创建新的激活，因此第一个规则无法重新激活。</font><font style="vertical-align: inherit;">尽管事实并没有改变，但</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每次评估时</font><font style="vertical-align: inherit;">，使用</font><font style="vertical-align: inherit;">都会为所有意图和目的返回一个新事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，重要的是要回顾为什么要使用上述模式。</font><font style="vertical-align: inherit;">您可能在不同的规则流组中有许多规则。</font><font style="vertical-align: inherit;">当规则修改工作内存和RuleFlow下游的其他规则（在不同的规则流组中）需要重新评估时，使用</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是至关重要的。</font><font style="vertical-align: inherit;">但是，您不希望同一规则流组中的其他规则以递归方式将激活放在另一个规则流上。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code>no-loop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性是无效的，因为它只会阻止规则递归地激活自身。</font><font style="vertical-align: inherit;">因此，你求助于</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有几种方法可以解决此问题：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当你可以将所有事实断言到工作内存或在约束表达式中使用嵌套对象引用时，</font><font style="vertical-align: inherit;">避免使用</font><font style="vertical-align: inherit;">（如下所示）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在修改块中使用的变量分配为条件（LHS）中的最后一个句子。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您可以明确管理同一规则流组中的规则如何相互激活时，请</font><font style="vertical-align: inherit;">避免使用</font><font style="vertical-align: inherit;">（如下所述）。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首选解决方案是尽可能减少使用</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">何时可以将所有事实直接置于工作记忆中。</font><font style="vertical-align: inherit;">在上面的示例中，Person和Address实例都可以声明为工作内存。</font><font style="vertical-align: inherit;">在这种情况下，因为图表非常简单，所以更简单的解决方案是修改规则，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule "Assign people in North Carolina (NC) to sales region 1"<font></font>
ruleflow-group "test"<font></font>
<span class="hljs-operator"><span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person(address.state == <span class="hljs-string">"NC"</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} // Assign person <span class="hljs-keyword">to</span> sales region <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span>

rule <span class="hljs-string">"Apply a discount to people in the city of Raleigh"</span>
ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"test"</span>
<span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person(address.city == <span class="hljs-string">"Raleigh"</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} //<span class="hljs-keyword">Apply</span> discount <span class="hljs-keyword">to</span> person <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，您将发现两个规则都按预期启动。</font><font style="vertical-align: inherit;">但是，并不总是可以访问上面嵌套的事实。</font><font style="vertical-align: inherit;">考虑一个人拥有一个或多个地址的示例，并且您希望使用存在量词来匹配具有至少一个满足特定条件的地址的人。</font><font style="vertical-align: inherit;">在这种情况下，您将不得不求助于对</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集合进行推理。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有几种方法可以</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来实现这一目标，并非所有方法都表现出使用的问题</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，以下使用</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会导致两个规则按预期触发：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule "Assign people in North Carolina (NC) to sales region 1"<font></font>
ruleflow-group "test"<font></font>
<span class="hljs-operator"><span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person($addresses : addresses)
    <span class="hljs-keyword">exists</span> (Address(state == <span class="hljs-string">"NC"</span>) <span class="hljs-keyword">from</span> $addresses)
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} // Assign person <span class="hljs-keyword">to</span> sales region <span class="hljs-number">1</span> <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span>

rule <span class="hljs-string">"Apply a discount to people in the city of Raleigh"</span>
ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"test"</span>
<span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">p</span> : Person($addresses : addresses)
    <span class="hljs-keyword">exists</span> (Address(city == <span class="hljs-string">"Raleigh"</span>) <span class="hljs-keyword">from</span> $addresses)
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($<span class="hljs-keyword">p</span>) {} // <span class="hljs-keyword">Apply</span> discount <span class="hljs-keyword">to</span> person <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，以下略有不同的方法确实表现出问题：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule "Assign people in North Carolina (NC) to sales region 1"<font></font>
ruleflow-group "test"<font></font>
<span class="hljs-operator"><span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $assessment : Assessment()
    $<span class="hljs-keyword">p</span> : Person()
    $addresses : <span class="hljs-keyword">List</span>() <span class="hljs-keyword">from</span> $<span class="hljs-keyword">p</span>.addresses
    <span class="hljs-keyword">exists</span> (Address( state == <span class="hljs-string">"NC"</span>) <span class="hljs-keyword">from</span> $addresses)
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($assessment) {} // <span class="hljs-keyword">Modify</span> assessment <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span>

rule <span class="hljs-string">"Apply a discount to people in the city of Raleigh"</span>
ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"test"</span>
<span class="hljs-keyword">lock</span>-<span class="hljs-keyword">on</span>-active <span class="hljs-literal">true</span>
<span class="hljs-keyword">when</span>
    $assessment : Assessment()
    $<span class="hljs-keyword">p</span> : Person()
    $addresses : <span class="hljs-keyword">List</span>() <span class="hljs-keyword">from</span> $<span class="hljs-keyword">p</span>.addresses
    <span class="hljs-keyword">exists</span> (Address( city == <span class="hljs-string">"Raleigh"</span>) <span class="hljs-keyword">from</span> $addresses)
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">modify</span> ($assessment) {} // <span class="hljs-keyword">Modify</span> assessment <span class="hljs-keyword">in</span> a <span class="hljs-keyword">modify</span> <span class="hljs-keyword">block</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，$ addresses变量是从使用中返回的</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该示例还引入了一个新对象，即评估，以突出显示这种情况下的一种可能的解决方案。</font><font style="vertical-align: inherit;">如果条件（LHS）中分配的$ assessment变量被移动到每个规则中的最后一个条件，则两个规则都会按预期触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然上述实施例说明了如何使用结合</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中没有规则的激活丢失时，它们携带放置依赖于LHS条件的顺序上的缺点。</font><font style="vertical-align: inherit;">此外，在跟踪哪些条件可能产生问题方面，解决方案为规则作者提供了更大的复杂性。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更好的选择是在工作记忆中断言更多事实。</font><font style="vertical-align: inherit;">在这种情况下，人的地址可以被声明为工作记忆，并且</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要使用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，有些情况下，将所有数据声明为工作内存是不切实际的，我们需要找到其他解决方案。</font><font style="vertical-align: inherit;">另一种选择是重新评估是否需要</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另一种方法</font></font><code>lock-on-active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是直接管理同一规则流组中的规则如何通过在每个规则中包含条件来激活彼此激活，这些条件阻止规则在修改工作内存时递归地相互激活。</font><font style="vertical-align: inherit;">例如，在上面对Raleigh公民应用折扣的情况下，可以在检查是否已经应用折扣的规则中添加条件。</font><font style="vertical-align: inherit;">如果是，则规则不会激活。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含from子句的模式不能跟随以括号开头的另一个模式，如下例所示</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-constant">R</span> <span class="hljs-keyword">when</span>
  <span class="hljs-variable">$l</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">List</span>( )
  <span class="hljs-constant">String</span>() from <span class="hljs-variable">$l</span>
  (<span class="hljs-constant">String</span>() <span class="hljs-keyword">or</span> <span class="hljs-constant">Number</span>())
<span class="hljs-keyword">then</span> <span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是因为在这种情况下，DRL解析器将from表达式从“$ l（String（）或Number（））”中读取，并且不可能从函数调用中消除该表达式的歧义。</font><font style="vertical-align: inherit;">对此的直接解决方法是在括号中包含from子句，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-constant">R</span> <span class="hljs-keyword">when</span>
  <span class="hljs-variable">$l</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">List</span>( )<font></font>
  (<span class="hljs-constant">String</span>() from <span class="hljs-variable">$l</span>)<font></font>
  (<span class="hljs-constant">String</span>() <span class="hljs-keyword">or</span> <span class="hljs-constant">Number</span>())
<span class="hljs-keyword">then</span> <span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_collect_code"><a class="anchor" href="index.html#_conditional_element_code_collect_code"></a><a class="link" href="index.html#_conditional_element_code_collect_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>collect</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/collect.png" alt="搜集">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图103.收集</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许规则推理从给定源或工作存储器获得的对象集合。</font><font style="vertical-align: inherit;">在First Oder Logic术语中，这是基数量词。</font><font style="vertical-align: inherit;">一个简单的例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">import java.util.ArrayList<font></font>
<font></font>
rule <span class="hljs-string">"Raise priority if system has more than 3 pending alarms"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$system</span> : System()
    <span class="hljs-variable">$alarms</span> : ArrayList( size &gt;= <span class="hljs-number">3</span> )<font></font>
              from collect( Alarm( <span class="hljs-keyword">system</span> == <span class="hljs-variable">$system</span>, status == <span class="hljs-string">'pending'</span> ) )<font></font>
then<font></font>
    // Raise priority, because <span class="hljs-keyword">system</span> <span class="hljs-variable">$system</span> has<font></font>
    // <span class="hljs-number">3</span> <span class="hljs-keyword">or</span> more alarms pending. The pending alarms<font></font>
    // are <span class="hljs-variable">$alarms</span>.<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，规则将查找每个给定系统的工作内存中的所有待处理警报，并将它们分组到ArrayLists中。</font><font style="vertical-align: inherit;">如果为给定系统找到3个或更多警报，则该规则将触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果模式</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是实现</font></font><code>java.util.Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口的</font><font style="vertical-align: inherit;">任何具体类，</font><font style="vertical-align: inherit;">并提供默认的无参数公共构造函数。</font><font style="vertical-align: inherit;">这意味着您可以使用Java集合，如ArrayList，LinkedList，HashSet等，或者您自己的类，只要它实现</font></font><code>java.util.Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口并提供默认的无参数公共构造函数即可。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源和结果模式都可以像任何其他模式一样受到约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE </font><font style="vertical-align: inherit;">之前绑定的变量</font><font style="vertical-align: inherit;">属于源模式和结果模式的范围，因此您可以使用它们来约束源模式和结果模式。</font><font style="vertical-align: inherit;">但请注意，这</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是绑定的范围分隔符，因此在其中进行的任何绑定都不可用于它之外。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Collect接受嵌套的</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE。</font><font style="vertical-align: inherit;">以下示例是“collect”的有效用法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">import java.util.LinkedList;<font></font>
<font></font>
rule <span class="hljs-string">"Send a message to all mothers"</span>
<span class="hljs-keyword">when</span>
    $town : Town( name == <span class="hljs-string">'Paris'</span> )<font></font>
    $mothers : LinkedList()<font></font>
               <span class="hljs-function"><span class="hljs-keyword">from</span> <span class="hljs-title">collect</span>(<span class="hljs-params"> Person( gender == <span class="hljs-string">'F'</span>, children &gt; <span class="hljs-number">0</span> </span>)
                             <span class="hljs-keyword">from</span> $town.<span class="hljs-title">getPeople</span>(<span class="hljs-params"></span>)
                           )
then
    <span class="hljs-comment">// send a message to all mothers</span>
end</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_conditional_element_code_accumulate_code"><a class="anchor" href="index.html#_conditional_element_code_accumulate_code"></a><a class="link" href="index.html#_conditional_element_code_accumulate_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素 </font></font><code>accumulate</code></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/accumulate.png" alt="积累">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图104.积累</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>accumulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一种更灵活和更强大的形式</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在某种意义上它可以用来做什么</font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也可以实现CE </font></font><code>collect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法</font><font style="vertical-align: inherit;">实现的结果</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Accumulate允许规则迭代对象集合，为每个元素执行自定义操作，最后，它返回结果对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积支持使用预定义的累积函数或使用内联自定义代码。</font><font style="vertical-align: inherit;">但应避免使用内联自定义代码，因为规则作者难以维护，并且经常导致代码重复。</font><font style="vertical-align: inherit;">累积函数更易于测试和重用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Accumulate CE还支持多种不同的语法。</font><font style="vertical-align: inherit;">首选语法是顶级累积，如下所述，但支持所有其他语法以实现向后兼容。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_accumulate_ce_preferred_syntax"><a class="anchor" href="index.html#_accumulate_ce_preferred_syntax"></a><a class="link" href="index.html#_accumulate_ce_preferred_syntax"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积CE（首选语法）</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">顶级累积语法是最紧凑和灵活的语法。</font><font style="vertical-align: inherit;">简化语法如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml">accumulate( <span class="hljs-tag">&lt;<span class="hljs-title">source</span> <span class="hljs-attribute">pattern</span>&gt;</span>; <span class="hljs-tag">&lt;<span class="hljs-title">functions</span>&gt;</span> [;<span class="hljs-tag">&lt;<span class="hljs-title">constraints</span>&gt;</span>] )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，计算给定传感器的最小，最大和平均温度读数的规则如果最低温度低于20摄氏度且平均值超过70摄氏度则会发出警报，可以使用累积：</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL语言将“acc”定义为“`accumulate`”的同义词。</font><font style="vertical-align: inherit;">作者可能更喜欢使用“acc”作为一个不那么冗长的关键字，或者使用完整的关键字“`accumulate`”来表示易读性。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Raise alarm"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$s</span> : Sensor()<font></font>
    accumulate( Reading( sensor == <span class="hljs-variable">$s</span>, <span class="hljs-variable">$temp</span> : temperature );
                <span class="hljs-variable">$min</span> : min( <span class="hljs-variable">$temp</span> ),
                <span class="hljs-variable">$max</span> : max( <span class="hljs-variable">$temp</span> ),
                <span class="hljs-variable">$avg</span> : average( <span class="hljs-variable">$temp</span> );
                <span class="hljs-variable">$min</span> &lt; <span class="hljs-number">20</span>, <span class="hljs-variable">$avg</span> &gt; <span class="hljs-number">70</span> )<font></font>
then<font></font>
    // raise the <span class="hljs-keyword">alarm</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，min，max和average是累计函数，并将计算每个传感器的所有读数的最小，最大和平均温度值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools具有多种内置累积功能，包括：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平均</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方差</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standardDeviation</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectList</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">collectSet</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些常用函数接受任何表达式作为输入。</font><font style="vertical-align: inherit;">例如，如果有人想要计算订单所有项目的平均利润，则可以使用平均函数编写规则：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Average profit"</span><font></font>
when<font></font>
    <span class="hljs-variable">$order</span> : Order()<font></font>
    accumulate( OrderItem( order == <span class="hljs-variable">$order</span>, <span class="hljs-variable">$cost</span> : cost, <span class="hljs-variable">$price</span> : price );
                <span class="hljs-variable">$avgProfit</span> : average( <span class="hljs-number">1</span> - <span class="hljs-variable">$cost</span> / <span class="hljs-variable">$price</span> ) )
<span class="hljs-keyword">then</span>
    // average profit <span class="hljs-keyword">for</span> <span class="hljs-variable">$order</span> is <span class="hljs-variable">$avgProfit</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积功能都是可插拔的。</font><font style="vertical-align: inherit;">这意味着，如果需要，可以轻松地将自定义的特定于域的功能添加到引擎中，并且规则可以开始使用它们而没有任何限制。</font><font style="vertical-align: inherit;">要实现新的Accumulate Function，所有人需要做的是创建一个实现</font></font><code>org.kie.api.runtime.rule.AccumulateFunction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">的Java类</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">作为Accumulate Function实现的示例，以下是该</font></font><code>average</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的实现</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">/**
 * An implementation of an accumulator capable of calculating average values
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AverageAccumulateFunction</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">org</span>.<span class="hljs-title">kie</span>.<span class="hljs-title">api</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">rule</span>.<span class="hljs-title">AccumulateFunction</span>&lt;<span class="hljs-title">AverageAccumulateFunction</span>.<span class="hljs-title">AverageData</span>&gt; </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readExternal</span><span class="hljs-params">(ObjectInput in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeExternal</span><span class="hljs-params">(ObjectOutput out)</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AverageData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Externalizable</span> </span>{
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span>    count = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> total = <span class="hljs-number">0</span>;<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AverageData</span><span class="hljs-params">()</span> </span>{}<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readExternal</span><span class="hljs-params">(ObjectInput in)</span> <span class="hljs-keyword">throws</span> IOException, ClassNotFoundException </span>{<font></font>
            count   = in.readInt();<font></font>
            total   = in.readDouble();<font></font>
        }<font></font>
<font></font>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeExternal</span><span class="hljs-params">(ObjectOutput out)</span> <span class="hljs-keyword">throws</span> IOException </span>{<font></font>
            out.writeInt(count);<font></font>
            out.writeDouble(total);<font></font>
        }<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#createContext()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> AverageData <span class="hljs-title">createContext</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AverageData();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#init(java.io.Serializable)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(AverageData context)</span> </span>{<font></font>
        context.count = <span class="hljs-number">0</span>;<font></font>
        context.total = <span class="hljs-number">0</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#accumulate(java.io.Serializable, java.lang.Object)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accumulate</span><span class="hljs-params">(AverageData context,
                           Object value)</span> </span>{<font></font>
        context.count++;<font></font>
        context.total += ((Number) value).doubleValue();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#reverse(java.io.Serializable, java.lang.Object)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reverse</span><span class="hljs-params">(AverageData context, Object value)</span> </span>{<font></font>
        context.count--;<font></font>
        context.total -= ((Number) value).doubleValue();<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#getResult(java.io.Serializable)
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getResult</span><span class="hljs-params">(AverageData context)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Double( context.count == <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : context.total / context.count );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#supportsReverse()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">supportsReverse</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">/* (non-Javadoc)
     * @see org.kie.api.runtime.rule.AccumulateFunction#getResultType()
     */</span>
    <span class="hljs-keyword">public</span> Class&lt; ? &gt; getResultType() {
        <span class="hljs-keyword">return</span> Number.class;<font></font>
    }<font></font>
<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如我们所预料的那样，函数的代码非常简单，因为所有“脏”集成工作都是由引擎完成的。</font><font style="vertical-align: inherit;">最后，要使用规则中的函数，作者可以使用“import accumulate”语句导入它：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml">import accumulate <span class="hljs-tag">&lt;<span class="hljs-title">class_name</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">function_name</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果实现了</font></font><code>some.package.VarianceFunction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现该</font></font><code>variance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">的类</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">并希望在规则中使用它，他将执行以下操作：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例144.导入和使用自定义“`variance`”累积函数的示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">import accumulate some.package.VarianceFunction variance<font></font>
<font></font>
rule <span class="hljs-string">"Calculate Variance"</span><font></font>
when<font></font>
    accumulate( Test( <span class="hljs-variable">$s</span> : score ), <span class="hljs-variable">$v</span> : variance( <span class="hljs-variable">$s</span> ) )
<span class="hljs-keyword">then</span>
    // the variance of the <span class="hljs-built_in">test</span> scores is <span class="hljs-variable">$v</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内置函数（总和，平均值等）由引擎自动导入。</font><font style="vertical-align: inherit;">只需显式导入用户定义的自定义累加函数。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了向后兼容，Drools仍然支持通过配置文件和系统属性配置累积功能，但这是一种不推荐使用的方法。</font><font style="vertical-align: inherit;">为了使用配置文件或系统属性配置上一个示例中的方差函数，用户可以设置如下属性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs java">drools.accumulate.function.variance = some.<span class="hljs-keyword">package</span>.VarianceFunction</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，“ </font></font><code>drools.accumulate.function.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”是必须始终使用的前缀，“ </font></font><code>variance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”是如何在drl文件中使用该函数，“ </font></font><code>some.package.VarianceFunction</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”是实现函数行为的类的完全限定名称。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_alternate_syntax_single_function_with_return_type"><a class="anchor" href="index.html#_alternate_syntax_single_function_with_return_type"></a><a class="link" href="index.html#_alternate_syntax_single_function_with_return_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备用语法：具有返回类型的单个函数</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积语法随着时间的推移而演变，目标是变得更加紧凑和富有表现力。</font><font style="vertical-align: inherit;">尽管如此，Drools仍支持以前的语法，以实现向后兼容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果规则在给定累积上使用单个累加函数，则作者可以为结果对象添加模式，并使用“from”关键字将其链接到累积结果。</font><font style="vertical-align: inherit;">示例：对超过100美元的订单应用10％折扣的规则可以通过以下方式编写：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Apply 10% discount to orders over US$ 100,00"</span><font></font>
when<font></font>
    <span class="hljs-variable">$order</span> : Order()
    <span class="hljs-variable">$total</span> : Number( doubleValue &gt; <span class="hljs-number">100</span> )<font></font>
             from accumulate( OrderItem( order == <span class="hljs-variable">$order</span>, <span class="hljs-variable">$value</span> : value ),<font></font>
                              sum( <span class="hljs-variable">$value</span> ) )
<span class="hljs-keyword">then</span>
    // apply discount to <span class="hljs-variable">$order</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，accumulate元素仅使用一个函数（sum），因此，规则作者选择显式地为accumulate函数（Number）的结果类型编写模式，并在其中写入约束。</font><font style="vertical-align: inherit;">使用这种语法比以前提出的紧凑语法没有问题，除了有点冗长。</font><font style="vertical-align: inherit;">另请注意，不允许在同一个accumulate语句中同时使用返回类型和函数绑定。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行编译时检查以确保与“ </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”关键字</font><font style="vertical-align: inherit;">一起使用的模式</font><font style="vertical-align: inherit;">可从所使用的累积函数的结果中分配。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用此语法，“ </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”将绑定到accumulate函数返回的单个结果，并且不会迭代。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，“ </font></font><code>$total</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”绑定到accumulate sum（）函数返回的结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，作为另一个例子，如果accumulate函数的结果是一个集合，“ </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”仍然绑定到单个结果，它不会迭代：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Person names"</span><font></font>
when<font></font>
  <span class="hljs-variable">$x</span> : Object() from accumulate(MyPerson( <span class="hljs-variable">$val</span> : name );<font></font>
                                collectList( <span class="hljs-variable">$val</span> ) )
<span class="hljs-keyword">then</span>
  // <span class="hljs-variable">$x</span> is a List<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定的“ </font></font><code>$x : Object()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”是List本身，由使用的collectList累积函数返回。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是要突出显示的一个重要区别，因为“ </font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”关键字也可以单独使用accumulate来迭代集合的元素：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Iterate the numbers"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$xs</span> : List()
    <span class="hljs-variable">$x</span> : Integer() from <span class="hljs-variable">$xs</span><font></font>
then<font></font>
  // <span class="hljs-variable">$x</span> matches <span class="hljs-keyword">and</span> binds to <span class="hljs-keyword">each</span> Integer in the collection<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然出于向后兼容的目的仍支持此语法，但出于此原因和其他原因，我们鼓励规则作者使用而不是使用Accumulate CE首选语法（在前一章中描述），以避免任何潜在的陷阱，如这些示例所述。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_accumulate_with_inline_custom_code"><a class="anchor" href="index.html#_accumulate_with_inline_custom_code"></a><a class="link" href="index.html#_accumulate_with_inline_custom_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积内联自定义代码</font></font></a></h6>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内联自定义代码累积不是一个好习惯，原因有多种，包括维护和测试使用它们的规则的困难，以及无法重用该代码。</font><font style="vertical-align: inherit;">实现自己的累积函数非常简单直接，易于单元测试和使用。</font><font style="vertical-align: inherit;">这种累积形式仅支持向后兼容。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">累积的另一种可能的语法是定义内联自定义代码，而不是使用累积函数。</font><font style="vertical-align: inherit;">正如之前所警告的那样，尽管出于上述原因，这是令人沮丧的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>accumulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有内联自定义代码</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">CE </font><font style="vertical-align: inherit;">的一般语法</font><font style="vertical-align: inherit;">是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">pattern</span>&gt;</span> from accumulate( <span class="hljs-tag">&lt;<span class="hljs-title">source</span> <span class="hljs-attribute">pattern</span>&gt;</span>,<font></font>
                                  init( <span class="hljs-tag">&lt;<span class="hljs-title">init</span> <span class="hljs-attribute">code</span>&gt;</span> ),<font></font>
                                  action( <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">code</span>&gt;</span> ),<font></font>
                                  reverse( <span class="hljs-tag">&lt;<span class="hljs-title">reverse</span> <span class="hljs-attribute">code</span>&gt;</span> ),<font></font>
                                  result( <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">expression</span>&gt;</span> ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个元素的含义如下：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;source pattern&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：源模式是引擎将尝试与每个源对象匹配的常规模式。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;init code&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是所选方言中的代码语义块，在迭代源对象之前，每个元组将执行一次。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;动作代码&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是将为每个源对象执行的所选方言中的语义代码块。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;reverse code&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是所选方言中的可选语义代码块，如果存在，则将对不再与源模式匹配的每个源对象执行。</font><font style="vertical-align: inherit;">此代码块的目标是撤消在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;action code&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">块中</font><font style="vertical-align: inherit;">执行的任何计算</font><font style="vertical-align: inherit;">，以便引擎可以在修改或删除源对象时执行递减计算，从而极大地提高了这些操作的性能。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;result expression&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是在所有方言中迭代所有源对象后执行的语义表达式。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;result pattern&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是引擎尝试与</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;result expression&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回的对象匹配的常规模式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果匹配，则</font></font><code>accumulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素的计算结果为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，引擎继续评估规则中的下一个CE。</font><font style="vertical-align: inherit;">如果不匹配，则</font></font><code>accumulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE评估为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">false</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，引擎停止评估该规则的CE。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们看一个例子，它会更容易理解：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Apply 10% discount to orders over US$ 100,00"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$order</span> : Order()
    <span class="hljs-variable">$total</span> : Number( doubleValue &gt; <span class="hljs-number">100</span> )<font></font>
             from accumulate( OrderItem( order == <span class="hljs-variable">$order</span>, <span class="hljs-variable">$value</span> : value ),<font></font>
                              init( double total = <span class="hljs-number">0</span>; ),<font></font>
                              action( total += <span class="hljs-variable">$value</span>; ),
                              <span class="hljs-keyword">reverse</span>( total -= <span class="hljs-variable">$value</span>; ),<font></font>
                              result( total ) )<font></font>
then<font></font>
    // apply discount to <span class="hljs-variable">$order</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的例子中，对于</font></font><code>Order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作存储器中的</font><font style="vertical-align: inherit;">每个</font><font style="vertical-align: inherit;">，引擎将执行</font><font style="vertical-align: inherit;">初始化整个变量为零</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化代码</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然后，它将迭代</font></font><code>OrderItem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该订单的</font><font style="vertical-align: inherit;">所有</font><font style="vertical-align: inherit;">对象，</font><font style="vertical-align: inherit;">为每个</font><font style="vertical-align: inherit;">对象执行</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在示例中，它将所有项的值汇总到总变量中）。</font><font style="vertical-align: inherit;">迭代所有</font></font><code>OrderItem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象后，它将返回与</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果表达式</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应的值</font><font style="vertical-align: inherit;">（在上例中，变量的值</font></font><code>total</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">最后，引擎将尝试将结果与</font></font><code>Number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式</font><font style="vertical-align: inherit;">匹配</font><font style="vertical-align: inherit;">，如果double值大于100，则将触发规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该示例使用Java作为语义方言，因此请注意，在init，action和reverse代码块中必须使用分号作为语句分隔符。</font><font style="vertical-align: inherit;">结果是表达式，因此，它不承认';'。</font><font style="vertical-align: inherit;">如果用户使用任何其他方言，他必须遵守该方言的特定语法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反向代码</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可选的，但强烈建议用户编写它以便从</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新和删除</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font><em><font style="vertical-align: inherit;">改进性能中</font></em><font style="vertical-align: inherit;">受益</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>accumulate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CE可以被用来执行对源对象的任何行动。</font><font style="vertical-align: inherit;">以下示例实例化并填充自定义对象：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Accumulate using custom objects"</span><font></font>
when<font></font>
    <span class="hljs-variable">$person</span>   : Person( <span class="hljs-variable">$likes</span> : likes )
    <span class="hljs-variable">$cheesery</span> : Cheesery( totalAmount &gt; <span class="hljs-number">100</span> )<font></font>
                from accumulate( <span class="hljs-variable">$cheese</span> : Cheese( <span class="hljs-built_in">type</span> == <span class="hljs-variable">$likes</span> ),<font></font>
                                 init( Cheesery cheesery = new Cheesery(); ),<font></font>
                                 action( cheesery.addCheese( <span class="hljs-variable">$cheese</span> ); ),<font></font>
                                 reverse( cheesery.removeCheese( <span class="hljs-variable">$cheese</span> ); ),<font></font>
                                 result( cheesery ) );<font></font>
<span class="hljs-keyword">then</span>
    // <span class="hljs-keyword">do</span> something<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_conditional_element_code_eval_code"><a class="anchor" href="index.html#_conditional_element_code_eval_code"></a><a class="link" href="index.html#_conditional_element_code_eval_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.8。</font><font style="vertical-align: inherit;">条件元素</font></font><code>eval</code></a></h5>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/eval.png" alt="EVAL">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图105. eval</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本质上是一个全能型，允许执行任何语义代码（返回原始布尔值）。</font><font style="vertical-align: inherit;">此代码可以引用规则的LHS中绑定的变量，以及规则包中的函数。</font><font style="vertical-align: inherit;">过度使用eval会降低规则的声明性，并可能导致性能不佳的引擎。</font><font style="vertical-align: inherit;">虽然</font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在模式中的任何位置使用，但最佳做法是将其添加为规则的LHS中的最后一个条件元素。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Evals无法编入索引，因此不如Field Constraints高效。</font><font style="vertical-align: inherit;">但是，这使得它们非常适合在函数返回随时间变化的值时使用，这在Field Constraints中是不允许的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于熟悉Drools 2.x血统的人来说，旧的Drools参数和条件标记等同于将变量绑定到适当的类型，然后在eval节点中使用它。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">p1</span> : <span class="hljs-tag">Parameter</span>()
<span class="hljs-tag">p2</span> : <span class="hljs-tag">Parameter</span>()
<span class="hljs-tag">eval</span>( <span class="hljs-tag">p1</span><span class="hljs-class">.getList</span>()<span class="hljs-class">.containsKey</span>( <span class="hljs-tag">p2</span><span class="hljs-class">.getItem</span>() ) )</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">p1 : Parameter()<font></font>
p2 : Parameter()<font></font>
// call <span class="hljs-keyword">function</span> isValid <span class="hljs-keyword">in</span> the LHS
<span class="hljs-built_in">eval</span>( isValid( p1, p2 ) )</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_railroad_diagrams"><a class="anchor" href="index.html#_railroad_diagrams"></a><a class="link" href="index.html#_railroad_diagrams"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.3.9。</font><font style="vertical-align: inherit;">铁路图</font></font></a></h5>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateAction.png" alt="AccumulateAction">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateClause.png" alt="AccumulateClause">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateFunction.png" alt="AccumulateFunction">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateInit.png" alt="AccumulateInit">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateResult.png" alt="AccumulateResult">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateReverse.png" alt="AccumulateReverse">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AccumulateSteps.png" alt="AccumulateSteps">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Accumulations.png" alt="积累">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AdditiveExpr.png" alt="AdditiveExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Annotation.png" alt="注解">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Arguments.png" alt="参数">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ArrayCreatorRest.png" alt="ArrayCreatorRest">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ArrayInitializer.png" alt="ArrayInitializer">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AssignmentOperator.png" alt="AssignmentOperator">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/BindingPattern.png" alt="BindingPattern">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Block.png" alt="块">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/BooleanLiteral.png" alt="BooleanLiteral">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/CompilationUnit.png" alt="CompilationUnit">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalAnd.png" alt="ConditionalAnd">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElementAccumulate.png" alt="ConditionalElementAccumulate">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElementEval.png" alt="ConditionalElementEval">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElementExists.png" alt="ConditionalElementExists">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElementForall.png" alt="ConditionalElementForall">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElementNot.png" alt="ConditionalElementNot">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalElement.png" alt="ConditionalElement">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalExpr.png" alt="ConditionalExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalOrExpr.png" alt="ConditionalOrExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ConditionalOr.png" alt="ConditionalOr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Constraints.png" alt="约束">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/CreatedName.png" alt="CreatedName">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Creator.png" alt="创造者">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Definition.png" alt="定义">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Digit.png" alt="数字">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExplicitGenericInvocationSuffix.png" alt="ExplicitGenericInvocationSuffix">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExplicitGenericInvocation.png" alt="ExplicitGenericInvocation">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Exponent.png" alt="指数">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExpressionList.png" alt="表达式列表">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Expression.png" alt="表达">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Field.png" alt="领域">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Fraction.png" alt="分数">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/FromAccumulateClause.png" alt="FromAccumulateClause">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/FromClause.png" alt="FromClause">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/FromCollectClause.png" alt="FromCollectClause">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/FunctionDefinition.png" alt="FunctionDefinition">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GlobalDefinition.png" alt="GlobalDefinition">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/IdentifierSuffix.png" alt="IdentifierSuffix">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ImportDefinition.png" alt="ImportDefinition">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InExpr.png" alt="InExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InlineListExpr.png" alt="InlineListExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InlineMapExpr.png" alt="InlineMapExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InnerCreator.png" alt="InnerCreator">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/InstanceOfExpr.png" alt="InstanceOfExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/IntLiteral.png" alt="的IntLiteral">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Literal.png" alt="文字">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ModifyStatement.png" alt="ModifyStatement">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NonWildcardTypeArguments.png" alt="NonWildcardTypeArguments">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/OrRestriction.png" alt="OrRestriction">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/OverClause.png" alt="OverClause">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Parameters.png" alt="参数">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Pattern.png" alt="模式">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Placeholders.png" alt="占位符">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Primary.png" alt="主">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/PrimitiveType.png" alt="PrimitiveType">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QualifiedName.png" alt="QualifiedName的">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QueryDefinition.png" alt="QueryDefinition">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QueryOptions.png" alt="QueryOptions">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RealLiteral.png" alt="RealLiteral">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RealTypeSuffix.png" alt="RealTypeSuffix">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RelationalExpr.png" alt="RelationalExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RelationalOperator.png" alt="RelationalOperator">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RhsStatement.png" alt="RhsStatement">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleAttributes.png" alt="RuleAttributes">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleAttribute.png" alt="RuleAttribute">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleDefinition.png" alt="RuleDefinition">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RuleOptions.png" alt="RuleOptions">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Selector.png" alt="选择">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ShiftExpr.png" alt="ShiftExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/SingleRestriction.png" alt="SingleRestriction">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/SourcePattern.png" alt="SourcePattern">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/StringId.png" alt="的StringID">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/SuperSuffix.png" alt="SuperSuffix">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ThenPart.png" alt="ThenPart">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TypeArguments.png" alt="TypeArguments">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TypeArgument.png" alt="TypeArgument">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TypeDefinition.png" alt="类型定义">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TypeOptions.png" alt="TypeOptions">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Type.png" alt="类型">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/UnaryExprNotPlusMinus.png" alt="UnaryExprNotPlusMinus">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/UnaryExpr.png" alt="UnaryExpr">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Value.png" alt="值">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/VariableInitializer.png" alt="VariableInitializer">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/WhenPart.png" alt="WhenPart">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_right_hand_side_then"><a class="anchor" href="index.html#_the_right_hand_side_then"></a><a class="link" href="index.html#_the_right_hand_side_then"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.4。</font><font style="vertical-align: inherit;">右手边（然后）</font></font></a></h4>
<div class="sect4">
<h5 id="_usage"><a class="anchor" href="index.html#_usage"></a><a class="link" href="index.html#_usage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.4.1。</font><font style="vertical-align: inherit;">用法</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右手边（RHS）是规则的后果或行动部分的通用名称; </font><font style="vertical-align: inherit;">此部分应包含要执行的操作列表。</font><font style="vertical-align: inherit;">在规则的RHS中使用命令式或条件式代码是不好的做法; </font><font style="vertical-align: inherit;">作为一项规则应该是原子性的 - “当这个，然后这样做”，而不是“当这个，也许这样做”。</font><font style="vertical-align: inherit;">规则的RHS部分也应保持较小，从而保持其声明性和可读性。</font><font style="vertical-align: inherit;">如果您发现在RHS中需要命令性和/或条件代码，那么您可能应该将该规则分解为多个规则。</font><font style="vertical-align: inherit;">RHS的主要目的是插入，删除或修改工作内存数据。</font><font style="vertical-align: inherit;">为了帮助您，您可以使用一些方便的方法来修改工作记忆; </font><font style="vertical-align: inherit;">无需首先引用工作内存实例。</font></font></p>
</div>
<div class="paragraph">
<p><code>update(</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，句柄</font></font></em><code>);</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将告诉引擎一个对象已经改变（一个已被绑定到LHS上的东西），并且可能需要重新考虑规则。</font></font></p>
</div>
<div class="paragraph">
<p><code>update(</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></em><code>);</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用; </font><font style="vertical-align: inherit;">在这里，知识助手将通过身份检查为您查找传递的对象的事实句柄。</font><font style="vertical-align: inherit;">（请注意，如果向要插入引擎的Java bean提供属性更改侦听器，则可以避免</font></font><code>update()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在对象更改时</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">。）。</font><font style="vertical-align: inherit;">在事实的字段值发生更改后，您必须在更改另一个事实之前调用update，否则您将导致Drools引擎中的索引出现问题。</font><font style="vertical-align: inherit;">modify关键字可以避免此问题。</font></font></p>
</div>
<div class="paragraph">
<p><code>insert(new</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有些东西</font></font></em><code>());</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会将你创作的新对象放入工作记忆中。</font></font></p>
</div>
<div class="paragraph">
<p><code>insertLogical(new</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有些东西</font></font></em><code>());</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类似于insert，但是当没有更多事实来支持当前触发规则的真实性时，对象将被自动删除。</font></font></p>
</div>
<div class="paragraph">
<p><code>delete(</code><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">handle</font></font></em><code>);</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从工作记忆中删除一个对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些便捷方法基本上是宏，可以为</font></font><code>KnowledgeHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例</font><font style="vertical-align: inherit;">提供快捷方式</font><font style="vertical-align: inherit;">，使您可以从规则文件访问工作内存。</font><font style="vertical-align: inherit;">预定义</font></font><code>drools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">变量</font></font><code>KnowledgeHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您调用其他几个有用的方法。</font><font style="vertical-align: inherit;">（</font></font><code>KnowledgeHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关更高级的操作，</font><font style="vertical-align: inherit;">请参阅</font><font style="vertical-align: inherit;">界面文档）。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该调用</font></font><code>drools.halt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立即终止规则执行。</font><font style="vertical-align: inherit;">这是将控制权返回到当前会话的工作点所必需的</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><code>insert(Object o)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>update(Object o)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>delete(Object o)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以被称为上</font></font><code>drools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为好，但由于他们经常使用他们可以没有对象引用被调用。</font></font></p>
</li>
<li>
<p><code>drools.getWorkingMemory()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code>WorkingMemory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font></font></p>
</li>
<li>
<p><code>drools.setFocus( String s)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 将焦点设置为指定的议程组。</font></font></p>
</li>
<li>
<p><code>drools.getRule().getName()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从规则的RHS调用，返回规则的名称。</font></font></p>
</li>
<li>
<p><code>drools.getTuple()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回与当前正在执行的规则匹配的元组，并</font></font><code>drools.getActivation()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传递相应的激活。</font><font style="vertical-align: inherit;">（这些调用对于日志记录和调试很有用。）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整的Knowledge Runtime API通过另一个</font></font><code>kcontext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的</font><font style="vertical-align: inherit;">预定义变量公开</font></font><code>KieContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它的方法</font></font><code>getKieRuntime()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了一个类型的对象</font></font><code>KieRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这反过来又提供了对大量方法的访问，其中许多方法对编码RHS逻辑非常有用。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该调用</font></font><code>kcontext.getKieRuntime().halt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">立即终止规则执行。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问者</font></font><code>getAgenda()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回对此会话的引用，该会话</font></font><code>Agenda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">又提供对各种规则组的访问：激活组，议程组和规则流组。</font><font style="vertical-align: inherit;">一个相当普遍的范例是激活一些议程组，这可以通过冗长的调用来完成：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// give focus to the agenda group CleanUp</span>
kcontext.getKieRuntime().getAgenda().getAgendaGroup( <span class="hljs-string">"CleanUp"</span> ).setFocus();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（你可以实现相同的使用</font></font><code>drools.setFocus(
"CleanUp" )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。）</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要运行查询，请调用</font></font><code>getQueryResults(String query)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后可以处理结果，如“ </font></font><a href="index.html#_querysection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一节中所述</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用</font></font><code>kcontext.getKieRuntime().getQueryResults()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用</font></font><code>drools.getKieRuntime().getQueryResults()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是从规则的RHS运行查询的正确方法，也是唯一受支持的方法。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理事件管理的一组方法允许您为工作记忆和议程添加和删除事件监听器。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><code>getKieBase()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，系统中所有知识的主干以及当前会话的发起方。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以管理与全局</font></font><code>setGlobal(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>getGlobal(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>getGlobals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><code>getEnvironment()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回运行时</font></font><code>Environment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它的工作方式与您所知的操作系统环境非常相似。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_the_code_modify_code_statement"><a class="anchor" href="index.html#_the_code_modify_code_statement"></a><a class="link" href="index.html#_the_code_modify_code_statement"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.4.2。</font><font style="vertical-align: inherit;">该</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此语言扩展提供了事实更新的结构化方法。</font><font style="vertical-align: inherit;">它将更新操作与许多setter调用相结合，以更改对象的字段。</font><font style="vertical-align: inherit;">这是</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">的语法架构</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml">modify ( <span class="hljs-tag">&lt;<span class="hljs-title">fact-expression</span>&gt;</span> ) {
    <span class="hljs-tag">&lt;<span class="hljs-title">expression</span>&gt;</span> [ , <span class="hljs-tag">&lt;<span class="hljs-title">expression</span>&gt;</span> ]*<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带括号的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;fact-expression&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须生成事实对象引用。</font><font style="vertical-align: inherit;">块中的表达式列表应包含给定对象的setter调用，而不需要通常的对象引用（编译器自动添加）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该示例说明了一个简单的事实修改。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子145.修改声明</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"modify stilton"</span><font></font>
when<font></font>
    <span class="hljs-variable">$stilton</span> : Cheese(<span class="hljs-built_in">type</span> == <span class="hljs-string">"stilton"</span>)
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$stilton</span> ){
        <span class="hljs-built_in">set</span>Price( <span class="hljs-number">20</span> ),
        <span class="hljs-built_in">set</span>Age( <span class="hljs-string">"overripe"</span> )<font></font>
    }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当与细粒度属性变化监听器结合使用时，使用修改语句的优点尤其明显。</font><font style="vertical-align: inherit;">有关详细信息，请参阅相应部分。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_named_consequences"><a class="anchor" href="index.html#_conditional_named_consequences"></a><a class="link" href="index.html#_conditional_named_consequences"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.5。</font><font style="vertical-align: inherit;">有条件命名的后果</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有时，对每个规则具有单一结果的约束可能会有所限制，并导致冗长且难以维持的重复，如下例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Give 10% discount to customers older than 60"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$customer</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Customer</span>( age &gt; <span class="hljs-number">60</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$customer</span>) { setDiscount( <span class="hljs-number">0</span>.<span class="hljs-number">1</span> ) };
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Give free parking to customers older than 60"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$customer</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Customer</span>( age &gt; <span class="hljs-number">60</span> )
    <span class="hljs-variable">$car</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Car</span> ( owner == <span class="hljs-variable">$customer</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$car</span>) { setFreeParking( <span class="hljs-keyword">true</span> ) };
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经可以通过使第二个规则扩展第一个规则来部分克服这个问题，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Give 10% discount to customers older than 60"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$customer</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Customer</span>( age &gt; <span class="hljs-number">60</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$customer</span>) { setDiscount( <span class="hljs-number">0</span>.<span class="hljs-number">1</span> ) };
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Give free parking to customers older than 60"</span>
    extends <span class="hljs-string">"Give 10% discount to customers older than 60"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$car</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Car</span> ( owner == <span class="hljs-variable">$customer</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$car</span>) { setFreeParking( <span class="hljs-keyword">true</span> ) };
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论如何，这个特性使得在单个规则中定义除了默认值之外的更多标记后果成为可能，因此，例如，前两个规则只能按如下方式压缩：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Give 10% discount and free parking to customers older than 60"</span><font></font>
when<font></font>
    <span class="hljs-variable">$customer</span> : Customer( age &gt; <span class="hljs-number">60</span> )
    <span class="hljs-keyword">do</span>[giveDiscount]
    <span class="hljs-variable">$car</span> : Car ( owner == <span class="hljs-variable">$customer</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$car</span>) { <span class="hljs-built_in">set</span>FreeParking( <span class="hljs-literal">true</span> ) };
<span class="hljs-keyword">then</span>[giveDiscount]<font></font>
    modify(<span class="hljs-variable">$customer</span>) { <span class="hljs-built_in">set</span>Discount( <span class="hljs-number">0.1</span> ) };<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后一条规则有2个后果，通常是默认值，加上另一个名为“giveDiscount”，使用关键字do激活，只要在KIE基地找到60岁以上的客户，无论他拥有什么事实是不是开车。</font><font style="vertical-align: inherit;">命名结果的激活也可以通过另一个条件来保护，例如在这个进一步的例子中：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Give free parking to customers older than 60 and 10% discount to golden ones among them"</span><font></font>
when<font></font>
    <span class="hljs-variable">$customer</span> : Customer( age &gt; <span class="hljs-number">60</span> )
    <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">type</span> == <span class="hljs-string">"Golden"</span> ) <span class="hljs-keyword">do</span>[giveDiscount]
    <span class="hljs-variable">$car</span> : Car ( owner == <span class="hljs-variable">$customer</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$car</span>) { <span class="hljs-built_in">set</span>FreeParking( <span class="hljs-literal">true</span> ) };
<span class="hljs-keyword">then</span>[giveDiscount]<font></font>
    modify(<span class="hljs-variable">$customer</span>) { <span class="hljs-built_in">set</span>Discount( <span class="hljs-number">0.1</span> ) };<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终在if语句之前的模式上评估if语句中的条件。</font><font style="vertical-align: inherit;">最后，这个更复杂的示例显示了如何使用嵌套的if / else语句切换不同的条件：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Give free parking and 10% discount to over 60 Golden customer and 5% to Silver ones"</span><font></font>
when<font></font>
    <span class="hljs-variable">$customer</span> : Customer( age &gt; <span class="hljs-number">60</span> )
    <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">type</span> == <span class="hljs-string">"Golden"</span> ) <span class="hljs-keyword">do</span>[giveDiscount10]
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( <span class="hljs-built_in">type</span> == <span class="hljs-string">"Silver"</span> ) <span class="hljs-built_in">break</span>[giveDiscount5]
    <span class="hljs-variable">$car</span> : Car ( owner == <span class="hljs-variable">$customer</span> )
<span class="hljs-keyword">then</span>
    modify(<span class="hljs-variable">$car</span>) { <span class="hljs-built_in">set</span>FreeParking( <span class="hljs-literal">true</span> ) };
<span class="hljs-keyword">then</span>[giveDiscount10]<font></font>
    modify(<span class="hljs-variable">$customer</span>) { <span class="hljs-built_in">set</span>Discount( <span class="hljs-number">0.1</span> ) };
<span class="hljs-keyword">then</span>[giveDiscount5]<font></font>
    modify(<span class="hljs-variable">$customer</span>) { <span class="hljs-built_in">set</span>Discount( <span class="hljs-number">0.05</span> ) };<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里的目的是给予超过60岁的Golden顾客10％的折扣和免费停车，但只有5％的折扣（没有免费停车）给Silver。</font><font style="vertical-align: inherit;">通过使用关键字break而不是do来激活名为“giveDiscount5”的结果来实现此结果。</font><font style="vertical-align: inherit;">事实上，只是在议程中安排一个结果，允许LHS的剩余部分继续按照正常情况进行评估，而break也会阻止任何进一步的模式匹配评估。</font><font style="vertical-align: inherit;">当然，请注意，任何没有受到中断条件保护的命名结果的激活都没有意义（并产生编译时错误），否则后面的LHS部分将永远无法访问。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_a_note_on_auto_boxing_and_primitive_types"><a class="anchor" href="index.html#_a_note_on_auto_boxing_and_primitive_types"></a><a class="link" href="index.html#_a_note_on_auto_boxing_and_primitive_types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8.6。</font><font style="vertical-align: inherit;">关于自动装箱和原始类型的注记</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools尝试以原始或对象包装形式保留数字，因此在代码块或表达式中使用时绑定到int原语的变量将不再需要手动取消装箱; </font><font style="vertical-align: inherit;">与Drools 3.0不同，所有原语都是自动装箱的，需要手动拆箱。</font><font style="vertical-align: inherit;">绑定到对象包装器的变量将保留为对象; </font><font style="vertical-align: inherit;">在这种情况下，应用现有的JDK 1.5和JDK 5规则来处理自动装箱和拆箱。</font><font style="vertical-align: inherit;">在评估字段约束时，系统会尝试将其中一个值强制转换为可比较的格式; </font><font style="vertical-align: inherit;">所以原语与对象包装器相当。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_querysection"><a class="anchor" href="index.html#_querysection"></a><a class="link" href="index.html#_querysection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.9。</font><font style="vertical-align: inherit;">询问</font></font></a></h3>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/query.png" alt="询问">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图106.查询</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询是在工作内存中搜索与所述条件匹配的事实的简单方法。</font><font style="vertical-align: inherit;">因此，它只包含规则的LHS结构，因此既不指定“when”也不指定“then”。</font><font style="vertical-align: inherit;">查询具有一组可选参数，每个参数都可以选择键入。</font><font style="vertical-align: inherit;">如果未给出类型，则假定为Object类型。</font><font style="vertical-align: inherit;">引擎将根据需要尝试强制值。</font><font style="vertical-align: inherit;">查询名称是KieBase的全局名称; </font><font style="vertical-align: inherit;">所以不要将相同名称的查询添加到同一RuleBase的不同包中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要返回结果，请使用</font></font><code>ksession.getQueryResults("name")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“name”作为查询的名称。</font><font style="vertical-align: inherit;">这将返回一个查询结果列表，允许您检索与查询匹配的对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个示例为30岁以上的所有人提供了一个简单的查询。第二个示例使用参数将年龄限制与位置相结合。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子146.查询30岁以上的人</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">query <span class="hljs-string">"people over the age of 30"</span>
    person : Person( age &gt; <span class="hljs-number">30</span> )<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例147.查询x岁以上和y居住的人员</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">query <span class="hljs-string">"people over the age of x"</span>  (<span class="hljs-keyword">int</span> x, String y)<font></font>
    person : Person( age &gt; x, location == y )<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们使用标准的“for”循环遍历返回的QueryResults。</font><font style="vertical-align: inherit;">每个元素都是QueryResultsRow，我们可以使用它来访问元组中的每个列。</font><font style="vertical-align: inherit;">可以通过绑定声明名称或索引位置访问这些列。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例148.查询30岁以上的人员</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">QueryResults results = ksession.getQueryResults( <span class="hljs-string">"people over the age of 30"</span> );<font></font>
System.out.println( <span class="hljs-string">"we have "</span> + results.size() + <span class="hljs-string">" people over the age  of 30"</span> );<font></font>
<font></font>
System.out.println( <span class="hljs-string">"These people are are over 30:"</span> );<font></font>
<font></font>
<span class="hljs-keyword">for</span> ( QueryResultsRow row : results ) {<font></font>
    Person person = ( Person ) row.get( <span class="hljs-string">"person"</span> );<font></font>
    System.out.println( person.getName() + <span class="hljs-string">"\n"</span> );<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为更紧凑的代码添加了对位置语法的支持。</font><font style="vertical-align: inherit;">默认情况下，类型声明中声明的类型顺序与参数位置匹配。</font><font style="vertical-align: inherit;">但是可以使用@position注释覆盖它们。</font><font style="vertical-align: inherit;">这允许模式与位置参数一起使用，而不是更详细的命名参数。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Cheese
    <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">1</span>)
    shop : <span class="hljs-keyword">String</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">2</span>)
    price : <span class="hljs-built_in">int</span> @<span class="hljs-keyword">position</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.drools.definition.type包中的@Position注释可用于在类路径上注释原始pojos。</font><font style="vertical-align: inherit;">目前，只能对类上的字段进行注释。</font><font style="vertical-align: inherit;">支持类的继承，但不支持接口或方法。</font><font style="vertical-align: inherit;">下面的isContainedIn查询演示了在模式中使用位置参数; </font></font><code>Location(x, y;)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font><code>Location( thing == x, location == y).</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询现在可以调用其他查询，这与可选的查询参数相结合，提供了派生查询样式的反向链接。</font><font style="vertical-align: inherit;">参数支持位置和命名语法。</font><font style="vertical-align: inherit;">也可以混合位置和命名，但位置必须首先，由分号分隔。</font><font style="vertical-align: inherit;">文字表达式可以作为查询参数传递，但在此阶段，您不能将表达式与变量混合。</font><font style="vertical-align: inherit;">以下是调用另一个查询的查询示例。</font><font style="vertical-align: inherit;">请注意，此处的“z”始终为“out”变量。</font><font style="vertical-align: inherit;">'？' </font><font style="vertical-align: inherit;">符号表示查询仅为拉取，一旦返回结果，您将无法在基础数据更改时收到进一步的结果。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Location
    thing : <span class="hljs-keyword">String</span>
    location : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">query</span> isContainedIn( <span class="hljs-keyword">String</span> x, <span class="hljs-keyword">String</span> y )
    Location(x, y;</span>)<font></font>
    or<font></font>
    ( Location(z, y;) and ?isContainedIn(x, z;) )<font></font>
<span class="hljs-operator"><span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，您可以使用实时“开放”查询来反复接收查询结果随时间的变化，因为它查询的基础数据会发生变化。</font><font style="vertical-align: inherit;">请注意，“look”规则在不使用“？”的情况下调用查询。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
    <span class="hljs-constant">Location</span>(x, y;)
    <span class="hljs-keyword">or</span>
    ( <span class="hljs-constant">Location</span>(z, y;) <span class="hljs-keyword">and</span> isContainedIn(x, z;) )
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule look <span class="hljs-keyword">when</span>
    <span class="hljs-constant">Person</span>( <span class="hljs-variable">$l</span> <span class="hljs-symbol">:</span> likes )<font></font>
    isContainedIn( <span class="hljs-variable">$l</span>, <span class="hljs-string">'office'</span>; )
<span class="hljs-keyword">then</span>
   insertLogical( <span class="hljs-variable">$l</span> <span class="hljs-string">'is in the office'</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持派生查询的统一，简而言之，这意味着参数是可选的。</font><font style="vertical-align: inherit;">可以使用静态字段org.drools.core.runtime.rule.Variable.v从Java调用查询而不指定参数 - 请注意，您必须使用'v'而不是Variable的替代实例。</font><font style="vertical-align: inherit;">这些被称为'out'参数。</font><font style="vertical-align: inherit;">请注意，查询本身不会在编译时声明参数是在入口还是在出，这可以在每次使用时纯粹在运行时定义。</font><font style="vertical-align: inherit;">以下示例将返回办公室中包含的所有对象。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript">results = ksession.getQueryResults( <span class="hljs-string">"isContainedIn"</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>[] {  Variable.v, <span class="hljs-string">"office"</span> } );<font></font>
l = <span class="hljs-keyword">new</span> ArrayList&lt;List&lt;<span class="hljs-built_in">String</span>&gt;&gt;();
<span class="hljs-keyword">for</span> ( QueryResultsRow r : results ) {<font></font>
    l.add( Arrays.asList( <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>[] { (<span class="hljs-built_in">String</span>) r.get( <span class="hljs-string">"x"</span> ), (<span class="hljs-built_in">String</span>) r.get( <span class="hljs-string">"y"</span> ) } ) );<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该算法使用堆栈来处理递归，因此方法堆栈不会爆炸。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用查询的输入参数作为事实的字段，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query contains(<span class="hljs-constant">String</span> <span class="hljs-variable">$s</span>, <span class="hljs-constant">String</span> <span class="hljs-variable">$c</span>)
    <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span>= <span class="hljs-constant">String</span>( this.contains( <span class="hljs-variable">$c</span> ) )
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-constant">PersonNamesWithA</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>()<font></font>
    contains( <span class="hljs-variable">$p</span>.name, <span class="hljs-string">"a"</span>; )
<span class="hljs-keyword">then</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及更多通常的任何类型的有效表达式，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query checkLength(<span class="hljs-constant">String</span> <span class="hljs-variable">$s</span>, int <span class="hljs-variable">$l</span>)
    <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span>= <span class="hljs-constant">String</span>( length == <span class="hljs-variable">$l</span> )
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-constant">CheckPersonNameLength</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$i</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Integer</span>()
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>()<font></font>
    checkLength( <span class="hljs-variable">$p</span>.name, <span class="hljs-number">1</span> + <span class="hljs-variable">$i</span> + <span class="hljs-variable">$p</span>.age; )
<span class="hljs-keyword">then</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下版本尚不支持：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表和地图统一</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达统一 -  pred（X，X + 1，X * Y / 7）</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_domain_specific_languages"><a class="anchor" href="index.html#_domain_specific_languages"></a><a class="link" href="index.html#_domain_specific_languages"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10。</font><font style="vertical-align: inherit;">领域特定语言</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
域特定语言（或DSL）是一种创建专用于您的问题域的规则语言的方法。</font><font style="vertical-align: inherit;">一组DSL定义包括从DSL“句子”到DRL结构的转换，它允许您使用所有基础规则语言和引擎功能。</font><font style="vertical-align: inherit;">给定DSL，您可以在DSL规则（或DSLR）文件中编写规则，这些规则将被转换为DRL文件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL和DSLR文件是纯文本文件，您可以使用任何文本编辑器来创建和修改它们。</font><font style="vertical-align: inherit;">但是在IDE和基于Web的BRMS中也有DSL和DSLR编辑器，你也可以使用它们，尽管它们可能无法为你提供完整的DSL功能。</font></font></p>
</div>
<div class="sect3">
<h4 id="_when_to_use_a_dsl"><a class="anchor" href="index.html#_when_to_use_a_dsl"></a><a class="link" href="index.html#_when_to_use_a_dsl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.1。</font><font style="vertical-align: inherit;">何时使用DSL</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL可以作为规则创作（和规则作者）之间的分离层，以及由域对象建模和Drools引擎的本地语言和方法产生的技术复杂性。</font><font style="vertical-align: inherit;">如果您的规则需要由不是程序员的域专家（例如业务分析师）阅读和验证，则应考虑使用DSL; </font><font style="vertical-align: inherit;">它隐藏了实现细节，并专注于规则逻辑。</font><font style="vertical-align: inherit;">DSL句子也可以作为条件元素和后果动作的“模板”，在规则中重复使用，可能会有微小的变化。</font><font style="vertical-align: inherit;">您可以将DSL句子定义为映射到这些重复短语，参数提供了适应这些变化的手段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL在运行时对Drools引擎没有影响，它们只是一个编译时功能，需要一个特殊的解析器和转换器。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_dsl_basics"><a class="anchor" href="index.html#_dsl_basics"></a><a class="link" href="index.html#_dsl_basics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.2。</font><font style="vertical-align: inherit;">DSL基础知识</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools DSL机制允许您自定义条件表达式和后果操作。</font><font style="vertical-align: inherit;">还可以使用全局替换机制（“关键字”）。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例149.示例DSL映射</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">[<span class="hljs-keyword">when</span>]Something <span class="hljs-keyword">is</span> {colour}=Something(colour==<span class="hljs-string">"{colour}"</span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的示例中，</font></font><code>[when]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指示表达式的范围，即它是否对LHS或规则的RHS有效。</font><font style="vertical-align: inherit;">bracketed关键字后面的部分是您在规则中使用的表达式; </font><font style="vertical-align: inherit;">通常是一种自然的语言表达，但并非必须如此。</font><font style="vertical-align: inherit;">等号（“=”）右侧的部分是表达式到规则语言的映射。</font><font style="vertical-align: inherit;">此字符串的形式取决于其目的地，RHS或LHS。</font><font style="vertical-align: inherit;">如果它是LHS，那么它应该是根据常规LHS语法的术语; </font><font style="vertical-align: inherit;">如果是RHS那么它可能是一个Java语句。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每当DSL解析器将DSL中编写的规则文件中的一行与DSL定义中的表达式匹配时，它就会执行三个字符串操作步骤。</font><font style="vertical-align: inherit;">首先，它提取出现在表达式中包含大括号中变量名的字符串值（此处为:) </font></font><code>{colour}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然后，然后插入从这些捕获获得的值，只要该名称再次包含在括号中，就会出现在映射的右侧。</font><font style="vertical-align: inherit;">最后，插值字符串替换DSL规则文件行中整个表达式匹配的内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意，表达式（即，等号左侧的字符串）用作针对DSL规则文件的行的模式匹配操作中的正则表达式，匹配行的全部或部分。</font><font style="vertical-align: inherit;">这意味着您可以使用（例如）'？' </font><font style="vertical-align: inherit;">表示前面的字符是可选的。</font><font style="vertical-align: inherit;">使用它的一个很好的理由是克服DSL的自然语言短语的变化。</font><font style="vertical-align: inherit;">但是，鉴于这些表达式是正则表达式模式，这也意味着必须使用前面的反斜杠（'\'）转义Java模式语法的所有“魔术”字符。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得注意的是，编译器会逐行转换DSL规则文件。</font><font style="vertical-align: inherit;">在上面的示例中，“Something is”到行尾的所有文本都被捕获为“{color}”的替换值，这用于插入目标字符串。</font><font style="vertical-align: inherit;">这可能不是你想要的。</font><font style="vertical-align: inherit;">例如，当您打算合并不同的DSL表达式以生成复合DRL模式时，您需要在几个独立的操作中转换DSLR线。</font><font style="vertical-align: inherit;">实现这一目标的最佳方法是确保捕获被特征文本 - 单词甚至单个字符包围。</font><font style="vertical-align: inherit;">结果，解析器完成的匹配操作从该行内的某个地方拔出子串。</font><font style="vertical-align: inherit;">在下面的示例中，引号用作区别字符。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据经验，使用规则编辑器可能要输入的文本数据的引号。</font><font style="vertical-align: inherit;">您还可以使用单词将捕获括起来以确保文本正确匹配。</font><font style="vertical-align: inherit;">两者都通过以下示例说明。</font><font style="vertical-align: inherit;">请注意，</font></font><code>Something is "green" and
    another solid thing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以正确扩展</font><font style="vertical-align: inherit;">单行等</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例150.带引号的示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">[<span class="hljs-keyword">when</span>]something <span class="hljs-keyword">is</span> <span class="hljs-string">"{colour}"</span>=Something(colour==<span class="hljs-string">"{colour}"</span>)<font></font>
[<span class="hljs-keyword">when</span>]another {state} thing=OtherThing(state==<span class="hljs-string">"{state})"</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽可能避免在DSL表达式中使用标点符号（除了引号或撇号之外）。</font><font style="vertical-align: inherit;">主要原因是使用DSL的规则作者很容易忘记标点符号。</font><font style="vertical-align: inherit;">另一个原因是括号，句点和问号是神奇的字符，需要在DSL定义中转义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DSL映射中，大括号“{”和“}”仅应用于包含变量定义或引用，从而产生捕获。</font><font style="vertical-align: inherit;">如果它们应该按字面意思出现，无论是在表达式中还是在右侧的替换文本中，它们必须使用前面的反斜杠（“\”）进行转义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">[<span class="hljs-keyword">then</span>]<span class="hljs-keyword">do</span> something= <span class="hljs-keyword">if</span> (foo) \{ <span class="hljs-keyword">do</span>Something(); \}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果大括号“{”和“}”应出现在DSL定义的替换字符串中，请使用反斜杠（'\'）对其进行转义。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例151. DSL映射条目的示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-comment"># This is a comment to be ignored.</span>
[<span class="hljs-keyword">when</span>]There <span class="hljs-keyword">is</span> a person with name <span class="hljs-keyword">of</span> <span class="hljs-string">"{name}"</span>=Person(name==<span class="hljs-string">"{name}"</span>)<font></font>
[<span class="hljs-keyword">when</span>]Person <span class="hljs-keyword">is</span> at least {age} years old <span class="hljs-keyword">and</span> lives <span class="hljs-keyword">in</span> <span class="hljs-string">"{location}"</span>=<font></font>
      Person(age &gt;= {age}, location==<span class="hljs-string">"{location}"</span>)<font></font>
[<span class="hljs-keyword">then</span>]Log <span class="hljs-string">"{message}"</span>=System.out.println(<span class="hljs-string">"{message}"</span>);<font></font>
[<span class="hljs-keyword">when</span>]And = <span class="hljs-keyword">and</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鉴于上述DSL示例，以下示例显示了各种DSLR代码段的扩展：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例152. DSL扩展的例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">There <span class="hljs-keyword">is</span> a person with name <span class="hljs-keyword">of</span> <span class="hljs-string">"Kitty"</span>
   =<span class="hljs-function">=&gt;</span> Person(name=<span class="hljs-string">"Kitty"</span>)<font></font>
Person <span class="hljs-keyword">is</span> at least <span class="hljs-number">42</span> years old <span class="hljs-keyword">and</span> lives <span class="hljs-keyword">in</span> <span class="hljs-string">"Atlanta"</span>
   =<span class="hljs-function">=&gt;</span> Person(age &gt;= <span class="hljs-number">42</span>, location=<span class="hljs-string">"Atlanta"</span>)<font></font>
Log <span class="hljs-string">"boo"</span>
   =<span class="hljs-function">=&gt;</span> System.out.println(<span class="hljs-string">"boo"</span>);<font></font>
There <span class="hljs-keyword">is</span> a person with name <span class="hljs-keyword">of</span> <span class="hljs-string">"Bob"</span> And Person <span class="hljs-keyword">is</span> at least <span class="hljs-number">30</span> years old <span class="hljs-keyword">and</span> lives <span class="hljs-keyword">in</span> <span class="hljs-string">"Utah"</span>
   =<span class="hljs-function">=&gt;</span> Person(name=<span class="hljs-string">"Bob"</span>) <span class="hljs-keyword">and</span> Person(age &gt;= <span class="hljs-number">30</span>, location=<span class="hljs-string">"Utah"</span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要忘记，如果要从DSL规则行捕获纯文本并希望在扩展中将其用作字符串文字，则必须在映射的右侧提供引号。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以将DSL表达式链接在一条线上，只要解析器清楚一个结束，下一个开始并且表示参数的文本结束。</font><font style="vertical-align: inherit;">（否则，您可能会将所有文本作为参数值直到行尾。）根据DSL定义文件中的顺序，逐个尝试DSL表达式。</font><font style="vertical-align: inherit;">在任何匹配之后，所有剩余的DSL表达式也会被调查。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的DRL文本可能包含多行。</font><font style="vertical-align: inherit;">换行文本中的行尾写为</font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_constraints_to_facts"><a class="anchor" href="index.html#_adding_constraints_to_facts"></a><a class="link" href="index.html#_adding_constraints_to_facts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.3。</font><font style="vertical-align: inherit;">为事实添加约束</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编写规则条件时的一个常见要求是能够将约束的任意组合添加到模式中。</font><font style="vertical-align: inherit;">鉴于事实类型可能具有许多字段，因此必须为每个组合提供单独的DSL语句将是完全愚蠢的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL工具允许您通过一个简单的约定为模式添加约束：如果您的DSL表达式以连字符（减号，“ - ”）开头，则假定它是一个字段约束，因此，它被添加到最后一个前面的图案线。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">举个例子，让我们看看课程</font></font><code>Cheese</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括以下字段：类型，价格，年龄和国家。</font><font style="vertical-align: inherit;">我们可以在正常的DRL中表达一些LHS条件，如下所示</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Cheese(age &lt; <span class="hljs-number">5</span>, price == <span class="hljs-number">20</span>, type==<span class="hljs-string">"stilton"</span>, country==<span class="hljs-string">"ch"</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面给出的DSL定义产生三个DSL短语，其可用于创建涉及这些字段的约束的任何组合。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">[<span class="hljs-keyword">when</span>]There <span class="hljs-keyword">is</span> a Cheese with=Cheese()<font></font>
[<span class="hljs-keyword">when</span>]- age <span class="hljs-keyword">is</span> less than {age}=age&lt;{age}<font></font>
[<span class="hljs-keyword">when</span>]- type <span class="hljs-keyword">is</span> <span class="hljs-string">'{type}'</span>=type==<span class="hljs-string">'{type}'</span>
[<span class="hljs-keyword">when</span>]- country equal to <span class="hljs-string">'{country}'</span>=country==<span class="hljs-string">'{country}'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，您可以使用以下条件编写规则：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs python">There <span class="hljs-keyword">is</span> a Cheese <span class="hljs-keyword">with</span>
        - age <span class="hljs-keyword">is</span> less than <span class="hljs-number">42</span>
        - type <span class="hljs-keyword">is</span> <span class="hljs-string">'stilton'</span></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 解析器将选取以“ - ”开头的行，并将其作为约束添加到前面的模式，在需要时插入逗号。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
对于前面的示例，生成的DRL是：</font></font></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Cheese(age&lt;<span class="hljs-number">42</span>, <span class="hljs-built_in">type</span>==<span class="hljs-string">'stilton'</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将所有数字字段与所有关系运算符组合（根据前面示例中的DSL表达式“age is less ...”）会产生大量的DSL条目。</font><font style="vertical-align: inherit;">但您可以为各种运算符定义DSL短语，甚至可以为处理任何字段约束的通用表达式定义，如下所示。</font><font style="vertical-align: inherit;">（请注意，除了变量名之外，表达式定义还包含正则表达式。）</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs markdown">[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]is less than or equal to=<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">=</span>
[<span class="hljs-attribute">when</span>][]<span class="hljs-attribute">is</span> <span class="hljs-attribute">less</span> <span class="hljs-attribute">than</span>=<span class="hljs-value">&lt;</span>
[<span class="hljs-attribute">when</span>][]<span class="hljs-attribute">is</span> <span class="hljs-attribute">greater</span> <span class="hljs-attribute">than</span> <span class="hljs-attribute">or</span> <span class="hljs-attribute">equal</span> <span class="hljs-attribute">to</span>=&gt;</span></span>=<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]is greater than=&gt;<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]is equal to===<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]equals===<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]There is a Cheese with=Cheese()<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]- {field:\w<span class="hljs-emphasis">*} {operator} {value:\d*</span>}={field} {operator} {value}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鉴于这些DSL定义，您可以编写具有以下条件的规则：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs python">There <span class="hljs-keyword">is</span> a Cheese <span class="hljs-keyword">with</span>
   - age <span class="hljs-keyword">is</span> less than <span class="hljs-number">42</span>
   - rating <span class="hljs-keyword">is</span> greater than <span class="hljs-number">50</span>
   - type equals <span class="hljs-string">'stilton'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种特定情况下，诸如“小于”的短语被替换为</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后该行匹配最后的DSL条目。</font><font style="vertical-align: inherit;">这将删除连字符，但最终结果仍会作为前一个模式的约束添加。</font><font style="vertical-align: inherit;">处理完所有行后，生成的DRL文本为：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Cheese(age&lt;<span class="hljs-number">42</span>, rating &gt; <span class="hljs-number">50</span>, <span class="hljs-built_in">type</span>==<span class="hljs-string">'stilton'</span>)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果单独的DSL表达式旨在一个接一个地匹配相同的行，则DSL中的条目的顺序是重要的。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_developing_a_dsl"><a class="anchor" href="index.html#_developing_a_dsl"></a><a class="link" href="index.html#_developing_a_dsl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.4。</font><font style="vertical-align: inherit;">开发DSL</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个好的入门方法是编写应用程序所需规则的代表性样本，并在开发时对其进行测试。</font><font style="vertical-align: inherit;">这将为您提供稳定的条件元素框架及其约束。</font><font style="vertical-align: inherit;">DRL和DSLR中的规则是指根据数据模型的实体，表示应遵循规则中定义的推理过程的应用程序数据。</font><font style="vertical-align: inherit;">请注意，如果大多数数据模型的类型都是事实，则编写规则通常会更容易。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定一组初始规则，应该可以识别重复或类似的代码片段并将变量部分标记为参数。</font><font style="vertical-align: inherit;">这为可能是一个方便的DSL条目提供了可靠的线索。</font><font style="vertical-align: inherit;">此外，请确保您完全掌握领域专家正在使用的术语，并将DSL短语基于此词汇表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在第一个设计阶段推迟有关条件和操作的实施决策，方法是在行的前面添加一个更大的符号（“&gt;”），以DRL形式保留某些条件元素和操作。</font><font style="vertical-align: inherit;">（这对于插入调试语句也很方便。）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下一个开发阶段，您应该发现DSL配置可以很快稳定下来。</font><font style="vertical-align: inherit;">可以通过重用现有DSL定义或通过向现有条件或结果条目添加参数来编写新规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽量减少DSL条目的数量。</font><font style="vertical-align: inherit;">使用参数可以为相似的规则模式或约束应用相同的DSL语句。</font><font style="vertical-align: inherit;">但不要夸大：使用DSL的作者仍然可以通过某些固定文本识别DSL短语。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_dsl_and_dslr_reference"><a class="anchor" href="index.html#_dsl_and_dslr_reference"></a><a class="link" href="index.html#_dsl_and_dslr_reference"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.10.5。</font><font style="vertical-align: inherit;">DSL和DSLR参考</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL文件是面向行的格式的文本文件。</font><font style="vertical-align: inherit;">其条目用于根据DRL语法将DSLR文件转换为文件。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一行以“</font></font><mark><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“或”//“（带或不带前面的空格）被视为注释。注释行以”</font></font></mark><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/“扫描请求调试选项的单词，见下文。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何以开括号（“[”）开头的行都被假定为DSL条目定义的第一行。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何其他行都附加到前面的DSL条目定义，行末尾替换为空格。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL条目包含以下四个部分：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围定义，写为关键字“when”或“condition”，“then”或“outcome”，“*”和“keyword”之一，括在括号中（“[”和“]”）。</font><font style="vertical-align: inherit;">这表示DSL条目是否对条件或规则的结果有效，或两者都有效。</font><font style="vertical-align: inherit;">“关键字”的范围指示意味着该条目具有全局意义，即，它在DSLR文件中的任何地方都被识别。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个类型定义，写为Java类名，括在括号中。</font><font style="vertical-align: inherit;">除非下一部分以开括号开头，否则此部分是可选的。</font><font style="vertical-align: inherit;">一对空括号也是有效的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL表达式由（Java）正则表达式组成，具有任意数量的嵌入</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量定义，</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以等号（“=”）结尾。</font><font style="vertical-align: inherit;">变量定义括在大括号（“{”和“}”）中。</font><font style="vertical-align: inherit;">它由变量名和两个可选附件组成，用冒号（“：”）分隔。</font><font style="vertical-align: inherit;">如果有一个附件，则它是用于匹配要分配给变量的文本的正则表达式; </font><font style="vertical-align: inherit;">如果有两个附件，第一个是GUI编辑器的提示，第二个是正则表达式。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，正则表达式中“魔术”的所有字符必须使用前面的反斜杠（“\”）进行转义，如果它们应该在表达式中字面上出现。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔等号后的行的剩余部分是与正则表达式匹配的任何DSLR文本的替换文本。</font><font style="vertical-align: inherit;">它可能包含变量引用，即括在大括号中的变量名。</font><font style="vertical-align: inherit;">可选地，变量名后面可以跟感叹号（“！”）和变换函数，见下文。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，大括号（“{”和“}”）必须使用前面的反斜杠（“\”）进行转义，如果它们应该在替换字符串中字面上出现。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过使用以“＃/”开头的注释行来选择性地打开DSL扩展的调试，该注释行可以包含来自下面的表中的一个或多个单词。</font><font style="vertical-align: inherit;">结果输出写入标准输出。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表8. DSL扩展的调试选项</font></font></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用行号打印生成的DRL文本。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">脚步</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印条件和后果行的每个扩展步骤。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键词</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用范围“keyword”转储所有DSL条目的内部表示。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">什么时候</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转储范围为“when”或“*”的所有DSL条目的内部表示。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用范围“then”或“*”转储所有DSL条目的内部表示。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用法</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示所有DSL条目的使用情况统计信息。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面是一些DSL定义示例，其中的注释描述了它们所说明的语言特性。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs markdown"><span class="hljs-header"># Comment: DSL examples</span><font></font>
<font></font>
<span class="hljs-header">#/ debug: display result and usage</span><font></font>
<font></font>
<span class="hljs-header"># keyword definition: replaces "regula" by "rule"</span>
[<span class="hljs-link_label">keyword</span>][<span class="hljs-link_reference"></span>]regula=rule<font></font>
<font></font>
<span class="hljs-header"># conditional element: "T" or "t", "a" or "an", convert matched word</span>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>][<span class="hljs-link_label">Tt</span>]here is an? {entity:\w+}=
<span class="hljs-code">        ${entity!lc}: {entity!ucfirst} ()</span><font></font>
<font></font>
<span class="hljs-header"># consequence statement: convert matched word, literal braces</span>
[<span class="hljs-link_label">then</span>][<span class="hljs-link_reference"></span>]update {entity:\w+}=modify( ${entity!lc} )\{ \}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSLR文件的转换过程如下：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本被读入内存。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个“关键字”条目都应用于整个文本。</font><font style="vertical-align: inherit;">首先，通过将空白序列替换为匹配任意数量的空格字符的模式，并使用从定义提供的正则表达式中捕获的变量定义或使用默认值替换变量定义，来修改关键字定义中的正则表达式（ “*？”）。</font><font style="vertical-align: inherit;">然后，详尽地搜索DSLR文本以发现与修改的正则表达式匹配的字符串。</font><font style="vertical-align: inherit;">提取对应于变量捕获的匹配字符串的子串并替换相应替换文本中的变量引用，并且该文本替换DSLR文本中的匹配字符串。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所述，分别在“何时”和“然后”以及“然后”和“结束”之间的DSLR文本的部分以统一的方式逐行定位和处理。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于一条线路，按照它在DSL文件中出现的顺序依次获取与线路部分相关的每个DSL条目。</font><font style="vertical-align: inherit;">它的正则表达式部分被修改：空格被替换为匹配任意数量的空白字符的模式; </font><font style="vertical-align: inherit;">具有正则表达式的变量定义被具有此正则表达式的捕获替换，其默认值为“。*？”。</font><font style="vertical-align: inherit;">如果生成的正则表达式与行的全部或部分匹配，则匹配的部分将由适当修改的替换文本替换。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过用对应于正则表达式捕获的文本替换变量引用来完成替换文本的修改。</font><font style="vertical-align: inherit;">可以根据变量引用中给出的字符串变换函数修改该文本; </font><font style="vertical-align: inherit;">详见下文。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果存在命名未在同一条目中定义的变量的变量引用，则扩展器将替换绑定到该名称的变量的值，前提是它是在当前规则的前面一行中定义的。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果条件中的DSLR行使用前导连字符写入，则扩展结果将插入到最后一行，该行应包含模式CE，即类型名称后跟一对括号。</font><font style="vertical-align: inherit;">如果该对为空，则简单地插入扩展行（应该包含有效约束），否则预先插入逗号（“，”）。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果结果中的DSLR行使用前导连字符写入，则扩展结果将插入到最后一行，该行应包含“修改”语句，以一对大括号（“{”和“}”）结尾。</font><font style="vertical-align: inherit;">如果该对为空，则简单地插入展开的行（应该包含有效的方法调用），否则预先插入逗号（“，”）。</font></font></p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是目前</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用符合领先的连字符插入文字等条件元素形式（例如，“积累”），也可以只对第一次插入（例如，“EVAL”）工作。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有字符串转换函数如下表所述。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表9.字符串转换函数</font></font></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UC</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将所有字母转换为大写。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LC</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将所有字母转换为小写。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ucfirst</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将第一个字母转换为大写，将所有其他字母转换为小写。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NUM</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从字符串中提取所有数字和“ - ”。</font><font style="vertical-align: inherit;">如果原始字符串中的最后两位数字以“。”开头。</font><font style="vertical-align: inherit;">或“，”，在相应位置插入小数点。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将字符串与字符串</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a进行</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比较</font><font style="vertical-align: inherit;">，如果它们相等，则将其替换为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，否则</font><font style="vertical-align: inherit;">替换</font><font style="vertical-align: inherit;">为
             </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是另一个三元组
             </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此整个结构实际上是一个转换表。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下DSL示例显示了如何使用字符串转换函数。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs markdown"><span class="hljs-header"># definitions for conditions</span>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]There is an? {entity}=${entity!lc}: {entity!ucfirst}()<font></font>
[<span class="hljs-link_label">when</span>][<span class="hljs-link_reference"></span>]- with an? {attr} greater than {amount}={attr} <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">=</span> {<span class="hljs-attribute">amount</span>!<span class="hljs-attribute">num</span>}
[<span class="hljs-attribute">when</span>][]<span class="hljs-attribute">-</span> <span class="hljs-attribute">with</span> <span class="hljs-attribute">a</span> {<span class="hljs-attribute">what</span>} {<span class="hljs-attribute">attr</span>}=<span class="hljs-value">{attr}</span> {<span class="hljs-attribute">what</span>!<span class="hljs-attribute">positive</span>?&gt;</span></span>0/negative?%lt;0/zero?==0/ERROR}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含DSL定义的文件必须放在resources文件夹或其任何子文件夹下，就像任何其他drools工件一样。</font><font style="vertical-align: inherit;">它必须具有扩展名</font></font><code>.dsl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，或者标记为类型</font></font><code>ResourceType.DSL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以编程方式添加到</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于使用DSL定义的文件，</font></font><code>.dslr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应使用</font><font style="vertical-align: inherit;">扩展名</font><font style="vertical-align: inherit;">，而可以将其添加到</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with类型</font></font><code>ResourceType.DSLR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了解析和扩展DSLR文件，读取DSL配置并将其提供给解析器。</font><font style="vertical-align: inherit;">因此，解析器可以“识别”DSL表达式并将它们转换为本机规则语言表达式。</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DroolsComplexEventProcessingChapter"><a class="anchor" href="index.html#DroolsComplexEventProcessingChapter"></a><a class="link" href="index.html#DroolsComplexEventProcessingChapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.复杂事件处理</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_complex_event_processing"><a class="anchor" href="index.html#_complex_event_processing"></a><a class="link" href="index.html#_complex_event_processing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.1。</font><font style="vertical-align: inherit;">复杂事件处理</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复杂事件处理这一术语没有广泛接受的定义。</font><font style="vertical-align: inherit;">术语Event本身经常被重载并用于引用几个不同的东西，具体取决于它使用的上下文。</font><font style="vertical-align: inherit;">定义术语不是本指南的目标，因此，我们采用一个宽松的定义，尽管不是正式的，但我们可以继续达成共识。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，在本指南的范围内：</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，是在给定时间点应用程序域中状态发生重大变化的记录。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，在Stock Broker应用程序中，当执行销售操作时，它会导致域中的状态更改。</font><font style="vertical-align: inherit;">可以在域中的多个实体上观察到这种状态变化，例如变更以匹配操作价值的证券价格，从卖方变为买方的交易资产的所有权，账户余额来自卖方和买方的贷记和借方等等。根据域的建模方式，这种状态变化可以由单个事件，多个原子事件或甚至相关事件的层次结构表示。</font><font style="vertical-align: inherit;">在任何情况下，在本指南的上下文中，Event是域中特定数据的更改记录。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件由计算机系统处理，因为它们是发明的，并且在整个历史中，负责该事件的系统被赋予不同的名称并且采用不同的方法。</font><font style="vertical-align: inherit;">直到90年代，才开始在EDA（事件驱动架构）上开展更加专注的工作，并对事件处理的要求和目标进行更正式的定义。</font><font style="vertical-align: inherit;">旧的消息传递系统开始改变以满足这些要求，并且开始开发新的系统，其目的仅在于事件处理。</font><font style="vertical-align: inherit;">在事件流处理和复杂事件处理的名称下诞生了两种趋势。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在最开始，事件流处理专注于（近实时）处理事件流的能力，而复杂事件处理的主要焦点是原子事件与复杂（复合）事件的相关性和组合。</font><font style="vertical-align: inherit;">一个重要的（也许是最重要的）里程碑是2002年David Luckham博士出版的“事件的力量”一书。在书中，Luckham博士介绍了复杂事件处理的概念以及它如何用于增强系统处理事件。</font><font style="vertical-align: inherit;">多年来，这两种趋势融合到一个共同的理解，今天这些系统都被称为CEP系统。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于一个非常复杂和肥沃的研究领域，这是一个非常简单的解释，但是对本指南将要介绍的概念设置了高层次和共同的理解。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前对复杂事件处理的理解可以简要描述为维基百科的以下引用：</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复杂事件处理</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（CEP）主要是一个事件处理概念，它处理多个事件的处理任务，目的是识别事件云中的有意义事件.CEP采用的技术包括检测许多事件的复杂模式，事件关联和抽象，事件层次结构以及事件之间的关系，例如因果关系，成员资格和时间安排，以及事件驱动的流程。“</font></font></p>
</div>
</blockquote>
<div class="attribution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
-  http://en.wikipedia.org/wiki/Complex_event_processing
</font></font></div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换句话说，CEP是关于从事件云中检测和选择有趣事件（并且只有它们），找到它们之间的关系并从它们和它们之间的关系中推断出新数据。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于本指南的其余部分，我们将使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复杂事件处理</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CEP</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个术语   </font><font style="vertical-align: inherit;">作为任何相关技术和技术的广泛参考，包括但不限于CEP，复杂事件处理，ESP，事件流处理和事件处理一般来说。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_drools_fusion"><a class="anchor" href="index.html#_drools_fusion"></a><a class="link" href="index.html#_drools_fusion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2。</font><font style="vertical-align: inherit;">Drools Fusion</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，事件处理用例与业务规则用例共享多个要求和目标。</font><font style="vertical-align: inherit;">这些重叠发生在业务方面和技术方面。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在业务方面：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务规则通常基于事件触发的场景的发生来定义。</font><font style="vertical-align: inherit;">例子可能是：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在算法交易应用程序中：如果证券价格与开盘价相比增加X％，则采取行动，其中价格上涨通常由股票交易应用程序上的事件表示。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在监控应用程序上：如果服务器机房的温度在Y分钟内增加X度，则执行操作，其中传感器读数通常由事件表示。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务规则和事件处理查询都经常更改，需要立即响应业务，以适应新的市场条件，新法规和新的企业策略。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从技术角度来看：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两者都需要与企业基础架构和应用程序无缝集成，特别是在自治治理方面，包括但不限于生命周期管理，审计，安全性等。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两者都有功能要求，如模式匹配和非功能性需求，如响应时间和查询/规则说明。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使是共享要求和目标，从历史上看，这两个领域都是出生的，虽然行业发展了，人们可以在市场上找到好的产品，但它们要么专注于事件处理，要么专注于业务规则管理。</font><font style="vertical-align: inherit;">这不仅是因为历史原因，还因为，即使部分重叠，用例确实有一些不同的要求。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools几年前也是作为规则引擎诞生的，但是随着成为行为建模的单一平台的愿景，它很快意识到它只能通过将三种互补的业务建模技术同等重视来实现这一目标：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务规则管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务流程管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复杂事件处理</font></font></p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此背景下，Drools Fusion是负责将事件处理功能添加到平台的模块。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，支持复杂事件处理不仅仅是简单地理解事件是什么。</font><font style="vertical-align: inherit;">CEP场景具有几个共同的特征：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常需要处理大量事件，但只有一小部分事件是真正感兴趣的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件通常是不可变的，因为它们是状态变化的记录。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，关于事件的规则和查询必须以反应模式运行，即对事件模式的检测做出反应。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，相关事件之间存在强烈的时间关系。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个别事件通常并不重要。</font><font style="vertical-align: inherit;">该系统关注相关事件的模式及其关系。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，系统需要执行事件的组合和聚合。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于这个一般的共同特征，Drools Fusion定义了一组目标，以便适当地支持复杂事件处理：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持事件，以其正确的语义，作为一等公民。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许检测，关联，聚合和事件组合。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持处理事件流。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持时间约束以模拟事件之间的时间关系。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持有趣事件的滑动窗口。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持会话范围的统一时钟。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持CEP用例所需的事件量。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持（重新）活动规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持适用于事件输入到引擎（管道）的适配器。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的目标列表基于Drools Expert本身未涵盖的要求，因为在统一平台中，其他模块可以利用一个模块的所有功能。</font><font style="vertical-align: inherit;">通过这种方式，Drools Fusion诞生了企业级功能，如模式匹配，这对CEP产品至关重要，但这已由Drools Expert提供。</font><font style="vertical-align: inherit;">同样，Drools Fusion提供的所有功能都由Drools Flow利用（反之亦然），使流程管理意识到事件处理，反之亦然。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于本指南的其余部分，我们将介绍Drools Fusion添加到平台的每个功能。</font><font style="vertical-align: inherit;">所有这些功能都可用于支持CEP世界中的不同用例，用户可以自由选择和使用那些可以帮助他模拟业务用例的功能。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_event_semantics"><a class="anchor" href="index.html#_event_semantics"></a><a class="link" href="index.html#_event_semantics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3。</font><font style="vertical-align: inherit;">事件语义学</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是呈现出几个显着特点是事实：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常是不可变的：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为，通过前面讨论的定义，事件是应用程序域中状态变化的记录，即已经发生的事情的记录，并且过去不能“改变”，事件是不可变的。</font><font style="vertical-align: inherit;">此约束是开发多个优化和规范事件生命周期的重要要求。</font><font style="vertical-align: inherit;">这并不意味着表示对象的Java对象必须是不可变的。</font><font style="vertical-align: inherit;">恰恰相反，引擎不会强制执行对象模型的不变性，因为规则的最常见用例之一是事件数据丰富。</font></font></p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为最佳实践，允许应用程序填充未填充的事件属性（以使用推断的数据丰富事件），但是应该永远不会更改已填充的属性。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强时间约束：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">涉及事件的规则通常需要多个事件的相关性，特别是时间相关性，其中事件据说相对于其他事件在某个时间点发生。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">托管生命周期：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于其不可变性和时间约束，事件通常仅在有限的时间窗口内匹配其他事件和事实，从而使引擎可以自动管理事件的生命周期。</font><font style="vertical-align: inherit;">换句话说，一个事件被插入到工作存储器中，引擎可以找出事件何时不能与其他事实匹配并自动删除它，释放其相关资源。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用滑动窗口：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于所有事件都有与之关联的时间戳，因此可以在它们上面定义和使用滑动窗口，从而允许在一段时间内创建值聚合规则。</font><font style="vertical-align: inherit;">示例：超过60分钟的事件值的平均值。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持使用语义声明和使用事件：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间点</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于</font></font></strong><font style="vertical-align: inherit;"><strong><font style="vertical-align: inherit;">时间</font></strong><strong><font style="vertical-align: inherit;">间隔的</font></strong><font style="vertical-align: inherit;">事件。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理解语义单元化的简单方法是将</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间点</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件视为</font><em><font style="vertical-align: inherit;">持续时间为零</font></em></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的基于区间的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_event_processing_modes"><a class="anchor" href="index.html#_event_processing_modes"></a><a class="link" href="index.html#_event_processing_modes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4。</font><font style="vertical-align: inherit;">事件处理模式</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则引擎通常具有处理数据和规则的公知方式，并为应用程序提供结果。</font><font style="vertical-align: inherit;">此外，关于如何将事实呈现给规则引擎的要求并不多，特别是因为通常，处理本身是时间无关的。</font><font style="vertical-align: inherit;">对于大多数情况来说，这是一个很好的假设，但对所有情景都不是。</font><font style="vertical-align: inherit;">当要求包括实时或近实时事件的处理时，时间成为推理过程的重要变量。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下部分将解释时间对规则推理的影响以及Drools为推理过程提供的两种模式。</font></font></p>
</div>
<div class="sect3">
<h4 id="_cloud_mode"><a class="anchor" href="index.html#_cloud_mode"></a><a class="link" href="index.html#_cloud_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4.1。</font><font style="vertical-align: inherit;">云模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CLOUD处理模式是默认处理模式。</font><font style="vertical-align: inherit;">规则引擎的用户熟悉此模式，因为它的行为与任何纯正向链接规则引擎完全相同，包括以前版本的Drools。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在CLOUD模式下运行时，引擎会查看工作内存中的所有事实，如果它们是常规事实或事件，则无关紧要。</font><font style="vertical-align: inherit;">虽然事件像往常一样有时间戳，但没有时间流的概念。</font><font style="vertical-align: inherit;">换句话说，虽然引擎知道某个特定事件是在2009年1月1日09：35：40.767创建的，但引擎无法确定事件的“老”程度，因为有没有“现在”的概念。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此模式下，引擎将应用其通常的多对多模式匹配算法，使用规则约束来查找匹配的元组，像往常一样激活和触发规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此模式不会对事实施加任何其他要求。</font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有时间概念。</font><font style="vertical-align: inherit;">没有要求时钟同步。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件排序没有要求。</font><font style="vertical-align: inherit;">引擎将事件视为无序云，引擎会尝试匹配规则。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一方面，由于没有要求，也没有一些好处。</font><font style="vertical-align: inherit;">例如，在CLOUD模式下，不可能使用滑动窗口，因为滑动窗口基于“现在”的概念，并且在CLOUD模式中没有“现在”的概念。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于事件没有排序要求，因此引擎无法确定事件何时不再匹配，因此事件没有自动生命周期管理。</font><font style="vertical-align: inherit;">即，应用程序必须在不再需要时显式删除事件，就像应用程序使用常规事实一样。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">云模式是Drools的默认执行模式，但无论如何，与Drools中的任何其他配置一样，可以通过设置系统属性，使用配置属性文件或使用API​​来更改此行为。</font><font style="vertical-align: inherit;">相应的属性是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieBaseConfiguration config = KieServices.Factory.get().newKieBaseConfiguration();<font></font>
config.setOption( EventProcessingOption.CLOUD );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等价的属性是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">drools.eventProcessingMode = cloud</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_stream_mode"><a class="anchor" href="index.html#_stream_mode"></a><a class="link" href="index.html#_stream_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4.2。</font><font style="vertical-align: inherit;">流模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当应用程序需要处理事件流时，STREAM处理模式是选择的模式。</font><font style="vertical-align: inherit;">它为常规处理添加了一些常见要求，但启用了许多使流事件处理更加简单的功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用STREAM模式的主要要求是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个流中的事件必须按时间排序。</font><font style="vertical-align: inherit;">即，在给定流内，首先发生的事件必须首先插入引擎。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎将通过使用会话时钟强制流之间的同步，因此，尽管应用程序不需要在流之间强制执行时间排序，但使用非时间同步流可能会导致一些意外结果。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鉴于满足上述要求，应用程序可以使用以下API启用STREAM模式：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieBaseConfiguration config = KieServices.Factory.get().newKieBaseConfiguration();<font></font>
config.setOption( EventProcessingOption.STREAM );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，等效的属性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">drools.eventProcessingMode = stream</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当使用STREAM时，引擎知道时间流的概念和“现在”的概念，即引擎根据从会话时钟读取的当前时间戳来了解旧事件的大小。</font><font style="vertical-align: inherit;">此特性允许引擎为应用程序提供以下附加功能：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑动窗口支撑</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动事件生命周期管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用否定模式时自动规则延迟</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下各节将介绍所有这些功能。</font></font></p>
</div>
<div class="sect4">
<h5 id="_role_of_session_clock_in_stream_mode"><a class="anchor" href="index.html#_role_of_session_clock_in_stream_mode"></a><a class="link" href="index.html#_role_of_session_clock_in_stream_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4.2.1。</font><font style="vertical-align: inherit;">会话时钟在流模式下的作用</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在CLOUD模式下运行引擎时，会话时钟仅用于为没有先前定义的时间戳属性的到达事件添加时间戳。</font><font style="vertical-align: inherit;">虽然在STREAM模式下，会话时钟扮演着更重要的角色。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在STREAM模式下，会话时钟负责保持当前时间戳，并在此基础上，引擎对事件的老化进行所有时间计算，同步来自多个源的流，调度未来任务等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看会话时钟部分的文档，了解如何配置和使用不同的会话时钟实现。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_negative_patterns_in_stream_mode"><a class="anchor" href="index.html#_negative_patterns_in_stream_mode"></a><a class="link" href="index.html#_negative_patterns_in_stream_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4.2.2。</font><font style="vertical-align: inherit;">流模式中的负模式</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与CLOUD模式相比，在STREAM模式下，负模式表现不同。</font><font style="vertical-align: inherit;">在CLOUD模式下，引擎假定事先已知所有事实和事件（没有时间流的概念），因此，立即评估负模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在STREAM模式下运行时，具有时间约束的负模式可能需要引擎在激活规则之前等待一段时间。</font><font style="vertical-align: inherit;">引擎自动计算时间段，使用者不需要使用任何技巧来获得所需的结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例153.在匹配时立即激活的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Sound the alarm"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$f</span> : FireDetected( )
    <span class="hljs-keyword">not</span>( SprinklerActivated( ) )<font></font>
then<font></font>
    // sound the <span class="hljs-keyword">alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上述规则没有时间限制，需要延迟规则，因此，规则立即激活。</font><font style="vertical-align: inherit;">另一方面，以下规则必须在激活前等待10秒，因为喷头可能需要10秒才能激活：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例154.由于时间约束而自动延迟激活的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">rule <span class="hljs-string">"Sound the alarm"</span><font></font>
when<font></font>
    $f : FireDetected( )<font></font>
    not( SprinklerActivated( <span class="hljs-keyword">this</span> after[<span class="hljs-number">0</span>s,<span class="hljs-number">10</span>s] $f ) )<font></font>
then<font></font>
    <span class="hljs-comment">// sound the alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此行为允许引擎在同时处理负模式和时间约束时保持一致性。</font><font style="vertical-align: inherit;">以上内容与编写如下规则相同，但不会增加用户计算和显式写入适当持续时间参数的负担：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例155.具有显式持续时间参数的相同规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">rule <span class="hljs-string">"Sound the alarm"</span>
    duration( <span class="hljs-number">10</span>s )<font></font>
when<font></font>
    $f : FireDetected( )<font></font>
    not( SprinklerActivated( <span class="hljs-keyword">this</span> after[<span class="hljs-number">0</span>s,<span class="hljs-number">10</span>s] $f ) )<font></font>
then<font></font>
    <span class="hljs-comment">// sound the alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下规则要求每10秒至少发生一次“心跳”事件，否则规则将触发。</font><font style="vertical-align: inherit;">此规则中的特殊情况是我们在第一个模式和负模式中使用相同类型的对象。</font><font style="vertical-align: inherit;">负模式具有在发射之前在0到10秒之间等待的时间约束，并且它排除了绑定到$ h的心跳。</font><font style="vertical-align: inherit;">排除绑定的心跳是很重要的，因为时间约束[0s，...]不会自己排除绑定事件$ h再次匹配，从而阻止规则触发。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例156.排除负模式中的绑定事件</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Sound the alarm"</span>
<span class="hljs-keyword">when</span>
    $h: Heartbeat( ) <span class="hljs-keyword">from</span> entry-point <span class="hljs-string">"MonitoringStream"</span>
    not( Heartbeat( <span class="hljs-keyword">this</span> != $h, <span class="hljs-keyword">this</span> after[<span class="hljs-number">0</span>s,<span class="hljs-number">10</span>s] $h ) <span class="hljs-keyword">from</span> entry-point <span class="hljs-string">"MonitoringStream"</span> )<font></font>
then<font></font>
    <span class="hljs-comment">// Sound the alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_session_clock"><a class="anchor" href="index.html#_session_clock"></a><a class="link" href="index.html#_session_clock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5。</font><font style="vertical-align: inherit;">会话时钟</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随着时间的推移需要一个参考时钟。</font><font style="vertical-align: inherit;">仅举一个例子，如果规则超过过去60分钟内给定股票的平均价格，那么引擎如何知道过去60分钟内发生的股票价格变化以计算平均值？</font><font style="vertical-align: inherit;">明显的反应是：通过比较事件的时间戳和“当前时间”。</font><font style="vertical-align: inherit;">引擎如何知道</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">几点了？</font><font style="vertical-align: inherit;">显然，通过查询会话时钟。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话时钟实现策略模式，允许引擎插入和使用不同类型的时钟。</font><font style="vertical-align: inherit;">这非常重要，因为引擎可能运行在可能需要不同时钟实现的不同场景的元素中。</font><font style="vertical-align: inherit;">仅举几例：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则测试：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试始终需要受控环境，当测试包含具有时间约束的规则时，不仅需要控制输入规则和事实，还需要控制时间流。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定期执行：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，在生产中运行规则时，应用程序将需要一个实时时钟，允许Drools引擎立即对时间进程作出反应。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特殊环境：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定环境可能对时间控制有特定要求。</font><font style="vertical-align: inherit;">群集环境可能需要通过心跳进行时钟同步，或者JEE环境可能需要使用AppServer提供的时钟等。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则重放或模拟：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了重放场景或模拟场景，应用程序还必须控制时间流。</font></font></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_available_clock_implementations"><a class="anchor" href="index.html#_available_clock_implementations"></a><a class="link" href="index.html#_available_clock_implementations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5.1。</font><font style="vertical-align: inherit;">可用的时钟实现</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools 5提供开箱即用的2个时钟实现。</font><font style="vertical-align: inherit;">基于系统时钟的默认实时时钟和由应用程序控制的可选伪时钟。</font></font></p>
</div>
<div class="sect4">
<h5 id="_real_time_clock"><a class="anchor" href="index.html#_real_time_clock"></a><a class="link" href="index.html#_real_time_clock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5.1.1。</font><font style="vertical-align: inherit;">实时时钟</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，Drools使用实时时钟实现，在内部使用系统时钟来确定当前时间戳。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要明确配置引擎以使用实时时钟，只需将会话配置参数设置为实时：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration config = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
config.setOption( ClockTypeOption.get(<span class="hljs-string">"realtime"</span>) );</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pseudo_clock"><a class="anchor" href="index.html#_pseudo_clock"></a><a class="link" href="index.html#_pseudo_clock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5.1.2。</font><font style="vertical-align: inherit;">伪时钟</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还提供开箱即用的时钟实现，该时钟由称为伪时钟的应用程序控制。</font><font style="vertical-align: inherit;">该时钟对于单元测试时态规则特别有用，因为它可以由应用程序控制，因此结果变得确定。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要配置伪会话时钟，请执行以下操作：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration config = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
config.setOption( ClockTypeOption.get(<span class="hljs-string">"pseudo"</span>) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为如何控制伪会话时钟的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration config = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
conf.setOption( ClockTypeOption.get( <span class="hljs-string">"pseudo"</span> ) );<font></font>
KieSession session = kbase.newKieSession( conf, <span class="hljs-keyword">null</span> );<font></font>
<font></font>
SessionPseudoClock clock = session.getSessionClock();<font></font>
<font></font>
<span class="hljs-comment">// then, while inserting facts, advance the clock as necessary:</span><font></font>
FactHandle handle1 = session.insert( tick1 );<font></font>
clock.advanceTime( <span class="hljs-number">10</span>, TimeUnit.SECONDS );<font></font>
FactHandle handle2 = session.insert( tick2 );<font></font>
clock.advanceTime( <span class="hljs-number">30</span>, TimeUnit.SECONDS );<font></font>
FactHandle handle3 = session.insert( tick3 );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sliding_windows"><a class="anchor" href="index.html#_sliding_windows"></a><a class="link" href="index.html#_sliding_windows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6。</font><font style="vertical-align: inherit;">滑动窗户</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑动窗口是一种通过定义不断移动的窗口来定义感兴趣的事件的方法。</font><font style="vertical-align: inherit;">两种最常见的滑动窗口实现类型是基于时间的窗口和基于长度的窗口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来的部分将详细介绍它们。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑动窗口仅在STREAM模式下运行引擎时可用。</font><font style="vertical-align: inherit;">有关STREAM模式如何工作的详细信息，请查看“事件处理模式”部分。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑动窗口立即开始匹配并且定义滑动窗口并不意味着规则必须等待滑动窗口“满”才能匹配。</font><font style="vertical-align: inherit;">例如，计算窗口上事件属性的平均值的规则：length（10）将立即开始计算平均值，并且对于无事件将从0（零）开始，并将在事件到达时更新平均值逐个。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_sliding_time_windows"><a class="anchor" href="index.html#_sliding_time_windows"></a><a class="link" href="index.html#_sliding_time_windows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6.1。</font><font style="vertical-align: inherit;">滑动时间Windows</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滑动时间Windows允许用户编写仅匹配最后X个时间单位中发生的事件的规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果用户只想考虑最近2分钟内发生的Stock Ticks，则模式将如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">StockTick() over window:time( <span class="hljs-number">2</span>m )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools使用“over”关键字将窗口与模式相关联。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个更详细的例子中，如果用户想要在传感器读取的最后10分钟内的平均温度高于阈值时发出警报，则规则如下：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例157.在时间窗口上聚合值</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Sound the alarm in case temperature rises above threshold"</span>
<span class="hljs-keyword">when</span>
    TemperatureThreshold( <span class="hljs-variable">$max</span> : max )<font></font>
    Number( doubleValue &gt; <span class="hljs-variable">$max</span> ) from accumulate(<font></font>
        SensorReading( <span class="hljs-variable">$temp</span> : temperature ) over window:<span class="hljs-keyword">time</span>( <span class="hljs-number">10</span><span class="hljs-keyword">m</span> ),<font></font>
        average( <span class="hljs-variable">$temp</span> ) )<font></font>
then<font></font>
    // sound the <span class="hljs-keyword">alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎将自动忽略任何超过10分钟的SensorReading并保持计算的平均值一致。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，在计算事件在到期之前保留在工作内存中的时间间隔时会考虑基于时间的窗口，但是从滑动窗口掉落的事件本身并不意味着事件将从工作内存中丢弃，因为可能是依赖于该事件的其他规则。</font><font style="vertical-align: inherit;">仅当没有其他规则依赖于该事件并且满足该事件类型的到期策略时，引擎才会丢弃事件。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_sliding_length_windows"><a class="anchor" href="index.html#_sliding_length_windows"></a><a class="link" href="index.html#_sliding_length_windows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6.2。</font><font style="vertical-align: inherit;">滑动长度Windows</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sliding Length Windows的工作方式与Time Windows相同，但根据事件插入会话的顺序而不是时间流来考虑事件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果用户想要仅考虑最后10个RHT股票定时器，与它们的年龄无关，则模式将如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">StockTick( company == <span class="hljs-string">"RHT"</span> ) over window:length( <span class="hljs-number">10</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如您所见，该模式类似于上一节中介绍的模式，但不是使用window：time来定义滑动窗口，而是使用window：length。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用与上一节中的示例类似的示例，如果用户想要在传感器的最后100个读数的平均温度高于阈值的情况下发出警报，则规则将如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例158.在长度窗口上聚合值</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"Sound the alarm in case temperature rises above threshold"</span>
<span class="hljs-keyword">when</span>
    TemperatureThreshold( <span class="hljs-variable">$max</span> : max )<font></font>
    Number( doubleValue &gt; <span class="hljs-variable">$max</span> ) from accumulate(<font></font>
        SensorReading( <span class="hljs-variable">$temp</span> : temperature ) over window:<span class="hljs-keyword">length</span>( <span class="hljs-number">100</span> ),<font></font>
        average( <span class="hljs-variable">$temp</span> ) )<font></font>
then<font></font>
    // sound the <span class="hljs-keyword">alarm</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发动机将仅考虑最后100个读数来计算平均温度。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，从基于长度的窗口中删除不是会话中事件到期的标准。</font><font style="vertical-align: inherit;">在计算该窗口时，引擎会忽略从窗口掉落的事件，但不会仅基于该条件从会话中删除事件，因为可能存在依赖于该事件的其他规则。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，基于长度的窗口不会为会话中的事件过期定义时间约束，并且引擎不会考虑它们。</font><font style="vertical-align: inherit;">如果事件没有定义时间约束的其他规则且没有明确的到期策略，则引擎将无限期地将它们保留在会话中。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用滑动窗口时，在考虑窗口之前评估alpha约束，但之后会评估beta（连接）约束。</font><font style="vertical-align: inherit;">当涉及时间窗口时，这通常没有区别，但在使用长度窗口时这很重要。</font><font style="vertical-align: inherit;">例如这种模式：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">StockTick( company == <span class="hljs-string">"RHT"</span> ) over window:length( <span class="hljs-number">10</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义一个（最多）10个StockTicks的窗口，所有窗口都有公司等于“RHT”，而以下一个：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-variable">$s</span> : String()<font></font>
StockTick( company == <span class="hljs-variable">$s</span> ) over window:<span class="hljs-keyword">length</span>( <span class="hljs-number">10</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先创建一个（最多）10个StockTicks的窗口，不管其公司属性的值如何，然后在它们之间仅过滤那些公司等于从工作记忆中选择的字符串的窗口。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_window_declaration"><a class="anchor" href="index.html#_window_declaration"></a><a class="link" href="index.html#_window_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6.3。</font><font style="vertical-align: inherit;">窗口宣言</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该引擎还支持Windows的声明。</font><font style="vertical-align: inherit;">这促进了应用于窗口的过滤器与应用于窗口结果的约束之间的明确区分。</font><font style="vertical-align: inherit;">它还允许在多个规则之间轻松重用窗口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个好处是引擎中基本窗口支持的新实现，增加了使用滑动窗口的规则的整体性能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明窗口的简化EBNF是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">windowDeclaration := <span class="hljs-operator"><span class="hljs-keyword">DECLARE</span> WINDOW <span class="hljs-keyword">ID</span> annotation* lhsPatternBind <span class="hljs-keyword">END</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，一个仅包含给定来源的最后10个股票价格的窗口可以定义为：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> window Ticks
    StockTick( <span class="hljs-keyword">source</span> == <span class="hljs-string">"NYSE"</span> )
        <span class="hljs-keyword">over</span> window:<span class="hljs-keyword">length</span>( <span class="hljs-number">10</span> )
        <span class="hljs-keyword">from</span> entry-point STStream
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，规则可以使用此声明的窗口，将其用作FROM的源，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"RHT ticks in the window"</span>
    <span class="hljs-function"><span class="hljs-keyword">when</span>
        <span class="hljs-title">accumulate</span>(<span class="hljs-params"> StockTick( company == <span class="hljs-string">"RHT"</span> </span>) <span class="hljs-keyword">from</span> window Ticks,
                    $cnt : <span class="hljs-title">count</span>(<span class="hljs-params"><span class="hljs-number">1</span></span>) )
    then
        <span class="hljs-comment">// there has been $cnt RHT ticks over the last 10 ticks</span>
end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，此示例还演示了窗口声明如何允许分隔应用于窗口的约束（只有具有“NYSE”作为源的StockTicks是窗口中包含的10个事件之一）和应用于窗口结果的约束（在最后一个中）选择具有“NYSE”作为源的仅10个具有等于“RHT”的公司的事件。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_streams_support"><a class="anchor" href="index.html#_streams_support"></a><a class="link" href="index.html#_streams_support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7。</font><font style="vertical-align: inherit;">Streams支持</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数CEP用例必须处理事件流。</font><font style="vertical-align: inherit;">流可以以各种形式提供给应用程序，从JMS队列到平面文本文件，从数据库表到原始套接字，甚至通过Web服务调用。</font><font style="vertical-align: inherit;">无论如何，这些流共享一组共同的特征：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流中的事件按时间戳排序。</font><font style="vertical-align: inherit;">时间戳对于不同的流可能具有不同的语义，但它们始终在内部排序。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件量通常很高。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原子事件本身很少有用。</font><font style="vertical-align: inherit;">通常意义是从流中的多个事件与其他来源之间的相关性中提取的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流可以是同类的，即包含单一类型的事件，或者是异构的，即包含多种类型的事件。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools将流的概念概括为引擎的“切入点”。</font><font style="vertical-align: inherit;">一个入口点是流淌事实来自的大门。</font><font style="vertical-align: inherit;">事实可能是常规事实或事件等特殊事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools中，来自一个入口点（流）的事实可以与来自任何其他入口点或事件的事实一起与来自工作记忆的事实相结合。</font><font style="vertical-align: inherit;">虽然，它们从不混合，即它们永远不会失去对它们进入引擎的入口点的引用。</font><font style="vertical-align: inherit;">这很重要，因为可能有相同类型的事实通过几个入口点进入引擎，但是例如通过入口点A插入引擎的一个事实将永远不会匹配来自入口点B的模式。</font></font></p>
</div>
<div class="sect3">
<h4 id="_declaring_and_using_entry_points"><a class="anchor" href="index.html#_declaring_and_using_entry_points"></a><a class="link" href="index.html#_declaring_and_using_entry_points"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7.1。</font><font style="vertical-align: inherit;">声明和使用入口点</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools中的入口点是通过在规则中直接使用它们来隐式声明的。</font><font style="vertical-align: inherit;">即，引用规则中的入口点将使引擎在编译时识别并创建适当的内部结构以支持该入口点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，例如，让我们设想一个银行应用程序，其中事务被馈送到来自流的系统。</font><font style="vertical-align: inherit;">其中一个流包含ATM机中执行的所有事务。</font><font style="vertical-align: inherit;">因此，如果其中一条规则说明：当且仅当帐户余额超过请求的提款金额时才授权提款，规则如下：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例159.流使用的例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"authorize withdraw"</span><font></font>
when<font></font>
    WithdrawRequest( <span class="hljs-variable">$ai</span> : accountId, <span class="hljs-variable">$am</span> : amount ) from entry-point <span class="hljs-string">"ATM Stream"</span>
    CheckingAccount( accountId == <span class="hljs-variable">$ai</span>, balance &gt; <span class="hljs-variable">$am</span> )
<span class="hljs-keyword">then</span><font></font>
    // authorize withdraw<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在前面的示例中，引擎编译器将识别该模式与入口点“ATM Stream”相关联，并且将为规则库创建所有必要的结构以支持“ATM Stream”，并且仅匹配来自“ATM Stream”的WithdrawRequests。 ATM流“。</font><font style="vertical-align: inherit;">在前面的示例中，规则还使用来自主工作内存（CheckingAccount）的事实从流中加入事件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，让我们想象一下第二条规则，规定每个2美元的费用必须适用于在银行分行提出取款请求的任何账户：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例160.使用不同的流</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">rule</span> <span class="hljs-string">"apply fee on withdraws on branches"</span><font></font>
when<font></font>
    WithdrawRequest( <span class="hljs-variable">$ai</span> : accountId, processed == <span class="hljs-built_in">true</span> ) from entry-point <span class="hljs-string">"Branch Stream"</span>
    CheckingAccount( accountId == <span class="hljs-variable">$ai</span> )<font></font>
then<font></font>
    // apply a <span class="hljs-variable">$2</span> fee <span class="hljs-built_in">on</span> the account<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先前的规则将匹配与第一个规则（WithdrawRequest）完全相同类型的事件，但是来自两个不同的流，因此插入“ATM流”的事件将永远不会针对第二个规则上的模式进行评估，因为规则指出它只对来自“分支流”的模式感兴趣。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，入口点除了是流的适当抽象之外，还是一种在工作记忆中确定事实的方法，也是减少交叉产品爆炸的有用工具。</font><font style="vertical-align: inherit;">但这是另一个时间的主题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将事件插入入口点同样简单。</font><font style="vertical-align: inherit;">不是将事件直接插入工作内存，而是将它们插入入口点，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例161.将事实插入入口点</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// create your rulebase and your session as usual</span><font></font>
KieSession session = ...<font></font>
<font></font>
<span class="hljs-comment">// get a reference to the entry point</span>
EntryPoint atmStream = session.getEntryPoint( <span class="hljs-string">"ATM Stream"</span> );<font></font>
<font></font>
<span class="hljs-comment">// and start inserting your facts into the entry point</span>
atmStream.insert( aWithdrawRequest );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面的示例显示了如何手动将事实插入到给定的入口点。</font><font style="vertical-align: inherit;">虽然通常，应用程序将使用众多适配器中的一个将流端点（如JMS队列）直接插入引擎入口点，而无需手动编写插入代码。</font><font style="vertical-align: inherit;">Drools管道API有几个适配器和帮助程序，以及如何执行此操作的示例。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_memory_management_for_events"><a class="anchor" href="index.html#_memory_management_for_events"></a><a class="link" href="index.html#_memory_management_for_events"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.8。</font><font style="vertical-align: inherit;">事件的内存管理</font></font></a></h3>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件的自动内存管理仅在以STREAM模式运行引擎时执行。</font><font style="vertical-align: inherit;">有关STREAM模式如何工作的详细信息，请查看“事件处理模式”部分。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在STREAM模式下运行引擎的一个好处是引擎可以检测事件何时由于其时间限制而无法再与任何规则匹配。</font><font style="vertical-align: inherit;">当发生这种情况时，引擎可以安全地从会话中删除事件而没有副作用，并释放该事件使用的任何资源。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎基本上有两种方法来计算给定事件的匹配窗口：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显式地，使用过期策略</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">隐含地，分析事件的时间约束</font></font></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_explicit_expiration_offset"><a class="anchor" href="index.html#_explicit_expiration_offset"></a><a class="link" href="index.html#_explicit_expiration_offset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.8.1。</font><font style="vertical-align: inherit;">显式到期偏移量</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许引擎计算给定事件类型的感兴趣窗口的第一种方法是通过显式设置它。</font><font style="vertical-align: inherit;">为此，只需使用declare语句并为事实类型定义过期：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例162.为stockTick事件明确定义30分钟的到期偏移量</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> StockTick
    @expires( <span class="hljs-number">30</span><span class="hljs-keyword">m</span> )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的示例声明了StockTick事件的到期偏移量为30分钟。</font><font style="vertical-align: inherit;">在此之后，假设没有规则仍然需要该事件，引擎将过期并自动从会话中删除该事件。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定事件类型的显式到期策略将覆盖该相同类型的任何推断的到期偏移量。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_inferred_expiration_offset"><a class="anchor" href="index.html#_inferred_expiration_offset"></a><a class="link" href="index.html#_inferred_expiration_offset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.8.2。</font><font style="vertical-align: inherit;">推断的到期偏移量</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过分析规则中的时间约束，发动机计算给定事件的到期偏移的另一种方式是隐含的。</font><font style="vertical-align: inherit;">例如，给出以下规则：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例163.具有时间约束的示例规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"correlate orders"</span><font></font>
when<font></font>
    <span class="hljs-variable">$bo</span> : BuyOrderEvent( <span class="hljs-variable">$id</span> : id )
    <span class="hljs-variable">$ae</span> : AckEvent( id == <span class="hljs-variable">$id</span>, this after[<span class="hljs-number">0</span>,<span class="hljs-number">10</span>s] <span class="hljs-variable">$bo</span> )
<span class="hljs-keyword">then</span>
    // <span class="hljs-keyword">do</span> something<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析上述规则，引擎会自动计算出每当BuyOrderEvent匹配时，它需要存储最多10秒钟以等待匹配AckEvent。</font><font style="vertical-align: inherit;">因此，BuyOrderEvent的隐式到期偏移量将为10秒。</font><font style="vertical-align: inherit;">另一方面，AckEvent只能匹配现有的BuyOrderEvent，因此它的到期偏移量将为零秒。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引擎将对整个规则库进行分析，并找到每种事件类型的偏移量。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定事件类型的显式到期策略将覆盖该相同类型的任何推断的到期偏移量。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_temporal_reasoning"><a class="anchor" href="index.html#_temporal_reasoning"></a><a class="link" href="index.html#_temporal_reasoning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9。</font><font style="vertical-align: inherit;">时间推理</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间推理是任何CEP系统的另一个要求。</font><font style="vertical-align: inherit;">如前所述，事件的一个显着特征是它们强烈的时间关系。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间推理是一个广泛的研究领域，从时间模态逻辑的根源到其在商业系统中更实际的应用。</font><font style="vertical-align: inherit;">撰写了数百篇论文和论文，并针对多种应用描述了方法。</font><font style="vertical-align: inherit;">Drools再次采用基于多种来源的实用且简单的方法，但特别值得注意以下论文：</font></font></p>
</div>
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="ALLEN81"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ALLEN81]艾伦，JF。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于区间的时间知识表示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">1981年。</font></font></p>
</li>
<li>
<p><a id="ALLEN83"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ALLEN83] Allen，JF。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保持有关时间间隔的知识</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">1983年。</font></font></p>
</li>
<li>
<p><a id="BENNE00"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[BENNE00] Bennet，Brandon和Galton，Antony P .. </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间和事件的统一语义</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">2005年。</font></font></p>
</li>
<li>
<p><a id="YONEK05"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[YONEK05] Yoneki，Eiko和Bacon，Jean。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">混合网络环境中时间和空间事件关联的统一语义</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">2005年。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools实现了Allen描述的基于区间的时间事件语义，并将时间点事件表示为基于区间的均衡，持续时间为0（零）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于所有时间运算符间隔，“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">”（星号）符号用于表示</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正无穷大</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，“ -</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”（负星号）用于表示</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负无穷大</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_temporal_operators"><a class="anchor" href="index.html#_temporal_operators"></a><a class="link" href="index.html#_temporal_operators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1。</font><font style="vertical-align: inherit;">时间运营商</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools实现了Allen定义的所有13个运算符以及它们的逻辑补码（否定）。</font><font style="vertical-align: inherit;">本节详细介绍了每个运算符及其参数。</font></font></p>
</div>
<div class="sect4">
<h5 id="_after"><a class="anchor" href="index.html#_after"></a><a class="link" href="index.html#_after"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.1。</font><font style="vertical-align: inherit;">后</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当从当前事件到被关联事件的时间距离属于为操作员声明的距离范围时，后评估器关联两个事件并匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> after[ <span class="hljs-number">3</span>m30s, <span class="hljs-number">4</span>m ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventB完成的时间与$ eventA开始的时间之间的时间距离在（3分钟和30秒）和（4分钟）之间时，前一模式将匹配。</font><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"> <span class="hljs-number">3</span>m30s &lt;= <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.endTimeStamp &lt;= <span class="hljs-number">4</span>m</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">after运算符的时间距离间隔是可选的：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值（如下例所示），则间隔从第一个值开始，到第二个值结束。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果只定义了一个值，则间隔从值开始，并在正无穷大处结束。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未定义任何值，则假定初始值为1ms，最终值为正无穷大。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为此运算符定义负距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> after[ -<span class="hljs-number">3</span>m30s, -<span class="hljs-number">2</span>m ] $eventB )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果第一个值大于第二个值，则引擎会自动反转它们，因为没有理由让第一个值大于第二个值。</font><font style="vertical-align: inherit;">示例：以下两种模式被认为具有相同的语义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> after[ -<span class="hljs-number">3</span>m30s, -<span class="hljs-number">2</span>m ] $eventB )<font></font>
$eventA : EventA( <span class="hljs-keyword">this</span> after[ -<span class="hljs-number">2</span>m, -<span class="hljs-number">3</span>m30s ] $eventB )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商可以被用于定义事件之间的约束，java.util.Date属性和属性长以任何组合（自纪元解释为时间戳）。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">EventA( this after <span class="hljs-variable">$someDate</span> )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_before"><a class="anchor" href="index.html#_before"></a><a class="link" href="index.html#_before"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.2。</font><font style="vertical-align: inherit;">之前</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当与事件相关的事件的时间距离与当前相关的时间距离属于为运营商宣布的距离范围时，之前评估者将两个事件和匹配相关联。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> before[ <span class="hljs-number">3</span>m30s, <span class="hljs-number">4</span>m ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA完成的时间与$ eventB开始的时间之间的时间距离在（3分钟和30秒）和（4分钟）之间时，前一模式将匹配。</font><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"> <span class="hljs-number">3</span>m30s &lt;= <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.endTimeStamp &lt;= <span class="hljs-number">4</span>m</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">before运算符的时间距离间隔是可选的：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值（如下例所示），则间隔从第一个值开始，到第二个值结束。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果只定义了一个值，则间隔从值开始，并在正无穷大处结束。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未定义任何值，则假定初始值为1ms，最终值为正无穷大。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为此运算符定义负距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> before[ -<span class="hljs-number">3</span>m30s, -<span class="hljs-number">2</span>m ] $eventB )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果第一个值大于第二个值，则引擎会自动反转它们，因为没有理由让第一个值大于第二个值。</font><font style="vertical-align: inherit;">示例：以下两种模式被认为具有相同的语义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> before[ -<span class="hljs-number">3</span>m30s, -<span class="hljs-number">2</span>m ] $eventB )<font></font>
$eventA : EventA( <span class="hljs-keyword">this</span> before[ -<span class="hljs-number">2</span>m, -<span class="hljs-number">3</span>m30s ] $eventB )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商可以被用于定义事件之间的约束，java.util.Date属性和属性长以任何组合（自纪元解释为时间戳）。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">EventA( this after <span class="hljs-variable">$someDate</span> )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_coincides"><a class="anchor" href="index.html#_coincides"></a><a class="link" href="index.html#_coincides"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.3。</font><font style="vertical-align: inherit;">适逢</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当两个事件同时发生时，重合评估器将两个事件和匹配相关联。</font><font style="vertical-align: inherit;">可选地，评估者接受事件的开始和结束时间戳之间的距离的阈值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this coincides <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA和$ eventB的开始时间戳相同且$ eventA和$ eventB的结束时间戳也相同时，前一个模式才匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选地，该运算符接受一个或两个参数。</font><font style="vertical-align: inherit;">这些参数是匹配时间戳之间距离的阈值。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果只给出一个参数，则它用于开始和结束时间戳。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果给出两个参数，则第一个用作开始时间戳的阈值，第二个用作结束时间戳的阈值。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> coincides[<span class="hljs-number">15</span>s, <span class="hljs-number">10</span>s] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当以下情况时，以上模式将匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp ) &lt;= <span class="hljs-number">15</span><span class="hljs-keyword">s</span> &amp;&amp;
<span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp ) &lt;= <span class="hljs-number">10</span><span class="hljs-keyword">s</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发错误。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商可以被用于定义事件之间的约束，java.util.Date属性和属性长以任何组合（自纪元解释为时间戳）。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">EventA( this after <span class="hljs-variable">$someDate</span> )</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_during"><a class="anchor" href="index.html#_during"></a><a class="link" href="index.html#_during"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.4。</font><font style="vertical-align: inherit;">中</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在评估事件发生期间当前事件发生时，评估者关联两个事件并匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this during <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB启动后开始并且在$ eventB结束之前结束时，前一个模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">during运算符接受1,2或4个可选参数，如下所示：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了一个值，则这将是两个事件的开始时间戳与两个事件的结束时间戳之间的最大距离之间的最大距离，以便与运算符匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this during[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">0</span> &lt; <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-number">5</span>s &amp;&amp;
<span class="hljs-number">0</span> &lt; <span class="hljs-variable">$eventB</span>.endTimestamp - <span class="hljs-variable">$eventA</span>.endTimestamp &lt;= <span class="hljs-number">5</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值，则第一个值将是两个事件的时间戳之间的最小距离，而第二个值将是两个事件的时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> during[ <span class="hljs-number">5</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-number">10</span>s &amp;&amp;
<span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventB</span>.endTimestamp - <span class="hljs-variable">$eventA</span>.endTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了四个值，则前两个值将是两个事件的开始时间戳之间的最小和最大距离，而后两个值将是两个事件的结束时间戳之间的最小和最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> during[ <span class="hljs-number">2</span>s, <span class="hljs-number">6</span>s, <span class="hljs-number">4</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">2</span>s &lt;= <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-number">6</span>s &amp;&amp;
<span class="hljs-number">4</span>s &lt;= <span class="hljs-variable">$eventB</span>.endTimestamp - <span class="hljs-variable">$eventA</span>.endTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_finishes"><a class="anchor" href="index.html#_finishes"></a><a class="link" href="index.html#_finishes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.5。</font><font style="vertical-align: inherit;">饰面</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当相关事件的开始时间戳之后发生当前事件的开始时间戳时，完成评估器关联两个事件并匹配，但两个结束时间戳同时发生。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this finishes <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB启动后开始并且在$ eventB完成的同时结束时，前一个模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp == <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成评估程序接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定两个事件的结束时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this finishes[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &amp;&amp;
<span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp ) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_finished_by"><a class="anchor" href="index.html#_finished_by"></a><a class="link" href="index.html#_finished_by"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.6。</font><font style="vertical-align: inherit;">完成了</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前事件开始时间戳发生在相关事件开始时间戳之前时，finishedby评估器关联两个事件并匹配，但两个结束时间戳同时发生。</font><font style="vertical-align: inherit;">这是完成评估者的对称对立面。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this finishedby <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB开始之前开始并且在$ eventB完成的同时结束时，先前的模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp == <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">finishedby评估器接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定两个事件的结束时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this finishedby[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &amp;&amp;
<span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp ) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_includes"><a class="anchor" href="index.html#_includes"></a><a class="link" href="index.html#_includes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.7。</font><font style="vertical-align: inherit;">包括</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含评估器在当前事件期间发生关联事件时关联两个事件和匹配。</font><font style="vertical-align: inherit;">它是评估者中对称的对立面。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this includes <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventB在$ eventA启动后开始并且在$ eventA完成之前结束时，前一个模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-variable">$eventB</span>.endTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含运算符接受1,2或4个可选参数，如下所示：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了一个值，则这将是两个事件的开始时间戳与两个事件的结束时间戳之间的最大距离之间的最大距离，以便与运算符匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this includes[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">0</span> &lt; <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-number">5</span>s &amp;&amp;
<span class="hljs-number">0</span> &lt; <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp &lt;= <span class="hljs-number">5</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值，则第一个值将是两个事件的时间戳之间的最小距离，而第二个值将是两个事件的时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> includes[ <span class="hljs-number">5</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-number">10</span>s &amp;&amp;
<span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了四个值，则前两个值将是两个事件的开始时间戳之间的最小和最大距离，而后两个值将是两个事件的结束时间戳之间的最小和最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> includes[ <span class="hljs-number">2</span>s, <span class="hljs-number">6</span>s, <span class="hljs-number">4</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-number">2</span>s &lt;= <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-number">6</span>s &amp;&amp;
<span class="hljs-number">4</span>s &lt;= <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_meets"><a class="anchor" href="index.html#_meets"></a><a class="link" href="index.html#_meets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.8。</font><font style="vertical-align: inherit;">会见</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前事件的结束时间戳与相关事件的开始时间戳同时发生时，满足评估器关联两个事件和匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this meets <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB启动的同时完成时，前一个模式才会匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.endTimestamp ) == <span class="hljs-number">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meet评估器接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定当前事件的结束时间戳与相关事件的开始时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this meets[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventB</span>.startTimestamp - <span class="hljs-variable">$eventA</span>.endTimestamp) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_met_by"><a class="anchor" href="index.html#_met_by"></a><a class="link" href="index.html#_met_by"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.9。</font><font style="vertical-align: inherit;">遇见</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前事件的开始时间戳与相关事件的结束时间戳同时发生时，metby评估器关联两个事件并进行匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this metby <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB完成的同时开始时，前一个模式才匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp ) == <span class="hljs-number">0</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">metby评估器接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定相关事件的结束时间戳与当前事件的开始时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this metby[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.endTimestamp) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_overlaps"><a class="anchor" href="index.html#_overlaps"></a><a class="link" href="index.html#_overlaps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.10。</font><font style="vertical-align: inherit;">重叠</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重叠评估器将当前事件在相关事件开始之前开始并且在相关事件开始之后但在相关事件结束之前完成时关联两个事件和匹配。</font><font style="vertical-align: inherit;">换句话说，两个事件都有重叠的时期。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this overlaps <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的模式将匹配当且仅当：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重叠运算符接受1或2个可选参数，如下所示：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了一个参数，则这将是相关事件的开始时间戳与当前事件的结束时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this overlaps[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp &amp;&amp;
<span class="hljs-number">0</span> &lt;= <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-number">5</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值，则第一个值将是最小距离，第二个值将是相关事件的开始时间戳与当前事件的结束时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> overlaps[ <span class="hljs-number">5</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp &amp;&amp;
<span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventA</span>.endTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_overlapped_by"><a class="anchor" href="index.html#_overlapped_by"></a><a class="link" href="index.html#_overlapped_by"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.11。</font><font style="vertical-align: inherit;">重叠</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当相关事件在当前事件开始之前开始并且在当前事件开始之后但在当前事件结束之前结束时，重叠的评估器关联两个事件和匹配。</font><font style="vertical-align: inherit;">换句话说，两个事件都有重叠的时期。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this overlappedby <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的模式将匹配当且仅当：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">overlappedby运算符接受1或2个可选参数，如下所示：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了一个参数，则这将是当前事件的开始时间戳与相关事件的结束时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this overlappedby[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp &amp;&amp;
<span class="hljs-number">0</span> &lt;= <span class="hljs-variable">$eventB</span>.endTimestamp - <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-number">5</span>s</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了两个值，则第一个值将是最小距离，第二个值将是当前事件的开始时间戳与相关事件的结束时间戳之间的最大距离。</font><font style="vertical-align: inherit;">例：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$eventA : EventA( <span class="hljs-keyword">this</span> overlappedby[ <span class="hljs-number">5</span>s, <span class="hljs-number">10</span>s ] $eventB )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventB</span>.startTimestamp &lt; <span class="hljs-variable">$eventA</span>.startTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp &lt; <span class="hljs-variable">$eventA</span>.endTimestamp &amp;&amp;
<span class="hljs-number">5</span>s &lt;= <span class="hljs-variable">$eventB</span>.endTimestamp - <span class="hljs-variable">$eventA</span>.startTimestamp &lt;= <span class="hljs-number">10</span>s</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_starts"><a class="anchor" href="index.html#_starts"></a><a class="link" href="index.html#_starts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.12。</font><font style="vertical-align: inherit;">启动</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当当前事件的结束时间戳发生在相关事件的结束时间戳之前时，启动评估器将两个事件和匹配相关联，但两个启动时间戳同时发生。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this starts <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventA在$ eventB结束之前完成并且在$ eventB开始的同时开始时，前一模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp == <span class="hljs-variable">$eventB</span>.startTimestamp &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">starts评估程序接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定两个事件的开始时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this starts[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp ) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span> &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp &lt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_started_by"><a class="anchor" href="index.html#_started_by"></a><a class="link" href="index.html#_started_by"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.9.1.13。</font><font style="vertical-align: inherit;">开始于</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当相关事件的结束时间戳发生在当前事件的结束时间戳之前，启动的评估器将两个事件和匹配相关联，但两个开始时间戳同时发生。</font><font style="vertical-align: inherit;">让我们看一个例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this startedby <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当$ eventB在$ eventA完成之前完成并且在$ eventB启动的同时启动时，先前的模式将匹配。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换一种说法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span>.startTimestamp == <span class="hljs-variable">$eventB</span>.startTimestamp &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp &gt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">startedby计算器接受一个可选参数。</font><font style="vertical-align: inherit;">如果已定义，则确定两个事件的开始时间戳之间的最大距离，以便操作员匹配。</font><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$eventA</span> : EventA( this starts[ <span class="hljs-number">5</span>s ] <span class="hljs-variable">$eventB</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在以下情况下才会匹配：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-keyword">abs</span>( <span class="hljs-variable">$eventA</span>.startTimestamp - <span class="hljs-variable">$eventB</span>.startTimestamp ) &lt;= <span class="hljs-number">5</span><span class="hljs-keyword">s</span> &amp;&amp;
<span class="hljs-variable">$eventA</span>.endTimestamp &gt; <span class="hljs-variable">$eventB</span>.endTimestamp</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对参数使用负间隔值是没有意义的，如果发生这种情况，引擎会引发异常。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="drools.DMN"><a class="anchor" href="index.html#drools.DMN"></a><a class="link" href="index.html#drools.DMN"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.决策模型和符号（DMN）</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="dmn-con_dmn-models"><a class="anchor" href="index.html#dmn-con_dmn-models"></a><a class="link" href="index.html#dmn-con_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1。</font><font style="vertical-align: inherit;">决策模型和符号（DMN）</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策模型和符号（DMN）是由对象管理组（OMG）建立的标准，用于描述和建模运营决策。</font><font style="vertical-align: inherit;">DMN决策模型可以在DMN兼容平台之间和跨组织之间共享，以便业务分析师和业务规则开发人员在设计和实施DMN决策服务时统一。</font><font style="vertical-align: inherit;">DMN标准类似于并且可以与业务流程模型和表示法（BPMN）标准一起用于设计和建模业务流程。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关DMN的背景和应用程序的更多信息，请参阅OMG </font></font><a href="https://www.omg.org/spec/DMN"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decision Model and Notation规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="dmn-conformance-levels-con_dmn-models"><a class="anchor" href="index.html#dmn-conformance-levels-con_dmn-models"></a><a class="link" href="index.html#dmn-conformance-levels-con_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.1。</font><font style="vertical-align: inherit;">DMN一致性水平</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN规范在软件实现中定义了三个增量级别的一致性。</font><font style="vertical-align: inherit;">声称在一个级别符合要求的产品还必须符合任何前面的级别。</font><font style="vertical-align: inherit;">例如，一致性级别3实现还必须包括一致性级别1和2中的受支持组件。有关每个一致性级别的正式定义，请参阅OMG </font></font><a href="https://www.omg.org/spec/DMN"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策模型和表示法规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是三个DMN一致性级别的摘要：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致性等级1</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN一致性级别1实现支持决策需求图（DRD），决策逻辑和决策表，但决策模型不可执行。</font><font style="vertical-align: inherit;">可以使用任何语言来定义表达式，包括自然的非结构化语言。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致性等级2</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN一致性级别2实现包括一致性级别1中的要求，并且支持简化友好足够表达语言（S-FEEL）表达式和完全可执行的决策模型。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致性级别3</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN一致性级别3实现包括一致性级别1和2中的要求，并且支持友好足够表达语言（FEEL）表达式，完整的盒装表达式集和完全可执行的决策模型。</font></font></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools包括符合级别3的DMN 1.2模型的完整运行时支持，但目前不包括内置的DMN模型编辑器。</font><font style="vertical-align: inherit;">DMN模型的编辑器将在不久的将来添加到平台，但同时您可以使用第三方DMN创作平台并在Drools的决策服务中实施DMN模型。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="dmn-elements-ref_dmn-models"><a class="anchor" href="index.html#dmn-elements-ref_dmn-models"></a><a class="link" href="index.html#dmn-elements-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.2。</font><font style="vertical-align: inherit;">DMN元素</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN模型包含以下五个要素：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型中的节点，其中一个或多个输入基于决策逻辑确定输出。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入数据：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定决策所需的信息。</font><font style="vertical-align: inherit;">此信息通常包括与业务相关的业务级概念或对象，例如餐厅的高峰营业时间和员工可用性。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">业务知识模型：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可重用的决策逻辑。</font><font style="vertical-align: inherit;">具有相同逻辑但依赖于不同子输入或子决策的决策使用业务知识模型来确定要遵循的过程。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知识来源：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形成决策逻辑的外部法规，文件，委员会，政策等。</font><font style="vertical-align: inherit;">知识来源是对现实世界因素的参考，而不是可执行的业务规则。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策服务：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策服务是一个顶级决策，具有明确定义的输入，作为调用服务发布。</font><font style="vertical-align: inherit;">在图中，它由带圆角的覆盖矩形表示。</font><font style="vertical-align: inherit;">可以从外部应用程序或业务流程（BPMN）调用决策服务。</font><font style="vertical-align: inherit;">有关更多信息，请参阅DMN规范文档的第36页。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-drg.png" alt="dmn drg">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图107.基本决策要求图</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="dmn-feel-overview-ref_dmn-models"><a class="anchor" href="index.html#dmn-feel-overview-ref_dmn-models"></a><a class="link" href="index.html#dmn-feel-overview-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.3。</font><font style="vertical-align: inherit;">FEEL中的规则表达式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">友好足够的表达语言（FEEL）是由OMG DMN规范定义的表达语言。</font><font style="vertical-align: inherit;">FEEL表达式定义DMN模型中决策的逻辑。</font><font style="vertical-align: inherit;">FEEL旨在通过为决策模型构造分配语义来促进决策建模和执行。</font><font style="vertical-align: inherit;">决策需求图（DRD）中的FEEL表达式占据决策表或决策节点中的表格单元格。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关DMN中FEEL的更多信息，请参阅OMG </font></font><a href="https://www.omg.org/spec/DMN"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decision Model和Notation规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect4">
<h5 id="dmn-names-con_dmn-models"><a class="anchor" href="index.html#dmn-names-con_dmn-models"></a><a class="link" href="index.html#dmn-names-con_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.3.1。</font><font style="vertical-align: inherit;">FEEL中的变量和函数名称</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与许多传统表达式语言不同，友好足够表达语言（FEEL）支持空格和一些特殊字符作为变量和函数名称的一部分。</font><font style="vertical-align: inherit;">感觉名称必须以开始</font></font><code>letter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素。</font><font style="vertical-align: inherit;">也允许使用unicode字母字符。</font><font style="vertical-align: inherit;">变量名称不能用语言关键字开始，例如</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>every</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在变量名的其余字符可以是任何的起始字符，以及</font></font><code>digits</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，空格和特殊字符，例如</font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，以下名称都是有效的FEEL名称：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生日</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">航班234预检程序</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的变量和函数名称有几个限制：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">歧义</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用空格，关键字和其他特殊字符作为名称的一部分可能会使FEEL模糊不清。</font><font style="vertical-align: inherit;">歧义在表达式的上下文中解析，从左到右匹配名称。</font><font style="vertical-align: inherit;">解析器将变量名称解析为范围内匹配的最长名称。</font></font><code>( )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如有必要，</font><font style="vertical-align: inherit;">您可以使用</font><font style="vertical-align: inherit;">歧义名称。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名字中的空格</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN规范限制了FEEL名称中空格的使用。</font><font style="vertical-align: inherit;">根据DMN规范，名称可以包含多个空格，但不能包含两个连续的空格。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使语言更易于使用并避免由于空格引起的常见错误，Drools消除了对连续空格使用的限制。</font><font style="vertical-align: inherit;">Drools支持具有任意数量的连续空格的变量名称，但将它们标准化为单个空格。</font><font style="vertical-align: inherit;">例如，两个变量引用</font></font><code>First Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>First  Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools中都是可接受的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools还规范了其他空白区域的使用，例如网页，标签和换行符中常见的不易碎白色空间。</font><font style="vertical-align: inherit;">从Drools FEEL引擎的角度来看，所有这些字符在处理之前被归一化为单个空白区域。</font></font></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字 </font></font><code>in</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是该语言中唯一不能用作变量名称一部分的关键字。</font><font style="vertical-align: inherit;">虽然在规范允许在变量名中间的关键字的使用，使用</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与的语法定义变量名的冲突</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>every</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>some</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达结构。</font></font></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="dmn-data-types-ref_dmn-models"><a class="anchor" href="index.html#dmn-data-types-ref_dmn-models"></a><a class="link" href="index.html#dmn-data-types-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.3.2。</font><font style="vertical-align: inherit;">FEEL中的数据类型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">友好的足够表达语言（FEEL）支持以下数据类型：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续数年和数月</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上下文</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围（或间隔）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DMN规范中没有明确支持函数，上下文，范围和列表作为数据类型，但Drools中的扩展支持它们。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是每种数据类型的描述：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的数字基于</font></font><a href="http://ieeexplore.ieee.org/document/4610935/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEEE 754-2008</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Decimal 128格式，具有34位精度。</font><font style="vertical-align: inherit;">在内部，数字在Java中表示为</font></font><a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html"><code>BigDecimals</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用</font></font><code>MathContext DECIMAL128</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">FEEL仅支持一种数字数据类型，因此相同的类型用于表示整数和浮点数。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL数字使用点（</font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）作为小数分隔符。</font><font style="vertical-align: inherit;">FEEL不支持</font></font><code>-INF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>+INF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">FEEL用于
 </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示无效数字。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools扩展了DMN规范并支持其他数字表示法：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">科学：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用后缀</font></font><code>e&lt;exp&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">科学记数法</font></font><code>E&lt;exp&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，</font></font><code>1.2e3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与写表达式相同</font></font><code>1.2*10**3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是是文字而不是表达式。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">十六进制：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用带前缀的十六进制数字</font></font><code>0x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，</font></font><code>0xff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与十进制数相同</font></font><code>255</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">支持大写和小写字母。</font><font style="vertical-align: inherit;">例如，</font></font><code>0XFF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一样的</font></font><code>0xff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型号后缀：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用类型后缀</font></font><code>f</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>F</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>d</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>l</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code>L</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这些后缀被忽略。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的字符串是由双引号分隔的任何字符序列。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“约翰·多伊”</font></font></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL使用三值的布尔逻辑，所以一个布尔逻辑表达式可以具有的值</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL没有日期文字，但您可以使用内置</font></font><code>date()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来构造日期值。</font><font style="vertical-align: inherit;">FEEL中的日期字符串遵循</font></font><a href="https://www.w3.org/TR/xmlschema-2/#date"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML Schema Part 2：Datatypes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">定义的格式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">格式是</font></font><code>"YYYY-MM-DD"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哪里</font></font><code>YYYY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是四位数年份，</font></font><code>MM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是该月的两位数的数量，</font></font><code>DD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是天数。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期（“2017-06-23”）</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期对象的时间等于</font></font><code>"00:00:00"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">午夜。</font><font style="vertical-align: inherit;">日期被认为是本地的，没有时区。</font></font></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL没有时间字面值，但您可以使用内置</font></font><code>time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来构造时间值。</font><font style="vertical-align: inherit;">FEEL中的时间字符串遵循</font></font><a href="https://www.w3.org/TR/xmlschema-2/#time"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML Schema Part 2：Datatypes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">定义的格式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">格式是</font></font><code>"hh:mm:ss[.uuu][(+-)hh:mm]"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中</font></font><code>hh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是天（从的小时</font></font><code>00</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>23</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code>mm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在小时分钟，并且</font></font><code>ss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是在微小的秒数。</font><font style="vertical-align: inherit;">可选地，字符串可以定义秒</font></font><code>uuu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内的</font><font style="vertical-align: inherit;">毫秒数（</font><font style="vertical-align: inherit;">），并且包含</font><font style="vertical-align: inherit;">与UTC时间</font><font style="vertical-align: inherit;">的正（</font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或负（</font></font><code>-</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）偏移以定义其时区。</font><font style="vertical-align: inherit;">您可以使用该字母，而不是使用偏移量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果未定义偏移量，则认为时间是本地的。</font></font><code>z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表UTC时间，而</font><font style="vertical-align: inherit;">该时间与偏移量相同</font></font><code>-00:00</code><font style="vertical-align: inherit;"></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间（“04:25:12”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
时间（“14：10：00 + 02:00”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
时间（“22：35：40.345-05：00”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
时间（“15：00：30z”）</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义偏移量或时区的时间值无法与未定义偏移量或时区的本地时间进行比较。</font></font></p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL没有日期和时间文字，但您可以使用内置</font></font><code>date and time()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来构造日期和时间值。</font><font style="vertical-align: inherit;">FEEL中的日期和时间字符串遵循</font></font><a href="https://www.w3.org/TR/xmlschema-2/#dateTime"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML Schema Part 2：Datatypes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">定义的格式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">格式是</font></font><code>"&lt;date&gt;T&lt;time&gt;"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在哪里</font></font><code>&lt;date&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>&lt;time&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遵循规定的XML模式格式，连接起来</font></font><code>T</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间（“2017-10-22T23：59：00”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日期和时间（“2017-06-13T14：10：00 + 02:00”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日期和时间（“2017-02-05T22：35：40.345-05：00”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
日期和时间（“2017-06-13T15：00：30z”）</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义偏移量或时区的日期和时间值无法与未定义偏移量或时区的本地日期和时间值进行比较。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您的DMN规范的实现不支持XML模式中的空格，请使用关键字</font></font><code>dateTime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为其同义词</font></font><code>date and time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL没有日期和持续时间文字，但您可以使用内置</font></font><code>duration()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来构建日期和持续时间值。</font><font style="vertical-align: inherit;">FEEL中的天数和持续时间字符串遵循</font></font><a href="https://www.w3.org/TR/xmlschema-2/#duration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML架构第2部分：数据类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">定义的格式</font><font style="vertical-align: inherit;">，但仅限于天，小时，分钟和秒。</font><font style="vertical-align: inherit;">不支持月份和年份。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续时间（“P1DT23H12M30S”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“P23D”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“PT12H”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“PT35M”）</font></font></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您的DMN规范的实现不支持XML模式中的空格，请使用关键字</font></font><code>dayTimeDuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为其同义词</font></font><code>days and time duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续数年和数月</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL没有年数和月数的持续时间文字，但您可以使用内置</font></font><code>duration()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数来构建日期和持续时间值。</font><font style="vertical-align: inherit;">FEEL中的年和月持续时间字符串遵循</font></font><a href="https://www.w3.org/TR/xmlschema-2/#duration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML模式第2部分：数据类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font><font style="vertical-align: inherit;">定义的格式</font><font style="vertical-align: inherit;">，但仅限于年和月。</font><font style="vertical-align: inherit;">不支持天，小时，分钟或秒。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续时间（“P3Y5M”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“P2Y”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“P10M”）</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持续时间（“P25M”）</font></font></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您的DMN规范的实现不支持XML模式中的空格，请使用关键字</font></font><code>yearMonthDuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为其同义词</font></font><code>years and months duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL支持</font></font><code>function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于创建函数的文字（或匿名函数）。</font><font style="vertical-align: inherit;">FEEL没有提供</font></font><code>function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DMN规范</font><font style="vertical-align: inherit;">中声明变量的明确方法</font><font style="vertical-align: inherit;">，但Drools扩展了DMN内置类型以支持函数。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数（a，b）a + b</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这个例子中，FEEL表达式创建了一个函数，其将所述参数</font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并返回结果。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
甲</font></font><code>function</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datatype是DMN规范的扩展，并随时更改如果DMN规范提供的标准方式在未来申报的功能。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上下文</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL支持</font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于创建上下文的文字。</font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的</font><font style="vertical-align: inherit;">A </font><font style="vertical-align: inherit;">是键和值对的列表，类似于Java等语言中的映射。</font><font style="vertical-align: inherit;">FEEL没有提供</font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DMN规范</font><font style="vertical-align: inherit;">中声明变量的明确方法</font><font style="vertical-align: inherit;">，但Drools扩展了DMN内置类型以支持上下文。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{x：5，y：3}</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此示例中，表达式创建具有两个条目的上下文，</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示图表中的坐标。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DMN 1.2中，创建上下文的另一种方法是创建一个包含键列表作为属性的项定义，然后将该变量声明为具有该项定义类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools DMN API </font><font style="vertical-align: inherit;">以两种方式</font><font style="vertical-align: inherit;">支持DMN </font></font><code>ItemDefinition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结构类型</font></font><code>DMNContext</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户定义的Java类型：必须是有效的JavaBeans对象，用于为DMN中的每个组件定义属性和getter </font></font><code>ItemDefinition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如有必要，您还可以对</font></font><code>@FEELProperty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示组件名称的getter </font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">注释，这将导致无效的Java标识符。</font></font></p>
</li>
<li>
<p><code>java.util.Map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interface：map需要定义相应的条目，其中的键对应于DMN中的组件名称</font></font><code>ItemDefinition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
甲</font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是DMN规范的扩展，并随时更改如果DMN规范提供的标准方式在未来申报上下文。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围（或间隔）</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL支持</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于创建范围或间隔的文字。</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的</font><font style="vertical-align: inherit;">A </font><font style="vertical-align: inherit;">是定义下限和上限的值，其中任何一个都可以打开或关闭。</font><font style="vertical-align: inherit;">FEEL没有提供</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DMN规范中将</font><font style="vertical-align: inherit;">变量声明为a的明确方法</font><font style="vertical-align: inherit;">（除非它在另一个表达式中），但Drools扩展了DMN内置类型以支持范围。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围的语法以以下格式定义：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">range：= interval_start endpoint'..'endpoint interval_end</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
interval_start：= open_start | </font><font style="vertical-align: inherit;">closed_start</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
open_start：='（'|']'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
closed_start：='['</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
interval_end：= open_end | </font><font style="vertical-align: inherit;">closed_end</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
open_end：='）'| </font><font style="vertical-align: inherit;">'['</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
closed_end：=']'</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
endpoint：=表达式</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">端点的表达式必须返回可比较的值，下限端点必须低于上限端点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，以下文字表达式定义了</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间的间隔</font></font><code>10</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括边界（两个端点上的闭合间隔）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[1 .. 10]</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下文字表达式定义1小时到12小时之间的间隔，包括下边界（闭合间隔），但不包括上边界（开放间隔）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[持续时间（“PT1H”）..持续时间（“PT12H”）]</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在决策表中使用范围来测试值的范围，或者在简单的文字表达式中使用范围。</font><font style="vertical-align: inherit;">例如，</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果变量的值</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介于</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">之间</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则返回以下文字表达式</font></font><code>100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x在[1 .. 100]</font></font></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
甲</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是DMN规范的扩展，并随时更改如果DMN规范提供的标准方式在未来申报上下文。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">清单</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的列表由括在方括号中的逗号分隔值列表表示。</font><font style="vertical-align: inherit;">FEEL没有提供</font></font><code>list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在DMN规范</font><font style="vertical-align: inherit;">中声明变量的明确方法</font><font style="vertical-align: inherit;">，但Drools扩展了DMN内置类型以支持上下文。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[2,3,4,5]</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FEEL中的所有列表都包含相同类型的元素并且是不可变的。</font><font style="vertical-align: inherit;">列表中的元素可以通过索引访问，其中第一个元素是</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">负索引可以访问从列表末尾开始的元素，这</font></font><code>-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是最后一个元素。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，以下表达式返回列表的第二个元素</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X [2]</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下表达式返回列表的倒数第二个元素</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X [-2]</font></font></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
甲</font></font><code>list</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型是DMN规范的扩展，并随时更改如果DMN规范提供的标准方式在未来申报上下文。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dmn-decision-tables-ref_dmn-models"><a class="anchor" href="index.html#dmn-decision-tables-ref_dmn-models"></a><a class="link" href="index.html#dmn-decision-tables-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.4。</font><font style="vertical-align: inherit;">DMN决策表</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN中的决策表是表格格式的一个或多个规则的直观表示。</font><font style="vertical-align: inherit;">每个规则由表中的单个行组成，并包含定义该特定行的条件和结果的列。</font><font style="vertical-align: inherit;">每行的定义足够精确，可以使用条件的值得出结果。</font><font style="vertical-align: inherit;">出于可读性的目的，通常有一种方法可以在查看表时隐藏一些更具技术性的细节。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-decision-table-example2.png" alt="dmn决策表示例2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图108.决策表示例</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表是用于建模规则和决策的流行方式，并且在许多方法（例如DMN）和实现框架（例如Drools中使用的Drools）中使用。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管决策表的概念在DMN和Drools中类似，但DMN决策表的语法和布局由DMN标准定义，而Drools决策表由Drools项目定义。</font><font style="vertical-align: inherit;">Drools支持两种格式的决策表，但它们不可互换。</font><font style="vertical-align: inherit;">有关Drools决策表的更多信息，请参阅
 </font></font><a href="index.html#_decision_tables_in_spreadsheets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电子表格中的决策表</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_hit_policies"><a class="anchor" href="index.html#_hit_policies"></a><a class="link" href="index.html#_hit_policies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.4.1。</font><font style="vertical-align: inherit;">击中政策</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命中策略定义当多个规则在单个决策表上匹配时如何达到结果。</font><font style="vertical-align: inherit;">决策建模者选择以下五个策略之一来达到结果，然后通过在表的左上角放置一个指示符来指定该策略。</font><font style="vertical-align: inherit;">在以下列表中，指标在指标类型之后列在括号（）中。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一（U）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅允许一个规则匹配。</font><font style="vertical-align: inherit;">任何重叠都会引发错误。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何（A）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许多个规则匹配，但它们必须具有相同的输出。</font><font style="vertical-align: inherit;">如果多个匹配规则没有相同的输出，则会引发错误。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优先级（P）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许多个规则匹配，具有不同的输出。</font><font style="vertical-align: inherit;">选择</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出值</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表中</font><font style="vertical-align: inherit;">第一个</font><em><font style="vertical-align: inherit;">输出</font></em><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个（F）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按规则顺序使用第一个匹配。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集（C +，C&gt;，C &lt;，C＃）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据聚合函数聚合多个规则的输出。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集（C）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在任意列表中聚合值。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集总和（C +）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出所有收集值的总和。</font><font style="vertical-align: inherit;">值必须为数字。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集最小值（C &lt;）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出匹配中的最小值。</font><font style="vertical-align: inherit;">结果值必须具有可比性，例如数字，日期或文本（词典顺序）。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集最大值（C&gt;）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出匹配中的最大值。</font><font style="vertical-align: inherit;">结果值必须具有可比性，例如数字，日期或文本（词典顺序）。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收集计数（C＃）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出匹配规则的数量。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dmn-boxed-expressions-ref_dmn-models"><a class="anchor" href="index.html#dmn-boxed-expressions-ref_dmn-models"></a><a class="link" href="index.html#dmn-boxed-expressions-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1.5。</font><font style="vertical-align: inherit;">盒装表达</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盒装表达式是DMN模型中的上下文，函数定义，函数调用和其他表达式的表格表示。</font><font style="vertical-align: inherit;">例如，下面的表达式盒装定义函数</font></font><code>Installment calculation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它使用四个参数（</font></font><code>Product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Rate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Term</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，和</font></font><code>Amount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），并且计算每月分期付款量。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-boxed-expression-example.png" alt="dmn盒装表达的例子">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图109.盒装表达式示例</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dmn-elements-example-con"><a class="anchor" href="index.html#dmn-elements-example-con"></a><a class="link" href="index.html#dmn-elements-example-con"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2。</font><font style="vertical-align: inherit;">DMN用例</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个真实的DMN示例演示了如何使用决策建模来根据输入，环境和公司指南做出决策。</font><font style="vertical-align: inherit;">本节中的过程演示了其中一些组件如何协同工作。</font><font style="vertical-align: inherit;">在这种情况下，从圣地亚哥飞往纽约的航班被取消，要求受影响的航空公司为其不方便的乘客寻找替代安排。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，航空公司收集必要的信息，以确定如何最好地将旅客送往目的地：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">航班列表</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">乘客名单</font></font></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决定</font></font></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优先考虑将在新航班上获得座位的乘客</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定将提供这些乘客的航班</font></font></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">商业知识模型</font></font></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公司确定乘客优先权的流程</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何有空位的航班</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公司规则确定如何最好地重新分配不方便的客户</font></font></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，航空公司使用DMN标准在决策需求图（DRD）中对其决策过程进行建模，并创建以下图表以确定最佳重新预订解决方案：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-passenger-rebooking-drd.png" alt="dmn乘客重新启动drd">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图110.乘客重新预订示例的决策要求图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与流程图类似，DRD使用形状来表示流程中的不同元素。</font><font style="vertical-align: inherit;">椭圆包含两个必要的输入，矩形包含模型中的决策点，带有修剪角的矩形包含可重复调用的可重用逻辑。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRD将每个元素的详细信息放入提供变量定义的盒装内容中，同样使用FEEL表达式。</font><font style="vertical-align: inherit;">一些内容可以很简单，例如航空公司建立优先等待名单的决策过程。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-prioritized-wait-list.png" alt="dmn优先排序等候名单">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图111.优先等待列表的盒装表达式示例</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他元素可能涉及更多的细节和计算。</font><font style="vertical-align: inherit;">考虑以下业务知识模型来重新分配下一位乘客：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-reassign-passenger.png" alt="dmn重新分配乘客">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图112.重新分配下一位乘客的决策示例</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="dmn-model-example-ref_dmn-models"><a class="anchor" href="index.html#dmn-model-example-ref_dmn-models"></a><a class="link" href="index.html#dmn-model-example-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3。</font><font style="vertical-align: inherit;">DMN模型示例</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN定义了一种XML模式，可以在不同的DMN创作平台之间使用DMN模型。</font><font style="vertical-align: inherit;">DMN规范允许多个软件平台使用相同的文件进行创作，测试和生产执行。</font><font style="vertical-align: inherit;">如果您需要可视化创作功能，则必须使用第三方创作平台，如Trisotech或Signavio。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下决策要求图（DRD）示例演示了电影票购买的年龄类别的分类类型决策。</font><font style="vertical-align: inherit;">这个基本示例通过创建分类以避免重复计算来展示良好的形式，以便这个小决策可以作为其他决策的输入。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-age-classification-drd.png" alt="dmn年龄分类drd">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图113.年龄分类决策的决策要求图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例由单个数字输入值（</font></font><code>Age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）组成，并生成字符串输出（</font></font><code>AgeClassification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font><code>AgeClassification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决定</font><font style="vertical-align: inherit;">的内部运作</font><font style="vertical-align: inherit;">是一个基本表：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dmn-age-classification-decision-table.png" alt="dmn年龄分类决策表">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图114.年龄分类决策的决策表</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此表</font></font><code>AgeClassification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用简单的FEEL表达式为输出值</font><font style="vertical-align: inherit;">指定值，</font><font style="vertical-align: inherit;">以确定年龄值的范围。</font><font style="vertical-align: inherit;">此决策模型是在Trisotech DMN Authoring环境中创建的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下输出是此决策模型的XML源：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">semantic:definitions</span> <span class="hljs-attribute">xmlns:semantic</span>=<span class="hljs-value">"http://www.omg.org/spec/DMN/20151101/dmn.xsd"</span>
                      <span class="hljs-attribute">xmlns:feel</span>=<span class="hljs-value">"http://www.omg.org/spec/FEEL/20140401"</span>
                      <span class="hljs-attribute">xmlns:tc</span>=<span class="hljs-value">"http://www.omg.org/spec/DMN/20160719/testcase"</span>
                      <span class="hljs-attribute">xmlns:xsd</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema"</span>
                      <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
                      <span class="hljs-attribute">namespace</span>=<span class="hljs-value">"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a"</span> </span><i class="conum" data-value="1"></i><b><span class="hljs-tag">(<span class="hljs-attribute">1</span>)</span></b><span class="hljs-tag">
                      <span class="hljs-attribute">name</span>=<span class="hljs-value">"dmn-movieticket-ageclassification"</span> </span><i class="conum" data-value="2"></i><b><span class="hljs-tag">(<span class="hljs-attribute">2</span>)</span></b><span class="hljs-tag">
                      <span class="hljs-attribute">id</span>=<span class="hljs-value">"_99"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">semantic:extensionElements</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">semantic:inputData</span> <span class="hljs-attribute">displayName</span>=<span class="hljs-value">"Age"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_1"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Age"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">semantic:variable</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_2"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Age"</span> <span class="hljs-attribute">typeRef</span>=<span class="hljs-value">"feel:number"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:inputData</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">semantic:decision</span> <span class="hljs-attribute">displayName</span>=<span class="hljs-value">"AgeClassification"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_3"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"AgeClassification"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">semantic:variable</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_4"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"AgeClassification"</span> <span class="hljs-attribute">typeRef</span>=<span class="hljs-value">"feel:string"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">semantic:informationRequirement</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:requiredInput</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#_1"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:informationRequirement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">semantic:decisionTable</span> <span class="hljs-attribute">hitPolicy</span>=<span class="hljs-value">"UNIQUE"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_5"</span> <span class="hljs-attribute">outputLabel</span>=<span class="hljs-value">"AgeClassification"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:input</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_6"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:inputExpression</span> <span class="hljs-attribute">typeRef</span>=<span class="hljs-value">"feel:number"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>Age<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:inputExpression</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:input</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:output</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_7"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:rule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_8"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:inputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_9"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>&amp;lt; 13<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:inputEntry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:outputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_10"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>"Child"<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:outputEntry</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:rule</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:rule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_11"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:inputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_12"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>[13..65)<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:inputEntry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:outputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_13"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>"Adult"<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:outputEntry</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:rule</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">semantic:rule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_14"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:inputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_15"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>&amp;gt;= 65<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:inputEntry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">semantic:outputEntry</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"_16"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">semantic:text</span>&gt;</span>"Senior"<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:text</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:outputEntry</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:rule</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:decisionTable</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">semantic:decision</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">semantic:definitions</span>&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型命名空间</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型号名称</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此基本文件捕获足够的信息来封装业务逻辑，整体决策的输入和输出，以及足够的细节，使软件工具能够以图形方式一致地表示关系。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>namespace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根的属性</font></font><code>definitions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签唯一标识此决策模型。</font><font style="vertical-align: inherit;">与XML一样，该</font></font><code>namespace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值显示为与创作文档的组织或个人相关联的唯一URL。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="dmn-support-con_dmn-models"><a class="anchor" href="index.html#dmn-support-con_dmn-models"></a><a class="link" href="index.html#dmn-support-con_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4。</font><font style="vertical-align: inherit;">Drools的DMN支持</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools包括符合级别3的DMN 1.2模型的完整运行时支持，但目前不包括内置的DMN模型编辑器。</font><font style="vertical-align: inherit;">DMN模型的编辑器将在不久的将来添加到平台，但同时您可以使用第三方DMN创作平台创建DMN模型，然后将DMN模型集成到Drools的决策服务中。</font><font style="vertical-align: inherit;">您可以在Drools Workbench（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单→设计→项目→导入资产</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中将DMN文件</font><strong><font style="vertical-align: inherit;">导入项目，</font></strong><font style="vertical-align: inherit;">或者将DMN文件打包为项目知识JAR（KJAR）文件的一部分，而不使用Drools Workbench。</font><font style="vertical-align: inherit;">除了所有DMN一致性级别3要求之外，Drools还包括对FEEL和DMN模型组件的增强和修复，以优化使用Drools实施DMN决策服务的体验。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从平台的角度来看，DMN模型与Drools中的任何其他业务资产（如DRL文​​件或上载的决策表）类似，您可以将其包含在Drools项目中并部署到KIE服务器以启动您的DMN决策服务。</font><font style="vertical-align: inherit;">这使您可以使用首选的DMN创作工具来设计您随后使用现有Drools资产部署的DMN模型。</font><font style="vertical-align: inherit;">例如，您可能拥有直接从其决策任务节点调用DMN决策服务的BPMN模型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关使用项目打包和部署方法包含DMN文件等资产的更多信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="dmn-feel-enhancements-ref_dmn-models"><a class="anchor" href="index.html#dmn-feel-enhancements-ref_dmn-models"></a><a class="link" href="index.html#dmn-feel-enhancements-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4.1。</font><font style="vertical-align: inherit;">Drools的FEEL增强功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools包含以下增强功能以​​及当前DMN实施中对FEEL的其他更改：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间敏感性</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：FEEL语言的DMN实现对空间不敏感。</font><font style="vertical-align: inherit;">目标是基于上下文和基于不可见字符（例如空格）的行为差异来避免非确定性行为。</font><font style="vertical-align: inherit;">这意味着对于此实现，</font></font><code>first name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用一个空格</font><font style="vertical-align: inherit;">命名的变量</font><font style="vertical-align: inherit;">与其中</font></font><code>first  name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含两个空格</font><font style="vertical-align: inherit;">的变量</font><font style="vertical-align: inherit;">完全相同</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表函数</font></font><code>or()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>and()</code> </em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：规范定义了两个名为</font></font><code>or()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和的</font><font style="vertical-align: inherit;">列表函数</font></font><code>and()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，根据FEEL语法，这些都不是有效的函数名，因为</font></font><code>and</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>or</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有保留的关键字。</font><font style="vertical-align: inherit;">此实现重命名这些功能</font></font><code>any()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>all()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分别处于期待DMN 1.2。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不能用于变量名</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：规范定义任何关键字都可以作为变量名的一部分重用，但</font></font><code>for …​ in …​ return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font><font style="vertical-align: inherit;">引起的歧义</font><font style="vertical-align: inherit;">阻止了</font></font><code>in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
关键字</font><font style="vertical-align: inherit;">的重用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">支持所有其他关键字作为变量名称的一部分。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名类型的属性不支持关键字</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：FEEL不是强类型语言，解析器必须解析匿名类型属性的名称部分中的歧义。</font><font style="vertical-align: inherit;">解析器支持可重用关键字作为范围中定义的变量名称的一部分，但解析器不支持匿名类型属性中的关键字。</font><font style="vertical-align: inherit;">例如，</font></font><code>for item in Order.items return Federal Tax for Item( item )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个有效且受支持的FEEL表达式，其中</font></font><code>Federal Tax for Item(…​)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在作用域中正确定义和调用</font><font style="vertical-align: inherit;">名为的函数</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，</font></font><code>for i in [ {x and y : true, n : 1}, {x and y : false, n: 2} ] return i.x and y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不支持</font><font style="vertical-align: inherit;">表达式，</font><font style="vertical-align: inherit;">因为</font><font style="vertical-align: inherit;">在表达式</font><font style="vertical-align: inherit;">的迭代上下文中定义了匿名类型，</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且解析器无法解决歧义。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持范围上的日期和时间文字</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：根据语法规则＃8，＃18，＃19，＃34和＃62，</font></font><code>date
and time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围支持文字（第110-111页）。</font><font style="vertical-align: inherit;">另一方面，第114页的第10.3.2.7章与语法相矛盾，并表示不支持它们。</font><font style="vertical-align: inherit;">此实现选择遵循</font></font><code>date and
time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围上</font><font style="vertical-align: inherit;">的语法和支持</font><font style="vertical-align: inherit;">文字，以及扩展规范以支持任何任意表达式（请参阅下面的扩展）。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的时间语法</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：第112页的第10.3.2.3.4节和</font></font><code>time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第131页的</font><font style="vertical-align: inherit;">项目符号</font><font style="vertical-align: inherit;">都声明</font></font><code>time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串词法表示遵循XML模式数据类型规范以及ISO 8601.根据XML模式规范（</font></font><a href="https://www.w3.org/TR/xmlschema-2/#time" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https：// www.w3.org/TR/xmlschema-2/#time</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），时间的词汇表示遵循</font></font><code>hh:mm:ss.sss</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有任何主角</font><font style="vertical-align: inherit;">的模式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">DMN规范在几个示例中使用了领先的“T”，我们理解这是一个拼写错误而不符合标准。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持科学和十六进制表示法</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此实现支持数字的科学和十六进制表示法。</font><font style="vertical-align: inherit;">例如，</font></font><code>1.2e5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（科学记数法），</font></font><code>0xD5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（十六进制表示法）。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持表达式作为范围</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的端点：此实现支持表达式作为范围的端点。</font><font style="vertical-align: inherit;">例如，</font></font><code>[date("2016-11-24")..date("2016-11-27")]</code></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持其他类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：规范仅将以下内容定义为语言的基本类型：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年和月的持续时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期和时间</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了完整性和正交性，此实现还支持以下类型：</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上下文</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名单</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一元考试</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持一元测试</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为了完整性和正交性，一元测试作为该语言的一等公民支持。</font><font style="vertical-align: inherit;">它们是具有隐式单个参数的函数，可以与函数相同的方式调用。</font><font style="vertical-align: inherit;">例如，</font></font></p>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnaryTestAsFunction.feel</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">  {<font></font>
      is minor : &lt; 18,<font></font>
      Bob is minor : is minor( bob.age )<font></font>
  }</code></pre>
</div>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持其他内置函数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：支持以下附加功能：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><code>now()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ：返回当前的本地日期和时间。</font></font></p>
</li>
<li>
<p><code>today()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ：返回当前的本地日期。</font></font></p>
</li>
<li>
<p><code>decision table()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：返回决策表函数，尽管规范提到了决策表。</font><font style="vertical-align: inherit;">第114页上的功能无法按定义实现。</font></font></p>
</li>
<li>
<p><code>string( mask, p…​ )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：返回按掩码格式化的字符串。</font><font style="vertical-align: inherit;">有关掩码语法的详细信息，请参阅Java String.format（）。</font><font style="vertical-align: inherit;">例如，</font></font><code>string( "%4.2f", 7.1298 )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回字符串</font></font><code>"7.12"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持额外的日期和时间算术</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：减去两个日期返回一天和持续时间与两个日期之间的天数，忽略夏令时。</font><font style="vertical-align: inherit;">例如，</font></font></p>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DateArithmetic.feel</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">date( <span class="hljs-string">"2017-05-12"</span> ) - date( <span class="hljs-string">"2017-04-25"</span> ) = duration( <span class="hljs-string">"P17D"</span> )</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dmn-model-enhancements-ref_dmn-models"><a class="anchor" href="index.html#dmn-model-enhancements-ref_dmn-models"></a><a class="link" href="index.html#dmn-model-enhancements-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4.2。</font><font style="vertical-align: inherit;">Drools中的DMN模型增强功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools在当前的DMN实现中包括以下对DMN模型支持的增强：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持名称上带空格的类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：DMN XML模式定义类型引用，例如QNames。</font><font style="vertical-align: inherit;">QNames不允许空格。</font><font style="vertical-align: inherit;">因此，不可能使用类型般的感觉</font></font><code>date and time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，    </font></font><code>days and time duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>years and months duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此实现确实将这样的typeref解析为字符串，并允许带有空格的类型名称。</font><font style="vertical-align: inherit;">但是，为了符合XML模式，它还将以下别名添加到可以使用的类型中：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><code>date and time</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font><code>dateTime</code></p>
</li>
<li>
<p><code>days and time duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code>duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>dayTimeDuration</code></p>
</li>
<li>
<p><code>years and months duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font><code>duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>yearMonthDuration</code></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，对于“持续时间”类型，用户可以简单地使用</font></font><code>duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且引擎将推断适当的持续时间，</font></font><code>days and time duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code>years and months duration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表支持异构元素类型</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：目前，此实现支持具有异构元素类型的列表。</font><font style="vertical-align: inherit;">这是一个实验扩展，确实限制了某些功能和过滤器的功能。</font><font style="vertical-align: inherit;">该决定将在未来重新评估。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表和项目定义之间的TypeRef链接</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在决策表/输入子句上，如果未定义值列表，则引擎会自动检查类型引用并应用允许值检查是否已定义。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dmn-properties-ref_dmn-models"><a class="anchor" href="index.html#dmn-properties-ref_dmn-models"></a><a class="link" href="index.html#dmn-properties-ref_dmn-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4.3。</font><font style="vertical-align: inherit;">Drools中的可配置DMN属性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools提供以下DMN属性，您可以在KIE服务器或客户端应用程序上执行DMN模型时配置这些属性：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.dmn.strictConformance</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用后，此属性默认禁用DMN标准之外提供的任何扩展或配置文件，例如某些帮助程序功能或DMN 1.2的增强功能，后向移植到DMN 1.1中。</font><font style="vertical-align: inherit;">您可以使用此属性将Drools引擎配置为仅支持纯DMN功能，例如运行</font></font><a href="https://dmn-tck.github.io/tck/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN技术兼容性工具包</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（TCK）时。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：false</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">-Dorg.kie.dmn.strictConformance=<span class="hljs-literal">true</span></code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.dmn.runtime.typecheck</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用后，此属性可以验证符合DMN模型中声明类型的实际值，作为DRD元素的输入或输出。</font><font style="vertical-align: inherit;">您可以使用此属性来验证提供给DMN模型或由DMN模型生成的数据是否符合模型中指定的数据。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：false</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">-Dorg.kie.dmn.runtime.typecheck=<span class="hljs-literal">true</span></code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.dmn.decisionservice.coercesingleton</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，此属性使定义单个输出决策的决策服务的结果为输出决策值的单个值。</font><font style="vertical-align: inherit;">禁用时，此属性使定义单个输出决策的决策服务的结果为具有该决策</font></font><code>context</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的单个条目。</font><font style="vertical-align: inherit;">您可以使用此属性根据项目要求调整决策服务输出。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值：true</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">-Dorg.kie.dmn.decisionservice.coercesingleton=<span class="hljs-literal">false</span></code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.dmn.profiles。$ PROFILE_NAME</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Java完全限定名称进行定值时，此属性会在启动时将DMN配置文件加载到Drools引擎上。</font><font style="vertical-align: inherit;">您可以使用此属性来实现预定义的DMN配置文件，其支持的功能不同于DMN标准或超出DMN标准。</font><font style="vertical-align: inherit;">例如，如果要使用Signavio DMN建模器创建DMN模型，请使用此属性将Signavio DMN配置文件中的功能实现到DMN决策服务中。</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-Dorg.kie.dmn.profiles.signavio = org.kie.dmn.signavio.KieDMNSignavioProfile</font></font></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dmn-invocation-options-con"><a class="anchor" href="index.html#dmn-invocation-options-con"></a><a class="link" href="index.html#dmn-invocation-options-con"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5。</font><font style="vertical-align: inherit;">调用DMN模型的选项</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用Drools Workbench（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单→设计→项目→导入资产</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">将DMN文件导入Drools项目，</font><font style="vertical-align: inherit;">或将DMN文件打包为项目知识JAR（KJAR）文件的一部分，而不使用Drools Workbench。</font><font style="vertical-align: inherit;">在Drools项目中实现DMN文件后，可以通过将包含它的KIE容器部署到KIE Server进行远程访问或直接操作KIE容器作为调用应用程序的依赖项来调用DMN决策服务。</font><font style="vertical-align: inherit;">还可以使用其他用于创建和部署DMN知识包的选项，并且大多数类似于所有类型的知识资产，例如DRL文​​件或流程定义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关使用项目打包和部署方法包含DMN资产的更多信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="dmn-invocation-embedded-proc"><a class="anchor" href="index.html#dmn-invocation-embedded-proc"></a><a class="link" href="index.html#dmn-invocation-embedded-proc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5.1。</font><font style="vertical-align: inherit;">直接在Java应用程序中嵌入DMN调用</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当知识资产直接嵌入到调用程序中或使用Maven依赖关系为KJAR物理拉入时，KIE容器是本地的。</font><font style="vertical-align: inherit;">如果代码版本与DMN定义版本之间存在紧密关系，通常会将知识资产直接嵌入到项目中。</font><font style="vertical-align: inherit;">在您有意更新和重新部署应用程序后，对决策的任何更改都将生效。</font><font style="vertical-align: inherit;">这种方法的一个好处是正确的操作不依赖于运行时的任何外部依赖性，这可能是锁定环境的限制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Maven依赖项可以进一步提高灵活性，因为决策的特定版本可以动态更改（例如，通过使用系统属性），并且可以定期扫描更新并自动更新。</font><font style="vertical-align: inherit;">这引入了对服务部署时间的外部依赖性，但在本地执行决策，减少了对运行时可用外部服务的依赖。</font></font></p>
</div>
<div class="paragraph">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已创建包含要执行的DMN模型的KJAR。</font><font style="vertical-align: inherit;">有关项目打包的信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在客户端应用程序中，将以下依赖项添加到Java项目的相关类路径中：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">// Required for the DMN runtime API
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-dmn-core<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
// Required if not using classpath KIE container<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-ci<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font><code>&lt;version&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是目前在项目中使用的Drools的Maven工件版本（例如，7.11.0.Final-redhat-00002）。</font></font></p>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>classpath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">创建一个KIE容器</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
<font></font>
ReleaseId releaseId = kieServices.newReleaseId( <span class="hljs-string">"org.acme"</span>, <span class="hljs-string">"my-kjar"</span>, <span class="hljs-string">"1.0.0"</span> );<font></font>
KieContainer kieContainer = kieServices.newKieContainer( releaseId );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备选方案：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
<font></font>
KieContainer kieContainer = kieServices.getKieClasspathContainer();</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>DMNRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过使用模型从KIE容器</font><font style="vertical-align: inherit;">获取</font><font style="vertical-align: inherit;">并参考要评估的DMN模型，</font></font><code>namespace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>modelName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DMNRuntime dmnRuntime = kieContainer.newKieSession().getKieRuntime(DMNRuntime.class);<font></font>
<font></font>
String namespace = <span class="hljs-string">"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a"</span>;<font></font>
String modelName = <span class="hljs-string">"dmn-movieticket-ageclassification"</span>;<font></font>
<font></font>
DMNModel dmnModel = dmnRuntime.getModel(namespace, modelName);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行所需模型的决策服务：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DMNContext dmnContext = dmnRuntime.newContext();  <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b><font></font>
<font></font>
<span class="hljs-keyword">for</span> (Integer age : Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">64</span>,<span class="hljs-number">65</span>,<span class="hljs-number">66</span>)) {<font></font>
    dmnContext.set(<span class="hljs-string">"Age"</span>, age);  <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b><font></font>
    DMNResult dmnResult =<font></font>
        dmnRuntime.evaluateAll(dmnModel, dmnContext);  <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b><font></font>
<font></font>
    <span class="hljs-keyword">for</span> (DMNDecisionResult dr : dmnResult.getDecisionResults()) {  <i class="conum" data-value="4"></i><b>(<span class="hljs-number">4</span>)</b>
        log.info(<span class="hljs-string">"Age: "</span> + age + <span class="hljs-string">", "</span> +
                 <span class="hljs-string">"Decision: '"</span> + dr.getDecisionName() + <span class="hljs-string">"', "</span> +
                 <span class="hljs-string">"Result: "</span> + dr.getResult());<font></font>
  }<font></font>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例化新的DMN上下文作为模型评估的输入。</font><font style="vertical-align: inherit;">请注意，此示例循环遍历Age Classification决策多次。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为输入DMN上下文分配输入变量。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估DMN模型中定义的所有DMN决策。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个评估可能会产生一个或多个结果，从而创建循环。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例打印以下输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄1决定'AgeClassification'：孩子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
12岁决定'AgeClassification'：孩子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
13岁决定'AgeClassification'：成人</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
64岁决定'AgeClassification'：成人</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
65岁决定'AgeClassification'：高级</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
66岁决定'AgeClassification'：高级</font></font></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="dmn-invocation-remote-java-proc"><a class="anchor" href="index.html#dmn-invocation-remote-java-proc"></a><a class="link" href="index.html#dmn-invocation-remote-java-proc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5.2。</font><font style="vertical-align: inherit;">在KIE服务器（Java）上远程执行DMN服务</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE远程API客户端提供了一种轻量级方法，可通过KIE Server的REST或JMS接口调用远程DMN服务。</font><font style="vertical-align: inherit;">此方法减少了与KIE基础交互所需的运行时依赖性的数量。</font><font style="vertical-align: inherit;">将调用代码与决策定义分离还可以通过使它们以适当的速度独立迭代来提高灵活性。</font></font></p>
</div>
<div class="ulist">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先决条件</font></font></div>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已安装和配置KIE服务器，包括具有该</font></font><code>kie-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font><font style="vertical-align: inherit;">的用户的已知用户名和凭据</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关安装选项，请参阅
 </font></font><a href="index.html#_installationandsetup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装和设置（核心和IDE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE容器以KJAR的形式部署在KIE服务器中，该KJAR包括DMN模型。</font><font style="vertical-align: inherit;">有关项目打包和部署的信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您具有包含DMN模型的KIE容器的容器ID。</font><font style="vertical-align: inherit;">如果存在多个模型，则还必须知道相关模型的模型名称空间和模型名称。</font></font></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在客户端应用程序中，将以下依赖项添加到Java项目的相关类路径中：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie.server<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-server-client<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font><code>&lt;version&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是目前在项目中使用的Drools的Maven工件版本（例如，7.11.0.Final-redhat-00002）。</font></font></p>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>KieServicesClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用适当的连接信息</font><font style="vertical-align: inherit;">实例化</font><font style="vertical-align: inherit;">实例。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServicesConfiguration conf =<font></font>
    KieServicesFactory.newRestConfiguration(URL, USER, PASSWORD); <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b><font></font>
<font></font>
conf.setMarshallingFormat(MarshallingFormat.JSON);  <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b><font></font>
<font></font>
KieServicesClient kieServicesClient = KieServicesFactory.newKieServicesClient(conf);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接信息：</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编组格式是一个实例</font></font><code>org.kie.server.api.marshalling.MarshallingFormat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它控制消息是JSON还是XML。</font><font style="vertical-align: inherit;">编组格式的选项是JSON，JAXB或XSTREAM。</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>DMNServicesClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过调用</font></font><code>getServicesClient()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE服务器Java客户端实例上的</font><font style="vertical-align: inherit;">方法从连接到相关KIE服务器的KIE服务器Java客户端</font><font style="vertical-align: inherit;">获取a </font><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DMNServicesClient dmnClient = kieServicesClient.getServicesClient(DMNServicesClient.class );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在</font></font><code>dmnClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在KIE服务器上执行决策服务。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行所需模型的决策服务。</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">for</span> (Integer age : Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">64</span>,<span class="hljs-number">65</span>,<span class="hljs-number">66</span>)) {<font></font>
    DMNContext dmnContext = dmnClient.newContext(); <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b>
    dmnContext.set(<span class="hljs-string">"Age"</span>, age);  <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b>
    ServiceResponse&lt;DMNResult&gt; serverResp =   <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b><font></font>
        dmnClient.evaluateAll($kieContainerId,<font></font>
                              $modelNamespace,<font></font>
                              $modelName,<font></font>
                              dmnContext);<font></font>
<font></font>
    DMNResult dmnResult = serverResp.getResult();  <i class="conum" data-value="4"></i><b>(<span class="hljs-number">4</span>)</b>
    <span class="hljs-keyword">for</span> (DMNDecisionResult dr : dmnResult.getDecisionResults()) {<font></font>
        log.info(<span class="hljs-string">"Age: "</span> + age + <span class="hljs-string">", "</span> +
                 <span class="hljs-string">"Decision: '"</span> + dr.getDecisionName() + <span class="hljs-string">"', "</span> +
                 <span class="hljs-string">"Result: "</span> + dr.getResult());<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例化新的DMN上下文作为模型评估的输入。</font><font style="vertical-align: inherit;">请注意，此示例循环遍历Age Classification决策多次。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为输入DMN上下文分配输入变量。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估DMN模型中定义的所有DMN决策：</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从服务器响应中获取DMN Result对象。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，</font></font><code>dmnResult</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含评估的DMN模型的所有决策结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以使用替代方法在模型中仅执行特定的DMN决策</font></font><code>DMNServicesClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果KIE容器只包含一个DMN模型，则可以省略</font></font><code>$modelNamespace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>$modelName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为KIE Server API默认选择它。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="dmn-invocation-rest-proc"><a class="anchor" href="index.html#dmn-invocation-rest-proc"></a><a class="link" href="index.html#dmn-invocation-rest-proc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5.3。</font><font style="vertical-align: inherit;">使用REST API在远程服务器上调用DMN服务</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接与KIE服务器的REST端点交互提供了调用代码和决策逻辑定义之间的最大分离。</font><font style="vertical-align: inherit;">调用代码完全没有直接依赖关系，您可以在完全不同的开发平台（如</font></font><code>node.js</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或）中</font><font style="vertical-align: inherit;">实现它</font></font><code>.net</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本节中的示例演示了Nix样式的curl命令，但提供了相关信息以适应任何REST客户端。</font></font></p>
</div>
<div class="ulist">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先决条件</font></font></div>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已安装和配置KIE服务器，包括具有该</font></font><code>kie-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font><font style="vertical-align: inherit;">的用户的已知用户名和凭据</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关安装选项，请参阅
 </font></font><a href="index.html#_installationandsetup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装和设置（核心和IDE）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE容器以KJAR的形式部署在KIE服务器中，该KJAR包括DMN模型。</font><font style="vertical-align: inherit;">有关项目打包和部署的信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您具有包含DMN模型的KIE容器的容器ID。</font><font style="vertical-align: inherit;">如果存在多个模型，则还必须知道相关模型的模型名称空间和模型名称。</font></font></p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定用于访问KIE Server REST API端点的基本URL。</font><font style="vertical-align: inherit;">这需要知道以下值（以默认的本地部署值为例）：</font></font></p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主持人（</font></font><code>localhost</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">港口（</font></font><code>8080</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根上下文（</font></font><code>kie-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本REST路径（</font></font><code>services/rest/server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地部署示例URL：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">http:<span class="hljs-comment">//localhost:8080/kie-server/services/rest/server</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定用户身份验证要求。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在KIE服务器配置中直接定义用户时，将使用需要用户名和密码的BasicAuth。</font><font style="vertical-align: inherit;">成功的请求要求用户具有该</font></font><code>kie-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例演示如何将凭据添加到curl请求：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">curl</span> <span class="hljs-tag">-u</span> <span class="hljs-tag">username</span><span class="hljs-pseudo">:password</span> &lt;<span class="hljs-tag">request</span>&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果KIE服务器配置了Red Hat Single Sign-On，则请求必须包含承载令牌：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">curl -H <span class="hljs-string">"Authorization: bearer $TOKEN"</span> &lt;request&gt;</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定请求和响应的格式。</font><font style="vertical-align: inherit;">REST API端点使用JSON和XML格式，并使用请求标头设置：</font></font></p>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">curl</span> -H <span class="hljs-string">"accept: application/json"</span> -H <span class="hljs-string">"content-type: application/json"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">curl</span> -H <span class="hljs-string">"accept: application/xml"</span> -H <span class="hljs-string">"content-type: application/xml"</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（可选）查询容器以获取已部署的决策模型列表：</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到]</font></font></strong> <code>/containers/<em>CONTAINER_ID</em>/dmn</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl请求示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">curl</span> -u krisv:krisv -H <span class="hljs-string">"accept: application/xml"</span> -X GET <span class="hljs-string">"http://localhost:8080/kie-server/services/rest/server/containers/MovieDMNContainer/dmn"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例XML输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"OK models successfully retrieved from container 'MovieDMNContainer'"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dmn-model-info-list</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">model</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">model-namespace</span>&gt;</span>http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a<span class="hljs-tag">&lt;/<span class="hljs-title">model-namespace</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">model-name</span>&gt;</span>dmn-movieticket-ageclassification<span class="hljs-tag">&lt;/<span class="hljs-title">model-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">model-id</span>&gt;</span>_99<span class="hljs-tag">&lt;/<span class="hljs-title">model-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">decisions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">dmn-decision-info</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">decision-id</span>&gt;</span>_3<span class="hljs-tag">&lt;/<span class="hljs-title">decision-id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">decision-name</span>&gt;</span>AgeClassification<span class="hljs-tag">&lt;/<span class="hljs-title">decision-name</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">dmn-decision-info</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">decisions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">model</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dmn-model-info-list</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例JSON输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{<font></font>
  "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"SUCCESS"</span></span>,<font></font>
  "<span class="hljs-attribute">msg</span>" : <span class="hljs-value"><span class="hljs-string">"OK models successfully retrieved from container 'MovieDMNContainer'"</span></span>,<font></font>
  "<span class="hljs-attribute">result</span>" : <span class="hljs-value">{
    "<span class="hljs-attribute">dmn-model-info-list</span>" : <span class="hljs-value">{
      "<span class="hljs-attribute">models</span>" : <span class="hljs-value">[ {
        "<span class="hljs-attribute">model-namespace</span>" : <span class="hljs-value"><span class="hljs-string">"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a"</span></span>,
        "<span class="hljs-attribute">model-name</span>" : <span class="hljs-value"><span class="hljs-string">"dmn-movieticket-ageclassification"</span></span>,
        "<span class="hljs-attribute">model-id</span>" : <span class="hljs-value"><span class="hljs-string">"_99"</span></span>,
        "<span class="hljs-attribute">decisions</span>" : <span class="hljs-value">[ {
          "<span class="hljs-attribute">decision-id</span>" : <span class="hljs-value"><span class="hljs-string">"_3"</span></span>,
          "<span class="hljs-attribute">decision-name</span>" : <span class="hljs-value"><span class="hljs-string">"AgeClassification"</span>
        </span>} ]
      </span>} ]
    </span>}
  </span>}
</span>}</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行模型：</font></font></p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST]</font></font></strong> <code>/containers/<em>CONTAINER_ID</em>/dmn</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">curl请求示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">curl -u krisv:krisv -H <span class="hljs-string">"accept: application/json"</span> -H <span class="hljs-string">"content-type: application/json"</span> -X POST <span class="hljs-string">"http://localhost:8080/kie-server/services/rest/server/containers/MovieDMNContainer/dmn"</span> <span class="hljs-operator">-d</span> <span class="hljs-string">"{ \"model-namespace\" : \"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a\", \"model-name\" : \"dmn-movieticket-ageclassification\", \"decision-name\" : [ ], \"decision-id\" : [ ], \"dmn-context\" : {\"Age\" : 66}}"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例JSON请求：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{<font></font>
  "<span class="hljs-attribute">model-namespace</span>" : <span class="hljs-value"><span class="hljs-string">"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a"</span></span>,<font></font>
  "<span class="hljs-attribute">model-name</span>" : <span class="hljs-value"><span class="hljs-string">"dmn-movieticket-ageclassification"</span></span>,<font></font>
  "<span class="hljs-attribute">decision-name</span>" : <span class="hljs-value">[ ]</span>,<font></font>
  "<span class="hljs-attribute">decision-id</span>" : <span class="hljs-value">[ ]</span>,<font></font>
  "<span class="hljs-attribute">dmn-context</span>" : <span class="hljs-value">{"<span class="hljs-attribute">Age</span>" : <span class="hljs-value"><span class="hljs-number">66</span></span>}
</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例XML请求（JAXB样式）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dmn-evaluation-context</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">model-namespace</span>&gt;</span>http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a<span class="hljs-tag">&lt;/<span class="hljs-title">model-namespace</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">model-name</span>&gt;</span>dmn-movieticket-ageclassification<span class="hljs-tag">&lt;/<span class="hljs-title">model-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dmn-context</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"jaxbListWrapper"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>MAP<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"jaxbStringObjectPair"</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"Age"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xs:int"</span> <span class="hljs-attribute">xmlns:xs</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>66<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">element</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">dmn-context</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dmn-evaluation-context</span>&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论请求格式如何，请求都需要以下元素：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型命名空间</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">型号名称</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含输入值的Context对象</font></font></p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例JSON响应：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{<font></font>
  "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"SUCCESS"</span></span>,<font></font>
  "<span class="hljs-attribute">msg</span>" : <span class="hljs-value"><span class="hljs-string">"OK from container 'MovieDMNContainer'"</span></span>,<font></font>
  "<span class="hljs-attribute">result</span>" : <span class="hljs-value">{
    "<span class="hljs-attribute">dmn-evaluation-result</span>" : <span class="hljs-value">{
      "<span class="hljs-attribute">messages</span>" : <span class="hljs-value">[ ]</span>,
      "<span class="hljs-attribute">model-namespace</span>" : <span class="hljs-value"><span class="hljs-string">"http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a"</span></span>,
      "<span class="hljs-attribute">model-name</span>" : <span class="hljs-value"><span class="hljs-string">"dmn-movieticket-ageclassification"</span></span>,
      "<span class="hljs-attribute">decision-name</span>" : <span class="hljs-value">[ ]</span>,
      "<span class="hljs-attribute">dmn-context</span>" : <span class="hljs-value">{
        "<span class="hljs-attribute">Age</span>" : <span class="hljs-value"><span class="hljs-number">66</span></span>,
        "<span class="hljs-attribute">AgeClassification</span>" : <span class="hljs-value"><span class="hljs-string">"Senior"</span>
      </span>}</span>,
      "<span class="hljs-attribute">decision-results</span>" : <span class="hljs-value">{
        "<span class="hljs-attribute">_3</span>" : <span class="hljs-value">{
          "<span class="hljs-attribute">messages</span>" : <span class="hljs-value">[ ]</span>,
          "<span class="hljs-attribute">decision-id</span>" : <span class="hljs-value"><span class="hljs-string">"_3"</span></span>,
          "<span class="hljs-attribute">decision-name</span>" : <span class="hljs-value"><span class="hljs-string">"AgeClassification"</span></span>,
          "<span class="hljs-attribute">result</span>" : <span class="hljs-value"><span class="hljs-string">"Senior"</span></span>,
          "<span class="hljs-attribute">status</span>" : <span class="hljs-value"><span class="hljs-string">"SUCCEEDED"</span>
        </span>}
      </span>}
    </span>}
  </span>}
</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例XML（JAXB格式）响应：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"OK from container 'MovieDMNContainer'"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">dmn-evaluation-result</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">model-namespace</span>&gt;</span>http://www.redhat.com/_c7328033-c355-43cd-b616-0aceef80e52a<span class="hljs-tag">&lt;/<span class="hljs-title">model-namespace</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">model-name</span>&gt;</span>dmn-movieticket-ageclassification<span class="hljs-tag">&lt;/<span class="hljs-title">model-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">dmn-context</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"jaxbListWrapper"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>MAP<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"jaxbStringObjectPair"</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"Age"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xs:int"</span> <span class="hljs-attribute">xmlns:xs</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>66<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">element</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"jaxbStringObjectPair"</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"AgeClassification"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xs:string"</span> <span class="hljs-attribute">xmlns:xs</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>Senior<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">element</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">dmn-context</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">messages</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">decisionResults</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>_3<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>
                              <span class="hljs-tag">&lt;<span class="hljs-title">decision-id</span>&gt;</span>_3<span class="hljs-tag">&lt;/<span class="hljs-title">decision-id</span>&gt;</span>
                              <span class="hljs-tag">&lt;<span class="hljs-title">decision-name</span>&gt;</span>AgeClassification<span class="hljs-tag">&lt;/<span class="hljs-title">decision-name</span>&gt;</span>
                              <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"xs:string"</span> <span class="hljs-attribute">xmlns:xs</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>Senior<span class="hljs-tag">&lt;/<span class="hljs-title">result</span>&gt;</span>
                              <span class="hljs-tag">&lt;<span class="hljs-title">messages</span>/&gt;</span>
                              <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>SUCCEEDED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">decisionResults</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">dmn-evaluation-result</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="drools.PMML"><a class="anchor" href="index.html#drools.PMML"></a><a class="link" href="index.html#drools.PMML"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.预测模型标记语言（PMML）</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="pmml-con_pmml-models"><a class="anchor" href="index.html#pmml-con_pmml-models"></a><a class="link" href="index.html#pmml-con_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.1。</font><font style="vertical-align: inherit;">预测模型标记语言（PMML）</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预测模型标记语言（PMML）是由数据挖掘组（DMG）建立的基于XML的标准，用于定义统计和数据挖掘模型。</font><font style="vertical-align: inherit;">PMML模型可以在符合PMML的平台之间和跨组织共享，以便业务分析师和开发人员在设计，分析和实现基于PMML的资产和服务时统一。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关PMML的背景和应用的更多信息，请参阅DMG </font></font><a href="http://dmg.org/pmml/pmml-v4-2-1.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="pmml-conformance-con_pmml-models"><a class="anchor" href="index.html#pmml-conformance-con_pmml-models"></a><a class="link" href="index.html#pmml-conformance-con_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.1.1。</font><font style="vertical-align: inherit;">PMML一致性水平</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML规范定义了软件实现中的生产者和消费者一致性级别，以确保可靠地创建和集成PMML模型。</font><font style="vertical-align: inherit;">有关每个一致性级别的正式定义，请参阅DMG </font></font><a href="http://dmg.org/pmml/v4-2-1/Conformance.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML一致性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是PMML一致性级别的摘要：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制片人一致性</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果工具或应用程序为至少一种类型的模型生成有效的PMML文档，则该工具或应用程序符合生产者要求。</font><font style="vertical-align: inherit;">满足PMML生成器一致性要求可确保模型定义文档在语法上是正确的，并定义与模型规范中定义的语义标准一致的模型实例。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费者一致性</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果应用程序接受至少一种类型的模型的有效PMML文档，则该应用程序符合消费者要求。</font><font style="vertical-align: inherit;">满足消费者一致性要求可确保根据生产者一致性创建的PMML模型可以按照定义进行集成和使用。</font><font style="vertical-align: inherit;">例如，如果应用程序符合回归模型类型的消费者，那么定义由不同符合生成者生成的此类型模型的有效PMML文档在应用程序中是可互换的。</font></font></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools包括对以下PMML 4.2.1模型类型的消费者一致性支持：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/Regression.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回归模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/Scorecard.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记分卡模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/TreeModel.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/MultipleModels.html#xsdElement_MiningModel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">挖掘模型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（具有子类型</font></font><code>modelChain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>selectAll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>selectFirst</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关所有PMML模型类型的列表，包括Drools中不支持的那些，请参阅DMG </font></font><a href="http://dmg.org/pmml/v4-2-1/GeneralStructure.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pmml-examples-ref_pmml-models"><a class="anchor" href="index.html#pmml-examples-ref_pmml-models"></a><a class="link" href="index.html#pmml-examples-ref_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.2。</font><font style="vertical-align: inherit;">PMML模型示例</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML定义了一种</font></font><a href="http://dmg.org/pmml/v4-2-1/pmml-4-2.xsd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML模式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使PMML模型能够在不同的PMML兼容平台之间使用。</font><font style="vertical-align: inherit;">假设生产者和消费者的一致性得到满足，PMML规范允许多个软件平台使用相同的文件进行创作，测试和生产执行。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是PMML回归，记分卡，树和挖掘模型的示例。</font><font style="vertical-align: inherit;">这些示例说明了可以与Drools中的决策服务集成的受支持的模型类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关更多PMML示例，请参阅DMG </font></font><a href="http://dmg.org/pmml/pmml_examples/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML示例文件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML回归模型</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">PMML</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"4.2"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2 http://www.dmg.org/v4-2-1/pmml-4-2.xsd"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Header</span> <span class="hljs-attribute">copyright</span>=<span class="hljs-value">"JBoss"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">DataDictionary</span> <span class="hljs-attribute">numberOfFields</span>=<span class="hljs-value">"5"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"x"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"y"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld5"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">DataDictionary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">RegressionModel</span> <span class="hljs-attribute">algorithmName</span>=<span class="hljs-value">"linearRegression"</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"regression"</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"LinReg"</span> <span class="hljs-attribute">normalizationMethod</span>=<span class="hljs-value">"logit"</span> <span class="hljs-attribute">targetFieldName</span>=<span class="hljs-value">"fld4"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"predicted"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld5"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"target"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">RegressionTable</span> <span class="hljs-attribute">intercept</span>=<span class="hljs-value">"0.5"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">NumericPredictor</span> <span class="hljs-attribute">coefficient</span>=<span class="hljs-value">"5"</span> <span class="hljs-attribute">exponent</span>=<span class="hljs-value">"2"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">NumericPredictor</span> <span class="hljs-attribute">coefficient</span>=<span class="hljs-value">"2"</span> <span class="hljs-attribute">exponent</span>=<span class="hljs-value">"1"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">CategoricalPredictor</span> <span class="hljs-attribute">coefficient</span>=<span class="hljs-value">"-3"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"x"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">CategoricalPredictor</span> <span class="hljs-attribute">coefficient</span>=<span class="hljs-value">"3"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"y"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">PredictorTerm</span> <span class="hljs-attribute">coefficient</span>=<span class="hljs-value">"0.4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">FieldRef</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">FieldRef</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">PredictorTerm</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">RegressionTable</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">RegressionModel</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">PMML</span>&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML记分卡模型</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">PMML</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"4.2"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2 http://www.dmg.org/v4-2-1/pmml-4-2.xsd"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Header</span> <span class="hljs-attribute">copyright</span>=<span class="hljs-value">"JBoss"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">DataDictionary</span> <span class="hljs-attribute">numberOfFields</span>=<span class="hljs-value">"4"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"param1"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"overallScore"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"finalscore"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">DataDictionary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Scorecard</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"ScorecardCompoundPredicate"</span> <span class="hljs-attribute">useReasonCodes</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">isScorable</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"regression"</span>    <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"15"</span> <span class="hljs-attribute">initialScore</span>=<span class="hljs-value">"0.8"</span> <span class="hljs-attribute">reasonCodeAlgorithm</span>=<span class="hljs-value">"pointsAbove"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"param1"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">MiningField</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">MiningField</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"overallScore"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"target"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"finalscore"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"predicted"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Characteristics</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ch1"</span> <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"50"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"reasonCh1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"20"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"20"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"100"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"20"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"25"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"200"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"20"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"25"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ch2"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"reasonCh2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"10"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"or"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"-5"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"50"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"20"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"-5"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"param2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"50"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristics</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">Scorecard</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">PMML</span>&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML树模型</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">PMML</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"4.2"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2 http://www.dmg.org/v4-2-1/pmml-4-2.xsd"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Header</span> <span class="hljs-attribute">copyright</span>=<span class="hljs-value">"JBOSS"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">DataDictionary</span> <span class="hljs-attribute">numberOfFields</span>=<span class="hljs-value">"5"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"false"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optA"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optB"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optC"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld5"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"tgtX"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"tgtY"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"tgtZ"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">DataDictionary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">TreeModel</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"classification"</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"TreeTest"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld2"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld3"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld4"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"fld5"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"predicted"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtX"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">True</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtX"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optA"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtX"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"surrogate"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30.0"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"20.0"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtX"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"40.0"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtZ"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"10.0"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtZ"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"or"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"60.0"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"70.0"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtZ"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimpleSetPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"isNotIn"</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Array</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>optA optB<span class="hljs-tag">&lt;/<span class="hljs-title">Array</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">SimpleSetPredicate</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtY"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"or"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optA"</span>/&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optC"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtY"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"10.0"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld1"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"50.0"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optA"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"100.0"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld3"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"false"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"tgtZ"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld4"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"optC"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"fld2"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30.0"</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">TreeModel</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">PMML</span>&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML挖掘模型（modelChain）</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">PMML</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"4.2"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2 http://www.dmg.org/v4-2-1/pmml-4-2.xsd"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>   <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.dmg.org/PMML-4_2"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Application</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"Drools-PMML"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"7.0.0-SNAPSHOT"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">Header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">DataDictionary</span> <span class="hljs-attribute">numberOfFields</span>=<span class="hljs-value">"7"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"occupation"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"SKYDIVER"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"ASTRONAUT"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"PROGRAMMER"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"TEACHER"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"INSTRUCTOR"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"residenceState"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"AP"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"KN"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"TN"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"boolean"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"overallScore"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"continuous"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"grade"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"A"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"B"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"C"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"D"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"F"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">DataField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"qualificationLevel"</span> <span class="hljs-attribute">optype</span>=<span class="hljs-value">"categorical"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"Unqualified"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"Barely"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"Well"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Value</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"Over"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">DataField</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">DataDictionary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">MiningModel</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"SampleModelChainMine"</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"classification"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"age"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"occupation"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"residenceState"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"validLicense"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"overallScore"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"qualificationLevel"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"target"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Segmentation</span> <span class="hljs-attribute">multipleModelMethod</span>=<span class="hljs-value">"modelChain"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Segment</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">True</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Scorecard</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"Sample Score 1"</span> <span class="hljs-attribute">useReasonCodes</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">isScorable</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"regression"</span>               <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"0.0"</span> <span class="hljs-attribute">initialScore</span>=<span class="hljs-value">"0.345"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"occupation"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"residenceState"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> <span class="hljs-attribute">invalidValueTreatment</span>=<span class="hljs-value">"asMissing"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"overallScore"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"predicted"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Output</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">OutputField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">displayName</span>=<span class="hljs-value">"Final Score"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"double"</span> <span class="hljs-attribute">feature</span>=<span class="hljs-value">"predictedValue"</span>                     <span class="hljs-attribute">targetField</span>=<span class="hljs-value">"overallScore"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Output</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Characteristics</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"AgeScore"</span> <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"0.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"ABZ"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$B$8"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"10.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$10"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"5"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"30.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"CX1"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$11"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"5"</span> /&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"12"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"40.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"CX2"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$12"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"13"</span> /&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"44"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"25.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$13"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"45"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"OccupationScore"</span> <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"0.0"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$B$16"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"-10.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"CX2"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"description"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"skydiving is a risky occupation"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$18"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimpleSetPredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"occupation"</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"isIn"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">Array</span> <span class="hljs-attribute">n</span>=<span class="hljs-value">"2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>SKYDIVER ASTRONAUT<span class="hljs-tag">&lt;/<span class="hljs-title">Array</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">SimpleSetPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"10.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$19"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimpleSetPredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"occupation"</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"isIn"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">Array</span> <span class="hljs-attribute">n</span>=<span class="hljs-value">"2"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"string"</span>&gt;</span>TEACHER INSTRUCTOR<span class="hljs-tag">&lt;/<span class="hljs-title">Array</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">SimpleSetPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"5.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$20"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"occupation"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"PROGRAMMER"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ResidenceStateScore"</span> <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"0.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"RES"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$B$22"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"-10.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$24"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"residenceState"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"AP"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"10.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$25"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"residenceState"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"KN"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"5.0"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$26"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"residenceState"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"TN"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Characteristic</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ValidLicenseScore"</span> <span class="hljs-attribute">baselineScore</span>=<span class="hljs-value">"0.0"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$B$28"</span> /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"1.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"LX00"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$30"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Attribute</span> <span class="hljs-attribute">partialScore</span>=<span class="hljs-value">"-1.0"</span> <span class="hljs-attribute">reasonCode</span>=<span class="hljs-value">"LX00"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Extension</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cellRef"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$C$31"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"false"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Attribute</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristic</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Characteristics</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">Scorecard</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Segment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Segment</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">True</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">TreeModel</span> <span class="hljs-attribute">modelName</span>=<span class="hljs-value">"SampleTree"</span> <span class="hljs-attribute">functionName</span>=<span class="hljs-value">"classification"</span> <span class="hljs-attribute">missingValueStrategy</span>=<span class="hljs-value">"lastPrediction"</span> <span class="hljs-attribute">noTrueChildStrategy</span>=<span class="hljs-value">"returnLastPrediction"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">MiningSchema</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"active"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">MiningField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"qualificationLevel"</span> <span class="hljs-attribute">usageType</span>=<span class="hljs-value">"predicted"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">MiningSchema</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Output</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">OutputField</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"qualification"</span> <span class="hljs-attribute">displayName</span>=<span class="hljs-value">"Qualification Level"</span> <span class="hljs-attribute">dataType</span>=<span class="hljs-value">"string"</span> <span class="hljs-attribute">feature</span>=<span class="hljs-value">"predictedValue"</span>                     <span class="hljs-attribute">targetField</span>=<span class="hljs-value">"qualificationLevel"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Output</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Well"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">True</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Barely"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"2"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"16"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"validLicense"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"equal"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Barely"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"3"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"50.0"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Well"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"4"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"and"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"50.0"</span> /&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"60.0"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Over"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"5"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"greaterThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"60.0"</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">Node</span> <span class="hljs-attribute">score</span>=<span class="hljs-value">"Unqualified"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"6"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">CompoundPredicate</span> <span class="hljs-attribute">booleanOperator</span>=<span class="hljs-value">"surrogate"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessThan"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"16"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">SimplePredicate</span> <span class="hljs-attribute">field</span>=<span class="hljs-value">"calculatedScore"</span> <span class="hljs-attribute">operator</span>=<span class="hljs-value">"lessOrEqual"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"40.0"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">True</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">CompoundPredicate</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">Node</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">TreeModel</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Segment</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Segmentation</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">MiningModel</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">PMML</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pmml-support-con_pmml-models"><a class="anchor" href="index.html#pmml-support-con_pmml-models"></a><a class="link" href="index.html#pmml-support-con_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3。</font><font style="vertical-align: inherit;">Drools中的PMML支持</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools包括对以下PMML 4.2.1模型类型的消费者一致性支持：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/Regression.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回归模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/Scorecard.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记分卡模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/TreeModel.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树模型</font></font></a></p>
</li>
<li>
<p><a href="http://dmg.org/pmml/v4-2-1/MultipleModels.html#xsdElement_MiningModel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">挖掘模型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（具有子类型</font></font><code>modelChain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>selectAll</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>selectFirst</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关所有PMML模型类型的列表，包括Drools中不支持的那些，请参阅DMG </font></font><a href="http://dmg.org/pmml/v4-2-1/GeneralStructure.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools不包含内置的PMML模型编辑器，但您可以使用XML或PMML特定的创作工具来创建PMML模型，然后将PMML模型集成到Drools中的决策服务中。</font><font style="vertical-align: inherit;">您可以在Drools Workbench（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单→设计→项目→导入资产</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中将PMML文件</font><strong><font style="vertical-align: inherit;">导入项目，</font></strong><font style="vertical-align: inherit;">或者将PMML文件打包为项目知识JAR（KJAR）文件的一部分，而不使用Drools Workbench。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将PMML文件添加到Drools中的项目时，会生成多个资产。</font><font style="vertical-align: inherit;">每种类型的PMML模型都会生成一组不同的资产，但所有PMML模型类型都至少会生成以下资产集：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含与PMML模型关联的所有规则的DRL文件</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至少两个Java类：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个数据类，用作模型类型的默认对象类型</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来管理数据源和规则的执行类</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果PMML文件具有</font></font><code>MiningModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根模型，则会生成每个文件的多个实例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关使用项目打包和部署方法包含PMML文件等资产的更多信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="pmml-naming-conventions-ref_pmml-models"><a class="anchor" href="index.html#pmml-naming-conventions-ref_pmml-models"></a><a class="link" href="index.html#pmml-naming-conventions-ref_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.1。</font><font style="vertical-align: inherit;">Drools中的PMML命名约定</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是生成的PMML包，类和规则的命名约定：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果PMML模型文件中未给出包名称，则默认包名称</font></font><code>org.kie.pmml.pmml_4_2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将以格式生成的规则的型号名称为前缀</font></font><code>"org.kie.pmml.pmml_4_2"+modelName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java类的包名称与生成的规则的包名称相同。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java类的名称是以</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">格式添加到其中</font><font style="vertical-align: inherit;">的模型名称</font></font><code>modelName+"RuleUnit"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个PMML模型至少有一个生成的数据类。</font><font style="vertical-align: inherit;">这些类的包名称是</font></font><code>org.kie.pmml.pmml_4_2.model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的数据类的名称由模型类型确定，前缀为模型名称：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回归模型：一个名为的数据类 </font></font><code>modelName+"RegressionData"</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记分卡模型：一个名为的数据类 </font></font><code>modelName+"ScoreCardData"</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树模型：两个数据类，第一个命名</font></font><code>modelName+"TreeNode"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，第二个命名</font></font><code>modelName+"TreeToken"</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">挖掘模型：一个名为的数据类 </font></font><code>modelName+"MiningModelData"</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
挖掘模型还生成每个段内的所有规则和类。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="pmml-extensions-ref_pmml-models"><a class="anchor" href="index.html#pmml-extensions-ref_pmml-models"></a><a class="link" href="index.html#pmml-extensions-ref_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.3.2。</font><font style="vertical-align: inherit;">Drools中的PMML扩展</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML规范支持</font></font><code>Extension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展PMML模型内容的元素。</font><font style="vertical-align: inherit;">您可以在PMML模型定义的几乎每个级别使用扩展，并作为模型主要元素中的第一个和最后一个子级，以获得最大的灵活性。</font><font style="vertical-align: inherit;">有关PMML扩展的更多信息，请参阅DMG PMML </font></font><a href="http://dmg.org/pmml/v4-2-1/GeneralStructure.html#xsdElement_Extension"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展机制</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了优化PMML集成，Drools支持以下额外的PMML扩展：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>modelPackage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为生成的规则和Java类指定包名称。</font></font><code>Header</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在PMML模型文件</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">部分中</font><font style="vertical-align: inherit;">包含此扩展</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><code>adapter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：指定</font><font style="vertical-align: inherit;">用于包含规则的输入和输出数据</font><font style="vertical-align: inherit;">的构造（</font></font><code>bean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>trait</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将此扩展插入</font><font style="vertical-align: inherit;">PMML模型文件</font><font style="vertical-align: inherit;">的</font></font><code>MiningSchema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>Output</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分（或两者）。</font></font></p>
</li>
<li>
<p><code>externalClass</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：与</font></font><code>adapter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义a </font></font><code>MiningField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">扩展名</font><font style="vertical-align: inherit;">一起使用</font></font><code>OutputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此扩展包含一个类，其属性名称与</font></font><code>MiningField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">or </font></font><code>OutputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font><font style="vertical-align: inherit;">的名称相匹配</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pmml-invocation-options-con_pmml-models"><a class="anchor" href="index.html#pmml-invocation-options-con_pmml-models"></a><a class="link" href="index.html#pmml-invocation-options-con_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4。</font><font style="vertical-align: inherit;">调用PMML模型的选项</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用Drools Workbench（</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单→设计→项目→导入资产</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">将PMML文件导入Drools项目，</font><font style="vertical-align: inherit;">或将PMML文件打包为项目知识JAR（KJAR）文件的一部分，而不使用Drools Workbench。</font><font style="vertical-align: inherit;">在Drools项目中实现PMML文件后，可以通过直接在Java应用程序中嵌入PMML调用来调用基于PMML的决策服务。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，直接在Java应用程序中嵌入PMML调用是部署和执行与Drools集成的PMML模型的可用方法。</font><font style="vertical-align: inherit;">其他用于调用PMML模型的选项（例如使用KIE Server）将在未来版本中提供，并将添加到PMML文档中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关使用项目打包和部署方法包含PMML资产的更多信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="pmml-invocation-embedded-proc_pmml-models"><a class="anchor" href="index.html#pmml-invocation-embedded-proc_pmml-models"></a><a class="link" href="index.html#pmml-invocation-embedded-proc_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1。</font><font style="vertical-align: inherit;">直接在Java应用程序中嵌入PMML调用</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当知识资产直接嵌入到调用程序中或使用Maven依赖关系为KJAR物理拉入时，KIE容器是本地的。</font><font style="vertical-align: inherit;">如果代码版本与PMML定义版本之间存在紧密关系，通常会将知识资产直接嵌入到项目中。</font><font style="vertical-align: inherit;">在您有意更新和重新部署应用程序后，对决策的任何更改都将生效。</font><font style="vertical-align: inherit;">这种方法的一个好处是正确的操作不依赖于运行时的任何外部依赖性，这可能是锁定环境的限制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Maven依赖项可以进一步提高灵活性，因为决策的特定版本可以动态更改（例如，通过使用系统属性），并且可以定期扫描更新并自动更新。</font><font style="vertical-align: inherit;">这引入了对服务部署时间的外部依赖性，但在本地执行决策，减少了对运行时可用外部服务的依赖。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目前，直接在Java应用程序中嵌入PMML调用是部署和执行与Drools集成的PMML模型的可用方法。</font><font style="vertical-align: inherit;">其他用于调用PMML模型的选项（例如使用KIE Server）将在未来版本中提供。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已创建包含要执行的PMML模型的KJAR。</font><font style="vertical-align: inherit;">有关项目打包的信息，请参阅
 </font></font><a href="index.html#_builddeployutilizeandrunsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建，部署，使用和运行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在客户端应用程序中，将以下依赖项添加到Java项目的相关类路径中：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">// Required for the PMML compiler
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-pmml<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
// Required for the KIE public API<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span><font></font>
<font></font>
// Required if not using classpath KIE container<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-ci<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font><code>&lt;version&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是目前在项目中使用的Drools的Maven工件版本（例如，7.11.0.Final-redhat-00002）。</font></font></p>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>classpath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">创建一个KIE容器</font></font><code>ReleaseId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
<font></font>
ReleaseId releaseId = kieServices.newReleaseId( <span class="hljs-string">"org.acme"</span>, <span class="hljs-string">"my-kjar"</span>, <span class="hljs-string">"1.0.0"</span> );<font></font>
KieContainer kieContainer = kieServices.newKieContainer( releaseId );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备选方案：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
<font></font>
KieContainer kieContainer = kieServices.getKieClasspathContainer();</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font></font><code>PMMLRequestData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的实例，将</font><font style="vertical-align: inherit;">PMML模型应用于一组数据：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PMMLRequestData</span> </span>{
    <span class="hljs-keyword">private</span> String correlationId; <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b>
    <span class="hljs-keyword">private</span> String modelName; <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b>
    <span class="hljs-keyword">private</span> String source; <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b>
    <span class="hljs-keyword">private</span> List&lt;ParameterInfo&lt;?&gt;&gt; requestParams; <i class="conum" data-value="4"></i><b>(<span class="hljs-number">4</span>)</b><font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识与特定请求或结果关联的数据</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该应用于请求数据的模型的名称</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由内部生成的</font></font><code>PMMLRequestData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">使用，</font><font style="vertical-align: inherit;">以标识生成请求的段</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送输入数据点的默认机制</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font></font><code>PMML4Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的实例，该实例</font><font style="vertical-align: inherit;">保存输出信息，该输出信息是将基于PMML的规则应用于输入数据的结果：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PMML4Result</span> </span>{
    <span class="hljs-keyword">private</span> String correlationId;
    <span class="hljs-keyword">private</span> String segmentationId; <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b>
    <span class="hljs-keyword">private</span> String segmentId; <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> segmentIndex; <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b>
    <span class="hljs-keyword">private</span> String resultCode; <i class="conum" data-value="4"></i><b>(<span class="hljs-number">4</span>)</b>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; resultVariables; <i class="conum" data-value="5"></i><b>(<span class="hljs-number">5</span>)</b><font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在模型类型时使用</font></font><code>MiningModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的</font></font><code>segmentationId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是使用多个分割之间进行区分。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与结合使用</font></font><code>segmentationId</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来识别生成结果的段。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于维护段的顺序。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于确定模型是否已成功应用，其中</font></font><code>OK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示成功。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">五</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含结果变量的名称及其关联值。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了普通的getter方法之外，</font></font><code>PMML4Result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类还支持以下方法直接检索结果变量的值：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-function">Optional&lt;T&gt; <span class="hljs-title">getResultValue</span><span class="hljs-params">(String objName, String objField, Class&lt;T&gt; clazz, Object...params)</span>

<span class="hljs-keyword">public</span> Object <span class="hljs-title">getResultValue</span><span class="hljs-params">(String objName, String objField, Object...params)</span></span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font></font><code>ParameterInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的实例，该实例</font><font style="vertical-align: inherit;">充当用作</font></font><code>PMMLRequestData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类的</font><font style="vertical-align: inherit;">一部分的基本数据类型对象的包装</font><font style="vertical-align: inherit;">：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParameterInfo</span>&lt;<span class="hljs-title">T</span>&gt; </span>{ <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b>
    <span class="hljs-keyword">private</span> String correlationId;
    <span class="hljs-keyword">private</span> String name; <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b>
    <span class="hljs-keyword">private</span> String capitalizedName;
    <span class="hljs-keyword">private</span> Class&lt;T&gt; type; <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b>
    <span class="hljs-keyword">private</span> T value; <i class="conum" data-value="4"></i><b>(<span class="hljs-number">4</span>)</b><font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于处理许多不同类型的参数化类</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预期作为模型输入的变量的名称</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类是变量的实际类型</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量的实际值</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据您创建的所需PMML类实例执行PMML模型：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeModel</span><span class="hljs-params">(KieBase kbase,
                         Map&lt;String,Object&gt; variables,
                         String modelName,
                         String correlationId,
                         String modelPkgName)</span> </span>{<font></font>
    RuleUnitExecutor executor = RuleUnitExecutor.create().bind(kbase);<font></font>
    PMMLRequestData request = <span class="hljs-keyword">new</span> PMMLRequestData(correlationId, modelName);<font></font>
    PMML4Result resultHolder = <span class="hljs-keyword">new</span> PMML4Result(correlationId);<font></font>
    variables.entrySet().forEach( es -&gt; {<font></font>
        request.addRequestParam(es.getKey(), es.getValue());<font></font>
    });<font></font>
<font></font>
    DataSource&lt;PMMLRequestData&gt; requestData = executor.newDataSource(<span class="hljs-string">"request"</span>);<font></font>
    DataSource&lt;PMML4Result&gt; resultData = executor.newDataSource(<span class="hljs-string">"results"</span>);<font></font>
    DataSource&lt;PMMLData&gt; internalData = executor.newDataSource(<span class="hljs-string">"pmmlData"</span>);<font></font>
<font></font>
    requestData.insert(request);<font></font>
    resultData.insert(resultHolder);<font></font>
<font></font>
    List&lt;String&gt; possiblePackageNames = calculatePossiblePackageNames(modelName,<font></font>
                                                                    modelPkgName);<font></font>
    Class&lt;? extends RuleUnit&gt; ruleUnitClass = getStartingRuleUnit(<span class="hljs-string">"RuleUnitIndicator"</span>,<font></font>
                                                                (InternalKnowledgeBase)kbase,<font></font>
                                                                possiblePackageNames);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (ruleUnitClass != <span class="hljs-keyword">null</span>) {<font></font>
        executor.run(ruleUnitClass);<font></font>
        <span class="hljs-keyword">if</span> ( <span class="hljs-string">"OK"</span>.equals(resultHolder.getResultCode()) ) {
          <span class="hljs-comment">// extract result variables here</span><font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">protected</span> Class&lt;? extends RuleUnit&gt; getStartingRuleUnit(String startingRule, InternalKnowledgeBase ikb, List&lt;String&gt; possiblePackages) {<font></font>
    RuleUnitRegistry unitRegistry = ikb.getRuleUnitRegistry();<font></font>
    Map&lt;String,InternalKnowledgePackage&gt; pkgs = ikb.getPackagesMap();<font></font>
    RuleImpl ruleImpl = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">for</span> (String pkgName: possiblePackages) {
      <span class="hljs-keyword">if</span> (pkgs.containsKey(pkgName)) {<font></font>
          InternalKnowledgePackage pkg = pkgs.get(pkgName);<font></font>
          ruleImpl = pkg.getRule(startingRule);<font></font>
          <span class="hljs-keyword">if</span> (ruleImpl != <span class="hljs-keyword">null</span>) {<font></font>
              RuleUnitDescr descr = unitRegistry.getRuleUnitFor(ruleImpl).orElse(<span class="hljs-keyword">null</span>);
              <span class="hljs-keyword">if</span> (descr != <span class="hljs-keyword">null</span>) {
                  <span class="hljs-keyword">return</span> descr.getRuleUnitClass();<font></font>
              }<font></font>
          }<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">protected</span> List&lt;String&gt; <span class="hljs-title">calculatePossiblePackageNames</span><span class="hljs-params">(String modelId, String...knownPackageNames)</span> </span>{<font></font>
    List&lt;String&gt; packageNames = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<font></font>
    String javaModelId = modelId.replaceAll(<span class="hljs-string">"\\s"</span>,<span class="hljs-string">""</span>);
    <span class="hljs-keyword">if</span> (knownPackageNames != <span class="hljs-keyword">null</span> &amp;&amp; knownPackageNames.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">for</span> (String knownPkgName: knownPackageNames) {<font></font>
            packageNames.add(knownPkgName + <span class="hljs-string">"."</span> + javaModelId);<font></font>
        }<font></font>
    }<font></font>
    String basePkgName = PMML4UnitImpl.DEFAULT_ROOT_PACKAGE+<span class="hljs-string">"."</span>+javaModelId;<font></font>
    packageNames.add(basePkgName);<font></font>
    <span class="hljs-keyword">return</span> packageNames;<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则由</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类创建KIE会议，并添加所需的</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，这些会话，然后执行基于的规则</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，作为一个参数的传递</font></font><code>run()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font><font style="vertical-align: inherit;">该</font></font><code>calculatePossiblePackageNames</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>getStartingRuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法确定的全名</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是传递给类</font></font><code>run()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法。</font></font></p>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了方便您的PMML模型执行，您还可以使用</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools中支持</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">类。</font><font style="vertical-align: inherit;">有关PMML帮助程序类的更多信息，请参阅</font></font><a href="index.html#pmml-invocation-helper-classes-ref_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML执行帮助程序类</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect4">
<h5 id="pmml-invocation-helper-classes-ref_pmml-models"><a class="anchor" href="index.html#pmml-invocation-helper-classes-ref_pmml-models"></a><a class="link" href="index.html#pmml-invocation-helper-classes-ref_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.4.1.1。</font><font style="vertical-align: inherit;">PMML执行助手类</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools提供了一个</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类，它有助于创建</font></font><code>PMMLRequestData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML模型执行所需</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">类，并有助于使用</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类</font><font style="vertical-align: inherit;">执行规则</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是没有和没有</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的PMML模型执行的示例</font><font style="vertical-align: inherit;">，作为比较：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML模型执行而不使用 </font></font><code>PMML4ExecutionHelper</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeModel</span><span class="hljs-params">(KieBase kbase,
                         Map&lt;String,Object&gt; variables,
                         String modelName,
                         String correlationId,
                         String modelPkgName)</span> </span>{<font></font>
    RuleUnitExecutor executor = RuleUnitExecutor.create().bind(kbase);<font></font>
    PMMLRequestData request = <span class="hljs-keyword">new</span> PMMLRequestData(correlationId, modelName);<font></font>
    PMML4Result resultHolder = <span class="hljs-keyword">new</span> PMML4Result(correlationId);<font></font>
    variables.entrySet().forEach( es -&gt; {<font></font>
        request.addRequestParam(es.getKey(), es.getValue());<font></font>
    });<font></font>
<font></font>
    DataSource&lt;PMMLRequestData&gt; requestData = executor.newDataSource(<span class="hljs-string">"request"</span>);<font></font>
    DataSource&lt;PMML4Result&gt; resultData = executor.newDataSource(<span class="hljs-string">"results"</span>);<font></font>
    DataSource&lt;PMMLData&gt; internalData = executor.newDataSource(<span class="hljs-string">"pmmlData"</span>);<font></font>
<font></font>
    requestData.insert(request);<font></font>
    resultData.insert(resultHolder);<font></font>
<font></font>
    List&lt;String&gt; possiblePackageNames = calculatePossiblePackageNames(modelName,<font></font>
                                                                    modelPkgName);<font></font>
    Class&lt;? extends RuleUnit&gt; ruleUnitClass = getStartingRuleUnit(<span class="hljs-string">"RuleUnitIndicator"</span>,<font></font>
                                                                (InternalKnowledgeBase)kbase,<font></font>
                                                                possiblePackageNames);<font></font>
<font></font>
    <span class="hljs-keyword">if</span> (ruleUnitClass != <span class="hljs-keyword">null</span>) {<font></font>
        executor.run(ruleUnitClass);<font></font>
        <span class="hljs-keyword">if</span> ( <span class="hljs-string">"OK"</span>.equals(resultHolder.getResultCode()) ) {
          <span class="hljs-comment">// extract result variables here</span><font></font>
        }<font></font>
    }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">protected</span> Class&lt;? extends RuleUnit&gt; getStartingRuleUnit(String startingRule, InternalKnowledgeBase ikb, List&lt;String&gt; possiblePackages) {<font></font>
    RuleUnitRegistry unitRegistry = ikb.getRuleUnitRegistry();<font></font>
    Map&lt;String,InternalKnowledgePackage&gt; pkgs = ikb.getPackagesMap();<font></font>
    RuleImpl ruleImpl = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">for</span> (String pkgName: possiblePackages) {
      <span class="hljs-keyword">if</span> (pkgs.containsKey(pkgName)) {<font></font>
          InternalKnowledgePackage pkg = pkgs.get(pkgName);<font></font>
          ruleImpl = pkg.getRule(startingRule);<font></font>
          <span class="hljs-keyword">if</span> (ruleImpl != <span class="hljs-keyword">null</span>) {<font></font>
              RuleUnitDescr descr = unitRegistry.getRuleUnitFor(ruleImpl).orElse(<span class="hljs-keyword">null</span>);
              <span class="hljs-keyword">if</span> (descr != <span class="hljs-keyword">null</span>) {
                  <span class="hljs-keyword">return</span> descr.getRuleUnitClass();<font></font>
              }<font></font>
          }<font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">protected</span> List&lt;String&gt; <span class="hljs-title">calculatePossiblePackageNames</span><span class="hljs-params">(String modelId, String...knownPackageNames)</span> </span>{<font></font>
    List&lt;String&gt; packageNames = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<font></font>
    String javaModelId = modelId.replaceAll(<span class="hljs-string">"\\s"</span>,<span class="hljs-string">""</span>);
    <span class="hljs-keyword">if</span> (knownPackageNames != <span class="hljs-keyword">null</span> &amp;&amp; knownPackageNames.length &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">for</span> (String knownPkgName: knownPackageNames) {<font></font>
            packageNames.add(knownPkgName + <span class="hljs-string">"."</span> + javaModelId);<font></font>
        }<font></font>
    }<font></font>
    String basePkgName = PMML4UnitImpl.DEFAULT_ROOT_PACKAGE+<span class="hljs-string">"."</span>+javaModelId;<font></font>
    packageNames.add(basePkgName);<font></font>
    <span class="hljs-keyword">return</span> packageNames;<font></font>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例PMML模型执行使用 </font></font><code>PMML4ExecutionHelper</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeModel</span><span class="hljs-params">(KieBase kbase,
                         Map&lt;String,Object&gt; variables,
                         String modelName,
                         String modelPkgName,
                         String correlationId)</span> </span>{<font></font>
   PMML4ExecutionHelper helper = PMML4ExecutionHelperFactory.getExecutionHelper(modelName, kbase);<font></font>
   helper.addPossiblePackageName(modelPkgName);<font></font>
<font></font>
   PMMLRequestData request = <span class="hljs-keyword">new</span> PMMLRequestData(correlationId, modelName);<font></font>
   variables.entrySet().forEach(entry -&gt; {<font></font>
     request.addRequestParam(entry.getKey(), entry.getValue);<font></font>
   });<font></font>
<font></font>
   PMML4Result resultHolder = helper.submitRequest(request);<font></font>
   <span class="hljs-keyword">if</span> (<span class="hljs-string">"OK"</span>.equals(resultHolder.getResultCode)) {
     <span class="hljs-comment">// extract result variables here</span><font></font>
   }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用时</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您不需要</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像在典型的PMML模型执行中那样</font><font style="vertical-align: inherit;">指定可能的包名称和</font><font style="vertical-align: inherit;">类。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要构造</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类，可以使用</font></font><code>PMML4ExecutionHelperFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类来确定</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索</font><font style="vertical-align: inherit;">实例的</font><font style="vertical-align: inherit;">方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是</font></font><code>PMML4ExecutionHelperFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构造</font></font><code>PMML4ExecutionHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的可用</font><font style="vertical-align: inherit;">类方法</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMIE4ExecutionHelperFactory方法，用于KIE基础中的PMML资产</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当PMML资产已经编译并从现有KIE基础中使用时，请使用这些方法：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, KieBase kbase)</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, KieBase kbase, <span class="hljs-keyword">boolean</span> includeMiningDataSources)</span></span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML4ExecutionHelperFactory方法，用于项目类路径上的PMML资产</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当PMML资产位于项目类路径上时，请使用这些方法。</font><font style="vertical-align: inherit;">该</font></font><code>classPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数是PMML文件的项目类路径中的位置：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName,  String classPath, KieBaseConfiguration kieBaseConf)</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName,String classPath, KieBaseConfiguration kieBaseConf, <span class="hljs-keyword">boolean</span> includeMiningDataSources)</span></span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PMML4ExecutionHelperFactory方法，用于字节数组中的PMML资产</font></font></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当PMML资产采用字节数组的形式时，请使用以下方法：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, <span class="hljs-keyword">byte</span>[] content, KieBaseConfiguration kieBaseConf)</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, <span class="hljs-keyword">byte</span>[] content, KieBaseConfiguration kieBaseConf, <span class="hljs-keyword">boolean</span> includeMiningDataSources)</span></span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于PMML资产的PMML4ExecutionHelperFactory方法 </font></font><code>Resource</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当PMML资产采用</font></font><code>org.kie.api.io.Resource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">形式时，请使用以下方法</font><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, Resource resource, KieBaseConfiguration kieBaseConf)</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> PMML4ExecutionHelper <span class="hljs-title">getExecutionHelper</span><span class="hljs-params">(String modelName, Resource resource, KieBaseConfiguration kieBaseConf, <span class="hljs-keyword">boolean</span> includeMiningDataSources)</span></span></code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类路径，字节数组和资源</font></font><code>PMML4ExecutionHelperFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法为生成的规则和Java类创建KIE容器。</font><font style="vertical-align: inherit;">该容器用作使用的KIE基础的来源</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">容器没有持久化。</font></font><code>PMML4ExecutionHelperFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经在KIE基础中的PMML资产</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法不会以这种方式创建KIE容器。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_experimentalfeatureschapter"><a class="anchor" href="index.html#_experimentalfeatureschapter"></a><a class="link" href="index.html#_experimentalfeatureschapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.实验特征</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_declarative_agenda"><a class="anchor" href="index.html#_declarative_agenda"></a><a class="link" href="index.html#_declarative_agenda"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1。</font><font style="vertical-align: inherit;">陈述议程</font></font></a></h3>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明性议程是实验性的，所有方面都很有可能在未来发生变化。</font><font style="vertical-align: inherit;">@Eager和@Direct是用于控制规则行为的临时注释，随着声明性议程的发展，它也会发生变化。</font><font style="vertical-align: inherit;">注释而不是选择的属性，以反映他们的实验性质。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明性议程允许使用规则来控制哪些其他规则可以触发以及何时触发。</font><font style="vertical-align: inherit;">虽然这将比简单使用显着性增加更多的开销，但优点是它是声明性的，因此更易读和可维护，并且应该允许以更简单的方式实现更多用例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下此功能处于关闭状态，必须明确启用，因为它目前被认为是高度实验性的并且可能会发生变化，但可以通过在相应的地方添加declarativeAgenda ='enabled'属性来激活给定的KieBase kmodule.xml文件的kbase标记，如下例所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例164.启用声明性议程</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
      <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"DeclarativeKBase"</span> <span class="hljs-attribute">declarativeAgenda</span>=<span class="hljs-value">"enabled"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"KSession"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本思路是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有规则的匹配都作为事实插入到WorkingMemory中。</font><font style="vertical-align: inherit;">因此，您现在可以对匹配进行模式匹配。</font><font style="vertical-align: inherit;">规则的元数据和声明可用作Match对象上的字段。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用当前规则的kcontext.blockMatch（匹配匹配）来阻止所选匹配。</font><font style="vertical-align: inherit;">只有当该规则变为假时，匹配才有资格被解雇。</font><font style="vertical-align: inherit;">如果它已经有资格被解雇并且稍后被阻止，它将从议程中删除，直到它被解除阻止。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配可能有多个阻止者并保留计数。</font><font style="vertical-align: inherit;">所有拦截器必须变为假，以使计数器达到零以使匹配符合触发条件。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kcontext.unblockAllMatches（匹配匹配）是一项覆盖规则，无论如何都会删除所有拦截器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活也可能被取消，因此它永远不会触发cancelMatch</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未经阻止的比赛被添加到议程中并遵守正常的突出性，议程组，规则流组等。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Direct注释允许规则在匹配时立即触发，这将用于阻止/取消阻止匹配的规则，这些规则不希望产生影响其他地方的副作用。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子165.新的RuleContext方法</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">blockMatch</span><span class="hljs-params">(Match match)</span></span>;
      <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">unblockAllMatches</span><span class="hljs-params">(Match match)</span></span>;
      <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">cancelMatch</span><span class="hljs-params">(Match match)</span></span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个基本示例，它将阻止来自具有元数据@department（'sales'）的规则的所有匹配。</font><font style="vertical-align: inherit;">它们将保持阻塞状态，直到blockerAllSalesRules规则变为false，即缩回“go2”。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例166.基于规则元数据的阻止规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule rule1 <span class="hljs-variable">@Eager</span> <span class="hljs-variable">@department</span>(<span class="hljs-string">'sales'</span>) <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go1'</span> )
      <span class="hljs-keyword">then</span>
      list.add( kcontext.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span> );
      <span class="hljs-keyword">end</span>
      rule rule2 <span class="hljs-variable">@Eager</span> <span class="hljs-variable">@department</span>(<span class="hljs-string">'sales'</span>) <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go1'</span> )
      <span class="hljs-keyword">then</span>
      list.add( kcontext.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span> );
      <span class="hljs-keyword">end</span>
      rule blockerAllSalesRules <span class="hljs-variable">@Direct</span> <span class="hljs-variable">@Eager</span> <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go2'</span> )
      <span class="hljs-variable">$i</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Match</span>( department == <span class="hljs-string">'sales'</span> )
      <span class="hljs-keyword">then</span>
      list.add( <span class="hljs-variable">$i</span>.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span>  );<font></font>
      kcontext.blockMatch( <span class="hljs-variable">$i</span> );
      <span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了使用@Direct注释阻止规则之外，还需要使用@Eager注释可能被其阻止的所有规则。</font><font style="vertical-align: inherit;">这是因为，由于必须通过阻止规则的模式匹配来评估匹配，因此不能懒惰地评估可能被阻止的匹配，否则将不会评估任何匹配。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例显示如何使用活动属性计算活动或非活动（已触发）匹配的数量。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例167.计算活动/非活动匹配的数量</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule rule1 <span class="hljs-variable">@Eager</span> <span class="hljs-variable">@department</span>(<span class="hljs-string">'sales'</span>) <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go1'</span> )
      <span class="hljs-keyword">then</span>
      list.add( kcontext.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span> );
      <span class="hljs-keyword">end</span>
      rule rule2 <span class="hljs-variable">@Eager</span> <span class="hljs-variable">@department</span>(<span class="hljs-string">'sales'</span>) <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go1'</span> )
      <span class="hljs-keyword">then</span>
      list.add( kcontext.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span> );
      <span class="hljs-keyword">end</span>
      rule rule3 <span class="hljs-variable">@Eager</span> <span class="hljs-variable">@department</span>(<span class="hljs-string">'sales'</span>) <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go1'</span> )
      <span class="hljs-keyword">then</span>
      list.add( kcontext.rule.name + <span class="hljs-string">':'</span> + <span class="hljs-variable">$s</span> );
      <span class="hljs-keyword">end</span>
      rule countActivateInActive <span class="hljs-variable">@Direct</span> <span class="hljs-variable">@Eager</span> <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( this == <span class="hljs-string">'go2'</span> )
      <span class="hljs-variable">$active</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Number</span>( this == <span class="hljs-number">1</span> ) from accumulate( <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Match</span>( department == <span class="hljs-string">'sales'</span>, active == <span class="hljs-keyword">true</span> ), count( <span class="hljs-variable">$a</span> ) )
      <span class="hljs-variable">$inActive</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Number</span>( this == <span class="hljs-number">2</span> ) from  accumulate( <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Match</span>( department == <span class="hljs-string">'sales'</span>, active == <span class="hljs-keyword">false</span> ), count( <span class="hljs-variable">$a</span> ) )
      <span class="hljs-keyword">then</span><font></font>
      kcontext.halt( );<font></font>
      <span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_browsing_graphs_of_objects_with_oopath"><a class="anchor" href="index.html#_browsing_graphs_of_objects_with_oopath"></a><a class="link" href="index.html#_browsing_graphs_of_objects_with_oopath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.2。</font><font style="vertical-align: inherit;">使用OOPath浏览对象的图形</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事实的字段是集合时，可以使用</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">将该集合中的所有项目绑定和推理</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，当需要浏览对象图时，</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font><font style="vertical-align: inherit;">的广泛使用</font><font style="vertical-align: inherit;">可能会产生冗长和立方体的语法，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例168.使用from浏览对象图</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Find all grades for Big Data exam"</span> <span class="hljs-keyword">when</span>
      <span class="hljs-variable">$student</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Student</span>( <span class="hljs-variable">$plan</span><span class="hljs-symbol">:</span> plan )
      <span class="hljs-variable">$exam</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Exam</span>( course == <span class="hljs-string">"Big Data"</span> ) from <span class="hljs-variable">$plan</span>.exams
      <span class="hljs-variable">$grade</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Grade</span>() from <span class="hljs-variable">$exam</span>.grades
      <span class="hljs-keyword">then</span> /* <span class="hljs-constant">RHS</span> *<span class="hljs-regexp">/ end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该示例中，假设使用由</font></font><code>Student</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有</font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">人</font><font style="vertical-align: inherit;">组成的域模型</font><font style="vertical-align: inherit;">：a </font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以具有零个或多个</font></font><code>Exam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s以及</font></font><code>Exam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零个或多个</font></font><code>Grade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s。</font><font style="vertical-align: inherit;">请注意，只有图形的根对象（</font></font><code>Student</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本例中）才需要位于工作内存中才能使其正常工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过借用XPath中的思想，可以使这种语法更加简洁，因为XPath在处理集合和过滤约束时具有用于导航相关元素的紧凑表示法。</font><font style="vertical-align: inherit;">这个以XPath为基础的符号已被调用，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它明确地用于浏览对象的图形。</font><font style="vertical-align: inherit;">使用此表示法可以重写前一个示例，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例169.使用OOPath浏览对象图</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Find all grades for Big Data exam"</span> <span class="hljs-keyword">when</span>
      <span class="hljs-constant">Student</span>( <span class="hljs-variable">$grade</span><span class="hljs-symbol">:</span> /plan/exams[course == <span class="hljs-string">"Big Data"</span>]/grades )
      <span class="hljs-keyword">then</span> /* <span class="hljs-constant">RHS</span> *<span class="hljs-regexp">/ end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式上，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">的核心语法</font><font style="vertical-align: inherit;">可以用这种方式用EBNF表示法定义。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ini"><span class="hljs-setting">OOPExpr = <span class="hljs-value">[ID ( <span class="hljs-string">":"</span> | <span class="hljs-string">":="</span> )] ( <span class="hljs-string">"/"</span> | <span class="hljs-string">"?/"</span> ) OOPSegment { ( <span class="hljs-string">"/"</span> | <span class="hljs-string">"?/"</span> | <span class="hljs-string">"."</span> ) OOPSegment } ;</span></span>
<span class="hljs-setting">OOPSegment = <span class="hljs-value">ID [<span class="hljs-string">"#"</span> ID] [<span class="hljs-string">"["</span> ( Number | Constraints ) <span class="hljs-string">"]"</span>]</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式具有以下特征。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它必须以</font><font style="vertical-align: inherit;">完全非反应性OOPath的情况</font><font style="vertical-align: inherit;">开始</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或与之</font></font><code>?/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一起（见下文）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它可以使用</font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">取消引用对象的单个属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它可以使用</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">取消引用对象的多个属性</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果返回一个集合，它将迭代集合中的值</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在遍历引用的对象时，它可以过滤那些不满足一个或多个约束的对象，在方括号之间写为谓词表达式，如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[ course == <span class="hljs-string">"Big Data"</span> ]/grades )</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在oopath遍历期间，还可以将遍历的对象向下转换为泛型集合中声明的类的子类。</font><font style="vertical-align: inherit;">通过这种方式，后续约束也可以安全地访问仅在该子类中声明的属性，如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Student( $grade: /plan/exams<span class="hljs-preprocessor">#AdvancedExam[ course == <span class="hljs-string">"Big Data"</span>, level &gt; <span class="hljs-number">3</span> ]/grades )</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是在此内联强制转换中指定的类实例的对象将被自动过滤掉。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束还可以具有对在当前迭代之前遍历的图的对象的beckreference。</font><font style="vertical-align: inherit;">例如以下OOPath：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams/grades[ result &gt; ../averageResult ] )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅匹配结果高于通过考试平均成绩的成绩。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束也可以递归地成为另一个OOPath，如下所示：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$exam</span>: /plan/exams[ /grades[ result &gt; <span class="hljs-number">20</span> ] ] )</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过将项目放在方括号之间来访问项目，如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[<span class="hljs-number">0</span>]/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与基于XPath 1相比，遵循Java约定OOPath索引是基于0的</font></font></p>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_reactive_and_non_reactive_oopath"><a class="anchor" href="index.html#_reactive_and_non_reactive_oopath"></a><a class="link" href="index.html#_reactive_and_non_reactive_oopath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.2.1。</font><font style="vertical-align: inherit;">反应性和非反应性OOPath</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，Drools无法对涉及在</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">求值期间遍历的深层嵌套对象的更新做出反应</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了使这些对象对变化起反应，必须使它们扩展类</font></font><code>org.drools.core.phreak.ReactiveObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计划通过实现自动检测属于特定域模型的类的机制来克服该限制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展该类后，域对象可以通过调用继承的方法更新其中一个字段时通知引擎</font></font><code>notifyModification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例170.通知引擎已将考试移至不同的课程</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCourse</span><span class="hljs-params">(String course)</span> </span>{
        <span class="hljs-keyword">this</span>.course = course;<font></font>
        notifyModification(<span class="hljs-keyword">this</span>);<font></font>
        }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样使用OOPath时如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[ course == <span class="hljs-string">"Big Data"</span> ]/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果将考试移至其他课程，则会重新触发该规则，并重新计算与该规则匹配的成绩列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以仅在OOPath的一个子部分中具有反应性，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[ course == <span class="hljs-string">"Big Data"</span> ]?/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，使用</font></font><code>?/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔符代替分隔符</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，引擎将对考试所做的更改做出反应，或者如果考试被添加到计划中，但是如果在现有考试中添加了新成绩则不会。</font><font style="vertical-align: inherit;">当然，如果OOPath块不是反应性的，那么从那里直到表达式结束的OOPath的所有剩余部分也将是非反应性的。</font><font style="vertical-align: inherit;">例如以下OOPath</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: ?/plan/exams[ course == <span class="hljs-string">"Big Data"</span> ]/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将是完全无反应的。</font><font style="vertical-align: inherit;">因此，不允许</font></font><code>?/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在同一个OOPath中多次</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">分隔符，因此表达式如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan?/exams[ course == <span class="hljs-string">"Big Data"</span> ]?/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将导致编译时错误。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_traits"><a class="anchor" href="index.html#_traits"></a><a class="link" href="index.html#_traits"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.3。</font><font style="vertical-align: inherit;">性状</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告：此功能仍处于试验阶段且可能会发生变化</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样的事实可能有多种动态类型，它们不适合类层次结构。</font><font style="vertical-align: inherit;">特征允许对这种非常常见的场景进行建模。</font><font style="vertical-align: inherit;">特征是一个可以在运行时应用（并最终删除）到单个对象的接口。</font><font style="vertical-align: inherit;">要创建特征而不是传统的bean，必须明确声明它们，如下例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> trait GoldenCustomer
    // <span class="hljs-keyword">fields</span> will <span class="hljs-keyword">map</span> <span class="hljs-keyword">to</span> getters/setters
    code     : <span class="hljs-keyword">String</span>
    balance  : <span class="hljs-keyword">long</span>
    discount : <span class="hljs-built_in">int</span>
    maxExpense : <span class="hljs-keyword">long</span>
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在运行时，此声明会生成一个接口，该接口可用于编写模式，但无法直接实例化。</font><font style="vertical-align: inherit;">为了将特征应用于对象，我们提供了新的don关键字，可以像这样使用：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
    <span class="hljs-variable">$c</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Customer</span>()
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">GoldenCustomer</span> gc = don( <span class="hljs-variable">$c</span>, <span class="hljs-constant">GoldenCustomer</span>.<span class="hljs-keyword">class</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当核心对象使用特征时，会动态创建代理类（对于每个核心/特征类组合，将懒惰地生成一个这样的类）。</font><font style="vertical-align: inherit;">包装核心对象并实现特征接口的代理实例会自动插入，并可能激活其他规则。</font><font style="vertical-align: inherit;">声明和使用接口，从引擎中免费获取实现代理的一个直接优势是，在编写规则时可以利用多个继承层次结构。</font><font style="vertical-align: inherit;">但是，核心类不需要静态地实现任何这些接口，也有助于将遗留类用作核心。</font><font style="vertical-align: inherit;">事实上，任何对象都可以提供特征，前提是它们被声明为@Traitable。</font><font style="vertical-align: inherit;">请注意，此注释曾经是可选的，但现在是必需的。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">import</span> <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.core</span><span class="hljs-class">.factmodel</span><span class="hljs-class">.traits</span><span class="hljs-class">.Traitable</span>;
<span class="hljs-tag">declare</span> <span class="hljs-tag">Customer</span>
    <span class="hljs-at_rule">@<span class="hljs-keyword">Traitable</span>
    code    : String
    balance : long
end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">核心类和特征接口之间的唯一连接是在代理级别：特征与核心类没有特别关联。</font><font style="vertical-align: inherit;">这意味着相同的特征可以应用于完全不同的对象。</font><font style="vertical-align: inherit;">因此，特征不会透明地暴露其核心对象的字段。</font><font style="vertical-align: inherit;">因此，在使用特征界面编写规则时，通常只有界面的字段可用。</font><font style="vertical-align: inherit;">但是，接口中与核心对象字段对应的任何字段都将由代理类映射：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
    <span class="hljs-variable">$o</span><span class="hljs-symbol">:</span> <span class="hljs-constant">OrderItem</span>( <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> price, <span class="hljs-variable">$code</span> <span class="hljs-symbol">:</span> custCode )
    <span class="hljs-variable">$c</span><span class="hljs-symbol">:</span> <span class="hljs-constant">GoldenCustomer</span>( code == <span class="hljs-variable">$code</span>, <span class="hljs-variable">$a</span> <span class="hljs-symbol">:</span> balance, <span class="hljs-variable">$d</span><span class="hljs-symbol">:</span> discount )
<span class="hljs-keyword">then</span>
    <span class="hljs-variable">$c</span>.setBalance( <span class="hljs-variable">$a</span> - <span class="hljs-variable">$p</span>*<span class="hljs-variable">$d</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，将从底层Customer对象读取代码和余额。</font><font style="vertical-align: inherit;">同样，setAccount将修改底层对象，保留对数据结构的强类型访问。</font><font style="vertical-align: inherit;">硬核字段必须具有相同的名称，并在核心类和所有连接的接口中键入。</font><font style="vertical-align: inherit;">该名称用于建立映射：如果两个字段具有相同的名称，则它们也必须具有相同的声明类型。</font><font style="vertical-align: inherit;">注释@ org.drools.core.factmodel.traits.Alias允许放宽此限制。</font><font style="vertical-align: inherit;">如果提供了@Alias，则其值字符串将用于解析映射而不是原始字段名称。</font><font style="vertical-align: inherit;">@Alias可以应用于特征和核心bean。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs java"><span class="hljs-keyword">import</span> org.drools.core.factmodel.traits.*;<font></font>
declare trait GoldenCustomer<font></font>
    balance : <span class="hljs-keyword">long</span> <span class="hljs-annotation">@Alias</span>( <span class="hljs-string">"org.acme.foo.accountBalance"</span> )<font></font>
end<font></font>
<font></font>
declare Person<font></font>
    <span class="hljs-annotation">@Traitable</span><font></font>
    name : String<font></font>
    savings : <span class="hljs-keyword">long</span> <span class="hljs-annotation">@Alias</span>( <span class="hljs-string">"org.acme.foo.accountBalance"</span> )
<span class="hljs-function">end

when
    <span class="hljs-title">GoldenCustomer</span><span class="hljs-params">( balance &amp;gt; <span class="hljs-number">1000</span> )</span> <span class="hljs-comment">// will react to new Person( 2000 )</span>
then
end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在放松这种约束方面正在做更多的工作（稍后参见关于“逻辑”特征的实验部分）。</font><font style="vertical-align: inherit;">现在，有人可能想知道当核心类没有为接口中定义的字段提供实现时会发生什么。</font><font style="vertical-align: inherit;">我们将那些特征字段称为硬字段，这些特征字段也是核心字段，因此很容易获得，而我们将这些字段定义为非核心类提供的字段。</font><font style="vertical-align: inherit;">相反，隐藏字段是核心类中未由接口公开的字段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，虽然硬地管理很直观，但仍存在软和隐藏字段的问题。</font><font style="vertical-align: inherit;">隐藏字段通常只能直接使用核心类访问。</font><font style="vertical-align: inherit;">但是，可以在特征界面上使用“字段”映射来访问隐藏字段。</font><font style="vertical-align: inherit;">如果无法解析该字段，则返回null。</font><font style="vertical-align: inherit;">请注意，此功能将来可能会发生变化。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-keyword">when</span>
    $sc : GoldenCustomer( fields[ <span class="hljs-string">"age"</span> ] &gt; <span class="hljs-number">18</span> )  <span class="hljs-regexp">//</span> age <span class="hljs-keyword">is</span> declared <span class="hljs-keyword">by</span> the underlying core <span class="hljs-class"><span class="hljs-keyword">class</span>, <span class="hljs-title">but</span> <span class="hljs-title">not</span> <span class="hljs-title">by</span> <span class="hljs-title">GoldenCustomer</span></span>
<span class="hljs-keyword">then</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，软字段存储在类似于Map的数据结构中，该数据结构特定于每个核心对象并由代理引用，因此即使对象具有多个特征，它们也可以有效地共享。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php">when
    <span class="hljs-variable">$sc</span> : GoldenCustomer( <span class="hljs-variable">$c</span> : code, <span class="hljs-comment">// hard getter</span>
                          <span class="hljs-variable">$maxExpense</span> : maxExpense &gt; <span class="hljs-number">1000</span> <span class="hljs-comment">// soft getter</span><font></font>
    )<font></font>
then<font></font>
    <span class="hljs-variable">$sc</span>.setDiscount( ... ); <span class="hljs-comment">// soft setter</span>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">核心对象还拥有对其所有代理的引用，因此可以使用一种动态“instanceof”运算符（我们称之为isA）来跟踪已添加到对象的类型。</font><font style="vertical-align: inherit;">运算符可以接受String，类文字或类文字列表。</font><font style="vertical-align: inherit;">在后一种情况下，只有在所有特征都已被穿戴时才满足约束。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$sc : GoldenCustomer( $maxExpense : maxExpense &gt; <span class="hljs-number">1000</span>,
                      <span class="hljs-keyword">this</span> isA <span class="hljs-string">"SeniorCustomer"</span>, <span class="hljs-keyword">this</span> isA [ NationalCustomer.<span class="hljs-keyword">class</span>, OnlineCustomer.<span class="hljs-keyword">class</span> ]<font></font>
)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最终，业务逻辑可能要求从包装对象中删除特征。</font><font style="vertical-align: inherit;">为此，我们提供两种选择。</font><font style="vertical-align: inherit;">第一个是“逻辑don”，它将导致由traiting操作产生的代理的逻辑插入。</font><font style="vertical-align: inherit;">TMS将确保在首先删除其逻辑支持时删除该特征。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-keyword">then</span>
    don( $x, <span class="hljs-regexp">//</span> core object<font></font>
         Customer.class, <span class="hljs-regexp">//</span> trait <span class="hljs-class"><span class="hljs-keyword">class</span></span>
         <span class="hljs-literal">true</span> <span class="hljs-regexp">//</span> optional flag <span class="hljs-keyword">for</span> logical insertion<font></font>
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个是使用“shed”关键字，它导致删除作为参数传递的子类型（或等效类型）的任何类型。</font><font style="vertical-align: inherit;">请注意，从版本5.5开始，shed只允许删除单个特定特征。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">then</span>
    <span class="hljs-constant">Thing</span> t = shed( <span class="hljs-variable">$x</span>, <span class="hljs-constant">GoldenCustomer</span>.<span class="hljs-keyword">class</span> ) /<span class="hljs-regexp">/ also removes any trait that</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此操作返回另一个实现org.drools.core.factmodel.traits.Thing接口的代理，其中定义了getFields（）和getCore（）方法。</font><font style="vertical-align: inherit;">事实上，在内部生成所有声明的特征以扩展此接口（除了指定的任何其他特征）。</font><font style="vertical-align: inherit;">这允许用软区保留包装器，否则软区将丢失。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特征及其代理也以另一种方式相关。</font><font style="vertical-align: inherit;">从版本5.6开始，每当核心对象被“修改”时，其代理也会被自动“修改”，以允许基于特征的模式对硬字段中的潜在变化作出反应。</font><font style="vertical-align: inherit;">同样，每当修改特征代理（由特征模式配对）时，修改将传播到核心类和其他特征。</font><font style="vertical-align: inherit;">Morover，每当执行don操作时，核心对象也会自动修改，以重新评估可能被触发的任何“isA”操作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">潜在地，这可能导致大量修改，严重影响性能（和正确性）。</font><font style="vertical-align: inherit;">因此目前实施了两种解决方案。</font><font style="vertical-align: inherit;">首先，每当修改核心对象时，只更新最特定的特征（在特征接口之间的继承意义上）并且内部阻塞机制到位以确保每个可能匹配的模式被评估一次且仅一次。</font><font style="vertical-align: inherit;">那么，在以下情况中：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">trait</span> GoldenCustomer end
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">trait</span> NationalGoldenustomer extends GoldenCustomer end
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">trait</span> SeniorGoldenCustomer extends GoldenCustomer end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对GoldenCustomer，NationalGoldenCustomer和SeniorGoldenCustomer wold的对象的修改仅导致后两个代理实际上被修改。</font><font style="vertical-align: inherit;">第一个匹配GoldenCustomer和NationalGoldenCustomer的任何模式; </font><font style="vertical-align: inherit;">相反，后者将被禁止重新匹配GoldenCustomer，但允许匹配SeniorGoldenCustomer模式。</font><font style="vertical-align: inherit;">相反，没有必要修改GoldenCustomer代理，因为它已经被至少一个其他更具体的特征所覆盖。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二种方法，直到usr，是将特征标记为@PropertyReactive。</font><font style="vertical-align: inherit;">属性反应性是启用特征的并且考虑了特征字段映射，因此阻止不必要的传播。</font></font></p>
</div>
<div class="sect3">
<h4 id="_cascading_traits"><a class="anchor" href="index.html#_cascading_traits"></a><a class="link" href="index.html#_cascading_traits"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.3.1。</font><font style="vertical-align: inherit;">层叠特征</font></font></a></h4>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：此功能非常具有实验性，可能会有所变化</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，必须通过物体所穿的所有特征以其原始类型暴露硬场，以防止诸如此类的情况</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
  @Traitable
  <span class="hljs-keyword">name</span> : <span class="hljs-keyword">String</span>
  <span class="hljs-keyword">id</span> : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> trait Customer
  <span class="hljs-keyword">id</span> : <span class="hljs-keyword">String</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> trait Patient
  <span class="hljs-keyword">id</span> : <span class="hljs-keyword">long</span>  // Person can<span class="hljs-string">'t don Patient, or an exception will be thrown
end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一个人同时顾客和患者，那么硬字段id的类型将是不明确的。</font><font style="vertical-align: inherit;">但是，请考虑以下示例，其中GoldenCustomers会引用他们最好的朋友，以便他们也成为客户：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> Person
  @Traitable( <span class="hljs-keyword">logical</span>=<span class="hljs-literal">true</span> )
  bestFriend : Person
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> trait Customer <span class="hljs-keyword">end</span>

<span class="hljs-keyword">declare</span> trait GoldenCustomer extends Customer
  refers : Customer @<span class="hljs-keyword">Alias</span>( <span class="hljs-string">"bestFriend"</span> )
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了@Alias之外，Person-as-GoldenCustomer的最好朋友可能会满足特质GoldenCustomer的要求，前提是他们本身就是某种客户。</font><font style="vertical-align: inherit;">将Person标记为“逻辑上可交易” - 即添加注释@Traitable（logical = true） - 将指示引擎尝试保留逻辑一致性，而不是因为具有不同类型声明的硬字段而抛出异常（Person vs Customer） ）。</font><font style="vertical-align: inherit;">然后，以下操作将起作用：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Person p1 = <span class="hljs-keyword">new</span> Person();<font></font>
Person p2 = <span class="hljs-keyword">new</span> Person();<font></font>
p1.setBestFriend( p2 );<font></font>
...<font></font>
Customer c2 = don( p2, Customer.class );<font></font>
...<font></font>
GoldenCustomer gc1 = don( p1, GoldenCustomer.class );<font></font>
...<font></font>
p1.getBestFriend(); <span class="hljs-comment">// returns p2</span>
gc1.getRefers(); <span class="hljs-comment">// returns c2, a Customer proxy wrapping p2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，到p1变为GoldenCustomer时，p2必须已经成为Customer本身，否则将抛出运行时异常，因为GoldenCustomer的定义会被违反。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，在某些情况下，人们可能想要推断而不是验证p2是客户，因为p1是GoldenCustomer。</font><font style="vertical-align: inherit;">可以通过使用注释@ org.drools.core.factmodel.traits.Trait（logical = true）将Customer标记为“逻辑”来启用此模态。</font><font style="vertical-align: inherit;">在这种情况下，如果p2成为GoldenCustomer时p2不是客户，它将自动穿上特征客户以保持系统的逻辑完整性。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，核心类上的注释为其字段启用动态类型管理，而特征上的注释确定它们是作为完整性约束强制还是动态级联。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">import</span> <span class="hljs-regexp">org.drools.factmodel.traits.*</span>;<font></font>
<font></font>
<span class="hljs-title">declare</span> trait Customer
    <span class="hljs-variable">@Trait</span>( logical = <span class="hljs-built_in">true</span> )<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rule_units"><a class="anchor" href="index.html#_rule_units"></a><a class="link" href="index.html#_rule_units"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4。</font><font style="vertical-align: inherit;">规则单位</font></font></a></h3>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则单元表示将规则集划分为较小单元，将不同数据源绑定到这些单元以及协调单个单元的执行的声明性方法。</font><font style="vertical-align: inherit;">规则单元是数据源，全局变量和规则的集合。</font><font style="vertical-align: inherit;">您可以通过实现</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标记接口</font><font style="vertical-align: inherit;">来定义规则单元，</font><font style="vertical-align: inherit;">如以下示例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleUnit类：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">package</span> org.mypackage.myunit;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdultUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> adultAge;
    <span class="hljs-keyword">private</span> DataSource&lt;Person&gt; persons;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AdultUnit</span><span class="hljs-params">( )</span> </span>{ }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AdultUnit</span><span class="hljs-params">( DataSource&lt;Person&gt; persons, <span class="hljs-keyword">int</span> age )</span> </span>{
        <span class="hljs-keyword">this</span>.persons = persons;
        <span class="hljs-keyword">this</span>.age = age;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// A DataSource of Persons for this RuleUnit</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;Person&gt; <span class="hljs-title">getPersons</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> persons;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// A global variable valid in this RuleUnit</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getAdultAge</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> adultAge;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// --- life cycle methods</span><font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onStart</span><span class="hljs-params">()</span> </span>{<font></font>
        System.out.println(<span class="hljs-string">"AdultUnit started."</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onEnd</span><span class="hljs-params">()</span> </span>{<font></font>
        System.out.println(<span class="hljs-string">"AdultUnit ended."</span>);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font><code>persons</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是Person类型的事实来源。</font><font style="vertical-align: inherit;">它表示工作内存的一部分，它与评估规则单元时使用的特定入口点相关。</font></font><code>adultAge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个全局变量，可从属于此规则单元的所有规则访问。</font><font style="vertical-align: inherit;">最后两个方法是规则单元生命周期的一部分，由引擎调用。</font><font style="vertical-align: inherit;">可以监视RuleUnit的生命周期，覆盖以下方法：</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表10.规则单元生命周期方法</font></font></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用时</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在onStart（）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools发动机开始评估该装置</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结束（）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对该单元的评估终止</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onSuspend（）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单元的执行被暂停（仅适用于runUntilHalt）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的onResume（）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">恢复单位的执行（仅适用于runUntilHalt）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">onYield（RuleUnit其他）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定规则单元中的规则的结果触发了不同单元的执行</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有这些方法在</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">内部都有一个空的默认实现</font><font style="vertical-align: inherit;">，因此它们的实现是可选的。</font><font style="vertical-align: inherit;">此时，可以向此规则单元添加一个或多个规则。</font><font style="vertical-align: inherit;">默认情况下，drl文件中的所有规则都会根据drl文件本身名称的命名约定自动关联到规则单元：如果drl文件位于同一个包中并且具有实现</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">的类的相同名称，则</font><font style="vertical-align: inherit;">所有该drl文件中的规则将隐含属于该单元。</font><font style="vertical-align: inherit;">例如，包org.mypackage.myunit中名为AdultUnit.drl的drl文件中的所有规则将自动成为规则单元的一部分</font></font><code>org.mypackage.myunit.AdultUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以避免使用此命名约定，并使用new </font></font><code>unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">明确声明drl文件中的规则所属的单元</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">单元声明必须始终紧跟在包声明之后，并包含drl文件的规则所属的类的名称（在该包中）。</font><font style="vertical-align: inherit;">例如，</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属于规则单元的规则</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">AdultUnit</span><font></font>
<font></font>
rule <span class="hljs-constant">Adult</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>(age &gt;= adultAge) from persons
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println(<span class="hljs-variable">$p</span>.getName() + <span class="hljs-string">" is adult and greater than "</span> + adultAge);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在同一个KieBase中，不允许在有和没有规则单元的情况下混合规则。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，您可以使用drools 6中引入的oopath表示法以更方便的方式重写相同的模式，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属于使用oopath表示法的规则单元的规则</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">AdultUnit</span><font></font>
<font></font>
rule <span class="hljs-constant">Adult</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> /persons[age &gt;= adultAge]
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println(<span class="hljs-variable">$p</span>.getName() + <span class="hljs-string">" is adult and greater than "</span> + adultAge);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里，从</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleUnit类中包含的具有相同名称</font><font style="vertical-align: inherit;">的规则中检索与规则左侧匹配的人员</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font></font><code>adultAge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量在规则的左侧和右侧使用，其方式与在drl级别定义的全局相同。</font><font style="vertical-align: inherit;">换句话说，</font></font><code>persons</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataSource充当特定的入口点，为工作内存提供支持。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建a的最简单方法</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是使用固定的数据集，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DataSource&lt;Person&gt; persons = DataSource.create( <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mario"</span>, <span class="hljs-number">42</span> ),
                                                <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Marilena"</span>, <span class="hljs-number">44</span> ),
                                                <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Sofia"</span>, <span class="hljs-number">4</span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要执行在给定中定义的一个或多个规则单元</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请创建一个新的</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将其绑定到</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自身。</font><font style="vertical-align: inherit;">例如，</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieBase kbase = kieContainer.getKieBase();<font></font>
RuleUnitExecutor executor = RuleUnitExecutor.create().bind( kbase );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，</font></font><code>AdultUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过将人员传递</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给它并在其上运行来</font><font style="vertical-align: inherit;">创建</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RuleUnit adultUnit = <span class="hljs-keyword">new</span> AdultUnit(persons, <span class="hljs-number">18</span>);<font></font>
executor.run( adultUnit );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这会产生以下输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">org</span><span class="hljs-class">.mypackage</span><span class="hljs-class">.myunit</span><span class="hljs-class">.AdultUnit</span> <span class="hljs-tag">started</span>.
<span class="hljs-tag">Marilena</span> <span class="hljs-tag">is</span> <span class="hljs-tag">adult</span> <span class="hljs-tag">and</span> <span class="hljs-tag">greater</span> <span class="hljs-tag">than</span> 18
<span class="hljs-tag">Mario</span> <span class="hljs-tag">is</span> <span class="hljs-tag">adult</span> <span class="hljs-tag">and</span> <span class="hljs-tag">greater</span> <span class="hljs-tag">than</span> 18
<span class="hljs-tag">org</span><span class="hljs-class">.mypackage</span><span class="hljs-class">.myunit</span><span class="hljs-class">.AdultUnit</span> <span class="hljs-tag">ended</span>.</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是显式创建规则单元实例，更方便的是将要运行的规则单元类传递给执行程序，并让执行程序创建它的实例。</font><font style="vertical-align: inherit;">然后，您可以</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在运行之前</font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">s和其他变量。</font><font style="vertical-align: inherit;">为此，请确保您先前已在执行程序本身上注册了这些变量，以便以下代码生成与前者完全相同的结果：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">executor.bindVariable( <span class="hljs-string">"persons"</span>, persons );<font></font>
        .bindVariable( <span class="hljs-string">"adultAge"</span>, <span class="hljs-number">18</span> );<font></font>
executor.run( AdultUnit.class );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传递给该</font></font><code>RuleUnitExecutor.bindVariable()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">的名称</font><font style="vertical-align: inherit;">在运行时用于将所述变量绑定到具有相同名称的RuleUnit类的字段。</font><font style="vertical-align: inherit;">例如，在前一个例子中，</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向新规则单元注入先前绑定到“people”名称的数据源和绑定到字符串“adultAge”的值18到具有</font></font><code>AdultUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">内相应名称的字段</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">可以覆盖此默认值，并使用</font></font><code>@UnitVar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释</font><font style="vertical-align: inherit;">明确定义规则单元类的每个字段的逻辑绑定名称</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，可以使用替代名称重新定义以下类中的字段绑定：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">package</span> org.mypackage.myunit;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdultUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-annotation">@UnitVar</span>(<span class="hljs-string">"minAge"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> adultAge = <span class="hljs-number">18</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@UnitVar</span>(<span class="hljs-string">"data"</span>)
    <span class="hljs-keyword">private</span> DataSource&lt;Person&gt; persons;<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，您可以使用这些替代名称将变量绑定到执行程序并运行单元：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">executor.bindVariable( <span class="hljs-string">"data"</span>, persons );<font></font>
        .bindVariable( <span class="hljs-string">"minAge"</span>, <span class="hljs-number">18</span> );<font></font>
executor.run( AdultUnit.class );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则单元可以如上所示以被动模式执行（对应于</font></font><code>fireAllRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整个会话上的</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">）或使用</font></font><code>runUntilHalt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等同于会话的</font><font style="vertical-align: inherit;">主动模式</font><font style="vertical-align: inherit;">执行</font></font><code>fireUntilHalt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">至于fireUntilHalt，runUntilHalt是阻塞的，因此必须在一个单独的线程上发布。</font><font style="vertical-align: inherit;">例如，</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">new</span> Thread( () -&gt; executor.runUntilHalt( adultUnit ) ).start();</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_data_sources"><a class="anchor" href="index.html#_data_sources"></a><a class="link" href="index.html#_data_sources"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4.1。</font><font style="vertical-align: inherit;">数据源</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是给定规则单元处理的数据源。</font><font style="vertical-align: inherit;">规则单元可以具有零个或多个数据源，并且在规则单元内声明的每个DataSource对应于规则单元执行器中的不同入口点。</font><font style="vertical-align: inherit;">DataSource可以由不同的单元共享，但在这种情况下，将有许多不同的入口点，每个单元一个，通过它们将插入相同的对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换句话说，它</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代表规则单元的入口点，因此可以在其中插入新事实：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Person mario = <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mario"</span>, <span class="hljs-number">42</span> );<font></font>
FactHandle marioFh = persons.insert( mario );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改事实，可选择指定已修改的属性集以利用属性反应性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">mario.setAge( <span class="hljs-number">43</span> );<font></font>
persons.update( marioFh, mario, <span class="hljs-string">"age"</span> );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或删除它</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">persons.delete( marioFh );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_imperatively_running_and_declaratively_guarding_a_ruleunit"><a class="anchor" href="index.html#_imperatively_running_and_declaratively_guarding_a_ruleunit"></a><a class="link" href="index.html#_imperatively_running_and_declaratively_guarding_a_ruleunit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4.2。</font><font style="vertical-align: inherit;">势在必行地运行并声明性地保护RuleUnit</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如预期的那样，您可以在同一个KIE基础中定义多个规则单元，这些单元可以通过调用或保护彼此的执行以协调的方式工作。</font><font style="vertical-align: inherit;">为了证明这一点，我们假设有以下2个drl文件，每个文件包含属于不同规则单元的规则。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">AdultUnit</span><font></font>
<font></font>
rule <span class="hljs-constant">Adult</span> <span class="hljs-keyword">when</span>
    <span class="hljs-constant">Person</span>(age &gt;= <span class="hljs-number">18</span>, <span class="hljs-variable">$name</span> <span class="hljs-symbol">:</span> name) from persons
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println(<span class="hljs-variable">$name</span> + <span class="hljs-string">" is adult"</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">NotAdultUnit</span><font></font>
<font></font>
rule <span class="hljs-constant">NotAdult</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>(age &lt; <span class="hljs-number">18</span>, <span class="hljs-variable">$name</span> <span class="hljs-symbol">:</span> name) from persons
<span class="hljs-keyword">then</span>
    <span class="hljs-constant">System</span>.out.println(<span class="hljs-variable">$name</span> + <span class="hljs-string">" is NOT adult"</span>);<font></font>
    modify(<span class="hljs-variable">$p</span>) { setAge(<span class="hljs-number">18</span>); }<font></font>
    drools.run( <span class="hljs-constant">AdultUnit</span>.<span class="hljs-keyword">class</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还假设</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些规则</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">构建和一个</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定它的人创建。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RuleUnitExecutor executor = RuleUnitExecutor.create().bind( kbase );<font></font>
DataSource&lt;Person&gt; persons = executor.newDataSource( <span class="hljs-string">"persons"</span>,
                                                     <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mario"</span>, <span class="hljs-number">42</span> ),
                                                     <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Marilena"</span>, <span class="hljs-number">44</span> ),
                                                     <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Sofia"</span>, <span class="hljs-number">4</span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，在这种情况下，我们</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">创建</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在单个语句中将其绑定到“persons”变量。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时尝试执行NotAdultUnit单元，我们获得以下输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Sofia <span class="hljs-keyword">is</span> NOT adult<font></font>
Mario <span class="hljs-keyword">is</span> adult<font></font>
Marilena <span class="hljs-keyword">is</span> adult<font></font>
Sofia <span class="hljs-keyword">is</span> adult</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上，NotAdult规则在评估年龄低于18岁的人“索菲亚”时找到匹配。然后它将她的年龄修改为18并且该语句</font></font><code>drools.run( AdultUnit.class )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">触发执行另一个具有现在可以触发的规则的单位所有的3个人</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着结果中的</font></font><code>drools.run()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句是强制中断规则单元执行并将控制权交给不同规则单元的方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，</font></font><code>drools.guard()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当满足包含该语句的规则的LHS中的条件时，</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">语句允许以声明方式安排另一个规则单元的执行。</font><font style="vertical-align: inherit;">更确切地说，使用该机制，给定规则单元中的规则充当不同单元的保护。</font><font style="vertical-align: inherit;">这意味着，当Drools引擎为防护规则的LHS产生至少一个匹配时，被保护的RuleUnit被认为是活动的。</font><font style="vertical-align: inherit;">当然，RuleUnit可以有多个防护规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们看看它如何与另一个实际例子一起工作。</font><font style="vertical-align: inherit;">假设有一个简单的</font></font><code>BoxOffice</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BoxOffice</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> open;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BoxOffice</span><span class="hljs-params">( <span class="hljs-keyword">boolean</span> open )</span> </span>{
        <span class="hljs-keyword">this</span>.open = open;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isOpen</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> open;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOpen</span><span class="hljs-params">( <span class="hljs-keyword">boolean</span> open )</span> </span>{
        <span class="hljs-keyword">this</span>.open = open;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个</font></font><code>BoxOfficeUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">票房数据源。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BoxOfficeUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-keyword">private</span> DataSource&lt;BoxOffice&gt; boxOffices;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;BoxOffice&gt; <span class="hljs-title">getBoxOffices</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> boxOffices;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们现在介绍，只要至少有一个已开设的票房，就要继续销售活动门票。</font><font style="vertical-align: inherit;">为了达到这个目的，我们定义第二个单元，其中</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含一个人和一个第二</font><font style="vertical-align: inherit;">个单元</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TicketIssuerUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-keyword">private</span> DataSource&lt;Person&gt; persons;
    <span class="hljs-keyword">private</span> DataSource&lt;AdultTicket&gt; tickets;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> List&lt;String&gt; results;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TicketIssuerUnit</span><span class="hljs-params">()</span> </span>{ }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TicketIssuerUnit</span><span class="hljs-params">( DataSource&lt;Person&gt; persons, DataSource&lt;AdultTicket&gt; tickets )</span> </span>{
        <span class="hljs-keyword">this</span>.persons = persons;
        <span class="hljs-keyword">this</span>.tickets = tickets;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;Person&gt; <span class="hljs-title">getPersons</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> persons;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;AdultTicket&gt; <span class="hljs-title">getTickets</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> tickets;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getResults</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> results;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后我们可以在BoxOfficeUnit中定义第一个规则来保护第二个单元。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit;<font></font>
unit <span class="hljs-constant">BoxOfficeUnit</span>;<font></font>
<font></font>
rule <span class="hljs-constant">BoxOfficeIsOpen</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$box</span><span class="hljs-symbol">:</span> /boxOffices[ open ]
<span class="hljs-keyword">then</span>
    drools.guard( <span class="hljs-constant">TicketIssuerUnit</span>.<span class="hljs-keyword">class</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过这种方式，我们实现了我们的预期：通过在某些时候运行BoxOfficeUnit，它还将评估TicketIssuerUnit中定义为的规则</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit;<font></font>
unit <span class="hljs-constant">TicketIssuerUnit</span>;<font></font>
<font></font>
rule <span class="hljs-constant">IssueAdultTicket</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span><span class="hljs-symbol">:</span> /persons[ age &gt;= <span class="hljs-number">18</span> ]
<span class="hljs-keyword">then</span>
    tickets.insert(new <span class="hljs-constant">AdultTicket</span>(<span class="hljs-variable">$p</span>));
<span class="hljs-keyword">end</span>
rule <span class="hljs-constant">RegisterAdultTicket</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$t</span><span class="hljs-symbol">:</span> /tickets
<span class="hljs-keyword">then</span>
    results.add( <span class="hljs-variable">$t</span>.getPerson().getName() );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由BoxOfficeIsOpen规则保护，直到至少存在满足该规则的LHS模式的一组事实。</font><font style="vertical-align: inherit;">换句话说，至少有一个开放票房的存在将保持守卫规则，并且反过来其保护单位也是活跃的，因为在下面的用例中很明显。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DataSource&lt;Person&gt; persons = executor.newDataSource( <span class="hljs-string">"persons"</span> );<font></font>
DataSource&lt;BoxOffice&gt; boxOffices = executor.newDataSource( <span class="hljs-string">"boxOffices"</span> );<font></font>
DataSource&lt;AdultTicket&gt; tickets = executor.newDataSource( <span class="hljs-string">"tickets"</span> );<font></font>
<font></font>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<font></font>
executor.bindVariable( <span class="hljs-string">"results"</span>, list );<font></font>
<font></font>
<span class="hljs-comment">// two open box offices</span>
BoxOffice office1 = <span class="hljs-keyword">new</span> BoxOffice(<span class="hljs-keyword">true</span>);<font></font>
FactHandle officeFH1 = boxOffices.insert( office1 );<font></font>
BoxOffice office2 = <span class="hljs-keyword">new</span> BoxOffice(<span class="hljs-keyword">true</span>);<font></font>
FactHandle officeFH2 = boxOffices.insert( office2 );<font></font>
<font></font>
persons.insert(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Mario"</span>, <span class="hljs-number">40</span>));
<span class="hljs-comment">// fire BoxOfficeIsOpen -&gt; run TicketIssuerUnit -&gt; fire RegisterAdultTicket</span><font></font>
executor.run(BoxOfficeUnit.class);<font></font>
<font></font>
assertEquals( <span class="hljs-number">1</span>, list.size() );<font></font>
assertEquals( <span class="hljs-string">"Mario"</span>, list.get(<span class="hljs-number">0</span>) );<font></font>
list.clear();<font></font>
<font></font>
persons.insert(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Matteo"</span>, <span class="hljs-number">30</span>));<font></font>
executor.run(BoxOfficeUnit.class); <span class="hljs-comment">// fire RegisterAdultTicket</span><font></font>
<font></font>
assertEquals( <span class="hljs-number">1</span>, list.size() );<font></font>
assertEquals( <span class="hljs-string">"Matteo"</span>, list.get(<span class="hljs-number">0</span>) );<font></font>
list.clear();<font></font>
<font></font>
<span class="hljs-comment">// close one box office, the other is still open</span>
office1.setOpen(<span class="hljs-keyword">false</span>);<font></font>
boxOffices.update(officeFH1, office1);<font></font>
persons.insert(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Mark"</span>, <span class="hljs-number">35</span>));<font></font>
executor.run(BoxOfficeUnit.class);<font></font>
<font></font>
assertEquals( <span class="hljs-number">1</span>, list.size() );<font></font>
assertEquals( <span class="hljs-string">"Mark"</span>, list.get(<span class="hljs-number">0</span>) );<font></font>
list.clear();<font></font>
<font></font>
<span class="hljs-comment">// all box offices, are now closed</span>
office2.setOpen(<span class="hljs-keyword">false</span>);<font></font>
boxOffices.update(officeFH2, office2); <span class="hljs-comment">// guarding rule no longer true</span>
persons.insert(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"Edson"</span>, <span class="hljs-number">35</span>));<font></font>
executor.run(BoxOfficeUnit.class); <span class="hljs-comment">// no fire</span><font></font>
<font></font>
assertEquals( <span class="hljs-number">0</span>, list.size() );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruleunit_identity"><a class="anchor" href="index.html#_ruleunit_identity"></a><a class="link" href="index.html#_ruleunit_identity"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4.3。</font><font style="vertical-align: inherit;">RuleUnit身份</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于规则可以保护多个规则单元并且同时可以保护单元然后由多个规则激活，因此有必要清楚地定义给定单元的标识是什么。</font><font style="vertical-align: inherit;">默认情况下，单位的标识只是规则单元类。</font><font style="vertical-align: inherit;">这是在</font><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">的</font></font><code>getUnitIdentity()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认方法中</font><font style="vertical-align: inherit;">编码</font><font style="vertical-align: inherit;">的</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">default</span> Identity <span class="hljs-title">getUnitIdentity</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Identity( getClass() );<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并暗示每个单位都被威胁为单身人士</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了证明这一点，我们假设有一个</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接受任何类型对象</font><font style="vertical-align: inherit;">的简单</font><font style="vertical-align: inherit;">类</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Unit0</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-keyword">private</span> DataSource&lt;Object&gt; input;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;Object&gt; <span class="hljs-title">getInput</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> input;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连同属于该单位的规则，使用2种不同的条件守卫另一个单位。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">Unit0</span><font></font>
<font></font>
rule <span class="hljs-constant">GuardAgeCheck</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$i</span><span class="hljs-symbol">:</span> /input<span class="hljs-comment">#Integer</span>
    <span class="hljs-variable">$s</span><span class="hljs-symbol">:</span> /input<span class="hljs-comment">#String</span>
<span class="hljs-keyword">then</span>
    drools.guard( new <span class="hljs-constant">AgeCheckUnit</span>(<span class="hljs-variable">$i</span>) );<font></font>
    drools.guard( new <span class="hljs-constant">AgeCheckUnit</span>(<span class="hljs-variable">$s</span>.length()) );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第二个</font></font><code>RuleUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的是检查一组人的年龄。</font><font style="vertical-align: inherit;">然后它有一个</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要检查的人，一个minAge变量，对此进行此检查，列表正在累积结果</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AgeCheckUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> minAge;
    <span class="hljs-keyword">private</span> DataSource&lt;Person&gt; persons;
    <span class="hljs-keyword">private</span> List&lt;String&gt; results;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AgeCheckUnit</span><span class="hljs-params">( <span class="hljs-keyword">int</span> minAge )</span> </span>{
        <span class="hljs-keyword">this</span>.minAge = minAge;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource&lt;Person&gt; <span class="hljs-title">getPersons</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> persons;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getMinAge</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> minAge;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getResults</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> results;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而实际执行人员检查的相应规则</font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">package org.mypackage.myunit<font></font>
unit <span class="hljs-constant">AgeCheckUnit</span><font></font>
<font></font>
rule <span class="hljs-constant">CheckAge</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> /persons{ age &gt; minAge }
<span class="hljs-keyword">then</span>
    results.add(<span class="hljs-variable">$p</span>.getName() + <span class="hljs-string">"&gt;"</span> + minAge);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时我们可以创建一个</font></font><code>RuleUnitExecutor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将它绑定到包含这两个单元的KIE基础，并创建2 </font></font><code>DataSource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s以提供相同的单位。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RuleUnitExecutor executor = RuleUnitExecutor.create().bind( kbase );<font></font>
<font></font>
DataSource&lt;Object&gt; input = executor.newDataSource( <span class="hljs-string">"input"</span> );<font></font>
DataSource&lt;Person&gt; persons = executor.newDataSource( <span class="hljs-string">"persons"</span>,
                                                     <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Mario"</span>, <span class="hljs-number">42</span> ),
                                                     <span class="hljs-keyword">new</span> Person( <span class="hljs-string">"Sofia"</span>, <span class="hljs-number">4</span> ) );<font></font>
<font></font>
List&lt;String&gt; results = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<font></font>
executor.bindVariable( <span class="hljs-string">"results"</span>, results );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们现在准备将一些对象插入输入数据源并执行Unit0。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ds.insert(<span class="hljs-string">"test"</span>);<font></font>
ds.insert(<span class="hljs-number">3</span>);<font></font>
ds.insert(<span class="hljs-number">4</span>);<font></font>
executor.run(Unit0.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为执行结果，结果列表将包含以下内容：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">[Sofia&gt;<span class="hljs-number">3</span>, Mario&gt;<span class="hljs-number">3</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如预期的那样，名为AgeCheckUnit的规则单元被视为单例，然后只执行一次，这次</font></font><code>minAge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
等于3（但这不是确定性的）。</font><font style="vertical-align: inherit;">插入到输入数据源中的字符串“test”和Integer 4也可以触发第二次执行，</font></font><code>minAge</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为4，但这不会发生，因为已经评估了具有相同标识的另一个单元。</font><font style="vertical-align: inherit;">要解决这个问题，覆盖</font><font style="vertical-align: inherit;">类中</font><font style="vertical-align: inherit;">的</font></font><code>getUnitIdentity()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法以
 </font></font><code>AgeCheckUnit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其标识中包含变量minAge就足够了。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AgeCheckUnit</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">RuleUnit</span> </span>{<font></font>
<font></font>
    ...<font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Identity <span class="hljs-title">getUnitIdentity</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Identity(getClass(), minAge);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成后，具有minAge 3和4的单元被认为是两个不同的单元，然后进行评估，因此尝试重新运行前一个示例，结果列表现在将包含</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">[Mario&gt;<span class="hljs-number">4</span>, Sofia&gt;<span class="hljs-number">3</span>, Mario&gt;<span class="hljs-number">3</span>]</code></pre>
</div>
</div>
<h1 id="_drools_integration" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools整合</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集成文档</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.commands"><a class="anchor" href="index.html#_ch.commands"></a><a class="link" href="index.html#_ch.commands"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11. Drools命令</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_commandsapisection"><a class="anchor" href="index.html#_commandsapisection"></a><a class="link" href="index.html#_commandsapisection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1。</font><font style="vertical-align: inherit;">API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools命令的XML编组/解组需要使用特殊的类，这些类将在以下部分中描述。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下网址显示了jaxb，xstream和json编组的示例脚本示例：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</font></font></a></p>
</li>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</font></font></a></p>
</li>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD</font></font></a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_xstream"><a class="anchor" href="index.html#_xstream"></a><a class="link" href="index.html#_xstream"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.1。</font><font style="vertical-align: inherit;">XStream的</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用XStream命令编组器，您需要使用DroolsHelperProvider来获取XStream实例。</font><font style="vertical-align: inherit;">我们需要使用它，因为它有命令转换器注册。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编组</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionHelperProviderImpl.newXStreamMarshaller().toXML(command);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解组</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionHelperProviderImpl.newXStreamMarshaller().fromXML(xml)</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_json"><a class="anchor" href="index.html#_json"></a><a class="link" href="index.html#_json"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.2。</font><font style="vertical-align: inherit;">JSON</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编组/解组的JSON API类似于XStream API：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编组</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionHelper.newJSonMarshaller().toXML(command);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解组</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionHelper.newJSonMarshaller().fromXML(xml)</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_jaxb"><a class="anchor" href="index.html#_jaxb"></a><a class="link" href="index.html#_jaxb"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3。</font><font style="vertical-align: inherit;">JAXB</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用JAXB有两种选择，您可以在XSD文件中定义模型，也可以使用POJO模型。</font><font style="vertical-align: inherit;">在这两种情况下，您都必须在JAXBContext中声明您的模型，为此，您需要使用Drools Helper类。</font><font style="vertical-align: inherit;">获得JAXBContext之后，您需要根据需要创建Unmarshaller / Marshaller。</font></font></p>
</div>
<div class="sect4">
<h5 id="_using_an_xsd_file_to_define_the_model"><a class="anchor" href="index.html#_using_an_xsd_file_to_define_the_model"></a><a class="link" href="index.html#_using_an_xsd_file_to_define_the_model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3.1。</font><font style="vertical-align: inherit;">使用XSD文件定义模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在XSD文件中定义模型后，您需要拥有一个将XSD模型添加为资源的知识库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此，必须将XSD文件作为XSD ResourceType添加到KnowledgeBuilder中。</font><font style="vertical-align: inherit;">最后，您可以使用KnowledgeBuilder创建的KnowledgeBase创建JAXBContext  </font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Options xjcOpts = <span class="hljs-keyword">new</span> Options();<font></font>
xjcOpts.setSchemaLanguage(Language.XMLSCHEMA);<font></font>
JaxbConfiguration jaxbConfiguration = KnowledgeBuilderFactory.newJaxbConfiguration( xjcOpts, <span class="hljs-string">"xsd"</span> );<font></font>
kbuilder.add(ResourceFactory.newClassPathResource(<span class="hljs-string">"person.xsd"</span>, getClass()), ResourceType.XSD, jaxbConfiguration);<font></font>
KnowledgeBase kbase = kbuilder.newKnowledgeBase();<font></font>
<font></font>
List&lt;String&gt; classesName = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<font></font>
classesName.add(<span class="hljs-string">"org.drools.compiler.test.Person"</span>);<font></font>
<font></font>
JAXBContext jaxbContext = KnowledgeBuilderHelper.newJAXBContext(classesName.toArray(<span class="hljs-keyword">new</span> String[classesName.size()]), kbase);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_pojo_model"><a class="anchor" href="index.html#_using_a_pojo_model"></a><a class="link" href="index.html#_using_a_pojo_model"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.1.3.2。</font><font style="vertical-align: inherit;">使用POJO模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，您需要使用DroolsJaxbHelperProviderImpl来创建JAXBContext。</font><font style="vertical-align: inherit;">这个类有两个参数：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">classNames：一个List，其中包含要在编组/解组过程中使用的类的规范名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">properties：JAXB自定义属性</font></font></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;String&gt; classNames = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();<font></font>
classNames.add(<span class="hljs-string">"org.drools.compiler.test.Person"</span>);<font></font>
JAXBContext jaxbContext = DroolsJaxbHelperProviderImpl.createDroolsJaxbContext(classNames, <span class="hljs-keyword">null</span>);<font></font>
Marshaller marshaller = jaxbContext.createMarshaller();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_commands_supported"><a class="anchor" href="index.html#_commands_supported"></a><a class="link" href="index.html#_commands_supported"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2。</font><font style="vertical-align: inherit;">支持的命令</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，支持以下命令：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BatchExecutionCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertObjectCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RetractCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ModifyCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetObjectCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertElementsCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FireAllRulesCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StartProcessCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SignalEventCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CompleteWorkItemCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AbortWorkItemCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QueryCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetGlobalCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetGlobalCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetObjectsCommand</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下一个代码片段代码中，我们将使用具有两个字段的POJO org.drools.compiler.test.Person</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name：String</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">年龄：整数</font></font></p>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在接下来的示例中，要编组我们使用下一个代码段的命令：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String xml = BatchExecutionHelper.newXStreamMarshaller().toXML(command);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String xml = BatchExecutionHelper.newJSonMarshaller().toXML(command);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Marshaller marshaller = jaxbContext.createMarshaller();<font></font>
StringWriter xml = <span class="hljs-keyword">new</span> StringWriter();<font></font>
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="hljs-keyword">true</span>);<font></font>
marshaller.marshal(command, xml);</code></pre>
</div>
</div>
</li>
</ul>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_batchexecutioncommand"><a class="anchor" href="index.html#_batchexecutioncommand"></a><a class="link" href="index.html#_batchexecutioncommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.1。</font><font style="vertical-align: inherit;">BatchExecutionCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：包含将发送和执行的命令列表的命令。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表11. BatchExecutionCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抬头</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置要在其上执行命令的KIE会话ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要执行的命令列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
InsertObjectCommand insertObjectCommand = <span class="hljs-keyword">new</span> InsertObjectCommand(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"john"</span>, <span class="hljs-number">25</span>));<font></font>
FireAllRulesCommand fireAllRulesCommand = <span class="hljs-keyword">new</span> FireAllRulesCommand();<font></font>
command.getCommands().add(insertObjectCommand);<font></font>
command.getCommands().add(fireAllRulesCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">insert</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">fire-all-rules</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">[{"<span class="hljs-attribute">insert</span>":<span class="hljs-value">{"<span class="hljs-attribute">object</span>":<span class="hljs-value">{"<span class="hljs-attribute">org.drools.compiler.test.Person</span>":<span class="hljs-value">{"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">25</span></span>}</span>}</span>}</span>},{"<span class="hljs-attribute">fire-all-rules</span>":<span class="hljs-value"><span class="hljs-string">""</span></span>}]</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">insert</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">object</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">object</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">fire-all-rules</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">"-1"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_insertobjectcommand"><a class="anchor" href="index.html#_insertobjectcommand"></a><a class="link" href="index.html#_insertobjectcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.2。</font><font style="vertical-align: inherit;">InsertObjectCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：在KIE会话中插入对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表12. InsertObjectCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要插入的对象</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id标识在对象插入中创建的FactHandle并添加到执行结果中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回object</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean，用于确定是否必须在执行结果中返回该对象。</font><font style="vertical-align: inherit;">默认值：true</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入口点</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入的入口点</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;Command&gt; cmds = ArrayList&lt;Command&gt;();<font></font>
<font></font>
Command insertObjectCommand = CommandFactory.newInsert(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"john"</span>, <span class="hljs-number">25</span>), <span class="hljs-string">"john"</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">null</span>);<font></font>
cmds.add( insertObjectCommand );<font></font>
<font></font>
BatchExecutionCommand command = CommandFactory.createBatchExecution(cmds, <span class="hljs-string">"ksession1"</span> );</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">insert</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"john"</span> <span class="hljs-attribute">entry-point</span>=<span class="hljs-value">"my stream"</span> <span class="hljs-attribute">return-object</span>=<span class="hljs-value">"false"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">insert</span>":<span class="hljs-value">{"<span class="hljs-attribute">entry-point</span>":<span class="hljs-value"><span class="hljs-string">"my stream"</span></span>, "<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>,"<span class="hljs-attribute">return-object</span>":<span class="hljs-value"><span class="hljs-literal">false</span></span>,"<span class="hljs-attribute">object</span>":<span class="hljs-value">{"<span class="hljs-attribute">org.drools.compiler.test.Person</span>":<span class="hljs-value">{"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">25</span></span>}</span>}</span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">insert</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"john"</span> <span class="hljs-attribute">entry-point</span>=<span class="hljs-value">"my stream"</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">object</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">object</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">insert</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_retractcommand"><a class="anchor" href="index.html#_retractcommand"></a><a class="link" href="index.html#_retractcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.3。</font><font style="vertical-align: inherit;">RetractCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：从KIE会话中撤回对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表13. RetractCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FactHandle与要收回的对象相关联</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建：我们有两个选项，输出结果相同：</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从字符串创建Fact Handle</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
RetractCommand retractCommand = <span class="hljs-keyword">new</span> RetractCommand();<font></font>
retractCommand.setFactHandleFromString(<span class="hljs-string">"123:234:345:456:567"</span>);<font></font>
command.getCommands().add(retractCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置插入对象时收到的事件句柄</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
RetractCommand retractCommand = <span class="hljs-keyword">new</span> RetractCommand(factHandle);<font></font>
command.getCommands().add(retractCommand);</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">retract</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">retract</span>":<span class="hljs-value">{"<span class="hljs-attribute">fact-handle</span>":<span class="hljs-value"><span class="hljs-string">"0:234:345:456:567"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">retract</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_modifycommand"><a class="anchor" href="index.html#_modifycommand"></a><a class="link" href="index.html#_modifycommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.4。</font><font style="vertical-align: inherit;">ModifyCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您修改KIE会话中先前插入的对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表14. ModifyCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FactHandle与要收回的对象相关联</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制定者</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setter对象修改列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
ModifyCommand modifyCommand = <span class="hljs-keyword">new</span> ModifyCommand();<font></font>
modifyCommand.setFactHandleFromString(<span class="hljs-string">"123:234:345:456:567"</span>);<font></font>
List&lt;Setter&gt; setters = <span class="hljs-keyword">new</span> ArrayList&lt;Setter&gt;();<font></font>
setters.add(<span class="hljs-keyword">new</span> SetterImpl(<span class="hljs-string">"age"</span>, <span class="hljs-string">"30"</span>));<font></font>
modifyCommand.setSetters(setters);<font></font>
command.getCommands().add(modifyCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">modify</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">set</span> <span class="hljs-attribute">accessor</span>=<span class="hljs-value">"age"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">modify</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">modify</span>":<span class="hljs-value">{"<span class="hljs-attribute">fact-handle</span>":<span class="hljs-value"><span class="hljs-string">"0:234:345:456:567"</span></span>,"<span class="hljs-attribute">setters</span>":<span class="hljs-value">{"<span class="hljs-attribute">accessor</span>":<span class="hljs-value"><span class="hljs-string">"age"</span></span>,"<span class="hljs-attribute">value</span>":<span class="hljs-value"><span class="hljs-number">30</span></span>}</span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">modify</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">set</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"30"</span> <span class="hljs-attribute">accessor</span>=<span class="hljs-value">"age"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">modify</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getobjectcommand"><a class="anchor" href="index.html#_getobjectcommand"></a><a class="link" href="index.html#_getobjectcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.5。</font><font style="vertical-align: inherit;">GetObjectCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：用于从KIE会话中获取对象</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表15. GetObjectCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">factHandle</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FactHandle与要收回的对象相关联</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id标识在对象插入中创建的FactHandle并添加到执行结果中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
GetObjectCommand getObjectCommand = <span class="hljs-keyword">new</span> GetObjectCommand();<font></font>
getObjectCommand.setFactHandleFromString(<span class="hljs-string">"123:234:345:456:567"</span>);<font></font>
getObjectCommand.setOutIdentifier(<span class="hljs-string">"john"</span>);<font></font>
command.getCommands().add(getObjectCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">get-object</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"john"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">get-object</span>":<span class="hljs-value">{"<span class="hljs-attribute">fact-handle</span>":<span class="hljs-value"><span class="hljs-string">"0:234:345:456:567"</span></span>,"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">get-object</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"john"</span> <span class="hljs-attribute">fact-handle</span>=<span class="hljs-value">"0:234:345:456:567"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_insertelementscommand"><a class="anchor" href="index.html#_insertelementscommand"></a><a class="link" href="index.html#_insertelementscommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.6。</font><font style="vertical-align: inherit;">InsertElementsCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：用于插入对象列表。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表16. InsertElementsCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在KIE会话中插入的对象列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Id标识在对象插入中创建的FactHandle并添加到执行结果中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回object</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boolean，用于确定是否必须在执行结果中返回该对象。</font><font style="vertical-align: inherit;">默认值：true</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">入口点</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入的入口点</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;Command&gt; cmds = ArrayList&lt;Command&gt;();<font></font>
<font></font>
List&lt;Object&gt; objects = <span class="hljs-keyword">new</span> ArrayList&lt;Object&gt;();<font></font>
objects.add(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"john"</span>, <span class="hljs-number">25</span>));<font></font>
objects.add(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"sarah"</span>, <span class="hljs-number">35</span>));<font></font>
<font></font>
Command insertElementsCommand = CommandFactory.newInsertElements( objects );<font></font>
cmds.add( insertElementsCommand );<font></font>
<font></font>
BatchExecutionCommand command = CommandFactory.createBatchExecution(cmds, <span class="hljs-string">"ksession1"</span> );</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">insert-elements</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>sarah<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">insert-elements</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">insert-elements</span>":<span class="hljs-value">{"<span class="hljs-attribute">objects</span>":<span class="hljs-value">[{"<span class="hljs-attribute">containedObject</span>":<span class="hljs-value">{"<span class="hljs-attribute">@class</span>":<span class="hljs-value"><span class="hljs-string">"org.drools.compiler.test.Person"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">25</span></span>}</span>},{"<span class="hljs-attribute">containedObject</span>":<span class="hljs-value">{"<span class="hljs-attribute">@class</span>":<span class="hljs-value"><span class="hljs-string">"Person"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"sarah"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">35</span></span>}</span>}]</span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">insert-elements</span> <span class="hljs-attribute">return-objects</span>=<span class="hljs-value">"true"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">list</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">element</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">element</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>35<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>sarah<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">element</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">list</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">insert-elements</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fireallrulescommand"><a class="anchor" href="index.html#_fireallrulescommand"></a><a class="link" href="index.html#_fireallrulescommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.7。</font><font style="vertical-align: inherit;">FireAllRulesCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许执行创建的规则激活。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表17. FireAllRulesCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要执行的最大规则激活次数。</font><font style="vertical-align: inherit;">默认值为-1，不会对执行施加任何限制</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加对执行结果触发的规则激活次数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">agendaFilter</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许使用议程过滤器执行规则</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
FireAllRulesCommand fireAllRulesCommand = <span class="hljs-keyword">new</span> FireAllRulesCommand();<font></font>
fireAllRulesCommand.setMax(<span class="hljs-number">10</span>);<font></font>
fireAllRulesCommand.setOutIdentifier(<span class="hljs-string">"firedActivations"</span>);<font></font>
command.getCommands().add(fireAllRulesCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">fire-all-rules</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">"10"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"firedActivations"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">fire-all-rules</span>":<span class="hljs-value">{"<span class="hljs-attribute">max</span>":<span class="hljs-value"><span class="hljs-number">10</span></span>,"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"firedActivations"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">fire-all-rules</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"firedActivations"</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">"10"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_startprocesscommand"><a class="anchor" href="index.html#_startprocesscommand"></a><a class="link" href="index.html#_startprocesscommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.8。</font><font style="vertical-align: inherit;">StartProcessCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您使用ID启动进程。</font><font style="vertical-align: inherit;">您还可以传递要插入的参数和初始数据。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表18. StartProcessCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的ProcessID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要启动的进程的ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Map &lt;String，Object&gt;用于在流程启动时传递参数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在进程启动之前要在KIE会话中插入的对象列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
StartProcessCommand startProcessCommand = <span class="hljs-keyword">new</span> StartProcessCommand();<font></font>
startProcessCommand.setProcessId(<span class="hljs-string">"org.drools.task.processOne"</span>);<font></font>
command.getCommands().add(startProcessCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">start-process</span> <span class="hljs-attribute">processId</span>=<span class="hljs-value">"org.drools.task.processOne"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">start-process</span>":<span class="hljs-value">{"<span class="hljs-attribute">process-id</span>":<span class="hljs-value"><span class="hljs-string">"org.drools.task.processOne"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">start-process</span> <span class="hljs-attribute">processId</span>=<span class="hljs-value">"org.drools.task.processOne"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">parameter</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">start-process</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_signaleventcommand"><a class="anchor" href="index.html#_signaleventcommand"></a><a class="link" href="index.html#_signaleventcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.9。</font><font style="vertical-align: inherit;">SignalEventCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：发送信号事件。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表19. SignalEventCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件类型</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processInstanceId</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
SignalEventCommand signalEventCommand = <span class="hljs-keyword">new</span> SignalEventCommand();<font></font>
signalEventCommand.setProcessInstanceId(<span class="hljs-number">1001</span>);<font></font>
signalEventCommand.setEventType(<span class="hljs-string">"start"</span>);<font></font>
signalEventCommand.setEvent(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"john"</span>, <span class="hljs-number">25</span>));<font></font>
command.getCommands().add(signalEventCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">signal-event</span> <span class="hljs-attribute">process-instance-id</span>=<span class="hljs-value">"1001"</span> <span class="hljs-attribute">event-type</span>=<span class="hljs-value">"start"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.pipeline.camel.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.pipeline.camel.Person</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">signal-event</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">signal-event</span>":<span class="hljs-value">{"<span class="hljs-attribute">process-instance-id</span>":<span class="hljs-value"><span class="hljs-number">1001</span></span>,"<span class="hljs-attribute">@event-type</span>":<span class="hljs-value"><span class="hljs-string">"start"</span></span>,"<span class="hljs-attribute">event-type</span>":<span class="hljs-value"><span class="hljs-string">"start"</span></span>,"<span class="hljs-attribute">object</span>":<span class="hljs-value">{"<span class="hljs-attribute">org.drools.pipeline.camel.Person</span>":<span class="hljs-value">{"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"john"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">25</span></span>}</span>}</span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">signal-event</span> <span class="hljs-attribute">event-type</span>=<span class="hljs-value">"start"</span> <span class="hljs-attribute">process-instance-id</span>=<span class="hljs-value">"1001"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">event</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>john<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">event</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">signal-event</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_completeworkitemcommand"><a class="anchor" href="index.html#_completeworkitemcommand"></a><a class="link" href="index.html#_completeworkitemcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.10。</font><font style="vertical-align: inherit;">CompleteWorkItemCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您完成WorkItem。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表20. CompleteWorkItemCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">workItemId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要完成的WorkItem的ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
CompleteWorkItemCommand completeWorkItemCommand = <span class="hljs-keyword">new</span> CompleteWorkItemCommand();<font></font>
completeWorkItemCommand.setWorkItemId(<span class="hljs-number">1001</span>);<font></font>
command.getCommands().add(completeWorkItemCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">complete-work-item</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1001"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">complete-work-item</span>":<span class="hljs-value">{"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-number">1001</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">complete-work-item</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1001"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_abortworkitemcommand"><a class="anchor" href="index.html#_abortworkitemcommand"></a><a class="link" href="index.html#_abortworkitemcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.11。</font><font style="vertical-align: inherit;">AbortWorkItemCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您中止WorkItem。</font><font style="vertical-align: inherit;">与session.getWorkItemManager（）相同.abortWorkItem（workItemId）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表21. AbortWorkItemCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">workItemId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要完成的WorkItem的ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
AbortWorkItemCommand abortWorkItemCommand = <span class="hljs-keyword">new</span> AbortWorkItemCommand();<font></font>
abortWorkItemCommand.setWorkItemId(<span class="hljs-number">1001</span>);<font></font>
command.getCommands().add(abortWorkItemCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">abort-work-item</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1001"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">abort-work-item</span>":<span class="hljs-value">{"<span class="hljs-attribute">id</span>":<span class="hljs-value"><span class="hljs-number">1001</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">abort-work-item</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1001"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_querycommand"><a class="anchor" href="index.html#_querycommand"></a><a class="link" href="index.html#_querycommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.12。</font><font style="vertical-align: inherit;">QueryCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：执行在KIE库中定义的查询。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表22. QueryCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询结果的标识符。</font><font style="vertical-align: inherit;">查询结果将添加到具有此标识符的执行结果中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要作为查询参数传递的对象列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
QueryCommand queryCommand = <span class="hljs-keyword">new</span> QueryCommand();<font></font>
queryCommand.setName(<span class="hljs-string">"persons"</span>);<font></font>
queryCommand.setOutIdentifier(<span class="hljs-string">"persons"</span>);<font></font>
command.getCommands().add(queryCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">query</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"persons"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"persons"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">query</span>":<span class="hljs-value">{"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"persons"</span></span>,"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"persons"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">query</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"persons"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"persons"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_setglobalcommand"><a class="anchor" href="index.html#_setglobalcommand"></a><a class="link" href="index.html#_setglobalcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.13。</font><font style="vertical-align: inherit;">SetGlobalCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您设置全局。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表23. SetGlobalCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">识别码</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基础中定义的全局标识符</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要设置为全局的对象</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个布尔值，用于将设置的全局结果添加或不添加到执行结果中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局执行结果的标识符</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
SetGlobalCommand setGlobalCommand = <span class="hljs-keyword">new</span> SetGlobalCommand();<font></font>
setGlobalCommand.setIdentifier(<span class="hljs-string">"helper"</span>);<font></font>
setGlobalCommand.setObject(<span class="hljs-keyword">new</span> Person(<span class="hljs-string">"kyle"</span>, <span class="hljs-number">30</span>));<font></font>
setGlobalCommand.setOut(<span class="hljs-keyword">true</span>);<font></font>
setGlobalCommand.setOutIdentifier(<span class="hljs-string">"output"</span>);<font></font>
command.getCommands().add(setGlobalCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">set-global</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"helper"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"output"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>kyle<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">org.drools.compiler.test.Person</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">set-global</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">set-global</span>":<span class="hljs-value">{"<span class="hljs-attribute">identifier</span>":<span class="hljs-value"><span class="hljs-string">"helper"</span></span>,"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"output"</span></span>,"<span class="hljs-attribute">object</span>":<span class="hljs-value">{"<span class="hljs-attribute">org.drools.compiler.test.Person</span>":<span class="hljs-value">{"<span class="hljs-attribute">name</span>":<span class="hljs-value"><span class="hljs-string">"kyle"</span></span>,"<span class="hljs-attribute">age</span>":<span class="hljs-value"><span class="hljs-number">30</span></span>}</span>}</span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">set-global</span> <span class="hljs-attribute">out</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"output"</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"helper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">object</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"person"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">age</span>&gt;</span>30<span class="hljs-tag">&lt;/<span class="hljs-title">age</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>kyle<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">object</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">set-global</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getglobalcommand"><a class="anchor" href="index.html#_getglobalcommand"></a><a class="link" href="index.html#_getglobalcommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.14。</font><font style="vertical-align: inherit;">GetGlobalCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：允许您获取以前定义的全局。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表24. GetGlobalCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">识别码</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基础中定义的全局标识符</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在执行结果中使用的标识符</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
GetGlobalCommand getGlobalCommand = <span class="hljs-keyword">new</span> GetGlobalCommand();<font></font>
getGlobalCommand.setIdentifier(<span class="hljs-string">"helper"</span>);<font></font>
getGlobalCommand.setOutIdentifier(<span class="hljs-string">"helperOutput"</span>);<font></font>
command.getCommands().add(getGlobalCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">get-global</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"helper"</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"helperOutput"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">get-global</span>":<span class="hljs-value">{"<span class="hljs-attribute">identifier</span>":<span class="hljs-value"><span class="hljs-string">"helper"</span></span>,"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"helperOutput"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">get-global</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"helperOutput"</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"helper"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_getobjectscommand"><a class="anchor" href="index.html#_getobjectscommand"></a><a class="link" href="index.html#_getobjectscommand"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.2.15。</font><font style="vertical-align: inherit;">GetObjectsCommand</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述：以集合的形式返回当前会话中的所有对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表25. GetObjectsCommand属性</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ObjectFilter的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个ObjectFilter，用于过滤从当前会话返回的对象</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outIdentifier</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在执行结果中使用的标识符</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">假</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令创建</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BatchExecutionCommand command = <span class="hljs-keyword">new</span> BatchExecutionCommand();<font></font>
command.setLookup(<span class="hljs-string">"ksession1"</span>);<font></font>
GetObjectsCommand getObjectsCommand = <span class="hljs-keyword">new</span> GetObjectsCommand();<font></font>
getObjectsCommand.setOutIdentifier(<span class="hljs-string">"objects"</span>);<font></font>
command.getCommands().add(getObjectsCommand);</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML输出</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream的</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">get-objects</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"objects"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs json">{"<span class="hljs-attribute">batch-execution</span>":<span class="hljs-value">{"<span class="hljs-attribute">lookup</span>":<span class="hljs-value"><span class="hljs-string">"ksession1"</span></span>,"<span class="hljs-attribute">commands</span>":<span class="hljs-value">{"<span class="hljs-attribute">get-objects</span>":<span class="hljs-value">{"<span class="hljs-attribute">out-identifier</span>":<span class="hljs-value"><span class="hljs-string">"objects"</span></span>}</span>}</span>}</span>}</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAXB</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">batch-execution</span> <span class="hljs-attribute">lookup</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">get-objects</span> <span class="hljs-attribute">out-identifier</span>=<span class="hljs-value">"objects"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">batch-execution</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cdichapter"><a class="anchor" href="index.html#_cdichapter"></a><a class="link" href="index.html#_cdichapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. CDI</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2"><a class="anchor" href="index.html#_introduction_2"></a><a class="link" href="index.html#_introduction_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></h3>
<div class="paragraph">
<p><a href="http://www.cdi-spec.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CDI</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，上下文和依赖注入是Java规范，它为应用程序提供声明性控件和结构。</font><font style="vertical-align: inherit;">KIE可以使用它来自动实例化和绑定事物，而无需使用编程API。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_annotations"><a class="anchor" href="index.html#_annotations"></a><a class="link" href="index.html#_annotations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2。</font><font style="vertical-align: inherit;">注释</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KContainer，@ KBase和@KSession都支持可选的'name'属性。</font><font style="vertical-align: inherit;">CDI通常在注入时执行“getOrCreate”，所有注入都会为同一组注释接收相同的实例。</font><font style="vertical-align: inherit;">'name'注释强制为每个名称强制一个唯一的实例，尽管该名称的所有实例都是identity equals。</font></font></p>
</div>
<div class="sect3">
<h4 id="__kreleaseid"><a class="anchor" href="index.html#__kreleaseid"></a><a class="link" href="index.html#__kreleaseid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2.1。</font><font style="vertical-align: inherit;">@KReleaseId</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于将实例绑定到特定版本的KieModule。</font><font style="vertical-align: inherit;">如果kie-ci在类路径上，这将自动解决依赖关系，从远程存储库下载。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__kcontainer"><a class="anchor" href="index.html#__kcontainer"></a><a class="link" href="index.html#__kcontainer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2.2。</font><font style="vertical-align: inherit;">@KContainer</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KContainer是可选的，因为它可以通过使用@Inject和变量类型推理来检测和添加。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入Classpath KieContainer</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为动态KieModule注入KieContainer</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KReleaseId</span>(groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为Dynamic KieModule注入名为KieContainer的注入</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KContainer</span>(name = <span class="hljs-string">"kc1"</span>)
<span class="hljs-annotation">@KReleaseId</span>(groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__kbase"><a class="anchor" href="index.html#__kbase"></a><a class="link" href="index.html#__kbase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2.3。</font><font style="vertical-align: inherit;">@KBase</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KBase是可选的，因为它可以通过使用@Inject和变量类型推断来检测和添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml文件指定KieBase的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Dynamic KieModule中注入默认KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v10;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v10;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用'name'属性强制'jar1.KBase1'KieBase的新实例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"kbase1"</span>, name=<span class="hljs-string">"kb1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1kb1;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"kbase1"</span>, name=<span class="hljs-string">"kb2"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1kb2;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__ksession_for_kiesession"><a class="anchor" href="index.html#__ksession_for_kiesession"></a><a class="link" href="index.html#__ksession_for_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2.4。</font><font style="vertical-align: inherit;">@KSession for KieSession</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KSession是可选的，因为它可以通过使用@Inject和变量类型推断来检测和添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性并从kmodule.xml文件指定KieSession的名称</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入默认KieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从动态KieModule中注入默认KieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv10;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv11;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用'name'属性强制'jar1.KBase1'KieSession的新实例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession1ks1<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks2"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession1ks2</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__ksession_for_statelesskiesession"><a class="anchor" href="index.html#__ksession_for_statelesskiesession"></a><a class="link" href="index.html#__ksession_for_statelesskiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.2.5。</font><font style="vertical-align: inherit;">@KSession for StatelessKieSession</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KSession是可选的，因为它可以通过使用@Inject和变量类型推断来检测和添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml文件中指定KieSession的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Dynamic KieModule中注入Default StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksessionv10;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksessionv11;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用'name'属性强制'jar1.KBase1'StatelessKieSession的新实例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession1ks1<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks2"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession1ks2</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_api_example_comparison"><a class="anchor" href="index.html#_api_example_comparison"></a><a class="link" href="index.html#_api_example_comparison"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.3。</font><font style="vertical-align: inherit;">API示例比较</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CDI可以将实例注入字段，甚至可以将它们作为参数传递。</font><font style="vertical-align: inherit;">在该示例中，使用场注入。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名为KieSession的CDI示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)<font></font>
KieSession kSession;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">go</span><span class="hljs-params">(PrintStream out)</span> </span>{<font></font>
    kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
    kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
    kSession.fireAllRules();<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这比API方法更少的代码和更具声明性。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名为KieSession的API等效示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">go</span><span class="hljs-params">(PrintStream out)</span> </span>{<font></font>
    KieServices ks = KieServices.Factory.get();<font></font>
    KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
<font></font>
    KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
    kSession.setGlobal(<span class="hljs-string">"out"</span>, out);<font></font>
    kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
    kSession.fireAllRules();<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.kie.spring"><a class="anchor" href="index.html#_ch.kie.spring"></a><a class="link" href="index.html#_ch.kie.spring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.与Spring集成</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_important_changes_for_drools_6_0"><a class="anchor" href="index.html#_important_changes_for_drools_6_0"></a><a class="link" href="index.html#_important_changes_for_drools_6_0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.1。</font><font style="vertical-align: inherit;">Drools 6.0的重要变化</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Spring集成经历了Drools 6.0变更的完整改造。</font><font style="vertical-align: inherit;">以下是一些重大变化</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Spring的推荐前缀已经从'drools：'变为'kie：'</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.0中的新顶级标签</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：KMODULE</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：import（从6.2版开始）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：releaseId（从6.2版开始）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下标记不再作为顶级标记有效。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：kbase  - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：kmodule</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签的</font><font style="vertical-align: inherit;">一个孩子</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：ksession  - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie：kbase</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签的</font><font style="vertical-align: inherit;">孩子</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从以前版本Drools 5.x中删除了标签</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滴料：资源</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滴料：资源</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">滴料：格</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">口水：网格节点</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_integration_with_drools_expert"><a class="anchor" href="index.html#_integration_with_drools_expert"></a><a class="link" href="index.html#_integration_with_drools_expert"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2。</font><font style="vertical-align: inherit;">与Drools Expert集成</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本节中，我们将解释</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称空间。</font></font></p>
</div>
<div class="sect3">
<h4 id="_kiemodule"><a class="anchor" href="index.html#_kiemodule"></a><a class="link" href="index.html#_kiemodule"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.1。</font><font style="vertical-align: inherit;">KieModule</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;纪伊：KMODULE&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义KieBase的集合和相关联的KieSession的。</font><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KMODULE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签有一个强制参数“ID”。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表26.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bean的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是从其他bean引用的名称。</font><font style="vertical-align: inherit;">标准Spring ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KMODULE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码只能包含以下标记为儿童。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：kbase</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关kmodule需求的详细说明，请参阅Drools Expert文档中kmodule.xml的文档。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kiebase_3"><a class="anchor" href="index.html#_kiebase_3"></a><a class="link" href="index.html#_kiebase_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.2。</font><font style="vertical-align: inherit;">KieBase</font></font></a></h4>
<div class="sect4">
<h5 id="__kie_kbase_s_parameters_as_attributes"><a class="anchor" href="index.html#__kie_kbase_s_parameters_as_attributes"></a><a class="link" href="index.html#__kie_kbase_s_parameters_as_attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.2.1。</font><font style="vertical-align: inherit;">&lt;kie：kbase&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表27.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieBase的名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以逗号分隔的资源包列表，包含在此kbase中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要包含的kbase名称。</font><font style="vertical-align: inherit;">来自相应kbase的所有资源都包含在此kbase中。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值（TRUE / FALSE）。</font><font style="vertical-align: inherit;">默认kbase，如果未提供，则假定为FALSE</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原型| </font><font style="vertical-align: inherit;">单身。</font><font style="vertical-align: inherit;">如果没有提供假设是单身（默认）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eventProcessingMode</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件处理模式。</font><font style="vertical-align: inherit;">有效选项是STREAM，CLOUD</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equalsBehavior</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效选项是IDENTITY，EQUALITY</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">declarativeAgenda</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效选项有启用，禁用，true，false</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_a_em_kbase_em_tag_can_contain_only_the_followingtags_as_children"><a class="anchor" href="index.html#_a_em_kbase_em_tag_can_contain_only_the_followingtags_as_children"></a><a class="link" href="index.html#_a_em_kbase_em_tag_can_contain_only_the_followingtags_as_children"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.2.2。</font><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kbase</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签只能包含followingtags儿童。</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：ksession</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="__kie_kbase_s_definition_example"><a class="anchor" href="index.html#__kie_kbase_s_definition_example"></a><a class="link" href="index.html#__kie_kbase_s_definition_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.2.3。</font><font style="vertical-align: inherit;">&lt;kie：kbase&gt;的定义示例</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule可以包含多个（1..n）kbase元素。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例171. kbase定义示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sample_module"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.drools.spring.sample"</span>&gt;</span><font></font>
     ...<font></font>
   <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spring_bean_scope_for_kiebase_and_kiesession"><a class="anchor" href="index.html#_spring_bean_scope_for_kiebase_and_kiesession"></a><a class="link" href="index.html#_spring_bean_scope_for_kiebase_and_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.2.4。</font><font style="vertical-align: inherit;">Spring Bean Scope（适用于KieBase和KieSession）</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在定义KieBase或KieSession时，您可以选择声明该bean的范围。</font><font style="vertical-align: inherit;">例如，要在每次需要时强制Spring生成一个新的bean实例，您应该将bean的scope属性声明为'prototype'。</font><font style="vertical-align: inherit;">类似的方法如果你希望每次需要Spring时返回相同的bean实例，你应该将bean的scope属性声明为'singleton'。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_important_note"><a class="anchor" href="index.html#_important_note"></a><a class="link" href="index.html#_important_note"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.3。</font><font style="vertical-align: inherit;">重要的提示</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了正确初始化kmodule对象（kbase / ksession），对于类型</font></font><code>org.kie.spring.KModuleBeanFactoryPostProcessor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>org.kie.spring.annotations.KModuleAnnotationPostProcessor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">的bean是必需的</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子172.常规kie-spring后处理器bean定义</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例173.使用注释时的kie-spring post processorbean定义</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.annotations.KModuleAnnotationPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有org.kie.spring.KModuleBeanFactoryPostProcessor或org.kie.spring.annotations.KModuleAnnotationPostProcessor bean定义，kie-spring集成将无法工作。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_kiesessions"><a class="anchor" href="index.html#_kiesessions"></a><a class="link" href="index.html#_kiesessions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.4。</font><font style="vertical-align: inherit;">KieSessions</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：ksession&gt;元素定义了KieSessions。</font><font style="vertical-align: inherit;">相同的标记用于定义Stateful（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.api.runtime.KieSession</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和Stateless（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.api.runtime.StatelessKieSession</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）会话。</font></font></p>
</div>
<div class="sect4">
<h5 id="__kie_ksession_s_parameters_as_attributes"><a class="anchor" href="index.html#__kie_ksession_s_parameters_as_attributes"></a><a class="link" href="index.html#__kie_ksession_s_parameters_as_attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.4.1。</font><font style="vertical-align: inherit;">&lt;kie：ksession&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表28.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ksession的名字。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
                 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无国籍？</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此属性为空或缺少，则假定会话的类型为Stateful。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是默认会话吗？</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原型| </font><font style="vertical-align: inherit;">单身。</font><font style="vertical-align: inherit;">如果没有提供假设是单身（默认）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clockType</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REALTIME或PSEUDO</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">听众-REF</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定对事件侦听器组的引用（请参阅下面的</font></font><a href="index.html#_kie_grouping_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“定义一组侦听器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分）。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例174. ksession定义例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sample-kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample3"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample3"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_spring_bean_scope_for_kiebase_and_kiesession_2"><a class="anchor" href="index.html#_spring_bean_scope_for_kiebase_and_kiesession_2"></a><a class="link" href="index.html#_spring_bean_scope_for_kiebase_and_kiesession_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.4.2。</font><font style="vertical-align: inherit;">Spring Bean Scope（适用于KieBase和KieSession）</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在定义KieBase或KieSession时，您可以选择声明该bean的范围。</font><font style="vertical-align: inherit;">例如，要在每次需要时强制Spring生成一个新的bean实例，您应该将bean的scope属性声明为'prototype'。</font><font style="vertical-align: inherit;">类似的方法如果你希望每次需要Spring时返回相同的bean实例，你应该将bean的scope属性声明为'singleton'。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kie_releaseid"><a class="anchor" href="index.html#_kie_releaseid"></a><a class="link" href="index.html#_kie_releaseid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.5。</font><font style="vertical-align: inherit;">纪伊：ReleaseId</font></font></a></h4>
<div class="sect4">
<h5 id="__kie_releaseid_s_parameters_as_attributes"><a class="anchor" href="index.html#__kie_releaseid_s_parameters_as_attributes"></a><a class="link" href="index.html#__kie_releaseid_s_parameters_as_attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.5.1。</font><font style="vertical-align: inherit;">&lt;kie：releaseId&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表29.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bean的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是从其他bean引用的名称。</font><font style="vertical-align: inherit;">标准Spring ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的groupId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的groupId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的artifactId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的artifactId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的版本</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例175. releaseId定义示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"beanId"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.kie.spring"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-artifactId"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0.0-SNAPSHOT"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kie_import"><a class="anchor" href="index.html#_kie_import"></a><a class="link" href="index.html#_kie_import"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.6。</font><font style="vertical-align: inherit;">纪伊：进口</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从版本6.2开始，kie-spring允许从类路径中找到的kjar导入kie对象。</font><font style="vertical-align: inherit;">目前支持两种导入kie对象的模式。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">releaseId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用Bean ID。</font><font style="vertical-align: inherit;">标准Spring ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enableScanner</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用扫描仪。</font><font style="vertical-align: inherit;">仅当指定了'releaseId'时才使用此属性。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scannerInterval</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描间隔，以毫秒为单位。</font><font style="vertical-align: inherit;">仅当指定了'releaseId'时才使用此属性。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_global_import"><a class="anchor" href="index.html#_global_import"></a><a class="link" href="index.html#_global_import"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.6.1。</font><font style="vertical-align: inherit;">全球进口</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进口</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签将迫使所有的罐子的自动扫描的类路径上，初始化纪伊对象（Kbase / KSessions）和这些对象导入到弹簧上下文。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球进口</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> /&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_specific_import_releaseid"><a class="anchor" href="index.html#_specific_import_releaseid"></a><a class="link" href="index.html#_specific_import_releaseid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.6.2。</font><font style="vertical-align: inherit;">特定导入 -  ReleaseId</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在导入标记上</font><font style="vertical-align: inherit;">使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">releaseId-ref</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性将初始化特定的Kie对象（Kbase / KSessions）并将这些对象导入到spring上下文中。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用releaseId导入Kie对象</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> <span class="hljs-attribute">releaseId-ref</span>=<span class="hljs-value">"namedKieSession"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"namedKieSession"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.drools"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-kiesession"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"7.12.0.Final"</span>/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为使用特定releaseId导入的KieBase启用Kie扫描功能。</font><font style="vertical-align: inherit;">此功能目前不适用于全球导入。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用releaseId导入Kie对象 - 启用扫描程序</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> <span class="hljs-attribute">releaseId-ref</span>=<span class="hljs-value">"namedKieSession"</span>
            <span class="hljs-attribute">enableScanner</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">scannerInterval</span>=<span class="hljs-value">"1000"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"namedKieSession"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.drools"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-kiesession"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"7.12.0.Final"</span>/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义并启用了扫描程序，</font><font style="vertical-align: inherit;">则会创建</font><font style="vertical-align: inherit;">隐式</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieScanner</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象并将其插入到弹簧上下文中。</font><font style="vertical-align: inherit;">它可以从春季环境中重新开始。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Spring Context中重新获取KieScanner</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// the implicit name would be releaseId#scanner</span>
KieScanner releaseIdScanner = context.getBean(<span class="hljs-string">"namedKieSession#scanner"</span>, KieScanner.class);<font></font>
releaseIdScanner.scanNow();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须在类路径上提供kie-ci才能使用releaseId导入功能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_annotations_2"><a class="anchor" href="index.html#_annotations_2"></a><a class="link" href="index.html#_annotations_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7。</font><font style="vertical-align: inherit;">注释</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KContainer，@ KBase和@KSession都支持可选的'name'属性。</font><font style="vertical-align: inherit;">Spring注入时通常会“获取”，所有注入都会为同一组注释接收相同的实例。</font><font style="vertical-align: inherit;">'name'注释强制为每个名称强制一个唯一的实例，尽管该名称的所有实例都是identity equals。</font></font></p>
</div>
<div class="sect4">
<h5 id="__kreleaseid_2"><a class="anchor" href="index.html#__kreleaseid_2"></a><a class="link" href="index.html#__kreleaseid_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.1。</font><font style="vertical-align: inherit;">@KReleaseId</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于将实例绑定到特定版本的KieModule。</font><font style="vertical-align: inherit;">如果kie-ci在类路径上，这将自动解决依赖关系，从远程存储库下载。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="__kcontainer_2"><a class="anchor" href="index.html#__kcontainer_2"></a><a class="link" href="index.html#__kcontainer_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.2。</font><font style="vertical-align: inherit;">@KContainer</font></font></a></h5>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入Classpath KieContainer</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KContainer</span>
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为动态KieModule注入KieContainer</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KContainer</span>
<span class="hljs-annotation">@KReleaseId</span>(groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为Dynamic KieModule注入名为KieContainer的注入</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KContainer</span>(name = <span class="hljs-string">"kc1"</span>)
<span class="hljs-annotation">@KReleaseId</span>(groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__kbase_2"><a class="anchor" href="index.html#__kbase_2"></a><a class="link" href="index.html#__kbase_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.3。</font><font style="vertical-align: inherit;">@KBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从spring xml文件指定KieBase的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KBase</span>
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Dynamic KieModule中注入默认KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KBase</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v10;<font></font>
<font></font>
<span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v11;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'jar1.ksession1'KieSession的并排版本加载</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession11kb2;<font></font>
<font></font>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieSession ksession11kb2;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__ksession_for_kiesession_2"><a class="anchor" href="index.html#__ksession_for_kiesession_2"></a><a class="link" href="index.html#__ksession_for_kiesession_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.4。</font><font style="vertical-align: inherit;">@KSession for KieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml或spring xml文件指定KieSession的名称</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入默认KieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从动态KieModule中注入默认KieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv10;<font></font>
<font></font>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv11;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用'name'属性强制'jar1.KBase1'KieSession的新实例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession1ks1<font></font>
<font></font>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksession1ks2</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__ksession_for_statelesskiesession_2"><a class="anchor" href="index.html#__ksession_for_statelesskiesession_2"></a><a class="link" href="index.html#__ksession_for_statelesskiesession_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.5。</font><font style="vertical-align: inherit;">@KSession for StatelessKieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml或spring xml文件指定KieSession的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Dynamic KieModule中注入Default StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksessionv10;<font></font>
<font></font>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksessionv11;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession1ks1<font></font>
<font></font>
<span class="hljs-annotation">@KSession</span>(value=<span class="hljs-string">"ksession1"</span>, name=<span class="hljs-string">"ks2"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, artifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession1ks2</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_important_note_2"><a class="anchor" href="index.html#_important_note_2"></a><a class="link" href="index.html#_important_note_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.7.6。</font><font style="vertical-align: inherit;">重要的提示</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用注释时，为了正确初始化kmodule对象（kbase / ksession），</font></font><code>org.kie.spring.annotations.KModuleAnnotationPostProcessor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须定义</font><font style="vertical-align: inherit;">一个类型的bean</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例176.处理器bean定义后的kie-spring注释</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
            <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.annotations.KModuleAnnotationPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例177. kie-spring注释 - 组件扫描</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">context:component-scan</span> <span class="hljs-attribute">base-package</span>=<span class="hljs-value">"org.kie.spring.annotations"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用注释时，后处理器是不同的。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_listeners"><a class="anchor" href="index.html#_event_listeners"></a><a class="link" href="index.html#_event_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8。</font><font style="vertical-align: inherit;">事件听众</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持向KieSessions添加3种类型的侦听器 - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaListener</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkingMemoryListener</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessEventListener</font></font></em></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-spring模块允许您使用XML标记将这些侦听器配置为KieSessions。</font><font style="vertical-align: inherit;">这些标记与实际的侦听器接口具有相同的名称，即&lt;kie：agendaEventListener ...&gt;，&lt;kie：ruleRuntimeEventListener ...&gt;和&lt;kie：processEventListener ...&gt;。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-spring提供了将侦听器定义为独立（单个）侦听器以及将它们定义为组的功能。</font></font></p>
</div>
<div class="sect4">
<h5 id="_defining_stand_alone_listeners"><a class="anchor" href="index.html#_defining_stand_alone_listeners"></a><a class="link" href="index.html#_defining_stand_alone_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.1。</font><font style="vertical-align: inherit;">定义独立监听器：</font></font></a></h5>

</div>
<div class="sect4">
<h5 id="_attributes"><a class="anchor" href="index.html#_attributes"></a><a class="link" href="index.html#_attributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.2。</font><font style="vertical-align: inherit;">属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表30.样品</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REF</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对另一个声明的bean的引用。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例178.侦听器配置示例 - 使用bean：ref。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-process-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-rr-listener"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_nested_elements"><a class="anchor" href="index.html#_nested_elements"></a><a class="link" href="index.html#_nested_elements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.3。</font><font style="vertical-align: inherit;">嵌套元素：</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">豆</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">class = String</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name = String（可选）</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例179.侦听器配置示例 - 使用嵌套bean。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
	  <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_empty_tag_declaration_with_no_ref_and_without_a_nestedbean"><a class="anchor" href="index.html#_empty_tag_declaration_with_no_ref_and_without_a_nestedbean"></a><a class="link" href="index.html#_empty_tag_declaration_with_no_ref_and_without_a_nestedbean"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.4。</font><font style="vertical-align: inherit;">空标记：没有'ref'且没有嵌套bean的声明</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果在没有引用实现bean的情况下定义了侦听器并且不包含嵌套bean，则</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;drools：ruleRuntimeEventListener /&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">底层实现会添加API中定义的侦听器的Debug版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试侦听器将相应的Event toString消息打印到_System.err。</font><font style="vertical-align: inherit;">_</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例180.侦听器配置示例 - 默认为Knowledge-API提供的调试版本。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_mix_and_match_of_different_declaration_styles"><a class="anchor" href="index.html#_mix_and_match_of_different_declaration_styles"></a><a class="link" href="index.html#_mix_and_match_of_different_declaration_styles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.5。</font><font style="vertical-align: inherit;">混合和匹配不同的声明样式</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-spring模块允许您在同一个KieSession中混合和匹配不同的声明性样式。</font><font style="vertical-align: inherit;">以下示例提供了更清晰的信息。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例181.侦听器配置示例 - 混合和匹配“INV”/嵌套bean /空样式。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.mocks.MockAgendaEventListener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-process-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-rr-listener"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_defining_multiple_listeners_of_the_same_type"><a class="anchor" href="index.html#_defining_multiple_listeners_of_the_same_type"></a><a class="link" href="index.html#_defining_multiple_listeners_of_the_same_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.6。</font><font style="vertical-align: inherit;">定义多个相同类型的侦听器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为KieSession定义相同事件侦听器类型的多个bean也是有效的。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子182.监听器配置示例 - 同一类型的多个监听器。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.mocks.MockAgendaEventListener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:agendaEventListener</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kie_grouping_listeners"><a class="anchor" href="index.html#_kie_grouping_listeners"></a><a class="link" href="index.html#_kie_grouping_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.7。</font><font style="vertical-align: inherit;">定义一组听众：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-spring允许对听众进行分组。</font><font style="vertical-align: inherit;">当您定义一组侦听器并希望将它们附加到多个会话时，这尤其有用。</font><font style="vertical-align: inherit;">当我们为“测试”定义一组侦听器然后想要将它们切换为“生产”使用时，分组功能也非常有用。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_attributes_2"><a class="anchor" href="index.html#_attributes_2"></a><a class="link" href="index.html#_attributes_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.8。</font><font style="vertical-align: inherit;">属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表31.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一标识符</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_nested_elements_2"><a class="anchor" href="index.html#_nested_elements_2"></a><a class="link" href="index.html#_nested_elements_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.9。</font><font style="vertical-align: inherit;">嵌套元素：</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：agendaEventListener ...</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：ruleRuntimeEventListener ...</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：processEventListener ...</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上述子元素可以按任何顺序声明。</font><font style="vertical-align: inherit;">组中只允许每种类型的一个声明。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_example"><a class="anchor" href="index.html#_example"></a><a class="link" href="index.html#_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.8.10。</font><font style="vertical-align: inherit;">例：</font></font></a></h5>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例183.听众组 - 例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"statelessWithGroupedListeners"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>
             <span class="hljs-attribute">listeners-ref</span>=<span class="hljs-value">"debugListeners"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:eventListeners</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"debugListeners"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-process-listener"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-rr-listener"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:eventListeners</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_loggers"><a class="anchor" href="index.html#_loggers"></a><a class="link" href="index.html#_loggers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.9。</font><font style="vertical-align: inherit;">记录仪</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持向KieSessions添加两种类型的记录器 - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConsoleLogger</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FileLogger。</font></font></em></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-spring模块允许您使用XML标记将这些记录器配置为KieSessions。</font><font style="vertical-align: inherit;">这些标签与实际的记录器接口具有相同的名称，即&lt;kie：consoleLogger ...&gt;和&lt;kie：fileLogger ...&gt;。</font></font></p>
</div>
<div class="sect4">
<h5 id="_defining_a_console_logger"><a class="anchor" href="index.html#_defining_a_console_logger"></a><a class="link" href="index.html#_defining_a_console_logger"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.9.1。</font><font style="vertical-align: inherit;">定义控制台记录器：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：consoleLogger /&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标记</font><font style="vertical-align: inherit;">将控制台记录器连接到KieSession </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此标记没有属性，必须直接存在于&lt;kie：ksession ...。&gt;元素下。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例184.定义控制台记录器 - 示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loggers_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ConsoleLogger-statefulSession"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:consoleLogger</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_defining_a_file_logger"><a class="anchor" href="index.html#_defining_a_file_logger"></a><a class="link" href="index.html#_defining_a_file_logger"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.9.2。</font><font style="vertical-align: inherit;">定义文件记录器：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：fileLogger /&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标记</font><font style="vertical-align: inherit;">将文件记录器附加到KieSession </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此标记具有以下属性，并且必须直接存在于&lt;kie：ksession ...。&gt;元素下。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表32.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一标识符</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">磁盘上实际文件的路径</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">螺纹</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认为false。</font><font style="vertical-align: inherit;">有效值为'true'或'false'</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间隔</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数。</font><font style="vertical-align: inherit;">指定将内容从内存刷新到磁盘的时间间隔。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子185.定义文件记录器 - 例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loggers_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ConsoleLogger-statefulSession"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fl_logger"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tfl_logger"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log2"</span>
                          <span class="hljs-attribute">threaded</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">interval</span>=<span class="hljs-value">"5"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_closing_a_filelogger"><a class="anchor" href="index.html#_closing_a_filelogger"></a><a class="link" href="index.html#_closing_a_filelogger"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.9.3。</font><font style="vertical-align: inherit;">关闭FileLogger</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为防止泄漏，建议以编程方式关闭_ &lt;kie：fileLogger ...&gt; _。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LoggerAdaptor adaptor = (LoggerAdaptor) context.getBean(<span class="hljs-string">"fl_logger"</span>);<font></font>
adaptor.close();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_defining_batch_commands"><a class="anchor" href="index.html#_defining_batch_commands"></a><a class="link" href="index.html#_defining_batch_commands"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.10。</font><font style="vertical-align: inherit;">定义批处理命令</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;纪伊：批次&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元件可以被用来定义一组针对给定ksession.This标签一批命令没有属性和必须直接下一个&lt;纪伊：ksession ...。&gt;存在的元素。</font><font style="vertical-align: inherit;">支持的命令是</font></font></p>
</div>
<div class="ulist">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化批处理命令</font></font></div>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入对象</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置全局</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifier = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reg = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消防所有规则</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大值：n</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火，直到-停止</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动过程</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifier = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号事件</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event-type = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">process-instance-id = n（可选）</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例186.批处理命令 - 例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"batch_commands_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksessionForCommands"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:batch</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:insert-object</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"person2"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:set-global</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"persons"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"personsList"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:fire-all-rules</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">"10"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:batch</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_persistence"><a class="anchor" href="index.html#_persistence"></a><a class="link" href="index.html#_persistence"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.11。</font><font style="vertical-align: inherit;">坚持</font></font></a></h4>
<div class="ulist">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性配置选项</font></font></div>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JPA的持久性</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交易经理</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实体管理器工厂</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例187. ksession JPA配置示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kstore</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kstore"</span> /&gt;</span> <span class="hljs-comment">&lt;!-- provides KnowledgeStoreService implementation --&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"myEmf"</span>
       <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"ds"</span> /&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"persistenceUnitName"</span>
       <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.drools.persistence.jpa.local"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"txManager"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.orm.jpa.JpaTransactionManager"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"entityManagerFactory"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"myEmf"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"persistence_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jpaSingleSessionCommandService"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:configuration</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">kie:jpa-persistence</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-title">kie:transaction-manager</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"txManager"</span>/&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-title">kie:entity-manager-factory</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"myEmf"</span>/&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-title">kie:jpa-persistence</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
          <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_leveraging_other_spring_features"><a class="anchor" href="index.html#_leveraging_other_spring_features"></a><a class="link" href="index.html#_leveraging_other_spring_features"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.12。</font><font style="vertical-align: inherit;">利用其他Spring功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本节提供了与Drools Expert集成时利用其他标准弹簧功能的详细信息。</font></font></p>
</div>
<div class="sect4">
<h5 id="_using_spring_expressions_spel"><a class="anchor" href="index.html#_using_spring_expressions_spel"></a><a class="link" href="index.html#_using_spring_expressions_spel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.12.1。</font><font style="vertical-align: inherit;">使用Spring Expressions（Spel）</font></font></a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"batch_commands_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"#{packageRepository.packages}"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksessionForCommands"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
      <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"packageRepository"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"sample.package.class.PackageRepo"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"packages"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"drl_kiesample3"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loggers_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ConsoleLogger-statefulSession"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fl"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tfl"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log2"</span>
            <span class="hljs-attribute">threaded</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">interval</span>=<span class="hljs-value">"5"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
            <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_using_spring_profiles"><a class="anchor" href="index.html#_using_spring_profiles"></a><a class="link" href="index.html#_using_spring_profiles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.2.12.2。</font><font style="vertical-align: inherit;">使用Spring配置文件</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring 3.1为spring-beans模式的beans元素引入了一个新的profile属性。</font><font style="vertical-align: inherit;">在不同环境中启用和禁用配置文件时，此属性充当交换机。</font><font style="vertical-align: inherit;">此属性的一个潜在用途可能是在“dev”环境中使用调试记录器定义相同的kbase，而在“prod”环境中不使用记录器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的代码片段说明了“个人资料”的概念。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
<span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="hljs-attribute">xmlns:kie</span>=<span class="hljs-value">"http://drools.org/schema/kie-spring"</span>
<span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
http://drools.org/schema/kie-spring http://drools.org/schema/kie-spring.xsd"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">profile</span>=<span class="hljs-value">"development"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"test-kmodule"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">kie:consoleLogger</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
    ...<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">profile</span>=<span class="hljs-value">"production"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"test-kmodule"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
    ...<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如上所示，Spring XML包含配置文件的定义。</font><font style="vertical-align: inherit;">在加载</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ApplicationContext时，</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您必须告诉Spring您正在加载哪个配置文件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有几种方法可以选择您的配置文件，最有用的方法是使用“spring.profiles.active”系统属性。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">System.setProperty(<span class="hljs-string">"spring.profiles.active"</span>, <span class="hljs-string">"development"</span>);<font></font>
ApplicationContext ctx = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显然，如上所示硬编码事物并不是一个好习惯，建议的做法是保持系统属性定义独立于应用程序。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">-Dspring.profiles.active=<span class="hljs-string">"development"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还可以以编程方式加载和启用配置文件</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">...<font></font>
GenericXmlApplicationContext ctx = <span class="hljs-keyword">new</span> GenericXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);<font></font>
ConfigurableEnvironment env = ctx.getEnvironment();<font></font>
env.setActiveProfiles(<span class="hljs-string">"development"</span>);<font></font>
ctx.refresh();<font></font>
...</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integration_with_jbpm_human_task"><a class="anchor" href="index.html#_integration_with_jbpm_human_task"></a><a class="link" href="index.html#_integration_with_jbpm_human_task"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.3。</font><font style="vertical-align: inherit;">与jBPM人工任务集成</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本章介绍使用Spring配置人工任务服务器时使用的基础结构，以及执行此操作时使用的基础结构。</font></font></p>
</div>
<div class="sect3">
<h4 id="_how_to_configure_spring_with_jbpm_human_task"><a class="anchor" href="index.html#_how_to_configure_spring_with_jbpm_human_task"></a><a class="link" href="index.html#_how_to_configure_spring_with_jbpm_human_task"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.3.1。</font><font style="vertical-align: inherit;">如何使用jBPM Human任务配置Spring</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将jBPM人工任务服务器配置为使用Spring持久性。</font></font><a href="index.html#_kie_spring_human_task_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[_kie_spring_human_task_example]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 就是一个例子，它使用本地事务和Spring的线程安全的EntityManager代理。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下图显示了</font></font><a href="index.html#_kie_spring_human_task_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[_kie_spring_human_task_example]中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用的依赖关系图</font><font style="vertical-align: inherit;">
。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ht-spring-deps.png" alt="春天deps">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图115. Spring Human Task集成注入依赖项</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例依赖于另外两种bean类型：一个drools </font></font><code>SystemEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean和一个</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean。</font><font style="vertical-align: inherit;">该</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean是howerver </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">豆，因为这会导致循环依赖。</font><font style="vertical-align: inherit;">为了解决这个问题，当</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean被注入</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean时，使用的setter方法秘密地将</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例注入</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean中并初始化</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean是负责创建人工任务，随着交易和持久化上下文管理应对所有的内部情况。</font><font style="vertical-align: inherit;">除了一个</font></font><code>TaskService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例，这个bean还需要注入事务管理器和持久化上下文。</font><font style="vertical-align: inherit;">具体来说，它需要一个</font></font><code>HumanTaskSpringTransactionManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean </font><font style="vertical-align: inherit;">实例</font><font style="vertical-align: inherit;">（作为事务管理器）和一个</font></font><code>SharedEntityManagerBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean </font><font style="vertical-align: inherit;">实例</font><font style="vertical-align: inherit;">（作为持久化上下文实例）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们还使用一些标准的Spring bean来配置持久性：有一个bean来保存</font></font><code>EntityManagerFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例和</font></font><code>SharedEntityManagerBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例。</font><font style="vertical-align: inherit;">它</font></font><code>SharedEntityManagerBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为实际提供了一个共享的，线程安全的代理</font></font><code>EntityManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>HumanTaskSpringTransactionManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">豆作为周围Spring的事务管理器的包装，在这种情况下</font></font><code>JpaTransactionManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>JpaTransactionManager</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于这个原因，也实例化</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">bean的实例。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例188.使用Spring配置人工任务</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attribute">xmlns:jbpm</span>=<span class="hljs-value">"http://drools.org/schema/drools-spring"</span>
       <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://drools.org/schema/drools-spring org/drools/container/spring/drools-spring-1.2.0.xsd"</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!-- persistence &amp; transactions--&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"htEmf"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"persistenceUnitName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.jbpm.task"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"htEm"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.orm.jpa.support.SharedEntityManagerBean"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"entityManagerFactory"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"htEmf"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"jpaTxMgr"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.orm.jpa.JpaTransactionManager"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"entityManagerFactory"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"htEmf"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- this must be true if using the SharedEntityManagerBean, and false otherwise --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"nestedTransactionAllowed"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"htTxMgr"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.drools.container.spring.beans.persistence.HumanTaskSpringTransactionManager"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">constructor-arg</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"jpaTxMgr"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!-- human-task beans --&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"systemEventListener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.drools.SystemEventListenerFactory"</span> <span class="hljs-attribute">factory-method</span>=<span class="hljs-value">"getSystemEventListener"</span> /&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"taskService"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.jbpm.task.service.TaskService"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"systemEventListener"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"systemEventListener"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"springTaskSessionFactory"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.jbpm.task.service.persistence.TaskSessionSpringFactoryImpl"</span>
        <span class="hljs-attribute">init-method</span>=<span class="hljs-value">"initialize"</span> <span class="hljs-attribute">depends-on</span>=<span class="hljs-value">"taskService"</span> &gt;</span>
    <span class="hljs-comment">&lt;!-- if using the SharedEntityManagerBean, make sure to enable nested transactions --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"entityManager"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"htEm"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"transactionManager"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"htTxMgr"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"useJTA"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"false"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"taskService"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"taskService"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>SharedEntityManagerBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例时，配置Spring事务管理器以使用嵌套事务非常重要。</font><font style="vertical-align: inherit;">这是因为它</font></font><code>SharedEntityManagerBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事务</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久化上下文，并将在每次操作后关闭持久化上下文。</font><font style="vertical-align: inherit;">但是，人工任务服务器需要能够在操作后访问（持久化）实体。</font><font style="vertical-align: inherit;">嵌套事务允许我们仍然可以访问本来会被分离并且不再可访问的实体，尤其是在使用使用实体的延迟初始化的ORM框架时。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，虽然</font></font><code>TaskSessionSpringFactoryImpl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bean采用“useJTA”参数，但目前，与Spring的JTA事务尚未完全测试。</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.kie.blueprint"><a class="anchor" href="index.html#_ch.kie.blueprint"></a><a class="link" href="index.html#_ch.kie.blueprint"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.与白羊座蓝图整合</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_integration_with_drools_expert_2"><a class="anchor" href="index.html#_integration_with_drools_expert_2"></a><a class="link" href="index.html#_integration_with_drools_expert_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1。</font><font style="vertical-align: inherit;">与Drools Expert集成</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本节中，我们将解释</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称空间。</font></font></p>
</div>
<div class="sect3">
<h4 id="_kiemodule_2"><a class="anchor" href="index.html#_kiemodule_2"></a><a class="link" href="index.html#_kiemodule_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.1。</font><font style="vertical-align: inherit;">KieModule</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;纪伊：KMODULE&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义KieBase的集合和相关联的KieSession的。</font><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KMODULE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签有一个强制参数“ID”。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表33.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bean的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是从其他bean引用的名称。</font><font style="vertical-align: inherit;">标准蓝图ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KMODULE</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码只能包含以下标记为儿童。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：kbase</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关kmodule需求的详细说明，请参阅Drools Expert文档中kmodule.xml的文档。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kiebase_4"><a class="anchor" href="index.html#_kiebase_4"></a><a class="link" href="index.html#_kiebase_4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.2。</font><font style="vertical-align: inherit;">KieBase</font></font></a></h4>
<div class="sect4">
<h5 id="__kie_kbase_s_parameters_as_attributes_2"><a class="anchor" href="index.html#__kie_kbase_s_parameters_as_attributes_2"></a><a class="link" href="index.html#__kie_kbase_s_parameters_as_attributes_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.2.1。</font><font style="vertical-align: inherit;">&lt;kie：kbase&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表34.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieBase的名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以逗号分隔的资源包列表，包含在此kbase中</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要包含的kbase名称。</font><font style="vertical-align: inherit;">来自相应kbase的所有资源都包含在此kbase中。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值（TRUE / FALSE）。</font><font style="vertical-align: inherit;">默认kbase，如果未提供，则假定为FALSE</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原型| </font><font style="vertical-align: inherit;">单身。</font><font style="vertical-align: inherit;">如果没有提供假设是单身（默认）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eventProcessingMode</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件处理模式。</font><font style="vertical-align: inherit;">有效选项是STREAM，CLOUD</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equalsBehavior</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效选项是IDENTITY，EQUALITY</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_a_em_kbase_em_tag_can_contain_only_the_following_tags_as_children"><a class="anchor" href="index.html#_a_em_kbase_em_tag_can_contain_only_the_following_tags_as_children"></a><a class="link" href="index.html#_a_em_kbase_em_tag_can_contain_only_the_following_tags_as_children"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.2.2。</font><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kbase</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码只能包含以下标记为儿童。</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：ksession</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="__kie_kbase_s_definition_example_2"><a class="anchor" href="index.html#__kie_kbase_s_definition_example_2"></a><a class="link" href="index.html#__kie_kbase_s_definition_example_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.2.3。</font><font style="vertical-align: inherit;">&lt;kie：kbase&gt;的定义示例</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule可以包含多个（1..n）kbase元素。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例189. kbase定义示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sample_module"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.drools.blueprint.sample"</span>&gt;</span><font></font>
     ...<font></font>
   <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_blueprint_bean_scope_for_kiebase_and_kiesession"><a class="anchor" href="index.html#_blueprint_bean_scope_for_kiebase_and_kiesession"></a><a class="link" href="index.html#_blueprint_bean_scope_for_kiebase_and_kiesession"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.2.4。</font><font style="vertical-align: inherit;">Blueprint Bean Scope（适用于KieBase和KieSession）</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在定义KieBase或KieSession时，您可以选择声明该bean的范围。</font><font style="vertical-align: inherit;">例如，要在每次需要时强制Blueprint生成新的bean实例，您应该将bean的scope属性声明为'prototype'。</font><font style="vertical-align: inherit;">类似地，如果您希望Blueprint在每次需要时返回相同的bean实例，则应将bean的scope属性声明为“singleton”。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiesessions_2"><a class="anchor" href="index.html#_kiesessions_2"></a><a class="link" href="index.html#_kiesessions_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.3。</font><font style="vertical-align: inherit;">KieSessions</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：ksession&gt;元素定义了KieSessions。</font><font style="vertical-align: inherit;">相同的标记用于定义Stateful（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.api.runtime.KieSession</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和Stateless（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.api.runtime.StatelessKieSession</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）会话。</font></font></p>
</div>
<div class="sect4">
<h5 id="__kie_ksession_s_parameters_as_attributes_2"><a class="anchor" href="index.html#__kie_ksession_s_parameters_as_attributes_2"></a><a class="link" href="index.html#__kie_ksession_s_parameters_as_attributes_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.3.1。</font><font style="vertical-align: inherit;">&lt;kie：ksession&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表35.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ksession的名字。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会议</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有状态</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是
                 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无国籍？</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果此属性为空或缺少，则假定会话的类型为Stateful。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是默认会话吗？</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原型| </font><font style="vertical-align: inherit;">单身。</font><font style="vertical-align: inherit;">如果没有提供假设是单身（默认）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clockType</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REALTIME或PSEUDO</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">听众-REF</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定对事件侦听器组的引用（请参阅下面的</font></font><a href="index.html#_kie_grouping_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“定义一组侦听器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分）。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例190. ksession定义示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sample-kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample3"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample3"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kie_releaseid_2"><a class="anchor" href="index.html#_kie_releaseid_2"></a><a class="link" href="index.html#_kie_releaseid_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.4。</font><font style="vertical-align: inherit;">纪伊：ReleaseId</font></font></a></h4>
<div class="sect4">
<h5 id="__kie_releaseid_s_parameters_as_attributes_2"><a class="anchor" href="index.html#__kie_releaseid_s_parameters_as_attributes_2"></a><a class="link" href="index.html#__kie_releaseid_s_parameters_as_attributes_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.4.1。</font><font style="vertical-align: inherit;">&lt;kie：releaseId&gt;的参数作为属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表36.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bean的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">id</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是从其他bean引用的名称。</font><font style="vertical-align: inherit;">标准蓝图ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的groupId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的groupId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的artifactId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的artifactId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自Maven GAV的版本</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例191. releaseId定义示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"beanId"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.kie.blueprint"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-artifactId"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"1.0.0-SNAPSHOT"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kie_import_2"><a class="anchor" href="index.html#_kie_import_2"></a><a class="link" href="index.html#_kie_import_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.5。</font><font style="vertical-align: inherit;">纪伊：进口</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从6.5版开始，kie-aries-blueprint允许从类路径中找到的kjar导入kie对象。</font><font style="vertical-align: inherit;">目前支持两种导入kie对象的模式。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">releaseId</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用Bean ID。</font><font style="vertical-align: inherit;">标准蓝图ID语义适用。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">enableScanner</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用扫描仪。</font><font style="vertical-align: inherit;">仅当指定了'releaseId'时才使用此属性。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scannerInterval</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描间隔，以毫秒为单位。</font><font style="vertical-align: inherit;">仅当指定了'releaseId'时才使用此属性。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_global_import_2"><a class="anchor" href="index.html#_global_import_2"></a><a class="link" href="index.html#_global_import_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.5.1。</font><font style="vertical-align: inherit;">全球进口</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进口</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签将迫使所有的罐子的自动扫描在classpath中，初始化纪伊对象（Kbase / KSessions），这些对象导入的蓝图情境。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球进口</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> /&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_specific_import_releaseid_2"><a class="anchor" href="index.html#_specific_import_releaseid_2"></a><a class="link" href="index.html#_specific_import_releaseid_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.5.2。</font><font style="vertical-align: inherit;">特定导入 -  ReleaseId</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">import标记上</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">releaseId-ref</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性将初始化特定的Kie对象（Kbase / KSessions）并将这些对象导入蓝图上下文。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用releaseId导入Kie对象</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> <span class="hljs-attribute">releaseId-ref</span>=<span class="hljs-value">"namedKieSession"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"namedKieSession"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.drools"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-kiesession"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"7.12.0.Final"</span>/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以为使用特定releaseId导入的KieBase启用Kie扫描功能。</font><font style="vertical-align: inherit;">此功能目前不适用于全球导入。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用releaseId导入Kie对象 - 启用扫描程序</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:import</span> <span class="hljs-attribute">releaseId-ref</span>=<span class="hljs-value">"namedKieSession"</span>
            <span class="hljs-attribute">enableScanner</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">scannerInterval</span>=<span class="hljs-value">"1000"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:releaseId</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"namedKieSession"</span> <span class="hljs-attribute">groupId</span>=<span class="hljs-value">"org.drools"</span>
            <span class="hljs-attribute">artifactId</span>=<span class="hljs-value">"named-kiesession"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"7.12.0.Final"</span>/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义并启用了扫描程序，</font><font style="vertical-align: inherit;">则会创建</font><font style="vertical-align: inherit;">隐式</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieScanner</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象并将其插入蓝图容器中。</font><font style="vertical-align: inherit;">可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-scanner</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后缀</font><font style="vertical-align: inherit;">从蓝图容器以编程方式重新获取它</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Blueprint Container中重新获取KieScanner</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// the implicit name would be releaseId-scanner</span>
KieScanner releaseIdScanner = (KieScanner)container.getComponentInstance(<span class="hljs-string">"namedKieSession-scanner"</span>);<font></font>
releaseIdScanner.scanNow();</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须在类路径上提供kie-ci才能使用releaseId导入功能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_listeners_2"><a class="anchor" href="index.html#_event_listeners_2"></a><a class="link" href="index.html#_event_listeners_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6。</font><font style="vertical-align: inherit;">事件听众</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持向KieSessions添加3种类型的侦听器 - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaListener</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WorkingMemoryListener</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessEventListener</font></font></em></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-aries-blueprint模块允许您使用XML标记将这些侦听器配置为KieSessions。</font><font style="vertical-align: inherit;">这些标记与实际的侦听器接口具有相同的名称，即&lt;kie：agendaEventListener ...&gt;，&lt;kie：ruleRuntimeEventListener ...&gt;和&lt;kie：processEventListener ...&gt;。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-aries-blueprint提供了将侦听器定义为独立（单个）侦听器以及将它们定义为组的功能。</font></font></p>
</div>
<div class="sect4">
<h5 id="_defining_stand_alone_listeners_2"><a class="anchor" href="index.html#_defining_stand_alone_listeners_2"></a><a class="link" href="index.html#_defining_stand_alone_listeners_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.1。</font><font style="vertical-align: inherit;">定义独立监听器：</font></font></a></h5>

</div>
<div class="sect4">
<h5 id="_attributes_3"><a class="anchor" href="index.html#_attributes_3"></a><a class="link" href="index.html#_attributes_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.2。</font><font style="vertical-align: inherit;">属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表37.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REF</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对另一个声明的bean的引用。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子192.监听器配置示例 - 使用bean：ref。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-process-listener"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-rr-listener"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_defining_multiple_listeners_of_the_same_type_2"><a class="anchor" href="index.html#_defining_multiple_listeners_of_the_same_type_2"></a><a class="link" href="index.html#_defining_multiple_listeners_of_the_same_type_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.3。</font><font style="vertical-align: inherit;">定义多个相同类型的侦听器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为KieSession定义相同事件侦听器类型的多个bean也是有效的。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例193.侦听器配置示例 - 同一类型的多个侦听器。</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener1"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener2"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener2"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kie_grouping_listeners"><a class="anchor" href="index.html#_kie_grouping_listeners"></a><a class="link" href="index.html#_kie_grouping_listeners"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.4。</font><font style="vertical-align: inherit;">定义一组听众：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-aries-blueprinty允许对听众进行分组。</font><font style="vertical-align: inherit;">当您定义一组侦听器并希望将它们附加到多个会话时，这尤其有用。</font><font style="vertical-align: inherit;">当我们为“测试”定义一组侦听器然后想要将它们切换为“生产”使用时，分组功能也非常有用。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_attributes_4"><a class="anchor" href="index.html#_attributes_4"></a><a class="link" href="index.html#_attributes_4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.5。</font><font style="vertical-align: inherit;">属性：</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表38.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一标识符</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_nested_elements_3"><a class="anchor" href="index.html#_nested_elements_3"></a><a class="link" href="index.html#_nested_elements_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.6。</font><font style="vertical-align: inherit;">嵌套元素：</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：agendaEventListener ...</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：ruleRuntimeEventListener ...</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纪伊：processEventListener ...</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上述子元素可以按任何顺序声明。</font><font style="vertical-align: inherit;">组中只允许每种类型的一个声明。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_example_2"><a class="anchor" href="index.html#_example_2"></a><a class="link" href="index.html#_example_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.6.7。</font><font style="vertical-align: inherit;">例：</font></font></a></h5>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子194.听众群 - 例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-agenda-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockAgendaEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-rr-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockRuleRuntimeEventListener"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"mock-process-listener"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"mocks.MockProcessEventListener"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"listeners_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"statelessWithGroupedListeners"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>
             <span class="hljs-attribute">listeners-ref</span>=<span class="hljs-value">"debugListeners"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:eventListeners</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"debugListeners"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:agendaEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-agenda-listener"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:processEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-process-listener"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:ruleRuntimeEventListener</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"mock-rr-listener"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:eventListeners</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_loggers_2"><a class="anchor" href="index.html#_loggers_2"></a><a class="link" href="index.html#_loggers_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.7。</font><font style="vertical-align: inherit;">记录仪</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools支持向KieSessions添加两种类型的记录器 - </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ConsoleLogger</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FileLogger。</font></font></em></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-aries-blueprint模块允许您使用XML标记将这些记录器配置为KieSessions。</font><font style="vertical-align: inherit;">这些标签与实际的记录器接口具有相同的名称，即&lt;kie：consoleLogger ...&gt;和&lt;kie：fileLogger ...&gt;。</font></font></p>
</div>
<div class="sect4">
<h5 id="_defining_a_console_logger_2"><a class="anchor" href="index.html#_defining_a_console_logger_2"></a><a class="link" href="index.html#_defining_a_console_logger_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.7.1。</font><font style="vertical-align: inherit;">定义控制台记录器：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：consoleLogger /&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标记</font><font style="vertical-align: inherit;">将控制台记录器连接到KieSession </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此标记没有属性，必须直接存在于&lt;kie：ksession ...。&gt;元素下。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例195.定义控制台记录器 - 示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loggers_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ConsoleLogger-statefulSession"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:consoleLogger</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_defining_a_file_logger_2"><a class="anchor" href="index.html#_defining_a_file_logger_2"></a><a class="link" href="index.html#_defining_a_file_logger_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.7.2。</font><font style="vertical-align: inherit;">定义文件记录器：</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：fileLogger /&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标记</font><font style="vertical-align: inherit;">将文件记录器附加到KieSession </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此标记具有以下属性，并且必须直接存在于&lt;kie：ksession ...。&gt;元素下。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表39.样本</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ID</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一标识符</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">磁盘上实际文件的路径</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">螺纹</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认为false。</font><font style="vertical-align: inherit;">有效值为'true'或'false'</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间隔</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数。</font><font style="vertical-align: inherit;">指定将内容从内存刷新到磁盘的时间间隔。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例196.定义文件记录器 - 示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"loggers_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ConsoleLogger-statefulSession"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"fl_logger"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log1"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:fileLogger</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"tfl_logger"</span> <span class="hljs-attribute">file</span>=<span class="hljs-value">"#{ systemProperties['java.io.tmpdir'] }/log2"</span>
                          <span class="hljs-attribute">threaded</span>=<span class="hljs-value">"true"</span> <span class="hljs-attribute">interval</span>=<span class="hljs-value">"5"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_closing_a_filelogger_2"><a class="anchor" href="index.html#_closing_a_filelogger_2"></a><a class="link" href="index.html#_closing_a_filelogger_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.7.3。</font><font style="vertical-align: inherit;">关闭FileLogger</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为防止泄漏，建议以</font><font style="vertical-align: inherit;">编程方式</font><font style="vertical-align: inherit;">关闭</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kie：fileLogger ...&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">LoggerAdaptor adaptor = (LoggerAdaptor) container.getComponentInstance(<span class="hljs-string">"fl_logger"</span>);<font></font>
adaptor.close();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_defining_batch_commands_2"><a class="anchor" href="index.html#_defining_batch_commands_2"></a><a class="link" href="index.html#_defining_batch_commands_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.1.8。</font><font style="vertical-align: inherit;">定义批处理命令</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;纪伊：批次&gt;</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元件可以被用来定义一组针对给定ksession.This标签一批命令没有属性和必须直接下一个&lt;纪伊：ksession ...。&gt;存在的元素。</font><font style="vertical-align: inherit;">支持的命令是</font></font></p>
</div>
<div class="ulist">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">初始化批处理命令</font></font></div>
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入对象</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置全局</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifier = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">reg = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消防所有规则</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最大值：n</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火，直到-停止</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动过程</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">identifier = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匿名豆</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">信号事件</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ref = String（可选）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">event-type = String（必填）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">process-instance-id = n（可选）</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例197.批处理命令 - 例子</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"batch_commands_module"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"drl_kiesample"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"drl_kiesample"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksessionForCommands"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateful"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:batch</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:insert-object</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"person2"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:set-global</span> <span class="hljs-attribute">identifier</span>=<span class="hljs-value">"persons"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"personsList"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kie:fire-all-rules</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">"10"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">kie:batch</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:ksession</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.kie.android"><a class="anchor" href="index.html#_ch.kie.android"></a><a class="link" href="index.html#_ch.kie.android"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15. Android集成</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_integration_with_drools_expert_3"><a class="anchor" href="index.html#_integration_with_drools_expert_3"></a><a class="link" href="index.html#_integration_with_drools_expert_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1。</font><font style="vertical-align: inherit;">与Drools Expert集成</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Android集成有两种形式，有或没有</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools-compiler</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖。</font><font style="vertical-align: inherit;">如果没有drools-compiler依赖关系，KIE库将在构建时使用kie-maven-plugin进行预序列化。</font><font style="vertical-align: inherit;">然后可以使用API​​对它们进行反序列化，或者使用Roboguice直接注入。</font><font style="vertical-align: inherit;">使用drools-compiler依赖时，有两个选项：（1）标准KieContainer API或（2）与Roboguice类似的CDI注入。</font></font></p>
</div>
<div class="sect3">
<h4 id="_pre_serialized_rules"><a class="anchor" href="index.html#_pre_serialized_rules"></a><a class="link" href="index.html#_pre_serialized_rules"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1.1。</font><font style="vertical-align: inherit;">预序列化规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在没有drools-compiler依赖项的情况下使用Drools，这会导致较小的apk，通过在构建时预先序列化已编译的KIE库，然后在运行时对它们进行反序列化。</font></font></p>
</div>
<div class="sect4">
<h5 id="_maven_configuration"><a class="anchor" href="index.html#_maven_configuration"></a><a class="link" href="index.html#_maven_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1.1.1。</font><font style="vertical-align: inherit;">Maven配置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-maven-plugin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在构建期间序列化KieBase </font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子198.预序列化的KieBase Maven pom.xml</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependencyManagement</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-bom<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-title">scope</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-android<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">exclusions</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">exclusions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-core<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">build</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kiebases</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">kiebase</span>&gt;</span>HelloKB<span class="hljs-tag">&lt;/<span class="hljs-title">kiebase</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">kiebases</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">resDirectory</span>&gt;</span>${basedir}/src/main/res/raw<span class="hljs-tag">&lt;/<span class="hljs-title">resDirectory</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">executions</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">id</span>&gt;</span>touch<span class="hljs-tag">&lt;/<span class="hljs-title">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">goals</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">goal</span>&gt;</span>touch<span class="hljs-tag">&lt;/<span class="hljs-title">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">phase</span>&gt;</span>initialize<span class="hljs-tag">&lt;/<span class="hljs-title">phase</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">execution</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">id</span>&gt;</span>compile-kbase<span class="hljs-tag">&lt;/<span class="hljs-title">id</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">goal</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-title">goal</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">goals</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">phase</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-title">phase</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">execution</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">id</span>&gt;</span>serialize<span class="hljs-tag">&lt;/<span class="hljs-title">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">goals</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">goal</span>&gt;</span>serialize<span class="hljs-tag">&lt;/<span class="hljs-title">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">phase</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-title">phase</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">execution</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">executions</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">build</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_loading_the_kiebase"><a class="anchor" href="index.html#_loading_the_kiebase"></a><a class="link" href="index.html#_loading_the_kiebase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1.1.2。</font><font style="vertical-align: inherit;">加载KieBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须在创建会话之前对KieBase进行反序列化。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载序列化的KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoadKieBaseTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AsyncTask</span>&lt;<span class="hljs-title">InputStream</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">KieBase</span>&gt; </span>{
   <span class="hljs-annotation">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> KieBase <span class="hljs-title">doInBackground</span><span class="hljs-params">(InputStream... params)</span> </span>{
      <span class="hljs-keyword">try</span> {<font></font>
         logger.debug(<span class="hljs-string">"Loading KIE base"</span>);
         <span class="hljs-keyword">final</span> KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();<font></font>
         kbase.addKnowledgePackages((List&lt;KnowledgePackage&gt;) DroolsStreamUtils.streamIn(params[<span class="hljs-number">0</span>]));
         <span class="hljs-keyword">return</span> kbase;<font></font>
      }<span class="hljs-keyword">catch</span>(Exception e) {<font></font>
         logger.error(<span class="hljs-string">"Drools exception"</span>, e);
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<font></font>
      }<font></font>
   }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiecontainer_api_with_drools_compiler_dependency"><a class="anchor" href="index.html#_kiecontainer_api_with_drools_compiler_dependency"></a><a class="link" href="index.html#_kiecontainer_api_with_drools_compiler_dependency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1.2。</font><font style="vertical-align: inherit;">具有drools编译器依赖性的KieContainer API</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用drools-compiler依赖标准可以使用KieContainer API。</font><font style="vertical-align: inherit;">这是以更大的apk为代价的。</font><font style="vertical-align: inherit;">为避免65K限制，可以使用multidex（或proguard）。</font></font></p>
</div>
<div class="sect4">
<h5 id="_maven_configuration_with_drools_compiler_and_multidex"><a class="anchor" href="index.html#_maven_configuration_with_drools_compiler_and_multidex"></a><a class="link" href="index.html#_maven_configuration_with_drools_compiler_and_multidex"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.1.2.1。</font><font style="vertical-align: inherit;">使用drools-compiler和multidex进行Maven配置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须配置kie-maven-plugin来构建kiebase。</font><font style="vertical-align: inherit;">必须使用Multidex来增加依赖性。</font><font style="vertical-align: inherit;">还有一些用于在apk中合并各种Drools XML文件的设置。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例199.pom.xml与drools-compiler和multidex</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependencyManagement</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-bom<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-title">type</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-title">scope</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependencies</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-android<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">exclusions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">exclusions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">exclusions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>xmlpull<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>xmlpull<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>xpp3<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>xpp3_min<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">exclusion</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.eclipse.jdt.core.compiler<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>ecj<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">exclusions</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">build</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">execution</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">id</span>&gt;</span>compile-kbase<span class="hljs-tag">&lt;/<span class="hljs-title">id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">goal</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-title">goal</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">goals</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">phase</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-title">phase</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">executions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>com.simpligility.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>android-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>4.2.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">extensions</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extensions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">sdk</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">platform</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-title">platform</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">sdk</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">dex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">coreLibrary</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">coreLibrary</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">jvmArguments</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">jvmArgument</span>&gt;</span>-Xmx2048m<span class="hljs-tag">&lt;/<span class="hljs-title">jvmArgument</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">jvmArguments</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">multiDex</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">multiDex</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">mainDexList</span>&gt;</span>maindex.txt<span class="hljs-tag">&lt;/<span class="hljs-title">mainDexList</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">dex</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">extractDuplicates</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extractDuplicates</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">apk</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">metaInf</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">includes</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">include</span>&gt;</span>services/**<span class="hljs-tag">&lt;/<span class="hljs-title">include</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">include</span>&gt;</span>kmodule.*<span class="hljs-tag">&lt;/<span class="hljs-title">include</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">include</span>&gt;</span>HelloKB/**<span class="hljs-tag">&lt;/<span class="hljs-title">include</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">include</span>&gt;</span>drools**<span class="hljs-tag">&lt;/<span class="hljs-title">include</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">include</span>&gt;</span>maven/${project.groupId}/${project.artifactId}/**<span class="hljs-tag">&lt;/<span class="hljs-title">include</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">includes</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">metaInf</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">apk</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">build</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_integration_with_roboguice"><a class="anchor" href="index.html#_integration_with_roboguice"></a><a class="link" href="index.html#_integration_with_roboguice"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2。</font><font style="vertical-align: inherit;">与Roboguice集成</font></font></a></h3>
<div class="sect3">
<h4 id="_pre_serialized_rules_with_roboguice"><a class="anchor" href="index.html#_pre_serialized_rules_with_roboguice"></a><a class="link" href="index.html#_pre_serialized_rules_with_roboguice"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.1。</font><font style="vertical-align: inherit;">使用Roboguice的预序列化规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Roboguice预序列化的KIE碱基可以使用@KBase注释进行注射。</font></font></p>
</div>
<div class="sect4">
<h5 id="_annotations_3"><a class="anchor" href="index.html#_annotations_3"></a><a class="link" href="index.html#_annotations_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.1.1。</font><font style="vertical-align: inherit;">注释</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KBase支持可选的'name'属性。</font><font style="vertical-align: inherit;">CDI通常在注入时执行“getOrCreate”，所有注入都会为同一组注释接收相同的实例。</font><font style="vertical-align: inherit;">'name'注释强制为每个名称强制一个唯一的实例，尽管该名称的所有实例都是identity等号。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="__kbase_3"><a class="anchor" href="index.html#__kbase_3"></a><a class="link" href="index.html#__kbase_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.1.2。</font><font style="vertical-align: inherit;">@KBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">default参数映射到value属性，并从kmodule.xml文件中指定KieBase的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从预序列化资源中按名称注入KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_androidmanifest_xml_configuration"><a class="anchor" href="index.html#_androidmanifest_xml_configuration"></a><a class="link" href="index.html#_androidmanifest_xml_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.1.3。</font><font style="vertical-align: inherit;">AndroidManifest.xml配置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要在清单中指定Roboguice模块。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实施例200.具有预序列化KIE碱基的Roboguice清单</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">application</span>
   <span class="hljs-attribute">android:largeHeap</span>=<span class="hljs-value">"true"</span>
   <span class="hljs-attribute">android:allowBackup</span>=<span class="hljs-value">"true"</span>
   <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_launcher"</span>
   <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/app_name"</span>
   <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/AppTheme"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">meta-data</span>
         <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"roboguice.modules"</span>
         <span class="hljs-attribute">android:value</span>=<span class="hljs-value">"org.drools.android.roboguice.DroolsModule"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">activity</span>
         <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/app_name"</span>
         <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.drools.examples.android.SplashActivity"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.MAIN"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.LAUNCHER"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiecontainer_with_drools_compiler_dependency_and_roboguice"><a class="anchor" href="index.html#_kiecontainer_with_drools_compiler_dependency_and_roboguice"></a><a class="link" href="index.html#_kiecontainer_with_drools_compiler_dependency_and_roboguice"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2。</font><font style="vertical-align: inherit;">KieContainer与drools编译器依赖和Roboguice</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Roboguice和drools编译器几乎可以使用完整的CDI语法来注入KieContainers，KieBases和KieSessions。</font></font></p>
</div>
<div class="sect4">
<h5 id="_annotations_4"><a class="anchor" href="index.html#_annotations_4"></a><a class="link" href="index.html#_annotations_4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.1。</font><font style="vertical-align: inherit;">注释</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KContainer，@ KBase和@KSession都支持可选的'name'属性。</font><font style="vertical-align: inherit;">CDI通常在注入时执行“getOrCreate”，所有注入都会为同一组注释接收相同的实例。</font><font style="vertical-align: inherit;">'name'注释强制为每个名称强制一个唯一的实例，尽管该名称的所有实例都是identity equals。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="__kcontainer_3"><a class="anchor" href="index.html#__kcontainer_3"></a><a class="link" href="index.html#__kcontainer_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.2。</font><font style="vertical-align: inherit;">@KContainer</font></font></a></h5>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注入Classpath KieContainer</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieContainer kContainer;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__kbase_4"><a class="anchor" href="index.html#__kbase_4"></a><a class="link" href="index.html#__kbase_4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.3。</font><font style="vertical-align: inherit;">@KBase</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml文件指定KieBase的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中按名称注入KieBase</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-keyword">private</span> KieBase kbase;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__ksession_for_kiesession_3"><a class="anchor" href="index.html#__ksession_for_kiesession_3"></a><a class="link" href="index.html#__ksession_for_kiesession_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.4。</font><font style="vertical-align: inherit;">@KSession for KieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KSession是可选的，因为它可以通过使用@Inject和变量类型推断来检测和添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性并从kmodule.xml文件指定KieSession的名称</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入默认KieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer按名称注入StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-keyword">private</span> KieSession ksession;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="__ksession_for_statelesskiesession_3"><a class="anchor" href="index.html#__ksession_for_statelesskiesession_3"></a><a class="link" href="index.html#__ksession_for_statelesskiesession_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.5。</font><font style="vertical-align: inherit;">@KSession for StatelessKieSession</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@KSession是可选的，因为它可以通过使用@Inject和变量类型推断来检测和添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认参数（如果给定）映射到value属性，并从kmodule.xml文件中指定KieSession的名称。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer中注入Default StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Classpath KieContainer按名称注入StatelessKieSession</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-keyword">private</span> StatelessKieSession ksession;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_androidmanifest_xml_configuration_2"><a class="anchor" href="index.html#_androidmanifest_xml_configuration_2"></a><a class="link" href="index.html#_androidmanifest_xml_configuration_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.2.2.6。</font><font style="vertical-align: inherit;">AndroidManifest.xml配置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要在清单中指定Roboguice模块。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例201. Roboguice清单配置</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">application</span>
   <span class="hljs-attribute">android:largeHeap</span>=<span class="hljs-value">"true"</span>
   <span class="hljs-attribute">android:allowBackup</span>=<span class="hljs-value">"true"</span>
   <span class="hljs-attribute">android:icon</span>=<span class="hljs-value">"@drawable/ic_launcher"</span>
   <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/app_name"</span>
   <span class="hljs-attribute">android:theme</span>=<span class="hljs-value">"@style/AppTheme"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">meta-data</span>
      <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"roboguice.modules"</span>
      <span class="hljs-attribute">android:value</span>=<span class="hljs-value">"org.drools.android.roboguice.DroolsContainerModule"</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">activity</span>
      <span class="hljs-attribute">android:label</span>=<span class="hljs-value">"@string/app_name"</span>
      <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"org.drools.examples.android.SplashActivity"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">intent-filter</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">action</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.action.MAIN"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">category</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.intent.category.LAUNCHER"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">intent-filter</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">activity</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">application</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.camel"><a class="anchor" href="index.html#_ch.camel"></a><a class="link" href="index.html#_ch.camel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16. Apache Camel集成</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_camel"><a class="anchor" href="index.html#_camel"></a><a class="link" href="index.html#_camel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16.1。</font><font style="vertical-align: inherit;">骆驼</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Camel提供轻量级总线框架，用于获取进出Drools的信息。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools引入了两个元素以便于集成。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools政策</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩充任何JAXB或XStream数据加载器。</font><font style="vertical-align: inherit;">对于JAXB，它为上下文路径添加了与drools相关的路径，对于XStream，它为Drools类添加了自定义转换器和别名。</font><font style="vertical-align: inherit;">它还处理将ClassLoader设置为目标ksession。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Endpoint</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据指定的drools会话执行有效负载</font></font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools可以像任何普通的camel组件一样进行配置，但请注意包含与drools相关的段的策略。</font><font style="vertical-align: inherit;">这会将所有有效负载路由到ksession1</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例202.使用CXFRS生成器配置Drools EndPoint</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePolicy"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.camel.component.KiePolicy"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">camelContext</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"camel"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://camel.apache.org/schema/spring"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://bean://rsServer"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:ksession1"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">camelContext</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以不在drools端点uri中指定会话，而是基于属性或标头指定“Multiplex”。</font><font style="vertical-align: inherit;">在此示例中，策略将检查要执行的命名会话的头字段“DroolsLookup”，如果未指定，则将检查传入有效负载上的“lookup”属性。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子203. Drools配置了CXFRS生成器的EndPoint</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePolicy"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.camel.component.KiePolicy"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">camelContext</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"camel"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://camel.apache.org/schema/spring"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://bean://rsServer"</span>/&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:dynamic"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">camelContext</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子204.从Spring和CamelContext对Route执行的Java代码</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CamelSpringTestSupport</span> </span>{<font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> AbstractXmlApplicationContext <span class="hljs-title">createApplicationContext</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"org/drools/camel/component/CxfRsSpring.xml"</span>);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        String cmd = <span class="hljs-string">""</span>;<font></font>
        cmd += <span class="hljs-string">"&lt;batch-execution lookup=\"ksession1\"&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"  &lt;insert out-identifier=\"salaboy\"&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"      &lt;org.drools.pipeline.camel.Person&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"         &lt;name&gt;salaboy&lt;/name&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"      &lt;/org.drools.pipeline.camel.Person&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"   &lt;/insert&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"   &lt;fire-all-rules/&gt;\n"</span>;<font></font>
        cmd += <span class="hljs-string">"&lt;/batch-execution&gt;\n"</span>;<font></font>
<font></font>
        Object object = <span class="hljs-keyword">this</span>.context.createProducerTemplate().requestBody(<span class="hljs-string">"direct://client"</span>, cmd);<font></font>
        System.out.println( object );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下网址显示了jaxb，xstream和json编组的示例脚本示例：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</font></font></a></p>
</li>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/jaxb.mvt?r=HEAD</font></font></a></p>
</li>
<li>
<p><a href="http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://fisheye.jboss.org/browse/JBossRules/trunk/drools-camel/src/test/resources/org/drools/camel/component/xstream.mvt?r=HEAD</font></font></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.server"><a class="anchor" href="index.html#_ch.server"></a><a class="link" href="index.html#_ch.server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17. Drools Camel Server</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_3"><a class="anchor" href="index.html#_introduction_3"></a><a class="link" href="index.html#_introduction_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools camel服务器（drools-camel-server）模块是一个战争，你可以部署它来为任何类型的客户端应用程序远程执行KnowledgeBases。</font><font style="vertical-align: inherit;">这不仅限于JVM应用程序客户端，也包括可以通过REST接口使用HTTP的任何技术。</font><font style="vertical-align: inherit;">此版本的执行服务器以本机方式支持无状态和有状态会话。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_deployment"><a class="anchor" href="index.html#_deployment"></a><a class="link" href="index.html#_deployment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.2。</font><font style="vertical-align: inherit;">部署</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Camel Server是一个war文件，可以部署在应用程序服务器（例如JBoss AS）中。</font><font style="vertical-align: inherit;">由于服务是无状态的，因此可以根据需要部署尽可能多的服务来为客户端负载提供服务。</font><font style="vertical-align: inherit;">在JBoss AS 4.x / Tomcat 6.x上进行部署是开箱即用的，而是必须添加一些外部依赖项，并且必须更改配置以在JBoss AS 5中部署</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="index.html#_configuration"></a><a class="link" href="index.html#_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3。</font><font style="vertical-align: inherit;">组态</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在war文件中，您将找到一些XML配置文件。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">beans.xml中</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导入knowledge-services.xml和camel-server.xml的Skeleton XML</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">骆驼的server.xml</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Camel Routes配置CXF端点</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将路由管道消息路由到各种已配置的知识服务</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">知识的services.xml</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种KIE基地和Sessions</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">骆驼client.xml的</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例camel客户端显示如何发送和接收消息</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由“开箱即用”test.jsp使用</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_rest_camel_services_configuration"><a class="anchor" href="index.html#_rest_camel_services_configuration"></a><a class="link" href="index.html#_rest_camel_services_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3.1。</font><font style="vertical-align: inherit;">REST / Camel服务配置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是配置将通过drools-server公开的服务。</font><font style="vertical-align: inherit;">您可以在camel-server.xml文件中修改此配置。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
  <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="hljs-attribute">xmlns:cxf</span>=<span class="hljs-value">"http://camel.apache.org/schema/cxf"</span>
  <span class="hljs-attribute">xmlns:jaxrs</span>=<span class="hljs-value">"http://cxf.apache.org/jaxrs"</span>
  <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"
  http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd
  http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd
  http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">import</span> <span class="hljs-attribute">resource</span>=<span class="hljs-value">"classpath:META-INF/cxf/cxf.xml"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">import</span> <span class="hljs-attribute">resource</span>=<span class="hljs-value">"classpath:META-INF/cxf/cxf-extension-jaxrs-binding.xml"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">import</span> <span class="hljs-attribute">resource</span>=<span class="hljs-value">"classpath:META-INF/cxf/cxf-servlet.xml"</span> /&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!--
   !   If you are running on JBoss you will need to copy a camel-jboss.jar into the lib and set this ClassLoader configuration
   !  http://camel.apache.org/camel-jboss.html
   !   &lt;bean id="jbossResolver" class="org.apache.camel.jboss.JBossPackageScanClassResolver"/&gt;
   --&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!--
   !   Define the server end point.
   !   Copy and paste this element, changing id and the address, to expose services on different urls.
   !   Different Camel routes can handle different end point paths.
   --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">cxf:rsServer</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"rsServer"</span>
                <span class="hljs-attribute">address</span>=<span class="hljs-value">"/rest"</span>
                <span class="hljs-attribute">serviceClass</span>=<span class="hljs-value">"org.kie.jax.rs.CommandExecutorImpl"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">cxf:providers</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.jax.rs.CommandMessageBodyReader"</span>/&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-title">cxf:providers</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">cxf:rsServer</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">cxf:cxfEndpoint</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"soapServer"</span>
            <span class="hljs-attribute">address</span>=<span class="hljs-value">"/soap"</span>
             <span class="hljs-attribute">serviceName</span>=<span class="hljs-value">"ns:CommandExecutor"</span>
             <span class="hljs-attribute">endpointName</span>=<span class="hljs-value">"ns:CommandExecutorPort"</span>
          <span class="hljs-attribute">wsdlURL</span>=<span class="hljs-value">"soap.wsdl"</span>
          <span class="hljs-attribute">xmlns:ns</span>=<span class="hljs-value">"http://soap.jax.drools.org/"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cxf:properties</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"dataFormat"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"MESSAGE"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"defaultOperationName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"execute"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">cxf:properties</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">cxf:cxfEndpoint</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-comment">&lt;!-- Leave this, as it's needed to make Camel "drools" aware --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePolicy"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.camel.component.KiePolicy"</span> /&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">camelContext</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"camel"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://camel.apache.org/schema/spring"</span>&gt;</span>
    <span class="hljs-comment">&lt;!--
     ! Routes incoming messages from end point id="rsServer".
     ! Example route unmarshals the messages with xstream and executes against ksession1.
     ! Copy and paste this element, changing marshallers and the 'to' uri, to target different sessions, as needed.
     !--&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://bean://rsServer"</span>/&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:ksession1"</span> /&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
       <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span><font></font>
<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxf://bean://soapServer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:ksession1"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;/<span class="hljs-title">camelContext</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span></code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_restful_service_endpoint_creation"><a class="anchor" href="index.html#_restful_service_endpoint_creation"></a><a class="link" href="index.html#_restful_service_endpoint_creation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3.1.1。</font><font style="vertical-align: inherit;">RESTful服务端点创建</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下一个XML代码段代码中，我们创建一个绑定到/ kservice / rest地址的RESTful（JAX-RS）端点，并使用org.drools.jax.rs.CommandExecutorImpl作为服务实现者。</font><font style="vertical-align: inherit;">此类仅用于实例化服务端点，因为所有内部实现都由Camel管理，您可以在源文件中看到必须永远不会调用公开的执行服务。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，还提供JAX-RS Provider以确定是否可以在此服务端点中处理传输的消息。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">cxf:rsServer</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"rsServer"</span>
              <span class="hljs-attribute">address</span>=<span class="hljs-value">"/rest"</span>
              <span class="hljs-attribute">serviceClass</span>=<span class="hljs-value">"org.kie.jax.rs.CommandExecutorImpl"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">cxf:providers</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.jax.rs.CommandMessageBodyReader"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">cxf:providers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">cxf:rsServer</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理想情况下，不需要修改此配置，至少是服务类和JAX-RS提供程序，但您可以添加与不同地址关联的更多端点，以便在其他Camel路由中使用它们。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成所有初始配置后，您可以开始配置自己的知识服务。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_camel_kie_policy_context_creation"><a class="anchor" href="index.html#_camel_kie_policy_context_creation"></a><a class="link" href="index.html#_camel_kie_policy_context_creation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3.1.2。</font><font style="vertical-align: inherit;">Camel Kie策略和上下文创建</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KiePolicy用于在Camel中添加Drools支持，基本上它的作用是在骆驼路由中添加拦截器以动态创建Camel处理器并修改内部导航路由。</font><font style="vertical-align: inherit;">如果您想获得SOAP支持，则需要创建自定义Drools策略，但它将在下一版本中添加。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是你不需要知道更多的内部细节，只需要实例化这个bean：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePolicy"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.camel.component.KiePolicy"</span> /&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来是创建将负责执行通过JAX-RS发送的命令的camel路由。</font><font style="vertical-align: inherit;">基本上，我们创建与JAX-RS定义关联的路由定义作为数据输入，要使用的camel策略以及“执行路径”或ProcessorDefinitions。</font><font style="vertical-align: inherit;">如您所见，我们将XStream设置为marshaller / unmarshaller和drools执行路由定义</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">camelContext</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"camel"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://camel.apache.org/schema/spring"</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://bean://rsServer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:ksession1"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxf://bean://soapServer"</span>/&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">unmarshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:ksession1"</span> /&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">marshal</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"xstream"</span> /&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">camelContext</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools端点创建具有下一个参数</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"kie:{1}/{2}"</span> /&gt;</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在CamelContext中注册的执行节点标识符</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在标识为{1}的执行节点中注册的KIE会话标识符</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个参数都在knowledge-services.xml文件中配置。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_knowledge_services_configuration"><a class="anchor" href="index.html#_knowledge_services_configuration"></a><a class="link" href="index.html#_knowledge_services_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3.1.3。</font><font style="vertical-align: inherit;">知识服务配置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是创建您将要使用的KIE会话。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attribute">xmlns:kie</span>=<span class="hljs-value">"http://drools.org/schema/kie-spring"</span>
       <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                          http://drools.org/schema/kie-spring http://drools.org/schema/kie-spring.xsd"</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie:kmodule</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"drools-camel-server"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie:kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.drools.server"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">kie:ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"stateless"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kbase</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie:kmodule</span>&gt;</span><font></font>
<font></font>
  <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePostProcessor"</span>
            <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.spring.KModuleBeanFactoryPostProcessor"</span>/&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行节点是一个上下文或注册的kbases和ksessions，这里kbase1和ksession1在node1上下文中计划。</font><font style="vertical-align: inherit;">kbase本身由两个知识定义组成，即DRL和XSD。</font><font style="vertical-align: inherit;">Spring文档包含有关配置这些知识服务的更多信息。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_test"><a class="anchor" href="index.html#_test"></a><a class="link" href="index.html#_test"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17.3.1.4。</font><font style="vertical-align: inherit;">测试</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">随着drools-server war解压缩，您应该能够看到test.jsp并运行它。</font><font style="vertical-align: inherit;">这个例子只执行一个简单的“echo”类型的应用程序。</font><font style="vertical-align: inherit;">它向规则服务器发送一条消息，该消息预先将单词“echo”附加到前面并将其发回。</font><font style="vertical-align: inherit;">默认情况下，消息是“Hello World”，可以使用url参数msg传递不同的消息 -  test.jsp？msg =“我的自定义消息”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在引擎盖下，jsp调用Test.java类，然后调用Camel，这是发生会面的地方。</font><font style="vertical-align: inherit;">camel-client.xml使用几行XML定义客户端：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-comment">&lt;!-- Leave this, as it's needed to make Camel "drools" aware --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"kiePolicy"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.kie.camel.component.KiePolicy"</span> /&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">camelContext</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"camel"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://camel.apache.org/schema/spring"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"direct://kservice/rest"</span>/&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
       <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://http://localhost:8080/drools-server/kservice/rest"</span>/&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">route</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">from</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"direct://kservice/soap"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">policy</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"kiePolicy"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">to</span> <span class="hljs-attribute">uri</span>=<span class="hljs-value">"cxfrs://http://localhost:8080/drools-server/kservice/soap"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">policy</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">route</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">camelContext</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“direct：// kservice”只是一个命名钩子，允许Java获取引用并将数据推入其中。</font><font style="vertical-align: inherit;">在此示例中，数据已经是XML格式，因此我们不需要添加任何</font></font><code>DataFormat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s来进行编组。</font><font style="vertical-align: inherit;">KiePolicy为路由添加了一些智能，你也会在服务器端看到它。</font><font style="vertical-align: inherit;">如果使用JAXB或XStream，它会注入自定义路径和转换器，它也可以在服务器端设置ClassLoader，在客户端它自动解包Response对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则本身可以在这里找到：test.drl。</font><font style="vertical-align: inherit;">请注意，Message类型被声明为DRL的一部分，因此不存在于Classpath中。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">declare <span class="hljs-constant">Message</span>
   text <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>
<span class="hljs-keyword">end</span><font></font>
<font></font>
<font></font>
rule <span class="hljs-string">"echo"</span> dialect <span class="hljs-string">"mvel"</span>
<span class="hljs-keyword">when</span>
   <span class="hljs-variable">$m</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Message</span>();
<span class="hljs-keyword">then</span>
   <span class="hljs-variable">$m</span>.text = <span class="hljs-string">"echo:"</span> + <span class="hljs-variable">$m</span>.text;
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<h1 id="_drools_workbench" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Workbench</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools工作台是使用UberFire框架构建的，并使用Guvnor插件。</font><font style="vertical-align: inherit;">Drools为规则编写隐喻提供了一组额外的插件。</font></font></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wb.workbench"><a class="anchor" href="index.html#_wb.workbench"></a><a class="link" href="index.html#_wb.workbench"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.工作台（一般）</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wb.installation"><a class="anchor" href="index.html#_wb.installation"></a><a class="link" href="index.html#_wb.installation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1。</font><font style="vertical-align: inherit;">安装</font></font></a></h3>
<div class="sect3">
<h4 id="_wb.warinstallation"><a class="anchor" href="index.html#_wb.warinstallation"></a><a class="link" href="index.html#_wb.warinstallation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.1。</font><font style="vertical-align: inherit;">战争安装</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用与</font></font><code>war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序服务器对应的工作台分发zip。</font><font style="vertical-align: inherit;">这些</font></font><code>war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">之间的差异</font><font style="vertical-align: inherit;">主要是肤浅的。</font><font style="vertical-align: inherit;">例如，如果应用程序服务器已经提供了某些JAR，则可能会将其排除在外。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>eap7</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为红帽JBoss企业应用平台7量身定制</font></font></p>
</li>
<li>
<p><code>tomcat8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为Apache Tomcat 8量身定制</font></font></p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apache Tomcat需要其他配置才能正确安装Workbench。</font><font style="vertical-align: inherit;">请咨询</font></font><code>README.md</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>war</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为最最新的程序。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p><code>wildfly11</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：为Wildfly 11量身定制</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_wb.workbenchdata"><a class="anchor" href="index.html#_wb.workbenchdata"></a><a class="link" href="index.html#_wb.workbenchdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.2。</font><font style="vertical-align: inherit;">工作台数据</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台将其数据存储，默认的目录</font></font><code>$WORKING_DIRECTORY/.niogit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，例如</font></font><code>wildfly-11.0.0.Final/bin/.niogit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但它可以与覆盖</font></font><a href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font></font></a><code>-Dorg.uberfire.nio.git.dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在生产中，请确保备份工作台数据目录。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_wb.systemproperties"><a class="anchor" href="index.html#_wb.systemproperties"></a><a class="link" href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.3。</font><font style="vertical-align: inherit;">系统属性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是所有系统属性的列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>kie.maven.offline.force</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：强制Maven表现为脱机。</font><font style="vertical-align: inherit;">如果为true，则禁用在线依赖项解析。</font><font style="vertical-align: inherit;">默认值：false。</font></font></p>
</li>
<li>
<p><strong><code>org.appformer.m2repo.url</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：工作台在查找依赖项时使用的默认Maven存储库的位置。</font><font style="vertical-align: inherit;">通常，这指向Workbench中的Maven存储库</font></font><code><a href="http://localhost:8080/kie-wb/maven2" class="bare">http://localhost:8080/kie-wb/maven2</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请在启动Workbench之前设置此项。</font><font style="vertical-align: inherit;">默认值：内部m2存储库的文件路径。</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.dir</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：目录的位置</font></font><code>.niogit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认值：工作目录</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.dirname</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：git目录的名称。</font><font style="vertical-align: inherit;">默认：</font></font><code>.niogit</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.proxy.ssh.over.http</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义SSH应使用HTTP代理。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>http.proxyHost</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义HTTP代理的主机名。</font><font style="vertical-align: inherit;">默认：</font></font><code>null</code></p>
</li>
<li>
<p><strong><code>http.proxyPort</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义HTTP代理的主机端口（整数值）。</font><font style="vertical-align: inherit;">默认：</font></font><code>null</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.proxy.ssh.over.https</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义SSH应使用HTTPS代理。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>https.proxyHost</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义HTTPS代理的主机名。</font><font style="vertical-align: inherit;">默认：</font></font><code>null</code></p>
</li>
<li>
<p><strong><code>https.proxyPort</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：定义HTTPS代理的主机端口（整数值）。</font><font style="vertical-align: inherit;">默认：</font></font><code>null</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.daemon.enabled</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用/禁用git守护程序。</font><font style="vertical-align: inherit;">默认：</font></font><code>true</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.daemon.host</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果启用了git守护程序，则将此属性用作本地主机标识符。</font><font style="vertical-align: inherit;">默认：</font></font><code>localhost</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.daemon.port</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果启用了git守护程序，则使用此属性作为端口号。</font><font style="vertical-align: inherit;">默认：</font></font><code>9418</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.enabled</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用/禁用ssh守护程序。</font><font style="vertical-align: inherit;">默认：</font></font><code>true</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.host</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果启用了ssh守护程序，则将此属性用作本地主机标识符。</font><font style="vertical-align: inherit;">默认：</font></font><code>localhost</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.port</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：如果启用了ssh守护程序，则使用此属性作为端口号。</font><font style="vertical-align: inherit;">默认：</font></font><code>8001</code></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.cert.dir</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>.security</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将存储本地证书</font><font style="vertical-align: inherit;">的目录的</font><font style="vertical-align: inherit;">位置。</font><font style="vertical-align: inherit;">默认值：工作目录</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.passphrase</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：在</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>scp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样式URL </font><font style="vertical-align: inherit;">克隆</font><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">库时，密码短语访问您的操作系统公钥库</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">例如</font></font><code>git@github.com:user/repository.git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.nio.git.ssh.algorithm</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：SSH使用的算法。</font><font style="vertical-align: inherit;">默认：</font></font><code>DSA</code></p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您计划使用RSA或DSA以外的任何算法，请确保正确设置Application Server以使用Bouncy Castle JCE库。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p><strong><code>org.uberfire.metadata.index.dir</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将</font></font><code>.index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储</font><font style="vertical-align: inherit;">Lucene </font><font style="vertical-align: inherit;">文件夹的位置。</font><font style="vertical-align: inherit;">默认值：工作目录</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.ldap.regex.role_mapper</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：正则表达式模式，用于将LDAP主体名称映射到应用程序角色名称。</font><font style="vertical-align: inherit;">请注意，变量</font></font><code>role</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是模式的一部分，因为在将主体值与角色名称匹配时，应用程序角色名称会替换</font><font style="vertical-align: inherit;">该变量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认值：未使用。</font></font></p>
</li>
<li>
<p><strong><code>org.uberfire.sys.repo.monitor.disabled</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：禁用配置监视器（除非您知道自己在做什么，否则不要禁用）。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>org.uberfire.secure.key</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：密码加密使用的密码。</font><font style="vertical-align: inherit;">默认：</font></font><code>org.uberfire.admin</code></p>
</li>
<li>
<p><strong><code>org.uberfire.secure.alg</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：密码加密使用的加密算法。</font><font style="vertical-align: inherit;">默认：</font></font><code>PBEWithMD5AndDES</code></p>
</li>
<li>
<p><strong><code>org.uberfire.domain</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：uberfire使用的安全域名。</font><font style="vertical-align: inherit;">默认：</font></font><code>ApplicationRealm</code></p>
</li>
<li>
<p><strong><code>org.guvnor.m2repo.dir</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将存储Maven存储库文件夹的位置。</font><font style="vertical-align: inherit;">默认值：working-directory / repositories / kie</font></font></p>
</li>
<li>
<p><strong><code>org.guvnor.project.gav.check.disabled</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：禁用GAV检查。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>org.kie.demo</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从GitHub启用演示应用程序的外部克隆。</font></font></p>
</li>
<li>
<p><strong><code>org.kie.build.disable-project-explorer</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：禁用Project Explorer中所选项目的自动构建。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>org.kie.verification.disable-dtable-realtime-verification</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：禁用决策表的实时验证和验证。</font><font style="vertical-align: inherit;">默认：</font></font><code>false</code></p>
</li>
<li>
<p><strong><code>org.kie.workbench.controller</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于连接Drools控制器的URL，例如：</font></font><code>ws://localhost:8080/kie-server-controller/websocket/controller</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅支持Web Socket协议与无头Drools控制器连接。</font><font style="vertical-align: inherit;">指定此比例时，Workbench将自动禁用与运行嵌入式Drools控制器相关的所有功能。</font></font></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>org.kie.workbench.controller.user</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于连接Drools控制器的用户名。</font><font style="vertical-align: inherit;">默认：</font></font><code>kieserver</code></p>
</li>
<li>
<p><strong><code>org.kie.workbench.controller.pwd</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于连接Drools控制器的密码。</font><font style="vertical-align: inherit;">默认：</font></font><code>kieserver1!</code></p>
</li>
<li>
<p><strong><code>org.kie.workbench.controller.token</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于连接Drools控制器的令牌字符串。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关如何使用基于</font></font><a href="index.html#usingTokenBasedAuthentication"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">令牌的身份验证</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的详细信息，</font><font style="vertical-align: inherit;">请参阅</font><a href="index.html#usingTokenBasedAuthentication"><font style="vertical-align: inherit;">使用基于</font></a><font style="vertical-align: inherit;">令牌的身份验证。</font></font></p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>kie.keystore.keyStoreURL</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：密钥库的URL，应该用于连接无头Drools控制器。</font></font></p>
</li>
<li>
<p><strong><code>kie.keystore.keyStorePwd</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：密钥库的密码。</font></font></p>
</li>
<li>
<p><strong><code>kie.keystore.key.ctrl.alias</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：存储密码的密钥的别名。</font></font></p>
</li>
<li>
<p><strong><code>kie.keystore.key.ctrl.pwd</code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：存储密码的别名的密码。</font></font></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关如何</font></font><a href="index.html#_securing_password_using_key_store"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用密钥库保护密码</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的更多详细信息，</font><font style="vertical-align: inherit;">请参阅</font><a href="index.html#_securing_password_using_key_store"><font style="vertical-align: inherit;">使用密钥存储区</font></a><font style="vertical-align: inherit;">保护密码。</font></font></p>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在WildFly或JBoss EAP集群中更改其中一个系统属性：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑文件</font></font><code>$JBOSS_HOME/domain/configuration/host.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属于</font><font style="vertical-align: inherit;">该元素的XML元素</font></font><code>main-server-group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并添加系统属性，例如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">system-properties</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.nio.git.dir"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"..."</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span><font></font>
  ...<font></font>
<span class="hljs-tag">&lt;/<span class="hljs-title">system-properties</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_wb.troubleshooting"><a class="anchor" href="index.html#_wb.troubleshooting"></a><a class="link" href="index.html#_wb.troubleshooting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.4。</font><font style="vertical-align: inherit;">故障排除</font></font></a></h4>
<div class="sect4">
<h5 id="_wb.troubleshootingloadingspinner"><a class="anchor" href="index.html#_wb.troubleshootingloadingspinner"></a><a class="link" href="index.html#_wb.troubleshootingloadingspinner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.4.1。</font><font style="vertical-align: inherit;">加载..不会消失，Workbench无法显示</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有报告称服务器和浏览器之间的防火墙可能会干扰Workbench使用的服务器发送事件（SSE）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该问题导致“加载...”微调器保持可见，并且Workbench无法实现。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决方法是通过将文件添加</font></font><code>/WEB-INF/classes/ErraiService.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到包含该值的爆炸WAR </font><font style="vertical-align: inherit;">来禁用Workbench对服务器发送事件的使用</font></font><code>errai.bus.enable_sse_support=false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">重新打包WAR并重新部署。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些用户还报告禁用服务器已发送事件无法解决问题。</font><font style="vertical-align: inherit;">找到的解决方案是将JVM配置为在Linux上使用不同的Entropy Gathering Device </font></font><code>SecureRandom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这可以通过系统属性设置来配置</font></font><code>java.security.egd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>file:/dev/./urandom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">  详细信息，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="http://stackoverflow.com/questions/33166198/kie-workbench-not-loading-after-login/39110177#39110177"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Stack Overflow帖子。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是请注意，这会影响JVM的随机数生成，并且可能会出现需要强加密的其他挑战。</font><font style="vertical-align: inherit;">请谨慎配置。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_not_able_to_clone_kie_workbench_git_repository_using_ssh_protocol"><a class="anchor" href="index.html#_not_able_to_clone_kie_workbench_git_repository_using_ssh_protocol"></a><a class="link" href="index.html#_not_able_to_clone_kie_workbench_git_repository_using_ssh_protocol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.1.4.2。</font><font style="vertical-align: inherit;">无法使用ssh协议克隆KIE Workbench Git存储库。</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用ssh与使用Workbench捆绑的Git服务器进行交互的Git客户端经过身份验证，并被授权通过作为Uberfire后端服务器一部分的安全API执行git命令。</font><font style="vertical-align: inherit;">使用LDAP安全领域时，某些git客户端未按预期授权。</font><font style="vertical-align: inherit;">这是因为对于非Web客户端（例如Git通过ssh），应用程序服务器的用户注册表分配给用户的主体（即用户或组）名称是LDAP与该主体关联的更复杂的DN。</font><font style="vertical-align: inherit;">Uberfire后端服务器的逻辑查找了返回的主体名称所允许的角色的完全匹配，因此失败了。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以通过系统属性控制角色主体匹配</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-property" data-lang="property">org.uberfire.ldap.regex.role_mapper</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在将LDAP主体与角色名称匹配时，将其应用为正则表达式。</font><font style="vertical-align: inherit;">模式必须包含文字单词变量'role'。</font><font style="vertical-align: inherit;">在授权期间，变量由每个允许的应用程序角色替换。</font><font style="vertical-align: inherit;">如果模式匹配，则将角色添加到用户。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，如果LDAP中管理员组的DN是</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-property" data-lang="property">DN: cn=admin,ou=groups,dc=example,dc=com</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它的目标角色是admin，然后设置</font></font><code>org.uberfire.ldap.regex.role_mapper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-regex" data-lang="regex">cn[\\ ]*=[\\ ]*role</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会找到角色'admin'的匹配项。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.quickstart"><a class="anchor" href="index.html#_wb.quickstart"></a><a class="link" href="index.html#_wb.quickstart"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2。</font><font style="vertical-align: inherit;">快速开始</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些步骤可帮助您以最少的努力开始。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们不应该是完全阅读文档的替代品。</font></font></p>
</div>
<div class="sect3">
<h4 id="_wb.quickstartimportexamples"><a class="anchor" href="index.html#_wb.quickstartimportexamples"></a><a class="link" href="index.html#_wb.quickstartimportexamples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.1。</font><font style="vertical-align: inherit;">导入示例</font></font></a></h4>
<div class="openblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导入示例 - 快速安装示例</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果Workbench为空，则会显示一个空的Space页面。</font><font style="vertical-align: inherit;">单击下面的“试用样品”按钮将显示可用的示例。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-example1.png" alt="快速入门示例1">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开“试用样品”页面后，您可以选择一个或多个示例，然后单击“确定”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-example2.png" alt="快速入门示例2">
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果Workbench已包含Projects，则可以使用菜单中的“Try Samples”按钮导入示例。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-import-with-pre-existing-projects.png" alt="使用预先存在的项目快速入门导入">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.quickstartaddproject"><a class="anchor" href="index.html#_wb.quickstartaddproject"></a><a class="link" href="index.html#_wb.quickstartaddproject"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.2。</font><font style="vertical-align: inherit;">添加项目</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，要导入示例，可以使用“添加项目”在Space页面中创建一个新的空项目。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-example1.png" alt="快速入门示例1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图116.“新建项目”按钮</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为项目命名和可选说明。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-new-project-wizard.png" alt="快速入门新项目向导">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图117.为项目命名</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.quickstartdefinedatamodel"><a class="anchor" href="index.html#_wb.quickstartdefinedatamodel"></a><a class="link" href="index.html#_wb.quickstartdefinedatamodel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.3。</font><font style="vertical-align: inherit;">定义数据模型</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建项目后，您需要定义规则要使用的类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从“创建新资产”菜单中选择“数据对象”。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以使用现有JAR中包含的类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关详细信息，请参阅完整文档。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-create-a-data-model.png" alt="QuickStart创建数据模型">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图118.创建“数据对象”</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置名称并选择新类型的包。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-create-data-object-popup.png" alt="QuickStart创建数据对象弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图119.创建新类型</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“+添加字段”按钮并设置字段名称和类型，然后单击“创建”以创建该类型的字段。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-create-field.png" alt="快速入门创建字段">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图120.单击“创建”并添加字段</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“保存”以更新模型。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-confirm-save.png" alt="快速入门确认保存">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图121.单击“保存”</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.quickstartdefinerule"><a class="anchor" href="index.html#_wb.quickstartdefinerule"></a><a class="link" href="index.html#_wb.quickstartdefinerule"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.4。</font><font style="vertical-align: inherit;">定义规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从“创建新资产”菜单中选择“DRL文件”（例如）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-create-drl-file.png" alt="QuickStart创建drl文件">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图122.从“创建新资产”菜单中选择“DRL文件”</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入新规则的文件名。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保选择与规则相同的包。</font><font style="vertical-align: inherit;">可以在不同的包中包含规则和数据模型，但为了演示目的，让我们保持简单。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-new-rule-popup.png" alt="快速启动新规则弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图123.输入规则的文件名</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入规则的定义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义过程因资产类型而异。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整文档包含有关不同编辑器的详细信息。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-writing-a-rule.png" alt="快速入门编写规则">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图124.定义规则</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦定义了规则，就需要以保存模型的方式保存规则。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_wb.quickstartbuildanddeloy"><a class="anchor" href="index.html#_wb.quickstartbuildanddeloy"></a><a class="link" href="index.html#_wb.quickstartbuildanddeloy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.2.5。</font><font style="vertical-align: inherit;">构建和部署</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦在项目中定义了规则; </font><font style="vertical-align: inherit;">可以构建项目并将其部署到Workbench的Maven Artifact Repository。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要构建项目，请从项目创作中选择“构建和部署”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/QuickStart-build-and-deploy.png" alt="快速入门构建和部署">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图125.构建项目</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“构建和部署”以构建项目并将其部署到Workbench的Maven工件库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择“构建和部署”时，工作台将部署到工作台项目中pom的“依赖关系管理”部分中定义的任何存储库。</font><font style="vertical-align: inherit;">您可以在项目资源管理器的“存储库视图”下编辑与工作台项目关联的pom.xml文件。</font><font style="vertical-align: inherit;">有关maven依赖管理的详细信息，请访问：</font><a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" class="bare"><font style="vertical-align: inherit;">http</font></a><font style="vertical-align: inherit;">：</font></font><a href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果在构建过程中出现错误，则会在“消息”面板中报告这些错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在该项目已经建成并部署完毕; </font><font style="vertical-align: inherit;">它可以作为任何其他Maven工件从您自己的项目中引用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整文档包含有关将项目与您自己的应用程序集成的详细信</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.configuration"><a class="anchor" href="index.html#_wb.configuration"></a><a class="link" href="index.html#_wb.configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3。</font><font style="vertical-align: inherit;">组态</font></font></a></h3>
<div class="sect3">
<h4 id="_wb.usermanagement"><a class="anchor" href="index.html#_wb.usermanagement"></a><a class="link" href="index.html#_wb.usermanagement"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.1。</font><font style="vertical-align: inherit;">基本用户管理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台根据应用程序服务器的身份验证和授权（JAAS）对其用户进行身份验证。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在JBoss EAP和WildFly上，添加一个带脚本</font></font><code>$JBOSS_HOME/bin/add-user.sh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（或</font></font><code>.bat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的用户</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$ ./add-user.sh
<span class="hljs-comment">// Type: Application User</span>
<span class="hljs-comment">// Realm: empty (defaults to ApplicationRealm)</span>
<span class="hljs-comment">// Role: admin</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无需重新启动应用程序服务器。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_wb.roles"><a class="anchor" href="index.html#_wb.roles"></a><a class="link" href="index.html#_wb.roles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2。</font><font style="vertical-align: inherit;">角色</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench使用以下角色：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分析人士</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发人员</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_admin"><a class="anchor" href="index.html#_admin"></a><a class="link" href="index.html#_admin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2.1。</font><font style="vertical-align: inherit;">管理员</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理BPMS系统。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理VFS存储库</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完全访问权限以进行必要的更改</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_developer"><a class="anchor" href="index.html#_developer"></a><a class="link" href="index.html#_developer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2.2。</font><font style="vertical-align: inherit;">开发人员</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除克隆存储库外，开发人员几乎可以执行管理员可以执行的所有操作</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理规则，模型，流程，表单和仪表板</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理资产存储库</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以创建，构建和部署项目</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用JBDS连接查看进程</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_analyst"><a class="anchor" href="index.html#_analyst"></a><a class="link" href="index.html#_analyst"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2.3。</font><font style="vertical-align: inherit;">分析人士</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Analyst是开发人员的较弱版本，无权访问资产存储库或部署项目的能力。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_business_user"><a class="anchor" href="index.html#_business_user"></a><a class="link" href="index.html#_business_user"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2.4。</font><font style="vertical-align: inherit;">业务用户</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统的每日用户对流程继续前进所需的业务任务执行操作。</font><font style="vertical-align: inherit;">主要用于任务列表。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是流程管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理任务和仪表板</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_manager_viewer_only_user"><a class="anchor" href="index.html#_manager_viewer_only_user"></a><a class="link" href="index.html#_manager_viewer_only_user"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.3.2.5。</font><font style="vertical-align: inherit;">经理/仅限查看者的用户</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对系统的查看者，该系统对业务流程及其性能，业务指标以及系统与系统交互的人员的性能，业务指标和其他报告感兴趣。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只能访问仪表板</font></font></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.introduction"><a class="anchor" href="index.html#_wb.introduction"></a><a class="link" href="index.html#_wb.introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4。</font><font style="vertical-align: inherit;">介绍</font></font></a></h3>
<div class="sect3">
<h4 id="_wb.loginandlogout"><a class="anchor" href="index.html#_wb.loginandlogout"></a><a class="link" href="index.html#_wb.loginandlogout"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.1。</font><font style="vertical-align: inherit;">登录并注销</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建具有该角色的用户</font></font><code>admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并使用这些凭据登录。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成功登录后，帐户用户名将显示在右上角。</font><font style="vertical-align: inherit;">单击它可以查看当前帐户的角色。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_wb.homescreen"><a class="anchor" href="index.html#_wb.homescreen"></a><a class="link" href="index.html#_wb.homescreen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.2。</font><font style="vertical-align: inherit;">主屏幕</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录后，主屏幕显示。</font><font style="vertical-align: inherit;">主屏幕的实际内容取决于工作台变体（Drools，jBPM，...）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/home.png" alt="家">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.administrationoverview"><a class="anchor" href="index.html#_wb.administrationoverview"></a><a class="link" href="index.html#_wb.administrationoverview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.3。</font><font style="vertical-align: inherit;">工作台概述</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台由Spaces和Projects构成：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/workbenchStructureOverview.png" alt="workbenchStructureOverview">
</div>
</div>
<div class="sect4">
<h5 id="_wb.space"><a class="anchor" href="index.html#_wb.space"></a><a class="link" href="index.html#_wb.space"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.3.1。</font><font style="vertical-align: inherit;">空间</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空间对于模拟部门和部门很有用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Space可以容纳多个项目。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Space.png" alt="空间">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.project"><a class="anchor" href="index.html#_wb.project"></a><a class="link" href="index.html#_wb.project"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.3.2。</font><font style="vertical-align: inherit;">项目</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目是存储资产并且每个项目属于单个空间的地方。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目实际上是基于虚拟文件系统的存储，默认情况下使用GIT作为后端。</font><font style="vertical-align: inherit;">这样的设置允许工作台与多个后端一起工作，同时充分利用后端特定功能，如GIT案例版本控制，分支甚至外部访问。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从头开始创建新项目，也可以从现有存储库中克隆新项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用GIT作为后端的最大优势之一是能够从外部克隆存储库并使用您首选的工具来编辑和构建资产。</font></font></p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切勿</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接从</font></font><a href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.niogit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font><font style="vertical-align: inherit;">克隆您的存储库</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.workbenchconcepts"><a class="anchor" href="index.html#_wb.workbenchconcepts"></a><a class="link" href="index.html#_wb.workbenchconcepts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.4.4。</font><font style="vertical-align: inherit;">Workbench用户界面概念</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench由不同的逻辑实体组成：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部件是用户可以与之交互以执行操作的屏幕或编辑器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例零件是“Project Explorer”，“Project Editor”，“Guided Rule Editor”等。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">透视图是相关面板和部件的逻辑分组。</font><font style="vertical-align: inherit;">透视图通常被命名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它是最终用户更熟悉的术语，而透视图更侧重于开发人员。</font><font style="vertical-align: inherit;">但请注意，Workbench支持开发人员创建的页面和最终用户从页面构建器（也称为内容管理）工具创建的页面，但一般来说，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于引用两者。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以通过单击其中一个顶级菜单项来切换页面。</font><font style="vertical-align: inherit;">例如“Home”，“Authoring”，“Deploy”等。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.changinglayout"><a class="anchor" href="index.html#_wb.changinglayout"></a><a class="link" href="index.html#_wb.changinglayout"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.5。</font><font style="vertical-align: inherit;">改变布局</font></font></a></h3>
<div class="sect3">
<h4 id="_wb.resizing"><a class="anchor" href="index.html#_wb.resizing"></a><a class="link" href="index.html#_wb.resizing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.5.1。</font><font style="vertical-align: inherit;">调整</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将鼠标指针移动到面板拆分器上（面板之间的灰色水平或垂直线）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">光标将通过更改指示它在分离器上正确定位。</font><font style="vertical-align: inherit;">按住鼠标左键并将分离器拖动到所需位置; </font><font style="vertical-align: inherit;">然后释放鼠标左键。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.authoring"><a class="anchor" href="index.html#_wb.authoring"></a><a class="link" href="index.html#_wb.authoring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6。</font><font style="vertical-align: inherit;">创作（一般）</font></font></a></h3>
<div class="sect3">
<h4 id="_wb.artifactrepository"><a class="anchor" href="index.html#_wb.artifactrepository"></a><a class="link" href="index.html#_wb.artifactrepository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.1。</font><font style="vertical-align: inherit;">工件存储库</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目通常需要在其类路径中使用外部工件来构建，例如域模型JAR。</font><font style="vertical-align: inherit;">工件存储库保存这些工件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artifact Repository是一个完整的Maven存储库。</font><font style="vertical-align: inherit;">它遵循Maven远程存储库的语义：所有快照都带有时间戳。</font><font style="vertical-align: inherit;">但它通常存储在本地硬盘上。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，工件存储库存储在</font></font><code>$WORKING_DIRECTORY/repositories/kie</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其</font><font style="vertical-align: inherit;">下</font><font style="vertical-align: inherit;">，但可以使用</font></font><a href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">覆盖它</font></font><code>-Dorg.guvnor.m2repo.dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个安装只有1个Maven存储库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artifact Repository屏幕显示Maven存储库中的工件列表：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/mavenRepositoryExplorer.png" alt="mavenRepositoryExplorer">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要向Maven存储库添加新工件，请执行以下任一操作：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用上传按钮并选择一个JAR。</font><font style="vertical-align: inherit;">如果JAR包含一个POM文件</font></font><code>META-INF/maven</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（由Maven构建的每个JAR都有），则不需要进一步的信息。</font><font style="vertical-align: inherit;">否则，还需要给出groupId，artifactId和version。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/mavenRepositoryUpload.png" alt="mavenRepositoryUpload">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Maven，</font></font><code>mvn deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到Maven存储库。</font><font style="vertical-align: inherit;">刷新列表以使其显示。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个远程Maven存储库相对简单。</font><font style="vertical-align: inherit;">它不支持代理，镜像，...像Nexus或Archiva。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_wb.asseteditor"><a class="anchor" href="index.html#_wb.asseteditor"></a><a class="link" href="index.html#_wb.asseteditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.2。</font><font style="vertical-align: inherit;">资产编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产编辑器是工作台用户界面的主要组件。</font><font style="vertical-align: inherit;">它包含两个主要视图编辑器和概述。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">观点</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AssetEditor-edit.png" alt="AssetEditor编辑">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图126.“资源编辑器 - 编辑器”选项卡</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">答：编辑区域 - 编辑器的确切形式取决于资产类型。</font><font style="vertical-align: inherit;">资产一次只能由一个用户编辑以避免冲突。</font><font style="vertical-align: inherit;">当用户开始编辑资产时，将自动获取锁定。</font><font style="vertical-align: inherit;">这由资产标题栏以及</font><a href="index.html#_wb.projectexplorer"><font style="vertical-align: inherit;">项目资源管理器</font></a><font style="vertical-align: inherit;">视图中出现的锁定符号表示（请参阅</font></font><a href="index.html#_wb.projectexplorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Explorer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">详情）。</font><font style="vertical-align: inherit;">如果用户开始编辑已经锁定的资产，则会出现弹出通知，通知用户当前无法编辑该资产，因为该资产正由另一个用户处理。</font><font style="vertical-align: inherit;">在编辑用户保存或关闭资产或退出工作台之前，将阻止更改。</font><font style="vertical-align: inherit;">会话超时也会导致锁定被释放。</font><font style="vertical-align: inherit;">如果需要，每个用户还可以选择强制锁定释放（请参阅下面的元数据部分）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B：此菜单栏包含资产的各种操作; </font><font style="vertical-align: inherit;">例如保存，重命名，复制等。请注意，如果资产被其他用户锁定，则会停用保存，重命名和删除。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：资产内容或资产信息的不同视图。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑器显示资产的主编辑器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概述包含此编辑器的元数据和对话视图。</font><font style="vertical-align: inherit;">下面更详细地解释。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来源以普通DRL显示资产。</font><font style="vertical-align: inherit;">注意：只有在可以将资产内容生成为DRL时，此选项卡才可见。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象包含可用于创作的模型。</font><font style="vertical-align: inherit;">默认情况下，只有与资产位于同一包中的数据对象才可用于创作。</font><font style="vertical-align: inherit;">可以导入此程序包外部的数据对象以用于创作资产。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AssetEditor-dataobjects.png" alt="AssetEditor数据对象">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图127.“资产编辑器 - 数据对象”选项卡</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概观</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">答：有关资产和资产描述的一般信息。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“类型：”资产类型的格式名称。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“说明：”资产说明。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“在项目中使用：”命名使用此规则的项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“上次修改时间：”谁做了最后一次更改以及何时进行。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“创建于：”谁创建了资产以及何时创建。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B：资产的版本历史记录。</font><font style="vertical-align: inherit;">选择版本会将所选版本加载到此编辑器中。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：元数据（来自“都柏林核心”标准）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D：关于资产开发的评论可以在这里记录。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Overview.png" alt="概观">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图128.“资产编辑器 - 概述”选项卡</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">答：元数据： - </font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“标签：”用于对资产进行分组的标记系统。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“注意：”资产上次更新时发表的评论（即为何进行了更改）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“URI：”Git存储库中资产的URI。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“主题/类型/外部链接/来源”：资产的其他杂项元数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“锁定状态”：显示资产的锁定状态，如果已锁定，则允许强制解锁资产。</font></font></p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Metadata.png" alt="元数据">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图129.“元数据”选项卡</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">锁定</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench支持对资产的悲观锁定。</font><font style="vertical-align: inherit;">当一个用户开始编辑资产时，它将被其他用户锁定以进行更改。</font><font style="vertical-align: inherit;">锁定一直持续到一段时间不活动，编辑器关闭或应用程序停止并重新启动。</font><font style="vertical-align: inherit;">也可以在Overview选项卡的MetaData部分强制删除锁。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当资产被锁定时，“挂锁”图标将显示在编辑器标题栏中，并显示在项目资源管理器中的资产旁边。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/AssetEditor-locked.png" alt="AssetEditor已锁定">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图130.资产编辑器 - 其他用户无法编辑锁定的资产</font></font></div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_wb.tagseditor"><a class="anchor" href="index.html#_wb.tagseditor"></a><a class="link" href="index.html#_wb.tagseditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.3。</font><font style="vertical-align: inherit;">标签编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签允许使用您定义的任意数量的标签标记资产。</font><font style="vertical-align: inherit;">这些标记可用于在Project Explorer上过滤资产，从而启用“标记过滤”。</font></font></p>
</div>
<div class="sect4">
<h5 id="_wb.managingtags"><a class="anchor" href="index.html#_wb.managingtags"></a><a class="link" href="index.html#_wb.managingtags"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.3.1。</font><font style="vertical-align: inherit;">创建标签</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要创建标签，您只需在标签输入上写下它们，然后按“添加新标签”按钮。</font><font style="vertical-align: inherit;">标签编辑器允许逐个创建标签或使用空格分隔多个标签。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/CreatingTags.png" alt="CreatingTags">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图131.创建标签</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新标签后，它们将显示在编辑器上，允许您根据需要按下它们将其删除。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExistingTags.png" alt="ExistingTags">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图132.现有标签</font></font></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.projectexplorer"><a class="anchor" href="index.html#_wb.projectexplorer"></a><a class="link" href="index.html#_wb.projectexplorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4。</font><font style="vertical-align: inherit;">Project Explorer</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Explorer提供了浏览当前Project内文件的功能。</font><font style="vertical-align: inherit;">打开资产编辑器时，可以从左侧访问Project Explorer。</font></font></p>
</div>
<div class="sect4">
<h5 id="_wb.projectexplorerempty"><a class="anchor" href="index.html#_wb.projectexplorerempty"></a><a class="link" href="index.html#_wb.projectexplorerempty"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4.1。</font><font style="vertical-align: inherit;">初步看法</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果另一个用户当前正在编辑文件，则会在文件名前面显示一个锁定符号。</font><font style="vertical-align: inherit;">如果锁由当前经过身份验证的用户拥有，则该符号为蓝色，否则为黑色。</font><font style="vertical-align: inherit;">将鼠标指针移动到锁定符号上将显示工具提示，提供当前正在编辑文件的用户的名称（因此拥有锁定）。</font><font style="vertical-align: inherit;">要了解有关锁定的更多信息，请参阅</font></font><a href="index.html#_wb.asseteditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asset Editor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 以获取详</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Project-Expanded.png" alt="ProjectExplorer项目扩展">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图133.扩展资产组</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.projectexplorerswitchingview"><a class="anchor" href="index.html#_wb.projectexplorerswitchingview"></a><a class="link" href="index.html#_wb.projectexplorerswitchingview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4.2。</font><font style="vertical-align: inherit;">不同意见</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Explorer支持多个视图。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目视图</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基础项目结构的简化视图。</font><font style="vertical-align: inherit;">从视图中隐藏某些系统文件。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库视图</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基础项目结构的完整视图，包括所有文件; </font><font style="vertical-align: inherit;">用户定义的或系统生成的。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击Project Explorer中的图标可以选择视图，如下所示。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择“显示为文件夹”或“显示为链接”，可以进一步细化项目和存储库视图。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Switching-View.png" alt="ProjectExplorer切换视图">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图134.切换视图</font></font></div>
</div>
<div class="sect5">
<h6 id="_wb.projectexplorertechnicalview"><a class="anchor" href="index.html#_wb.projectexplorertechnicalview"></a><a class="link" href="index.html#_wb.projectexplorertechnicalview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库查看示例</font></font></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Repository-Folders.png" alt="ProjectExplorer存储库文件夹">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图135.存储库视图 - 文件夹</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Repository-Links.png" alt="ProjectExplorer存储库链接">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图136.存储库视图 - 链接</font></font></div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.projectexplorerdownloads"><a class="anchor" href="index.html#_wb.projectexplorerdownloads"></a><a class="link" href="index.html#_wb.projectexplorerdownloads"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4.3。</font><font style="vertical-align: inherit;">下载项目或存储库</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载下载和下载存储库可以将项目或存储库下载为zip文件。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Downloads.png" alt="ProjectExplorer下载">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图137.存储库和项目下载</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.projectexplorerfilteringbytag"><a class="anchor" href="index.html#_wb.projectexplorerfilteringbytag"></a><a class="link" href="index.html#_wb.projectexplorerfilteringbytag"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4.4。</font><font style="vertical-align: inherit;">按标签过滤</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要轻松查看包含大量资源的包上的元素，可以启用标记过滤器，这样可以按标记过滤资产。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要查看如何向资产添加标签，请查看：</font></font><a href="index.html#_wb.tagseditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签编辑器</font></font></a></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Tag-Filter-Enable.png" alt="ProjectExplorer标记过滤器启用">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图138.按标签启用过滤器</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Tag-Filter-Show.png" alt="ProjectExplorer标签过滤器显示">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图139.按标签过滤</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Tag-Filter-Working.png" alt="ProjectExplorer标签过滤器工作">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图140.按标记过滤</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.projectexplorercopyrenamedeleteactions"><a class="anchor" href="index.html#_wb.projectexplorercopyrenamedeleteactions"></a><a class="link" href="index.html#_wb.projectexplorercopyrenamedeleteactions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.4.5。</font><font style="vertical-align: inherit;">复制，重命名，删除和下载操作</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接模式，项目视图中的包以及存储库视图中的文件和目录都可以使用复制，重命名和删除操作。</font><font style="vertical-align: inherit;">下载操作可用于目录。</font><font style="vertical-align: inherit;">下载选项将选定的目录下载为zip文件。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复印件</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B：重命名</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：删除</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D：下载</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Project-Links-Copy-Rename-Delete.png" alt="ProjectExplorer项目链接复制重命名删除">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图141.项目视图 - 包操作</font></font></div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench路线图包括重构和影响分析工具，但目前还没有。</font><font style="vertical-align: inherit;">在提供这两个工具之前，请确保对包，文件或目录的更改（复制/重命名/删除）不会对项目产生重大影响。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您的更改产生了不可接受的影响，Workbench允许您使用</font></font><a href="index.html#_wb.vfsrepositoryeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository编辑器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还原存储</font><a href="index.html#_wb.vfsrepositoryeditor"><font style="vertical-align: inherit;">库</font></a><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在释放相应的锁之前，无法重命名或删除由其他用户锁定的文件以及包含此类文件的目录。</font><font style="vertical-align: inherit;">如果是这种情况，则将停用重命名和删除符号。</font><font style="vertical-align: inherit;">要了解有关锁定的更多信息，请参阅</font></font><a href="index.html#_wb.asseteditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Asset Editor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 以获取详</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProjectExplorer-Delete-NotAllowed.png" alt="ProjectExplorer删除NotAllowed">
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.projecteditor"><a class="anchor" href="index.html#_wb.projecteditor"></a><a class="link" href="index.html#_wb.projecteditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5。</font><font style="vertical-align: inherit;">项目编辑</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从Project Explorer访问项目编辑器屏幕。</font><font style="vertical-align: inherit;">项目编辑器显示当前活动项目的设置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与大多数工作台编辑器不同，项目编辑器编辑多个文件。</font><font style="vertical-align: inherit;">显示在一个地方配置KIE项目所需的一切。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/project_editor_menu.png" alt="项目编辑菜单">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图142.项目屏幕和不同视图</font></font></div>
</div>
<div class="sect4">
<h5 id="_build_deploy"><a class="anchor" href="index.html#_build_deploy"></a><a class="link" href="index.html#_build_deploy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5.1。</font><font style="vertical-align: inherit;">构建和部署</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build＆Depoy构建当前项目并将KJAR部署到工作台内部Maven存储库中。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_project_settings"><a class="anchor" href="index.html#_project_settings"></a><a class="link" href="index.html#_project_settings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5.2。</font><font style="vertical-align: inherit;">项目设置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“项目设置”编辑Maven使用的pom.xml文件。</font></font></p>
</div>
<div class="sect5">
<h6 id="_project_general_settings"><a class="anchor" href="index.html#_project_general_settings"></a><a class="link" href="index.html#_project_general_settings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目常规设置</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常规设置提供项目名称和GAV数据（组，工件，版本）的工具。</font><font style="vertical-align: inherit;">GAV值用作标识符以区分同一项目的项目和版本。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/general_settings.png" alt="常规设置">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图143.项目设置</font></font></div>
</div>
</div>
<div class="sect5">
<h6 id="_dependencies"><a class="anchor" href="index.html#_dependencies"></a><a class="link" href="index.html#_dependencies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该项目可能具有任意数量的内部或外部依赖项。</font><font style="vertical-align: inherit;">Dependency是一个已构建并部署到Maven存储库的项目。</font><font style="vertical-align: inherit;">内部依赖项是在与项目相同的工作台中构建和部署的项目。</font><font style="vertical-align: inherit;">从当前工作台之外的存储库检索外部依赖项。</font><font style="vertical-align: inherit;">每个依赖项都使用GAV值来指定项目使用的项目名称和版本。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dependencies.png" alt="依赖">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图144.依赖关系</font></font></div>
</div>
<div class="sect6">
<h7 id="_package_name_white_list"><a class="anchor" href="index.html#_package_name_white_list"></a><a class="link" href="index.html#_package_name_white_list"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包名称白名单</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">白名单包中的类和声明的类型显示为可以在资产中导入的数据对象。</font><font style="vertical-align: inherit;">完整列表存储在package-name-white-list文件中，该文件存储在每个项目根目录中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包白名单有三种模式：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括所有包：此jar中定义的每个包都是白名单。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未包含的软件包：此jar中列出的软件包均未列入白名单。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些软件包包括：jar中只有部分软件包是白名单。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_metadata"><a class="anchor" href="index.html#_metadata"></a><a class="link" href="index.html#_metadata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pom.xml文件的元数据。</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_kie_base_settings"><a class="anchor" href="index.html#_kie_base_settings"></a><a class="link" href="index.html#_kie_base_settings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5.3。</font><font style="vertical-align: inherit;">KIE基础设置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE base Settings编辑Drools使用的kmodule.xml文件。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/kmodule.png" alt="KMODULE">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图145. KIE基本设置</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关KIE基本属性的更多信息，请查看kmodule.xml的Drools Expert文档。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="_kie_bases_and_sessions"><a class="anchor" href="index.html#_kie_bases_and_sessions"></a><a class="link" href="index.html#_kie_bases_and_sessions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基地和会议</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基础和会话列出了为项目指定的KIE基础和KIE会话。</font></font></p>
</div>
<div class="sect6">
<h7 id="_kie_base_list"><a class="anchor" href="index.html#_kie_base_list"></a><a class="link" href="index.html#_kie_base_list"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基地名单</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按名称列出所有KIE基地。</font><font style="vertical-align: inherit;">只能将一个KIE基础设置为默认值。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_kie_base_properties"><a class="anchor" href="index.html#_kie_base_properties"></a><a class="link" href="index.html#_kie_base_properties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE基础属性</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE碱基可包括其他KIE碱基。</font><font style="vertical-align: inherit;">所包含的KIE基础中的模型，规则和任何其他内容将由当前选定的KIE基础可见和可用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则和模型存储在包中。</font><font style="vertical-align: inherit;">packages属性指定包含在此KIE库中的包。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在文档的Drools Expert部分中解释了等于行为。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件处理模式在文档的Drools Fusion部分中进行了解释。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_kie_sessions"><a class="anchor" href="index.html#_kie_sessions"></a><a class="link" href="index.html#_kie_sessions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE会议</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该表列出了所选KIE基础中的所有KIE会话。</font><font style="vertical-align: inherit;">每种类型只能有一个默认值。</font><font style="vertical-align: inherit;">这些类型是无国籍和有状态的。</font><font style="vertical-align: inherit;">单击笔图标将打开一个弹出窗口，其中显示了KIE会话的更多属性。</font></font></p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_metadata_2"><a class="anchor" href="index.html#_metadata_2"></a><a class="link" href="index.html#_metadata_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml的元数据</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_imports"><a class="anchor" href="index.html#_imports"></a><a class="link" href="index.html#_imports"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5.4。</font><font style="vertical-align: inherit;">进口</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置编辑工作台编辑器使用的project.imports文件。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExternalDataObjects.png" alt="ExternalDataObjects">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图146.进口</font></font></div>
</div>
<div class="sect5">
<h6 id="_external_data_objects"><a class="anchor" href="index.html#_external_data_objects"></a><a class="link" href="index.html#_external_data_objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部数据对象</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java Runtime环境提供的数据对象可能需要注册才能用于规则创作，其中此类数据对象不是隐式可用作Workbench或Project依赖项中定义的现有数据对象的一部分。</font><font style="vertical-align: inherit;">例如，作者可能想要定义</font></font><code>java.util.ArrayList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在工作记忆</font><font style="vertical-align: inherit;">中检查的规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果域数据对象具有类型字段，</font></font><code>java.util.ArrayList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则无需创建注册。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_metadata_3"><a class="anchor" href="index.html#_metadata_3"></a><a class="link" href="index.html#_metadata_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">project.imports文件的元数据。</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_duplicate_gav_detection"><a class="anchor" href="index.html#_duplicate_gav_detection"></a><a class="link" href="index.html#_duplicate_gav_detection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.5.5。</font><font style="vertical-align: inherit;">重复GAV检测</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行以下任何操作时，现在将针对项目的所有Maven存储库进行检查，以确定Project的GroupId，ArtifactId和Version是否已存在。</font><font style="vertical-align: inherit;">如果发现冲突，则阻止操作; </font><font style="vertical-align: inherit;">虽然具有该</font></font><code>admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font><font style="vertical-align: inherit;">的用户可以覆盖此项</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该功能可以通过系统属性设置来禁用</font></font><code>org.guvnor.project.gav.check.disabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已解决的存储库是在以下位置发现的：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目</font><font style="vertical-align: inherit;">部分（或任何父母</font><font style="vertical-align: inherit;">）。</font></font><code>POM<code></code>&lt;repositories&gt;</code><font style="vertical-align: inherit;"></font><code>POM</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目的</font><font style="vertical-align: inherit;">部分。</font></font><code>POM<code></code>&lt;distributionManagement&gt;</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven的全局</font></font><code>settings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受影响的业务： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新的托管存储库。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器保存项目定义。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将新模块添加到托管多模块存储库。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存</font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器构建和安装项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器构建和部署项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理操作构建，安装或部署项目。</font></font></p>
</li>
<li>
<p><code>REST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 操作创建，安装或部署项目。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有该</font></font><code>Admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色的</font><font style="vertical-align: inherit;">用户</font><font style="vertical-align: inherit;">可以使用项目编辑器中的“存储库”设置覆盖已检查的存储库列表。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/validation-menu-item.png" alt="验证菜单项">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图147.项目编辑器 - 查看已解析的存储库</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/MavenRepositories2.png" alt="MavenRepositories2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图148.项目编辑器 - 已解析的存储库列表</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/MavenRepositories3.png" alt="MavenRepositories3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图149.检测到重复的GAV</font></font></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.validation"><a class="anchor" href="index.html#_wb.validation"></a><a class="link" href="index.html#_wb.validation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.6。</font><font style="vertical-align: inherit;">验证</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench为用户提供通用且一致的服务，以了解在环境中创作的文件是否有效。</font></font></p>
</div>
<div class="sect4">
<h5 id="_wb.problemspanel"><a class="anchor" href="index.html#_wb.problemspanel"></a><a class="link" href="index.html#_wb.problemspanel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.6.1。</font><font style="vertical-align: inherit;">问题小组</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“问题”面板显示项目中资产的实时验证结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从项目浏览器中选择项目时，“问题”面板将刷新所选项目的验证结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建，保存或删除文件时，“问题面板”内容将更新以显示新的验证错误，或者在删除文件时删除现有文件。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/workbench-problems-panel.png" alt="工作台问题面板">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图150.问题小组</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.ondemandvalidation"><a class="anchor" href="index.html#_wb.ondemandvalidation"></a><a class="link" href="index.html#_wb.ondemandvalidation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.6.2。</font><font style="vertical-align: inherit;">按需验证</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并不总是希望保存文件以确定它是否处于有效状态。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有文件编辑器都能够在保存内容之前验证内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“验证”按钮会显示验证错误（如果有）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/workbench-validation.png" alt="工作台验证">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.datamodeller"><a class="anchor" href="index.html#_wb.datamodeller"></a><a class="link" href="index.html#_wb.datamodeller"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7。</font><font style="vertical-align: inherit;">数据建模器</font></font></a></h4>
<div class="sect4">
<h5 id="_sect_datamodeler_firststeps"><a class="anchor" href="index.html#_sect_datamodeler_firststeps"></a><a class="link" href="index.html#_sect_datamodeler_firststeps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.1。</font><font style="vertical-align: inherit;">创建数据模型的第一步</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，数据模型始终受限于项目的上下文。</font><font style="vertical-align: inherit;">出于本教程的目的，我们假设已经存在正确配置的项目并且创作页面已打开。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在项目内开始创建数据模型，请执行以下步骤：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在主页面板中，选择Desing页面并选择给定项目。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/authoring.jpg" alt="创作">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图151.转到创作页面并选择一个项目</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击数据对象文件或使用“创建新资产→数据对象”菜单选项打开数据建模器工具。</font><font style="vertical-align: inherit;">将数据对象名称设置为“PurchaseOrder”，然后单击“确定”。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/open_data_model.jpg" alt="开放数据模型">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图152.单击数据对象</font></font></div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将启动Data Modeller工具，该工具具有以下一般方面：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/Overview(1).png" alt="概观">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图153.数据建模器概述</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“编辑器”选项卡分为以下几个部分：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新字段部分专用于创建新字段，并在按下“添加字段”按钮时打开。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/create-new-field.png" alt="创造新的领域">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图154.新字段创建</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的“字段浏览器”部分显示包含数据对象字段的列表。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-field-browser.png" alt="数据对象字段浏览器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图155.数据对象的字段浏览器</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“数据对象/字段常规属性”部分。</font><font style="vertical-align: inherit;">这是Data Modeller编辑器的最右侧部分，可视化“数据对象”或“字段”常规属性，具体取决于用户选择。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过单击“数据对象选择器”来选择“数据对象”常规属性。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-selector.png" alt="数据对象选择器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图156.数据对象选择器</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-general-properties.png" alt="数据对象一般属性">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图157.数据对象常规属性</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过单击字段来选择字段常规属性。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/field-selector.png" alt="场选择器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图158.字段选择器</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/field-general-properties.png" alt="一般属性">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图159.字段常规属性</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在工作台的右侧，提供了一个新的“工具栏”，可以选择不同的上下文敏感工具窗口，让用户进行特定于域的配置。</font><font style="vertical-align: inherit;">目前为以下域提供了四个工具窗口“Drools＆jBPM”，“OptaPlanner”，“Persistence”和“Advanced”配置。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/tool-window-selector.png" alt="工具窗口选择器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图160.数据建模器工具栏</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-drools-tool-window.png" alt="数据对象drools工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图161. Drools和jBPM工具窗口</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-optaplanner-tool-window.png" alt="数据对象optaplanner工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图162. OptaPlanner工具窗口</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要查看和使用OptaPlanner工具窗口，用户需要具有该角色</font></font><code>plannermgmt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-persistence-tool-window.png" alt="数据对象持久性工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图163.持久性工具窗口</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-or-field-advanced-tool-window.png" alt="数据对象或字段高级工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图164.高级工具窗口</font></font></div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“源”选项卡显示一个编辑器，允许可视化和修改生成的Java代码。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在“编辑器”和“源”选项卡之间往返，并且还提供源代码保存。</font><font style="vertical-align: inherit;">这意味着无论Java代码生成在哪里（例如Eclipse，Data modeller），数据建模器都只会更新必要的代码块以维护模型的更新。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/source-editor-tab.png" alt="源编辑器选项卡">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图165.源编辑器</font></font></div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“概述”选项卡显示标准元数据和版本信息，作为其他工作台编辑器。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_sect_datamodeler_entities"><a class="anchor" href="index.html#_sect_datamodeler_entities"></a><a class="link" href="index.html#_sect_datamodeler_entities"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.2。</font><font style="vertical-align: inherit;">数据对象</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据模型由数据对象组成，数据对象是某些现实世界数据的逻辑表示。</font><font style="vertical-align: inherit;">这样的数据对象具有一组固定的建模器（或应用程序拥有的）属性，例如其内部标识符，标签，描述，包等。除此之外，数据对象还具有一组可变的用户定义字段，这些字段是此逻辑数据对象表示的数据类型的真实属性的抽象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用工作台“New Item  -  Data Object”菜单选项可以创建数据对象。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/create-new-data-object.png" alt="创建新的数据对象">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图166.“新建数据对象”菜单选项</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源名称和位置都是必需参数。</font><font style="vertical-align: inherit;">按下“确定”按钮后，将创建一个新的Java文件，并为文件编辑打开一个新的编辑器实例。</font><font style="vertical-align: inherit;">可选的“Persistable”属性将在数据对象上添加默认配置，以使其成为JPA实体。</font><font style="vertical-align: inherit;">如果您的jBPM项目需要将数据对象的信息存储在数据库中，请使用此选项。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_sect_datamodeler_propertyrelationships"><a class="anchor" href="index.html#_sect_datamodeler_propertyrelationships"></a><a class="link" href="index.html#_sect_datamodeler_propertyrelationships"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.3。</font><font style="vertical-align: inherit;">属性和关系</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建数据对象后，现在必须通过将用户定义的属性添加到其定义来完成。</font><font style="vertical-align: inherit;">这可以通过按“添加字段”按钮来实现。</font><font style="vertical-align: inherit;">将打开“新建字段”对话框，按“创建”按钮可以创建新字段。</font><font style="vertical-align: inherit;">“创建并继续”按钮也会将新字段添加到数据对象，但不会关闭对话框。</font><font style="vertical-align: inherit;">通过这种方式，可以创建多个字段，避免弹出多次打开。</font><font style="vertical-align: inherit;">可以（或必须）填写以下字段：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段的内部标识符（必填）。</font><font style="vertical-align: inherit;">每个数据对象的该字段的值必须是唯一的，即如果建议的标识符已存在于当前数据对象中，则将显示错误消息。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签（可选）：与数据对象定义一样，用户可以为即将创建的数据对象字段定义用户友好标签。</font><font style="vertical-align: inherit;">这对于如何处理来自此数据对象的对象的字段没有进一步的影响。</font><font style="vertical-align: inherit;">如果定义了标签，那么这就是整个数据建模器工具中字段的显示方式。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段类型（必填）：需要为每个数据对象字段分配一个类型。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此类型可以是以下任一类型：</font></font></p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'原始java对象'类型：这些包括标准Java原始类型的大多数对象等价物，例如Boolean，Short，Float等，以及String，Date，BigDecimal和BigInteger。</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/create-field-with-primitive-type.png" alt="使用基本类型创建字段">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图167.原始对象字段类型</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“数据对象”类型：任何用户定义的数据对象自动成为被定义为另一个数据对象的字段类型的候选者，从而能够在它们之间创建关系。</font><font style="vertical-align: inherit;">数据对象字段可以以“单个”或“多个”形式创建，后者暗示该字段将被定义为此类型的集合，将通过选择“列表”复选框来指示。</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/types_entity.jpg" alt="类型实体">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图168.数据对象字段类型</font></font></div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'primitive java'类型：这些包括java原始类型byte，short，int，long，float，double，char和boolean。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/types_primitive.jpg" alt="类型原语">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图169.原始字段类型</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成介绍新字段的初始信息后，单击“创建”按钮会将新创建的字段添加到下面数据对象的字段表的末尾：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/new-field-was-created.png" alt="新领域创建">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图170.已创建新字段</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新字段也将自动在数据对象的字段列表中选择，其属性将显示在字段常规属性编辑器中。</font><font style="vertical-align: inherit;">此外，字段属性将加载到不同的工具窗口中，这样，该字段就可以在任何选定的工具窗口中进行编辑。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何时候，通过单击数据对象的字段表中相应的“x”图标，可以从数据对象定义中删除任何字段（没有限制）。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_sect_datamodeler_additionaloptions"><a class="anchor" href="index.html#_sect_datamodeler_additionaloptions"></a><a class="link" href="index.html#_sect_datamodeler_additionaloptions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.4。</font><font style="vertical-align: inherit;">其他选项</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，Data Objects和Fields都需要在创建时设置一些初始属性。</font><font style="vertical-align: inherit;">此外，可以为给定的数据对象配置三个属性域。</font><font style="vertical-align: inherit;">域基本上是与给定业务区域相关的一组属性。</font><font style="vertical-align: inherit;">当前可用的域是“Drools＆jJBPM”，“Persistence”和“Advanced”域。</font><font style="vertical-align: inherit;">要在给定域上工作，用户应在右侧工具栏上选择相应的“工具窗口”（见下文）。</font><font style="vertical-align: inherit;">每个工具窗口通常都提供两个编辑器，即“数据对象”级别编辑器和“字段”级别编辑器，它们将根据最后选择的项目，数据对象或字段显示。</font></font></p>
</div>
<div class="sect5">
<h6 id="_drools_jbpm_domain"><a class="anchor" href="index.html#_drools_jbpm_domain"></a><a class="link" href="index.html#_drools_jbpm_domain"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM域名</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM域编辑器管理与drools应用程序相关的数据对象或字段属性集。</font></font></p>
</div>
<div class="sect6">
<h7 id="_drools_jbpm_object_editor"><a class="anchor" href="index.html#_drools_jbpm_object_editor"></a><a class="link" href="index.html#_drools_jbpm_object_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM对象编辑器</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM对象编辑器管理对象级别drools属性</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-drools-tool-window.png" alt="数据对象drools工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图171.数据对象的属性</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TypeSafe：此属性允许启用/禁用当前类型的类型安全行为。</font><font style="vertical-align: inherit;">默认情况下，所有类型声明都在启用类型安全性的情 </font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClassReactive：此属性允许将此类型标记为Drools引擎将其视为“Class Reactive”。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PropertyReactive：此属性允许将此类型标记为Drools引擎将其视为“Property Reactive”。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色：此属性允许配置Drools引擎应如何处理此类型的实例：作为常规事实或事件。</font><font style="vertical-align: inherit;">默认情况下，所有类型都作为常规事实处理，因此暂时可以设置的唯一值是“Event”，以声明此类型应作为事件处理。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools Fusion）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间戳：此属性允许通过选择其中一个属性来配置事件的“时间戳”。</font><font style="vertical-align: inherit;">如果设置，引擎将使用给定属性的时间戳，而不是从会话时钟中读取它。</font><font style="vertical-align: inherit;">如果没有，引擎将自动为事件分配时间戳。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools Fusion）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持续时间：此属性允许通过选择其中一个属性来配置事件的“持续时间”。</font><font style="vertical-align: inherit;">如果设置，引擎将使用给定属性的持续时间而不是使用默认事件持续时间= 0.（有关此问题的更多信息，请参阅Drools Fusion）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过期：此属性允许为事件过期配置“时间偏移”。</font><font style="vertical-align: inherit;">如果设置，则此值必须是以下形式的时间间隔：[</font></font><mark><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d] [＃H] [＃米] [＃s]的[</font></font></mark><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ms]]其中[]表示可选参数，＃表示数值。</font><font style="vertical-align: inherit;">例如：1d2h，表示一天两小时。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅Drools Fusion）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程：如果选中此属性，则可以将数据对象与jBPM远程服务一起用作REST，JMS和WS。</font><font style="vertical-align: inherit;">（有关此问题的更多信息，请参阅jBPM）。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_drools_jjbpm_field_editor"><a class="anchor" href="index.html#_drools_jjbpm_field_editor"></a><a class="link" href="index.html#_drools_jjbpm_field_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jJBPM现场编辑</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM对象编辑器管理字段级drools属性</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/field-drools-tool-window.png" alt="领域流氓工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图172.数据对象的字段属性</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于：检查此属性的数据对象字段意味着将在代码生成级别考虑它，以便在生成的Java类中创建equals（）和hashCode（）方法。</font><font style="vertical-align: inherit;">我们将在下一节中更详细地解释这一点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置：此字段需要零或正整数。</font><font style="vertical-align: inherit;">设置时，此字段将由Drools引擎解释为位置参数（有关此主题的更多信息，请参阅下面的部分以及Drools文档）。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_persistence_domain"><a class="anchor" href="index.html#_persistence_domain"></a><a class="link" href="index.html#_persistence_domain"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久域</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性域编辑器管理与持久性相关的数据对象或字段属性集。</font></font></p>
</div>
<div class="sect6">
<h7 id="_persistence_domain_object_editor"><a class="anchor" href="index.html#_persistence_domain_object_editor"></a><a class="link" href="index.html#_persistence_domain_object_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久域对象编辑器</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性域对象编辑器管理对象级别持久性属性</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-persistence-tool-window.png" alt="数据对象持久性工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图173.数据对象的属性</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Persistable：此属性允许将当前数据对象配置为可持久。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表名：此属性允许为当前数据对象设置用户定义的数据库表名。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect6">
<h7 id="_persistence_domain_field_editor"><a class="anchor" href="index.html#_persistence_domain_field_editor"></a><a class="link" href="index.html#_persistence_domain_field_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久域字段编辑器</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性域字段编辑器管理字段级别持久性属性，并分为三个部分。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/field-persistence-tool-window-sections.png" alt="字段持久性工具窗口部分">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图174.持久域字段编辑器部分</font></font></div>
</div>
<div class="sect7">
<h8 id="_identifier"><a class="anchor" href="index.html#_identifier"></a><a class="link" href="index.html#_identifier"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标识符：</font></font></a></h8>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可持久数据对象应该只有一个字段被定义为数据对象标识符。</font><font style="vertical-align: inherit;">标识符通常是唯一的数字，用于将给定的数据对象实例与同一类的所有其他实例区分开来。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是标识符：将当前字段标记为数据对象标识符。</font><font style="vertical-align: inherit;">可持久化的数据对象应该只有一个标记为标识符的字段，并且它应该是基本的java类型，如String，Integer，Long等。引用数据对象的字段或多字段不能标记作为标识符。</font><font style="vertical-align: inherit;">此版本也不支持复合标识符。</font><font style="vertical-align: inherit;">创建可持久数据对象时，默认情况下会使用正确的初始化创建标识符字段，强烈建议使用此标识符。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成策略：生成策略确定在创建数据对象实例并将其存储在数据库中时如何自动生成标识符值。</font><font style="vertical-align: inherit;">（例如，通过与jBPM关联的表单处理人工任务。）创建默认标识符字段时，也会自动设置生成策略，强烈建议使用此配置。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">序列生成器：生成器代表生成策略将使用的值的种子。</font><font style="vertical-align: inherit;">当创建默认标识符字段时，序列生成器也将自动生成并正确配置以供生成策略使用。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect7">
<h8 id="_column_properties"><a class="anchor" href="index.html#_column_properties"></a><a class="link" href="index.html#_column_properties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列属性：</font></font></a></h8>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列属性部分允许自定义将存储字段值的数据库列的某些属性。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列名：可选值，用于设置给定字段的数据库列名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一：选中时，唯一属性确定当前字段值在存储在数据库中时应该是唯一键。</font><font style="vertical-align: inherit;">（如果没有设置，则默认值为false）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nullable：当检查时确定当存储在数据库中时当前字段值可以为null。</font><font style="vertical-align: inherit;">（如果没有设置，则默认值为true）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可插入：检查时确定该列将包含在由持久性提供程序生成的SQL INSERT语句中。</font><font style="vertical-align: inherit;">（如果没有设置，则默认值为true）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Updatable：当检查时确定该列将包含由持久性提供程序生成的SQL UPDATE语句。</font><font style="vertical-align: inherit;">（如果没有设置，则默认值为true）</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect7">
<h8 id="_relationship_properties"><a class="anchor" href="index.html#_relationship_properties"></a><a class="link" href="index.html#_relationship_properties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系属性：</font></font></a></h8>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当字段的类型是数据对象类型或数据对象类型的列表时，应设置关系类型，以便让持久性提供程序管理关系。</font><font style="vertical-align: inherit;">幸运的是，当将这种类型的字段添加到已标记为可持久的数据对象时，会自动设置此关系类型。</font><font style="vertical-align: inherit;">关系类型由以下弹出窗口设置。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/field-persistence-tool-window-sections-relationship-dialog.png" alt="字段持久性工具窗口部分关系对话框">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图175.关系配置弹出窗口</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系类型：从以下选项之一设置关系类型：</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对一：通常用于1：1关系，其中“A与B的一个实例相关”，B仅在A存在时存在。</font><font style="vertical-align: inherit;">例如PurchaseOrder→PurchaseOrderHeader（仅当PurchaseOrder存在时，PurchaseOrderHeader才存在）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对多：通常用于1：N关系，其中“A与B的N个实例相关”，并且B的相关实例仅在A存在时存在。</font><font style="vertical-align: inherit;">例如PurchaseOrder→PurchaseOrderLine（仅当PurchaseOrder存在时，PurchaseOrderLine才存在）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对一：通常用于1：1关系，其中“A与B的一个实例相关”，即使没有A，B也可以存在。例如PurchaseOrder→Client（即使没有关联的PurchaseOrder，客户端也可以存在于数据库中）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多对多：通常用于N：N关系，其中“A可以与B的N个实例相关，B可以与A的M个实例同时相关”，并且B和A实例都可以在数据库中退出独立于相关实例。</font><font style="vertical-align: inherit;">例如课程→学生。</font><font style="vertical-align: inherit;">（课程可以与N学生相关，特定学生可以参加M课程）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当“数据对象”类型的字段添加到给定的可持久数据对象时，默认情况下会生成“多对一”关系类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当将“数据对象列表”类型的字段添加到给定的可持久数据对象时，默认情况下会生成“一对多”关系。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">级联模式：定义传播到关联实体的可级联操作集。</font><font style="vertical-align: inherit;">值cascade = ALL相当于cascade = {PERSIST，MERGE，REMOVE，REFRESH}。</font><font style="vertical-align: inherit;">例如，当A→B和级联“PERSIST或ALL”被设置时，如果保存A，则B也将被保存。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据建模器创建的默认级联模式是“ALL”，强烈建议在jBPM进程和表单使用数据对象时使用此模式。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取模式：定义在读取时如何从数据库中获取相关数据。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EAGER：将同时读取相关数据。</font><font style="vertical-align: inherit;">例如，如果A→B，则从数据库B读取A时将同时读取。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LAZY：相关数据的读取通常会延迟到需要时。</font><font style="vertical-align: inherit;">例如，如果PurchaseOrder→PurchaseOrderLine，那么读取的行将被推迟，直到在PurchaseOrder实例上调用方法“getLines（）”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据建模器创建的默认提取模式为“EAGER”，强烈建议在jBPM进程和表单使用数据对象时使用此模式。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可选：确定关系的右侧成员是否为空。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">映射：用于反向关系。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_advanced_domain"><a class="anchor" href="index.html#_advanced_domain"></a><a class="link" href="index.html#_advanced_domain"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级域名</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级域允许配置其他域设置的任何参数以及添加任意参数。</font><font style="vertical-align: inherit;">正如它将在代码生成部分中所示，每个“数据对象/字段”参数由java注释表示。</font><font style="vertical-align: inherit;">高级模式可以配置此注释。</font></font></p>
</div>
<div class="sect6">
<h7 id="_advanced_domain_data_object_field_editor"><a class="anchor" href="index.html#_advanced_domain_data_object_field_editor"></a><a class="link" href="index.html#_advanced_domain_data_object_field_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级域数据对象/字段编辑器。</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级域编辑器具有相同的数据对象和字段形状。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/data-object-or-field-advanced-tool-window.png" alt="数据对象或字段高级工具窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图176.高级域编辑器。</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用以下操作</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delete：允许删除给定的Data Object或Field注释。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">clear：清除给定的注释参数值。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">edit：启用给定注释参数值的编辑。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加注释：添加注释按钮将启动一个向导，该向导将允许添加项目依赖项中可用的任何Java注释。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加注释向导步骤＃1：向导的第一步需要输入注释的完全限定类名，并且通过按“搜索”按钮，注释定义将被加载到向导中。</font><font style="vertical-align: inherit;">此外，在加载注释定义时，将创建不同的向导步骤，以便能够完成不同的注释参数。</font><font style="vertical-align: inherit;">所需参数将标有“*”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-annotation-wizard-step1-annotation-loaded.png" alt="添加注释向导step1注释已加载">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图177.加载到向导中的注释定义。</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要有可能，向导就会为给定的参数提供合适的编辑器。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-annotation-wizard-step2-enum-param-editor.png" alt="添加注释向导step2枚举参数编辑器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图178. Enumeration批注参数的自动生成的枚举值编辑器。</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当无法计算自定义编辑器时，将提供通用参数编辑器</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-annotation-wizard-step2-generic-param-editor.png" alt="添加注释向导step2通用参数编辑器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图179.通用注释参数编辑器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入并验证所有必需参数后，将启用完成按钮，并通过将注释添加到给定数据对象或字段来完成向导。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sect_datamodeler_generatecode"><a class="anchor" href="index.html#_sect_datamodeler_generatecode"></a><a class="link" href="index.html#_sect_datamodeler_generatecode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.5。</font><font style="vertical-align: inherit;">生成数据模型代码。</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据模型本身仅仅是一个可视化工具，允许用户定义高级数据结构，一方面与Drools引擎交互，另一方面与jBPM平台交互。</font><font style="vertical-align: inherit;">为了使这成为可能，必须将这些高级视觉结构转换为可以被这些平台有效消耗的低级工件。</font><font style="vertical-align: inherit;">这些工件是Java POJO（普通旧Java对象），每次保存数据模型时都会生成它们，方法是按顶部数据建模器菜单中的“保存”按钮。</font><font style="vertical-align: inherit;">此外，当用户在“编辑器”和“源”选项卡之间往返时，将自动生成代码以保持与编辑器视图的一致性，反之亦然。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/save_top.jpg" alt="保存顶部">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图180.从顶部菜单中保存数据模型</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的代码根据以下转换规则生成：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的标识符属性将成为Java类的名称。</font><font style="vertical-align: inherit;">因此，它需要是有效的Java标识符。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的package属性成为Java类的包声明。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的超类属性（如果存在）成为Java类的扩展声明。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的标签和描述属性将分别转换为Java注释“@ org.kie.api.definition.type.Label”和“@ org.kie.api.definition.type.Description”。</font><font style="vertical-align: inherit;">这些注释仅仅是保存相关信息的一种方式，并且尚未进一步处理。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的角色属性（如果存在）将被翻译成“@ org.kie.api.definition.type.Role”的Java注解，即</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IS</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序平台的解释，在某种意义上说，它标志着这个Java类作为Drools Event Fact-Type。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的类型安全属性（如果存在）将被转换为“@ org.kie.api.definition.type.TypeSafe Java注释。”（参见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的类反应属性（如果存在）将被转换为“@ org.kie.api.definition.type.ClassReactive Java注释。”（参见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的属性反应属性（如果存在）将被转换为“@ org.kie.api.definition.type.PropertyReactive Java注释。”（参见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的timestamp属性（如果存在）将被转换为“@ org.kie.api.definition.type.Timestamp Java注释。”（参见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的持续时间属性（如果存在）将被转换为“@ org.kie.api.definition.type.Duration Java注释。”（参见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的expires属性（如果存在）将被转换为“@ org.kie.api.definition.type.Expires Java注释。”（见Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的远程属性（如果存在）将被转换为“@ org.kie.api.remote.Remotable Java注释。（参见jBPM）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成标准Java默认（或无参数）构造函数，以及完整参数构造函数，即作为参数接受每个数据对象的用户定义字段的值的构造函数。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据以下转换规则，数据对象的用户定义字段被转换为Java类字段，每个字段都有自己的getter和setter方法：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象字段的标识符将成为Java字段标识符。</font><font style="vertical-align: inherit;">因此，它需要是有效的Java标识符。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象字段的类型直接转换为Java类的字段类型。</font><font style="vertical-align: inherit;">如果字段被声明为多个（即'List'），则生成的字段是“java.util.List”类型。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">equals属性：当为特定字段设置时，此类属性将使用“@ org.kie.api.definition.type.Key”注释进行注释，该注释由Drools引擎解释，它将'参与生成的equals（）方法，该方法将覆盖Object类的equals（）方法。</font><font style="vertical-align: inherit;">后者意味着如果字段是“原始”类型，则equals方法将简单地将其值与该类的另一个实例中的相应字段的值进行比较。</font><font style="vertical-align: inherit;">如果字段是子实体或集合类型，则equals方法将分别对相应数据对象的Java类或java.util.List标准Java类的equals方法进行方法调用。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象的用户定义字段</font><font style="vertical-align: inherit;">检查equals属性</font><font style="vertical-align: inherit;">，那么这也意味着除了默认生成的构造函数之外，还会生成另一个构造函数，将所有用Equals标记的字段作为参数接受。</font><font style="vertical-align: inherit;">此外，equals（）方法的生成也意味着Object类的hashCode（）方法也被覆盖，以便它将调用相应Java类类型的hashCode（）方法（无论是'原始'还是用户） -defined types）用于在数据模型中用等号标记的所有字段。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">position属性：自动为所有用户定义的字段设置此字段属性，从0开始，并为每个后续新字段递增1。</font><font style="vertical-align: inherit;">但是，用户可以自由地改变字段之间的位置。</font><font style="vertical-align: inherit;">在代码生成时，此属性将转换为“@ org.kie.api.definition.type.Position”注释，该注释可由Drools引擎解释。</font><font style="vertical-align: inherit;">此外，已建立的属性顺序确定生成的Java类中构造函数参数的顺序。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，生成的Purchase Order数据对象的Java类代码，对应于其定义，如下图buy_example.jpg所示，在本章底部的图中可视化。</font><font style="vertical-align: inherit;">请注意，数据对象的两个字段，即“标题”和“行”用等号标记，并分别分配了位置2和1）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/generate-purchase-example.png" alt="生成购买示例">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图181.采购订单配置</font></font></div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    <span class="hljs-keyword">package</span> org.jbpm.examples.purchases;<font></font>
<font></font>
    <span class="hljs-comment">/**
    * This class was automatically generated by the data modeler tool.
    */</span>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Label(<span class="hljs-string">"Purchase Order"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.TypeSafe(<span class="hljs-keyword">true</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Role(org.kie.api.definition.type.Role.Type.EVENT)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Expires(<span class="hljs-string">"2d"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.remote.Remotable
    <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PurchaseOrder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">java</span>.<span class="hljs-title">io</span>.<span class="hljs-title">Serializable</span>
    </span>{<font></font>
<font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">1L</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Label(<span class="hljs-string">"Total"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Position(<span class="hljs-number">3</span>)
    <span class="hljs-keyword">private</span> java.lang.Double total;<font></font>
<font></font>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Label(<span class="hljs-string">"Description"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Position(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">private</span> java.lang.String description;<font></font>
<font></font>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Label(<span class="hljs-string">"Lines"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Position(<span class="hljs-number">2</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Key
    <span class="hljs-keyword">private</span> java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; lines;<font></font>
<font></font>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Label(<span class="hljs-string">"Header"</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Position(<span class="hljs-number">1</span>)
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Key
    <span class="hljs-keyword">private</span> org.jbpm.examples.purchases.PurchaseOrderHeader header;<font></font>
<font></font>
    <span class="hljs-annotation">@org</span>.kie.api.definition.type.Position(<span class="hljs-number">4</span>)
    <span class="hljs-keyword">private</span> java.lang.Boolean requiresCFOApproval;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PurchaseOrder</span><span class="hljs-params">()</span>
    </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">Double <span class="hljs-title">getTotal</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.total;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTotal</span><span class="hljs-params">(java.lang.Double total)</span>
    </span>{
    <span class="hljs-keyword">this</span>.total = total;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">String <span class="hljs-title">getDescription</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.description;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDescription</span><span class="hljs-params">(java.lang.String description)</span>
    </span>{
    <span class="hljs-keyword">this</span>.description = description;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; getLines()<font></font>
    {<font></font>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lines;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setLines</span><span class="hljs-params">(java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; lines)</span>
    </span>{
    <span class="hljs-keyword">this</span>.lines = lines;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> org.jbpm.examples.purchases.<span class="hljs-function">PurchaseOrderHeader <span class="hljs-title">getHeader</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.header;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHeader</span><span class="hljs-params">(org.jbpm.examples.purchases.PurchaseOrderHeader header)</span>
    </span>{
    <span class="hljs-keyword">this</span>.header = header;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> java.lang.<span class="hljs-function">Boolean <span class="hljs-title">getRequiresCFOApproval</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.requiresCFOApproval;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRequiresCFOApproval</span><span class="hljs-params">(java.lang.Boolean requiresCFOApproval)</span>
    </span>{
    <span class="hljs-keyword">this</span>.requiresCFOApproval = requiresCFOApproval;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PurchaseOrder</span><span class="hljs-params">(java.lang.Double total, java.lang.String description,
    java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; lines,
    org.jbpm.examples.purchases.PurchaseOrderHeader header,
    java.lang.Boolean requiresCFOApproval)</span>
    </span>{
    <span class="hljs-keyword">this</span>.total = total;
    <span class="hljs-keyword">this</span>.description = description;
    <span class="hljs-keyword">this</span>.lines = lines;
    <span class="hljs-keyword">this</span>.header = header;
    <span class="hljs-keyword">this</span>.requiresCFOApproval = requiresCFOApproval;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PurchaseOrder</span><span class="hljs-params">(java.lang.String description,
    org.jbpm.examples.purchases.PurchaseOrderHeader header,
    java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; lines,
    java.lang.Double total, java.lang.Boolean requiresCFOApproval)</span>
    </span>{
    <span class="hljs-keyword">this</span>.description = description;
    <span class="hljs-keyword">this</span>.header = header;
    <span class="hljs-keyword">this</span>.lines = lines;
    <span class="hljs-keyword">this</span>.total = total;
    <span class="hljs-keyword">this</span>.requiresCFOApproval = requiresCFOApproval;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PurchaseOrder</span><span class="hljs-params">(
    java.util.List&lt;org.jbpm.examples.purchases.PurchaseOrderLine&gt; lines,
    org.jbpm.examples.purchases.PurchaseOrderHeader header)</span>
    </span>{
    <span class="hljs-keyword">this</span>.lines = lines;
    <span class="hljs-keyword">this</span>.header = header;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span>
    </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == o)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span> || getClass() != o.getClass())
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<font></font>
    org.jbpm.examples.purchases.PurchaseOrder that = (org.jbpm.examples.purchases.PurchaseOrder) o;<font></font>
    <span class="hljs-keyword">if</span> (lines != <span class="hljs-keyword">null</span> ? !lines.equals(that.lines) : that.lines != <span class="hljs-keyword">null</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">if</span> (header != <span class="hljs-keyword">null</span> ? !header.equals(that.header) : that.header != <span class="hljs-keyword">null</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span>
    </span>{
    <span class="hljs-keyword">int</span> result = <span class="hljs-number">17</span>;<font></font>
    result = <span class="hljs-number">31</span> * result + (lines != <span class="hljs-keyword">null</span> ? lines.hashCode() : <span class="hljs-number">0</span>);<font></font>
    result = <span class="hljs-number">31</span> * result + (header != <span class="hljs-keyword">null</span> ? header.hashCode() : <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> result;<font></font>
    }<font></font>
<font></font>
    }</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sect_datamodeler_externalmodels"><a class="anchor" href="index.html#_sect_datamodeler_externalmodels"></a><a class="link" href="index.html#_sect_datamodeler_externalmodels"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.6。</font><font style="vertical-align: inherit;">使用外部模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用外部模型意味着能够在当前项目上下文中为已定义的POJO使用集合。</font><font style="vertical-align: inherit;">为了使这些POJO可用，应该添加对给定JAR的依赖。</font><font style="vertical-align: inherit;">一旦添加了依赖项，就可以从当前项目数据模型中引用外部POJO。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两种方法可以将依赖项添加到外部JAR文件：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对已安装在当前本地M2存储库中的JAR文件的依赖性（通常与用户主目录相关联）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对当前KIE Workbench / Drools Workbench“Guvnor M2存储库”中安装的JAR文件的依赖性。</font><font style="vertical-align: inherit;">（申请内部）</font></font></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_dependency_to_a_jar_file_in_local_m2_repository"><a class="anchor" href="index.html#_dependency_to_a_jar_file_in_local_m2_repository"></a><a class="link" href="index.html#_dependency_to_a_jar_file_in_local_m2_repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对本地M2存储库中的JAR文件的依赖性</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要向本地M2存储库中的JAR文件添加依赖关系，请执行以下步骤。</font></font></p>
</div>
<div class="sect6">
<h7 id="_open_the_project_editor_for_current_project_and_select_the_dependencies_view"><a class="anchor" href="index.html#_open_the_project_editor_for_current_project_and_select_the_dependencies_view"></a><a class="link" href="index.html#_open_the_project_editor_for_current_project_and_select_the_dependencies_view"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开当前项目的项目编辑器，然后选择“依赖项”视图。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-1.png" alt="添加依赖1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图182.项目编辑器。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_click_on_the_add_button_to_add_a_new_dependency_line"><a class="anchor" href="index.html#_click_on_the_add_button_to_add_a_new_dependency_line"></a><a class="link" href="index.html#_click_on_the_add_button_to_add_a_new_dependency_line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“添加”按钮以添加新的依赖关系行。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-2.png" alt="添加依赖2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图183.新的依赖行。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_complete_the_gav_for_the_jar_file_already_installed_in_local_m2_repository"><a class="anchor" href="index.html#_complete_the_gav_for_the_jar_file_already_installed_in_local_m2_repository"></a><a class="link" href="index.html#_complete_the_gav_for_the_jar_file_already_installed_in_local_m2_repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成已安装在本地M2存储库中的JAR文件的GAV。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-3.png" alt="添加依赖3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图184.依赖关系行版本。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_save_the_project_to_update_its_dependencies"><a class="anchor" href="index.html#_save_the_project_to_update_its_dependencies"></a><a class="link" href="index.html#_save_the_project_to_update_its_dependencies"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存项目以更新其依赖项。</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存项目时，外部文件中定义的POJO将可用。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-4.png" alt="添加依赖4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图185.保存项目。</font></font></div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_dependency_to_a_jar_file_in_current_guvnor_m2_repository"><a class="anchor" href="index.html#_dependency_to_a_jar_file_in_current_guvnor_m2_repository"></a><a class="link" href="index.html#_dependency_to_a_jar_file_in_current_guvnor_m2_repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在当前“Guvnor M2存储库”中对JAR文件的依赖性。</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在当前“Guvnor M2存储库”中向JAR文件添加依赖关系，请按照以下步骤操作。</font></font></p>
</div>
<div class="sect6">
<h7 id="_open_the_maven_artifact_repository_editor"><a class="anchor" href="index.html#_open_the_maven_artifact_repository_editor"></a><a class="link" href="index.html#_open_the_maven_artifact_repository_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开Maven Artifact Repository编辑器。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-1.png" alt="添加依赖guvnor m2 1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图186. Guvnor M2 Repository编辑器。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_browse_your_local_file_system_and_select_the_jar_file_to_be_uploaded_using_the_browse_button"><a class="anchor" href="index.html#_browse_your_local_file_system_and_select_the_jar_file_to_be_uploaded_using_the_browse_button"></a><a class="link" href="index.html#_browse_your_local_file_system_and_select_the_jar_file_to_be_uploaded_using_the_browse_button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览本地文件系统，然后使用“浏览”按钮选择要上载的JAR文件。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-2-2.png" alt="添加依赖guvnor m2 2 2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图187.文件浏览器。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_upload_the_file_using_the_upload_button"><a class="anchor" href="index.html#_upload_the_file_using_the_upload_button"></a><a class="link" href="index.html#_upload_the_file_using_the_upload_button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用“上传”按钮上传文件。</font></font></a></h7>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-3.png" alt="添加依赖guvnor m2 3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图188.文件上载成功。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_guvnor_m2_repository_files"><a class="anchor" href="index.html#_guvnor_m2_repository_files"></a><a class="link" href="index.html#_guvnor_m2_repository_files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guvnor M2存储库文件。</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件加载后，它将显示在存储库文件列表中。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-4.png" alt="添加依赖guvnor m2 4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图189.文件列表。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_provide_a_gav_for_the_uploaded_file_optional"><a class="anchor" href="index.html#_provide_a_gav_for_the_uploaded_file_optional"></a><a class="link" href="index.html#_provide_a_gav_for_the_uploaded_file_optional"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为上传的文件提供GAV（可选）。</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果上载的文件不是有效的Maven JAR（没有pom.xml文件），系统将提示用户为要安装的文件提供GAV。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-not-gav-1.png" alt="添加依赖guvnor m2而不是gav 1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图190.无效的POM。</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-not-gav-2.png" alt="添加依赖guvnor m2而不是gav 2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图191.手动输入GAV。</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_add_dependency_from_repository"><a class="anchor" href="index.html#_add_dependency_from_repository"></a><a class="link" href="index.html#_add_dependency_from_repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从存储库添加依赖项。</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开项目编辑器（参见下文）并单击“从存储库添加”按钮以打开JAR选择器，以查看当前“Guvnor M2存储库”中所有已安装的JAR文件。</font><font style="vertical-align: inherit;">选择所需文件后，应保存项目以使新依赖项可用。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-guvnor-m2-5.png" alt="添加依赖guvnor m2 5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图192.从“Maven Artifact Repository”中选择JAR。</font></font></div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_using_the_external_objects"><a class="anchor" href="index.html#_using_the_external_objects"></a><a class="link" href="index.html#_using_the_external_objects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用外部对象</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当设置了对外部JAR的依赖关系时，可以通过以下方式在当前项目数据模型的上下文中使用外部POJO：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部POJO可以通过当前模型数据对象进行扩展。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部POJO可用作当前模型数据对象的字段类型。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下屏幕截图显示外部对象如何以字符串“-ext-”作为前缀，以便快速识别。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add-dependency-select-external-pojo.png" alt="添加依赖选择外部pojo">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图193.识别外部对象。</font></font></div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_roundtrip_and_concurrency"><a class="anchor" href="index.html#_roundtrip_and_concurrency"></a><a class="link" href="index.html#_roundtrip_and_concurrency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.7.7。</font><font style="vertical-align: inherit;">往返和并发</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前版本实现了Data Modeller和Java源代码之间的往返和代码保存。</font><font style="vertical-align: inherit;">无论Java代码在何处生成（例如Eclipse，Data modeller），数据建模器都只会创建/删除/更新必要的代码元素以维护模型更新，即字段，getter / setter，构造函数，equals方法和hashCode方法。</font><font style="vertical-align: inherit;">此外，当数据建模器更新Java源时，将保留Data Modeler未管理的任何Type或Field注释。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了代码保存之外，与其他工作台编辑器一样，仍然可以使用并发修改方案。</font><font style="vertical-align: inherit;">常见的场景是两个不同的用户正在为同一个项目更新模型，例如使用数据建模器或执行修改项目源的“git push命令”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从应用程序上下文的角度来看，我们基本上可以确定两种不同的主要场景：</font></font></p>
</div>
<div class="sect5">
<h6 id="_no_changes_have_been_undertaken_through_the_application"><a class="anchor" href="index.html#_no_changes_have_been_undertaken_through_the_application"></a><a class="link" href="index.html#_no_changes_have_been_undertaken_through_the_application"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">申请没有进行任何变更</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，应用程序用户基本上只是在数据模型中导航，而不对其进行任何更改。</font><font style="vertical-align: inherit;">同时，另一个用户在外部修改数据模型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，不会立即向应用程序用户发出警告。</font><font style="vertical-align: inherit;">但是，只要用户尝试进行任何类型的更改（例如添加或删除数据对象或属性）或更改任何现有更改，就会显示以下弹出窗口：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/extchanges_reopen_ignore.jpg" alt="extchanges重新打开忽略">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图194.外部变化警告</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以选择：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新打开数据模型，从而加载任何外部更改，然后执行他即将进行的修改，或</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忽略任何外部更改，并继续修改模型。</font><font style="vertical-align: inherit;">在这种情况下，当尝试保留这些更改时，将显示另一个弹出警告：</font></font></p>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/extchanges_forcesave_reopen.jpg" alt="交换力量重新开放">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图195.强制保存/重新打开</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“强制保存”选项将有效覆盖任何外部更改，而“重新打开”将丢弃任何本地更改并重新加载模型。</font></font></p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“强制保存”会覆盖任何外部变化！</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_changes_have_been_undertaken_through_the_application"><a class="anchor" href="index.html#_changes_have_been_undertaken_through_the_application"></a><a class="link" href="index.html#_changes_have_been_undertaken_through_the_application"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过申请进行了变更</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序用户已对数据模型进行了更改。</font><font style="vertical-align: inherit;">同时，另一个用户同时从应用程序上下文外部修改数据模型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此替代方案中，在外部用户将更改提交到资产存储库之后（或者例如将模型与数据建模器保存在不同的会话中）之后，立即向应用程序用户发出警告：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/extchanges_reopen_ignore.jpg" alt="extchanges重新打开忽略">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图196.外部变化警告</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与前一个场景一样，用户可以选择：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新打开数据模型，从而丢失通过应用程序进行的任何修改，或</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忽略任何外部更改，并继续处理模型。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以发生以下可能性之一：**用户尝试通过单击数据建模器顶级菜单中的“保存”按钮来保持对模型所做的更改。</font><font style="vertical-align: inherit;">这会导致以下警告消息：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/extchanges_forcesave_reopen.jpg" alt="交换力量重新开放">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图197.强制保存/重新打开</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“强制保存”选项将有效覆盖任何外部更改，而“重新打开”将丢弃任何本地更改并重新加载模型。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.datasets"><a class="anchor" href="index.html#_wb.datasets"></a><a class="link" href="index.html#_wb.datasets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8。</font><font style="vertical-align: inherit;">数据集</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据组</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本上是一组填充了一些排，时间戳，文本和数字构成的数据的矩阵列组成。</font><font style="vertical-align: inherit;">数据集可以存储在不同的系统中：数据库，excel文件，内存或许多其他不同的系统。</font><font style="vertical-align: inherit;">另一方面，</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集定义</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">告诉工作台模块如何访问，读取和解析这些数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，明确数据集与其定义之间的区别非常重要，因为工作台不会处理存储任何数据，它只是提供了一种标准方法来定义对这些数据集的访问，无论数据存储在何处。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们以存储在远程数据库中的数据为例。</font><font style="vertical-align: inherit;">例如，有效数据集可以是整个数据库表或SQL查询的结果。</font><font style="vertical-align: inherit;">在这两种情况下，数据库都将返回一堆列和行。</font><font style="vertical-align: inherit;">现在，想象一下我们想要访问这些数据，以便在新的工作台页面中提供一些图表。</font><font style="vertical-align: inherit;">首先是创建和注册数据集定义以指示以下内容：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储数据集的位置，</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何访问，阅读和解析</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哪些列包含哪些类型。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本章介绍了用于注册和处理数据集定义的可用工作台工具，以及如何在其他工作台模块（例如页面编辑器）中使用此定义。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为简单起见，我们将使用术语</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来将实际数据集定义称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集，</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集定义</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以被视为数据集创作上下文下的同义词。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_wb.datasetauthoringperspective"><a class="anchor" href="index.html#_wb.datasetauthoringperspective"></a><a class="link" href="index.html#_wb.datasetauthoringperspective"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.1。</font><font style="vertical-align: inherit;">数据集创作页面</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与数据集创作相关的所有内容都可以在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集创作”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font><font style="vertical-align: inherit;">下找到，该</font><font style="vertical-align: inherit;">页面可从以下顶级菜单项：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展&gt;数据集访问</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如以下屏幕截图所示。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetAuthoringPerspective.png" alt="DataSetAuthoringPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图198.数据集创作页面</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中间面板显示欢迎屏幕，而左侧面板包含</font><font style="vertical-align: inherit;">列出所有可用数据集</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集资源管理器</font></font></em><font style="vertical-align: inherit;"></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面仅供管理员用户使用，因为定义数据集可视为低级别任务。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetexplorer"><a class="anchor" href="index.html#_wb.datasetexplorer"></a><a class="link" href="index.html#_wb.datasetexplorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.2。</font><font style="vertical-align: inherit;">数据集浏览器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集浏览器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出存在于系统中的数据集。</font><font style="vertical-align: inherit;">每次用户点击数据集时，它都会显示简短摘要以及以下信息：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetExplorer.png" alt="DataSetExplorer">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图199.数据集资源管理器</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）用于创建新数据集的按钮</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）当前可用数据集的列表</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3）表示数据集的提供者类型（Bean，SQL，CSV等）的图标</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（4）当前缓存和刷新策略状态的详细信息</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（5）后端当前大小的详细信息（单位为行）和客户端的当前大小（单位为字节）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（6）用于编辑数据集的按钮。</font><font style="vertical-align: inherit;">单击后，中心面板上将打开数据集编辑器屏幕</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一节将介绍如何创建，编辑和微调数据集定义。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetcreation"><a class="anchor" href="index.html#_wb.datasetcreation"></a><a class="link" href="index.html#_wb.datasetcreation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.3。</font><font style="vertical-align: inherit;">数据集创建</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新建数据集”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮将打开一个新屏幕，用户可以通过该屏幕分三步创建新数据集定义：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供者类型选择</font></font></em></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定远程存储系统的类型（BEAN，SQL，CSV，ElasticSearch）</font></font></p>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供商配置</font></font></em></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定能够从远程系统查找数据的属性。</font><font style="vertical-align: inherit;">配置因所选数据提供程序类型而异。</font></font></p>
</div>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集列和过滤器</font></font></em></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时数据预览，列类型和初始过滤器配置。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_wb.datasetcreationtypeselection"><a class="anchor" href="index.html#_wb.datasetcreationtypeselection"></a><a class="link" href="index.html#_wb.datasetcreationtypeselection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1步：提供者类型选择</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许用户指定正在创建的数据集的数据提供者的类型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此屏幕列出了所有当前可用的数据提供程序类型和包含描述的帮助程序popover。</font><font style="vertical-align: inherit;">每个数据提供者都用一个描述性图像表示：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefTypeSelection.png" alt="DataSetDefTypeSelection">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图200.提供者类型选择</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前支持四种类型：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bean（Java类） - 直接从Java生成数据集</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL  - 用于从任何符合ANSI-SQL的数据库中获取数据</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CSV  - 上载远程或本地CSV文件的内容</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹性搜索 - 查询并将存储在弹性搜索节点上的文档作为数据集</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择类型后，单击“下一步”按钮继续下一个工作流程步骤。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_wb.datasetcreationconfiguration"><a class="anchor" href="index.html#_wb.datasetcreationconfiguration"></a><a class="link" href="index.html#_wb.datasetcreationconfiguration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第2步：配置</font></font></a></h6>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefConfigScreen.png" alt="DataSetDefConfigScreen">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图201. CSV配置</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上一步中选择的提供程序类型将确定系统要求的配置设置。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefConfigTypes.png" alt="DataSetDefConfigTypes">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图202.每个数据集类型的配置屏幕</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UUID属性是系统生成的只读字段。</font><font style="vertical-align: inherit;">它仅用于API调用或特定操作。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect5">
<h6 id="_wb.datasetcreationpreview"><a class="anchor" href="index.html#_wb.datasetcreationpreview"></a><a class="link" href="index.html#_wb.datasetcreationpreview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第3步：数据集列和预览</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮（请参阅上一步）后，系统将执行数据集查找测试调用，以检查远程系统是否已启动且数据是否可用。</font><font style="vertical-align: inherit;">如果一切顺利，用户将看到以下屏幕：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefLivePreview.png" alt="DataSetDefLivePreview">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图203.数据集预览</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此屏幕显示实时数据预览以及用户希望成为结果数据集一部分的列。</font><font style="vertical-align: inherit;">用户还可以浏览数据并对数据集结构应用一些更改。</font><font style="vertical-align: inherit;">完成后，我们可以单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮以注册新的数据集定义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们也可以随时返回配置选项卡来更改配置设置。</font><font style="vertical-align: inherit;">我们可以</font><font style="vertical-align: inherit;">根据需要</font><font style="vertical-align: inherit;">重复</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置&gt;测试&gt;预览</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">周期，直到我们认为它已准备好保存为止。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列</font></font></strong></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡区域中，用户可以选择哪些列是结果数据集定义的一部分。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefColumns.png" alt="DataSetDefColumns">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图204.数据集列</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）添加或删除列。</font><font style="vertical-align: inherit;">仅选择要作为结果数据集一部分的列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）使用下拉图像选择器更改列类型</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集可能只包含以下4种类型的列：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签 - 用于支持组操作的文本值（类似于SQL“group by”运算符），这意味着您可以执行数据查找调用并为每个不同的值获取一行。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文本 - 对于不支持组操作的文本值。</font><font style="vertical-align: inherit;">通常用于对诸如摘要，描述等的大文本列进行建模。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字 - 对于数值。</font><font style="vertical-align: inherit;">它支持数据查找调用的聚合函数：sum，min，max，average，count，disctinct。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期 - 用于日期或时间戳值。</font><font style="vertical-align: inherit;">它确实按不同的时间间隔支持基于时间的组操作：分钟，小时，日，月，年......</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无论您想从哪个远程系统检索数据，结果数据集将始终返回上述四种类型之一的一组列。</font><font style="vertical-align: inherit;">默认情况下，存在远程系统列类型和数据集类型之间的映射。</font><font style="vertical-align: inherit;">用户可以修改某些列的类型，具体取决于数据提供程序和远程系统的列类型。</font><font style="vertical-align: inherit;">系统支持对列类型进行以下更改：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Label &lt;&gt; Text  - 当我们想要启用/禁用目标列的分类（分组）时很有用。</font><font style="vertical-align: inherit;">例如，想象一个名为“document”的数据库表，其中包含一个名为“abstract”的大型文本列。</font><font style="vertical-align: inherit;">由于我们不希望系统将此列视为“标签”，因此我们可能会将其列类型更改为“text”。</font><font style="vertical-align: inherit;">这样做，我们正在优化系统处理数据集的方式</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Number &lt;&gt; Label  - 当我们想要将数字列视为标签时很有用。</font><font style="vertical-align: inherit;">例如，这可以用于指示给定的数字列不是可以在聚合函数中使用的数值。</font><font style="vertical-align: inherit;">尽管它的值存储为数字，但我们希望将列作为“标签”处理。</font><font style="vertical-align: inherit;">这类列的一个例子是：项目代码，评估ID，......</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEAN数据集不支持更改列类型，因为由开发人员决定哪些是每列的具体类型。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">过滤</font></font></strong></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集定义可以定义过滤器。</font><font style="vertical-align: inherit;">过滤器的目标是省去用户认为不必要的行。</font><font style="vertical-align: inherit;">过滤器功能适用于任何数据提供程序类型，它允许用户对任何可用的数据集列应用过滤器操作。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefFilter.png" alt="DataSetDefFilter">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图205.数据集过滤器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在添加或删除过滤条件和操作时，中心区域上的预览表将使用反映当前过滤器状态的实时数据进行更新。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在两种过滤数据集的策略，同样重要的是要注意在两者之间进行选择具有重要意义。</font><font style="vertical-align: inherit;">想象一个仪表板，其中一些图表来自费用报表数据集，其中这些数据集构建在SQL表之上。</font><font style="vertical-align: inherit;">想象一下，我们也只想从“伦敦”办公室检索费用报告。</font><font style="vertical-align: inherit;">您可以定义一个包含过滤器“office = London”的数据集，然后从这样的数据集中提供多个图表。</font><font style="vertical-align: inherit;">这是推荐的方法。</font><font style="vertical-align: inherit;">另一种选择是定义没有初始过滤器的数据集，然后让各个图表指定自己的过滤器。</font><font style="vertical-align: inherit;">由用户决定最佳方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据具体情况，最好在数据集级别定义过滤器以便在其他模块之间重用。</font><font style="vertical-align: inherit;">该决定也可能对性能产生影响，因为过滤的缓存数据集将具有比许多单独的非缓存数据集查找请求更好的性能。</font><font style="vertical-align: inherit;">（有关缓存数据集的更多信息，请参阅下一节）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，对于SQL数据集，用户可以同时使用引入的过滤器功能，或者只是将自定义过滤条件添加到SQL语句中。</font><font style="vertical-align: inherit;">虽然，第一种方法更适合非技术用户，因为他们可能没有所需的SQL语言技能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetdefeditor"><a class="anchor" href="index.html#_wb.datasetdefeditor"></a><a class="link" href="index.html#_wb.datasetdefeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.4。</font><font style="vertical-align: inherit;">数据集编辑器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要编辑现有数据集定义，请转到数据集资源管理器，展开所需的数据集定义，然后单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font><font style="vertical-align: inherit;">这将导致打开一个新的编辑器面板并将其放置在屏幕的中央，如下一个屏幕截图所示：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefEditor.png" alt="DataSetDefEditor">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图206.数据集定义编辑器</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefEditorSelector.png" alt="DataSetDefEditorSelector">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图207.编辑器选择器</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存 - 验证当前更改并存储数据集定义。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除 - 从存储中永久删除数据集定义。</font><font style="vertical-align: inherit;">引用数据集的任何客户端模块都可能受到影响。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证 - 要检查所有必需参数是否存在且是否正确，以及验证数据集是否可以检索而没有任何问题。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制 - 创建全新定义作为当前副本的副本。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集定义作为JSON文件存储在底层GIT存储库中。</font><font style="vertical-align: inherit;">执行的任何操作都会在存储库日志中注册，以便以后可以审核更改日志。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetadvancedsettings"><a class="anchor" href="index.html#_wb.datasetadvancedsettings"></a><a class="link" href="index.html#_wb.datasetadvancedsettings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.5。</font><font style="vertical-align: inherit;">高级设置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级设置”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡区域中，用户可以指定缓存和刷新设置。</font><font style="vertical-align: inherit;">这些对于充分利用系统功能非常重要，从而提高了性能并具有更好的应用程序响应级别。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefAdvanced.png" alt="DataSetDefAdvanced">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图208.高级设置</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）启用或禁用客户端缓存并指定最大大小（字节）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）启用或禁用后端缓存并指定最大缓存大小（行数）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3）启用或禁用数据集和刷新周期的自动刷新。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（4）启用或禁用陈旧数据设置的刷新。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们深入了解这些设置的含义。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetcachesettings"><a class="anchor" href="index.html#_wb.datasetcachesettings"></a><a class="link" href="index.html#_wb.datasetcachesettings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.6。</font><font style="vertical-align: inherit;">高速缓存</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该系统提供开箱即用的缓存机制，用于保存数据集和使用内存策略执行数据操作。</font><font style="vertical-align: inherit;">这些功能的使用带来了许多优势，例如减少网络流量，远程系统负载，处理时间等。另一方面，用户可以正确微调缓存设置以避免遇到性能问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持两种缓存级别：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户级别</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后端级别</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下图显示了如何在任何数据集操作中涉及缓存：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetCacheArchitecture.png" alt="DataSetCacheArchitecture">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图209.数据集缓存</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数据查找调用都会生成结果数据集，因此使用缓存技术可确定执行数据查找调用的位置以及结果数据集的位置。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端缓存</font></font></strong></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果为ON，那么查找操作中涉及的数据集将被推送到Web浏览器中，以便从该数据集提供的所有组件</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要对后端执行任何请求，</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为数据集操作在客户端解析：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集存储在Web浏览器的内存中</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端组件从存储在浏览器中的数据集中提供</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Javascript数据集操作引擎在Web浏览器中处理数据集操作（分组，聚合，过滤和排序）。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您事先知道数据集仍然很小，则可以启用客户端缓存。</font><font style="vertical-align: inherit;">它将减少后端请求的数量，包括对存储系统的请求。</font><font style="vertical-align: inherit;">另一方面，如果您认为您的数据集非常大，请禁用客户端缓存，以免遇到浏览器问题，例如性能下降或间歇性挂起。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后端缓存</font></font></strong></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其目标是为后端端的数据集提供缓存机制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能允许</font><font style="vertical-align: inherit;">通过将数据集保存在内存中并使用内存引擎执行分组，筛选和排序操作</font><font style="vertical-align: inherit;">来</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少对远程存储系统的请求数</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它对于不经常更改的数据集非常有用，并且它们的大小可以被认为是可以在内存中保存和处理的。</font><font style="vertical-align: inherit;">它对远程存储的低延迟连接问题也很有帮助。</font><font style="vertical-align: inherit;">另一方面，如果您的数据集要经常更新，最好在每次查找请求时禁用后端缓存并对远程存储执行请求，因此存储系统负责解析数据集查找请求。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BEAN和CSV数据提供程序默认依赖于后端缓存，因为在这两种情况下，数据集必须始终加载到内存中，以便使用内存引擎解析任何数据查找操作。</font><font style="vertical-align: inherit;">这就是高级设置选项卡中无法显示后端设置的原因。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasetrefreshsettings"><a class="anchor" href="index.html#_wb.datasetrefreshsettings"></a><a class="link" href="index.html#_wb.datasetrefreshsettings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.8.7。</font><font style="vertical-align: inherit;">刷新</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">刷新功能允许在满足某些条件时使任何缓存数据无效。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSetDefRefreshSettings.png" alt="DataSetDefRefreshSettings">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图210.刷新设置</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）启用或禁用刷新功能。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）指定刷新间隔。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3）在数据过期时启用或禁用数据集失效。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集刷新策略与数据集缓存密切相关，详见上一节。</font><font style="vertical-align: inherit;">此失效机制确定缓存生命周期。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据数据的性质，存在三个主要用例：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源数据变化可预测</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 想象一下每晚都会更新数据库。</font><font style="vertical-align: inherit;">在这种情况下，建议的配置是使用“刷新间隔= 1天”并禁用“刷新陈旧数据”。</font><font style="vertical-align: inherit;">这样，系统将始终每天使缓存的数据集无效。</font><font style="vertical-align: inherit;">当我们事先知道数据将要改变时，这是正确的配置。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">源数据更改不可预测</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 另一方面，如果我们不知道数据库是否每天都更新，建议的配置是使用“刷新间隔= 1天”并启用“刷新陈旧数据”。</font><font style="vertical-align: inherit;">如果是这样，系统在使任何数据无效之前将检查修改。</font><font style="vertical-align: inherit;">在数据修改时，系统将使当前陈旧数据集无效，以便在下一个数据集查找调用中使用新数据填充高速缓存。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时场景</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 在实时场景中，缓存毫无意义，因为数据将不断更新。</font><font style="vertical-align: inherit;">在这种情况下，发送到客户端的数据必须不断更新，因此不是启用刷新设置（请记住此设置会影响缓存，并且未启用缓存），这取决于使用数据集的客户端何时确定刷新。</font><font style="vertical-align: inherit;">当客户端是仪表板时，只需在显示器编辑器配置屏幕中修改刷新设置并设置适当的刷新周期，例如“刷新间隔= 1秒”。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.datasources"><a class="anchor" href="index.html#_wb.datasources"></a><a class="link" href="index.html#_wb.datasources"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9。</font><font style="vertical-align: inherit;">数据源管理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源管理系统提供定义用于访问外部数据库的数据源的能力。</font><font style="vertical-align: inherit;">此数据源稍后可以由其他工作台组件（如数据集）使用。</font></font></p>
</div>
<div class="sect4">
<h5 id="_wb.databasedrivers"><a class="anchor" href="index.html#_wb.databasedrivers"></a><a class="link" href="index.html#_wb.databasedrivers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.1。</font><font style="vertical-align: inherit;">数据库驱动</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了能够与目标数据库通信，数据源将需要数据库驱动程序来访问它。</font><font style="vertical-align: inherit;">这就是系统另外提供为数据源操作定义数据库驱动程序的能力的原因。</font><font style="vertical-align: inherit;">数据库驱动程序基本上是JDBC兼容的驱动程序。</font><font style="vertical-align: inherit;">我们将在下一个主题中看到它们。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasourceauthoringperspective"><a class="anchor" href="index.html#_wb.datasourceauthoringperspective"></a><a class="link" href="index.html#_wb.datasourceauthoringperspective"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.2。</font><font style="vertical-align: inherit;">数据源创作页面</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与数据源和驱动程序创作相关的所有内容都可以在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源创作”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font><font style="vertical-align: inherit;">下找到，该</font><font style="vertical-align: inherit;">页面可从以下顶级菜单项：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Extensions&gt; Data Sources访问</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如以下屏幕截图所示。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceManagementPerspective.png" alt="DataSourceManagementPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图211.数据源创作页面</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面仅供管理员用户使用，因为定义数据源可视为低级别任务。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasourceexplorer"><a class="anchor" href="index.html#_wb.datasourceexplorer"></a><a class="link" href="index.html#_wb.datasourceexplorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.3。</font><font style="vertical-align: inherit;">数据源资源管理器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源资源管理器中</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出了当前系统中定义的数据源和驱动程序，它提供了一个管理他们所需要的操作同时进行。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceExplorer.png" alt="DataSourceExplorer">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图212. Data Source Explorer</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（1）用于创建新数据源的操作链接</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（2）当前可用数据源列表</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（3）用于创建新驱动程序的操作链接</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（4）当前可用的驱动程序列表</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasourcecreation"><a class="anchor" href="index.html#_wb.datasourcecreation"></a><a class="link" href="index.html#_wb.datasourcecreation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.4。</font><font style="vertical-align: inherit;">新数据源向导</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新建数据源”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作链接将打开“新建数据源向导”：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewDataSourceWizard.png" alt="NewDataSourceWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图213.新数据源向导</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下必需参数定义数据源：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：数据源定义的唯一名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">连接URL：符合所选驱动程序类型的JDBC数据库连接URL。</font><font style="vertical-align: inherit;">这是PostgreSQL数据库的连接URL示例：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jdbc：postgresql：// localhost：5432 / appformer</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户：目标数据库中的用户名。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码：相应的用户密码。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动程序：选择用于连接目标数据库的JDBC驱动程序。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，连接URL格式可能因驱动程序而异，并且不同的数据库供应商通常提供不同的驱动程序。</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试连接：单击后，系统将显示类似于下面显示连接测试状态的对话框。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TestConnectionSuccessful.png" alt="TestConnectionSuccessful">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图214.测试连接状态</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然不是必需的，但建议在完成数据源创建之前使用测试连接按钮检查数据源参数的正确性。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasourceeditor"><a class="anchor" href="index.html#_wb.datasourceeditor"></a><a class="link" href="index.html#_wb.datasourceeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.5。</font><font style="vertical-align: inherit;">数据源编辑器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源编辑器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过点击在一个数据源项打开</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源资源管理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下屏幕截图显示了</font><font style="vertical-align: inherit;">为上述示例的数据源打开</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源编辑器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceEditor.png" alt="DataSourceEditor">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图215.数据源编辑器</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主面板：主面板基本上允许您修改数据源配置参数。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试连接：测试连接。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建议的做法是在保存修改后的数据源之前测试连接。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.datasourcecontent"><a class="anchor" href="index.html#_wb.datasourcecontent"></a><a class="link" href="index.html#_wb.datasourcecontent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.6。</font><font style="vertical-align: inherit;">数据源内容浏览器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">浏览内容”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">打开数据源内容浏览器</font><font style="vertical-align: inherit;">，并启用通过数据源指向的数据库结构进行导航。</font><font style="vertical-align: inherit;">导航以三个级别执行：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">架构级别</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前架构级别</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前表级别</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式级别：列出当前数据源可访问的所有数据库模式。</font><font style="vertical-align: inherit;">列出的模式取决于授予连接配置中使用的用户的数据库访问权限。</font><font style="vertical-align: inherit;">同样适用于以下项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前架构级别：显示所选架构的所有数据库表。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前表级：显示所选表的表内容。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下屏幕截图显示了实现以下导航步骤的用户在每个级别显示的信息。</font><font style="vertical-align: inherit;">选择</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公共”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">架构→选择</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“国家/地区”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表。</font></font></p>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">架构选择</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮将打开</font><font style="vertical-align: inherit;">所选模式</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前模式级别</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser1.png" alt="DataSourceContentBrowser1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图216.数据库模式</font></font></div>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表格选择</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮将打开</font><font style="vertical-align: inherit;">所选表</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前”表级别</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser2.png" alt="DataSourceContentBrowser2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图217.模式表</font></font></div>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表信息</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所选表的行显示在此级别。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser3.png" alt="DataSourceContentBrowser3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图218.表行</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.externaldatasources"><a class="anchor" href="index.html#_wb.externaldatasources"></a><a class="link" href="index.html#_wb.externaldatasources"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.7。</font><font style="vertical-align: inherit;">外部数据源</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部数据源通常不在当前工作台中定义，而是存在于当前容器中，对于某些容器（如Wildfly 11或JBoss EAP 7服务器），它们仍然可以以只读模式列出。</font><font style="vertical-align: inherit;">在这种情况下，仅</font><font style="vertical-align: inherit;">启用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源内容浏览器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExternalDataSources.png" alt="ExternalDataSources">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图219.外部数据源导航</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_wb.drivercreation"><a class="anchor" href="index.html#_wb.drivercreation"></a><a class="link" href="index.html#_wb.drivercreation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.8。</font><font style="vertical-align: inherit;">新驱动程序向导</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新建驱动程序”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作链接将打开“新建驱动程序向导”：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewDriverWizard.png" alt="NewDriverWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图220.新驱动程序向导</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下必需参数定义了一个驱动程序：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：驱动程序定义的唯一名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动程序类名称：实现JDBC驱动程序合同的类的java完全限定名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Group Id：包含JDBC驱动程序实现的工件的maven组id。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工件ID：包含JDBC驱动程序实现的工件的maven工件ID。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本：包含JDBC驱动程序实现的工件的maven版本。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些商业数据库驱动程序（如Oracle）在maven中央存储库中不可用。</font><font style="vertical-align: inherit;">您可以先使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artifact Repository</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font><font style="vertical-align: inherit;">上传它们</font><font style="vertical-align: inherit;">，然后继续使用maven中央存储库中可用驱动程序的驱动程序配置。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.drivereditor"><a class="anchor" href="index.html#_wb.drivereditor"></a><a class="link" href="index.html#_wb.drivereditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.9。</font><font style="vertical-align: inherit;">驱动编辑器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动程序编辑器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过点击在驾驶项目中打开</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源资源管理器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下屏幕截图显示了</font><font style="vertical-align: inherit;">为上述示例</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">驱动程序</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开的驱动</font><em><font style="vertical-align: inherit;">程序编辑器</font></em><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DriverEditor.png" alt="DriverEditor">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图221.驱动程序编辑器</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主面板：主面板基本上允许您修改驱动程序配置参数。</font><font style="vertical-align: inherit;">见</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的驱动程序向导</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_wb.bydefaultdrivers"><a class="anchor" href="index.html#_wb.bydefaultdrivers"></a><a class="link" href="index.html#_wb.bydefaultdrivers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.10。</font><font style="vertical-align: inherit;">默认驱动程序</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统附带一组默认配置的驱动程序，用于最常用的开源数据库。</font><font style="vertical-align: inherit;">它们与Wildfly 11和JBoss EAP 7服务器支持的最新数据库版本保持一致。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DefaultDrivers.png" alt="DefaultDrivers">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图222.默认驱动程序</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过将datasource.management.disableDefaultDrivers配置属性设置为false来启用默认驱动程序初始化。</font><font style="vertical-align: inherit;">可以通过在datasource-management.properties文件中配置适当的值，或者将系统属性-Ddatasource.management.disableDefaultDrivers = false传递给JVM来设置它。</font><font style="vertical-align: inherit;">有关更多信息，请参阅高级设置</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.advancedsettings"><a class="anchor" href="index.html#_wb.advancedsettings"></a><a class="link" href="index.html#_wb.advancedsettings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.11。</font><font style="vertical-align: inherit;">高级设置</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在给定Workbench分发文件的WEB-INF / classes目录中的datasource-management.properties文件中找到数据源管理系统高级设置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源管理系统能够为数据源和驱动程序使用两种不同的内部实现。</font><font style="vertical-align: inherit;">基于Wildfly / EAP本机数据源和驱动程序的实现，以及独立于容器的实现。</font><font style="vertical-align: inherit;">默认情况下，Wildfly / EAP Workbench发行版使用本机Wildlfy / EAP容器实现进行配置，并配置Tomcat8发行版以使用与容器无关的实现。</font><font style="vertical-align: inherit;">后一种实现也可用于Wildfly / EAP容器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效组合是：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildflyDataSourceProvider + WildflyDriverProvider </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
或</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DBCPDataSourceProvider + DBCPDriverProvider</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.xxxxx属性仅适用于WildflyXXXProviders。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_wb.advancedsettings.wildlfy"><a class="anchor" href="index.html#_wb.advancedsettings.wildlfy"></a><a class="link" href="index.html#_wb.advancedsettings.wildlfy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.12。</font><font style="vertical-align: inherit;">Workbench Wildlfy / EAP发行版的高级设置</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DataSourceProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildflyDataSourceProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅高级设置。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DriverProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildflyDriverProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅高级设置。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.disableDefaultDrivers</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为false以启用默认数据库驱动程序初始化。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.host</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地主机</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于Wildlfy服务器管理接口绑定的名称或IP地址。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.port</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9990</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于Wildlfy服务器管理接口绑定的端口。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.admin</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理用户连接到运行当前Workbench的Wildfly服务器。</font><font style="vertical-align: inherit;">通常，没有必要设置此值，但在Wildlfy管理接口绑定到不同于localhost的地址时可能需要此值。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.password</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理用户密码以连接到运行当前Workbench的Wildfly服务器。</font><font style="vertical-align: inherit;">通常，没有必要设置此值，但在Wildlfy管理接口绑定到不同于localhost的地址时可能需要此值。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.realm</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ManagementRealm</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理用户身份验证的领域。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.profile</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于启动Wildfly域的配置文件名称，例如default，full，full-ha等。只有在Workbench以群集模式运行并且使用域配置托管Wildfly服务器时，才能设置此值。</font><font style="vertical-align: inherit;">不要设置Wildlfy服务器是否作为独立服务器运行。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.wildfly.serverGroup</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前Wildfly服务器实例所属的服务器组，例如primary-server-group等。此值必须仅在Workbench以群集模式运行且托管Wildfly服务器使用域配置时设置。</font><font style="vertical-align: inherit;">不要设置Wildlfy服务器是否作为独立服务器运行。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DefChangeHandler</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在Workbench以群集模式运行时才能设置此值。</font><font style="vertical-align: inherit;">如果使用域配置托管Wildfly服务器，则必须使用以下值</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DomainModeChangeHandler，</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font><font style="vertical-align: inherit;">在托管Wildlfy服务器作为独立服务器运行时，必须使用</font><font style="vertical-align: inherit;">以下值</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StandaloneModeChangeHandler</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">必须配置使用DBCPXXXProviders的群集安装才能使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StandaloneModeChangeHandler</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用Java标准机制将系统属性传递给JVM来设置上述属性。</font><font style="vertical-align: inherit;">例如-Ddatasource.management.wildfly.port = 1234。</font><font style="vertical-align: inherit;">使用此机制配置的值将覆盖datasource-management.properties文件中配置的值。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wb.advancedsettings.tomcat"><a class="anchor" href="index.html#_wb.advancedsettings.tomcat"></a><a class="link" href="index.html#_wb.advancedsettings.tomcat"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.6.9.13。</font><font style="vertical-align: inherit;">Tomcat发行版的高级设置</font></font></a></h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物业名称</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DataSourceProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBCPDataSourceProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是Tomcat 8发行版唯一可用的选项，请参阅高级设置。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DriverProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DBCPDriverProvider</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是Tomcat 8发行版唯一可用的选项，请参阅高级设置。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.disableDefaultDrivers</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">真正</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为false以启用默认数据库驱动程序初始化。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">datasource.management.DefChangeHandler</font></font></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有在Workbench以群集模式运行时才能设置此值。</font><font style="vertical-align: inherit;">Tomcat发行版仅支持
 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StandaloneModeChangeHandler</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font></font></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用Java标准机制将系统属性传递给JVM来设置上述属性。</font><font style="vertical-align: inherit;">例如-Ddatasource.management.wildfly.port = 1234。</font><font style="vertical-align: inherit;">使用此机制配置的值将覆盖datasource-management.properties文件中配置的值。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.userandgroupmgmt"><a class="anchor" href="index.html#_wb.userandgroupmgmt"></a><a class="link" href="index.html#_wb.userandgroupmgmt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7。</font><font style="vertical-align: inherit;">安全管理</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本节介绍管理员用户如何使用直观友好的用户界面管理应用程序的用户，组和权限，以便配置谁可以访问可用的不同资源和功能。</font></font></p>
</div>
<div class="sect3">
<h4 id="_basic_concepts"><a class="anchor" href="index.html#_basic_concepts"></a><a class="link" href="index.html#_basic_concepts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.1。</font><font style="vertical-align: inherit;">基本概念</font></font></a></h4>
<div class="sect4">
<h5 id="_introduction_to_the_workbench_s_users_groups_and_roles"><a class="anchor" href="index.html#_introduction_to_the_workbench_s_users_groups_and_roles"></a><a class="link" href="index.html#_introduction_to_the_workbench_s_users_groups_and_roles"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.1.1。</font><font style="vertical-align: inherit;">工作台的用户，组和角色简介</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台的安全域定义了三种实体：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过消耗一些</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，安全实体正在域中注册</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">领域可以是应用程序服务器（Wildfly，EAP，Tomcat）或任何其他受支持的类型，例如，使用一些执行处理目标领域的Keycloak远程服务器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一方面，重要的是要注意每个领域在安全域上提供或潜在地提供其自己的功能，语义或结构。</font><font style="vertical-align: inherit;">当进入工作台的安全域时，安全域上的这些差异导致不同环境之间的不一致。</font><font style="vertical-align: inherit;">这种方式存在一些对于理解很重要的约定 - 如何声明安全实体以及平台如何在复杂性背后行为，</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台集成来自外部领域的安全实体的方式对应于：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户，而不是属性和一些任何其他类型的元数据，可以在域之间不同，在任何受支持的安全环境（Wildfly，EAP，Tomcat，Keybloak等）中代表相同类型的实体，因此实体导致工作台上的用户也是如此</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色和组都是安全实体，但是不是用户，域中的语义，行为或结构通常不是跨环境共同的。</font><font style="vertical-align: inherit;">例如，考虑到既不支持两者的域，也不考虑域是组或角色的语义不同。</font><font style="vertical-align: inherit;">由于它特定于域特定，应用程序的行为方式并确定实体是否应被视为组或角色，因此通过检查应用程序的角色注册表。</font><font style="vertical-align: inherit;">这样，如果实体将在应用程序的角色注册表中存在标识符，则该实体将被视为角色，否则该实体将被视为组。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色的注册表</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个应用程序的组件，它提供了一组角色在工作台的安全域。</font><font style="vertical-align: inherit;">它是通过使用</font><font style="vertical-align: inherit;">应用程序部署描述符（</font><em><font style="vertical-align: inherit;">web.xml</font></em><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">上的</font><em><font style="vertical-align: inherit;">security-constraints</font></em><font style="vertical-align: inherit;">部分中</font><font style="vertical-align: inherit;">声明</font><font style="vertical-align: inherit;">的实体（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">role-name</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">来填充的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请参阅源文件</font><em><font style="vertical-align: inherit;">org.uberfire.ext.security.server.RolesRegistry</font></em><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着，根据具体环境的配置，某个实体可以作为工作台所使用的安全环境中的角色，但它会在工作台的安全域中生成一个组，反之亦然。</font><font style="vertical-align: inherit;">它取决于实体的标识符，通过检查它存在于Role Registry中。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将用户分配给多个角色和组，但必须至少具有一个角色分配，以便在工作台的安全域中被视为有效。</font><font style="vertical-align: inherit;">例如，这并不意味着用户能够登录或能够使用远程服务，因为它取决于分配的具体角色以及如何定义应用程序的角色和权限。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_permissions"><a class="anchor" href="index.html#_permissions"></a><a class="link" href="index.html#_permissions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.1.2。</font><font style="vertical-align: inherit;">权限</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许可基本上是用户可以在应用程序中执行的操作。</font><font style="vertical-align: inherit;">通常，与特定资源相关的操作。</font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看页面</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存项目</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看存储库</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除仪表板</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以授予或拒绝权限，它可以是全局或资源特定的。</font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全球：“创建新页面”</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具体：“查看主页”</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如您所见，权限是一</font></font><code>resource + action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对。</font><font style="vertical-align: inherit;">在页面的具体情况中，我们有：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">读取</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用操作。</font><font style="vertical-align: inherit;">这意味着可以为页面授予四种可能的权限。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限不一定需要绑定到资源。</font><font style="vertical-align: inherit;">有时，保护对特定功能的访问也是必要的，例如“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成销售报告</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”。</font><font style="vertical-align: inherit;">这意味着，权限不仅可用于保护对资源的访问，还可用于保护应用程序内的自定义功能。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_authorization_policy"><a class="anchor" href="index.html#_authorization_policy"></a><a class="link" href="index.html#_authorization_policy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.1.3。</font><font style="vertical-align: inherit;">授权政策</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配给每个角色和/或组的权限集称为授权（或安全）策略。</font><font style="vertical-align: inherit;">每个应用程序都包含一个安全策略，每次系统检查权限时都会使用该策略。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授权策略文件存储在</font><font style="vertical-align: inherit;">应用程序WAR结构下</font><font style="vertical-align: inherit;">名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB-INF / classes / security-policy.properties</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文件中</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果未定义策略，则禁用授权管理功能，并且应用程序的行为就像默认情况下授予所有资源和功能一样。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是安全策略文件的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-preprocessor"># Role <span class="hljs-string">"admin"</span></span>
role.admin.permission.perspective.read=<span class="hljs-literal">true</span>
role.admin.permission.perspective.read.Dashboard=<span class="hljs-literal">false</span><font></font>
<font></font>
<span class="hljs-preprocessor"># Role <span class="hljs-string">"user"</span></span>
role.user.permission.perspective.read=<span class="hljs-literal">false</span>
role.user.permission.perspective.read.Home=<span class="hljs-literal">true</span>
role.user.permission.perspective.read.Dashboard=<span class="hljs-literal">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个条目都定义一个分配给角色/组的权限。</font><font style="vertical-align: inherit;">在应用程序启动时，将加载策略文件并将其存储到内存中。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_security_provider"><a class="anchor" href="index.html#_security_provider"></a><a class="link" href="index.html#_security_provider"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.1.4。</font><font style="vertical-align: inherit;">安全提供商</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常通过使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来提供安全环境</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">领域用于限制对不同应用程序资源的访问。</font><font style="vertical-align: inherit;">因此，领域包含有关用户，组，角色，权限和任何其他相关信息的信息。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数典型情况下，应用程序的安全性被委托给容器的安全机制，该机制同时消耗给定的域。</font><font style="vertical-align: inherit;">重要的是要考虑存在多个领域实现，例如Wildfly提供了一个基于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application-users.properties</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">application-roles.properties</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件的领域，Tomcat提供了一个基于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tomcat-users.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">的领域</font><font style="vertical-align: inherit;">等。所以没有单一的安全领域可以依赖，它可以在每个安装中有所不同。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于必须支持潜在的不同安全环境，安全模块提供了一个定义良好的API以及一些默认的内置安全提供程序。</font><font style="vertical-align: inherit;">一个</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全供应商</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是给一个给定的领域的具体用户和组管理服务实施的正式名称。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的用户和组管理功能取决于配置的安全提供程序。</font><font style="vertical-align: inherit;">如果内置提供程序不适合应用程序的安全领域，则可以轻松构建和注册自己的提供程序。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_installation_and_setup"><a class="anchor" href="index.html#_installation_and_setup"></a><a class="link" href="index.html#_installation_and_setup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.2。</font><font style="vertical-align: inherit;">安装和设置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在撰写本文时，该应用程序提供了两个预安装的安全提供程序：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Wildfly 11 / EAP 7 distribution</strong> - Both distributions use the <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management/uberfire-security-management-wildfly">Wildfly security provider</a> configured for the use of the default realm files <em>application-users.properties</em> and <em>application-roles.properties</em></p>
</li>
<li>
<p><strong>Tomcat distribution</strong> - It uses the <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management/uberfire-security-management-tomcat">Tomcat security provider</a> configured for the use of the default realm file <em>tomcat-users.xml</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please read each <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management">provider’s documentation</a> in order to apply the concrete settings for the target deployment environment.</p>
</div>
<div class="paragraph">
<p>On the other hand, when either using a custom security provider or using one of the availables, consider the following installation options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable the security management feature on an existing WAR distribution</p>
</li>
<li>
<p>Setup and installation in an existing or new project</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>NOTE</em>: If no security provider is installed, there will be no available user interface for managing the security realm.
Once a security provider is installed and setup, the user and group management features are automatically enabled in the security management UI (see the <a href="index.html#_usage">Usage</a> section below).</p>
</div>
<div class="sect4">
<h5 id="_enabling_user_group_management"><a class="anchor" href="index.html#_enabling_user_group_management"></a><a class="link" href="index.html#_enabling_user_group_management">18.7.2.1. Enabling user &amp; group management</a></h5>
<div class="paragraph">
<p>Given an existing WAR distribution, follow these steps in order to install and enable the user &amp; group management features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure the following libraries are present on <em>WEB-INF/lib</em>:</p>
<div class="ulist">
<ul>
<li>
<p>WEB-INF/lib/uberfire-security-management-api-?.jar</p>
</li>
<li>
<p>WEB-INF/lib/uberfire-security-management-backend-?.jar</p>
</li>
</ul>
</div>
</li>
<li>
<p>Copy the the security provider library to <em>WEB-INF/lib</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Eg: WEB-INF/lib/uberfire-security-management-wildfly-?.jar</p>
</li>
<li>
<p>If the provider requires additional libraries, copy them as well (read each <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management">provider’s documentation</a> for more information).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Replace the whole content of the <em>WEB-INF/classes/security-management.properties</em> file, or if not present, create it. The settings present on this file depend on the concrete implementation used. Please read each <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management">provider’s documentation</a> for more information.</p>
</li>
<li>
<p>If deploying on Wildfly or EAP, check if the <em>WEB-INF/jboss-deployment-structure.xml </em>requires any update (read each <a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management">provider’s documentation</a> for more information).</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_disabling_user_group_management"><a class="anchor" href="index.html#_disabling_user_group_management"></a><a class="link" href="index.html#_disabling_user_group_management">18.7.2.2. Disabling user &amp; group management</a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过以下任一方式，可以禁用用户和组管理功能，因此无法使用任何服务或用户界面：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从应用程序中卸载安全提供程序</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未安装具体的安全提供程序，则将禁用用户和组管理功能，并且不会向用户显示任何服务或用户界面。</font><font style="vertical-align: inherit;">例如，在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Weblogic</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Websphere</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装中</font><font style="vertical-align: inherit;">就是这种情况，
 </font><font style="vertical-align: inherit;">因为在撰写本文时没有可用的安全提供程序实现。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除或注释安全管理配置文件</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除或注释位于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB-INF / classes / security-management.properties</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的配置文件中的所有行</font><font style="vertical-align: inherit;">是禁用用户和组管理功能的另一种方法。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_upgrading_an_existing_installation"><a class="anchor" href="index.html#_upgrading_an_existing_installation"></a><a class="link" href="index.html#_upgrading_an_existing_installation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.2.3。</font><font style="vertical-align: inherit;">升级现有安装</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在7之前的版本中，授予对组织单位，存储库或项目等资源的访问权限的唯一方法是指示哪些角色能够访问给定实例。</font><font style="vertical-align: inherit;">这些角色作为实例持久状态的一部分存储在GIT中。</font><font style="vertical-align: inherit;">CLI是用于添加/删除角色的工具：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remove-role-repo</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从存储库中删除角色</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add-role-org-unit</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将角色添加到组织单位</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remove-role-org-unit</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从组织单位中删除角色</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">add-role-project</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：向</font><strong><font style="vertical-align: inherit;">项目</font></strong><font style="vertical-align: inherit;">添加角色</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">remove-role-project</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：从项目中删除角色</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从版本7开始，授权策略基于权限。</font><font style="vertical-align: inherit;">这意味着不再需要保留每个资源实例的角色列表。</font><font style="vertical-align: inherit;">所需要的是使用安全管理UI将适当的权限条目定义到活动授权策略中（请参阅</font><font style="vertical-align: inherit;">下面</font><font style="vertical-align: inherit;">的“ </font></font><a href="index.html#_usage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再需要上面的命令，因此它们已被删除。</font><font style="vertical-align: inherit;">基本上，这些命令所做的是设置哪些角色能够读取特定项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了保证与7之前的版本的向后兼容性，在应用程序中捆绑了自动迁移工具，该工具将分配给任何组织单元，存储库或项目的角色列表转换为安全策略的读取权限条目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在安全策略部署期间，应用程序首次启动时会执行此工具。</font><font style="vertical-align: inherit;">因此，现有客户不必担心它，因为他们将保持其安全设置。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_usage_2"><a class="anchor" href="index.html#_usage_2"></a><a class="link" href="index.html#_usage_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.3。</font><font style="vertical-align: inherit;">用法</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“安全管理”页面</font><font style="vertical-align: inherit;">位于顶部菜单栏</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主页”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font><font style="vertical-align: inherit;">下</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementMenuEntry.png" alt="SecurityManagementMenuEntry">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图223.链接到“安全管理”页面</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个屏幕截图显示了这个新页面的外观：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementHome.png" alt="SecurityManagementHome">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图224.安全管理主页</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面支持：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出所有可用的角色，组和用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建和删除用户和组</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑用户，分配角色或组，以及更改用户属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑角色和组安全设置，包括：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录后用户将被定向到的主页</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授予或拒绝可用的不同工作台资源和功能的权限</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上所有内容共同提供了完整的用户和组管理子系统以及用于保护对特定资源或功能的访问的权限配置UI。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来的部分将深入介绍所有这些功能。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
可以完全禁用用户和组管理相关功能。</font><font style="vertical-align: inherit;">请参阅上一节
  </font></font><a href="index.html#_disabling_user_group_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用用户和组管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果是这种情况，则</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组和_Users</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡将保持对用户隐藏。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_user_management"><a class="anchor" href="index.html#_user_management"></a><a class="link" href="index.html#_user_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.3.1。</font><font style="vertical-align: inherit;">用户管理</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择</font><font style="vertical-align: inherit;">左侧边栏中</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡，应用程序会在应用程序的安全领域中默认显示所有用户：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementUsersExplorer.png" alt="SecurityManagementUsersExplorer">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在搜索用户</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除列出所有用户外，还允许搜索：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+在搜索框中指定搜索模式时，列出的用户将仅缩减为与搜索模式匹配的用户。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementUsersSearch.png" alt="SecurityManagementUsersSearch">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+搜索模式取决于应用程序使用的具体安全提供程序。</font><font style="vertical-align: inherit;">请阅读每个</font></font><a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供商的文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新用户</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新用户+</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”锚点，屏幕右侧将显示一个表单。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementNewUserForm.png" alt="SecurityManagementNewUserForm">
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个类似于向导的界面，其中应用程序要求输入新用户名，密码以及要分配的角色/组。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑用户</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击左侧栏中的用户后，将在屏幕右侧打开用户编辑器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，</font><font style="vertical-align: inherit;">使用Wildfly安全提供程序时</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font><font style="vertical-align: inherit;">的详细信息屏幕</font><font style="vertical-align: inherit;">如下所示：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementViewUser.png" alt="SecurityManagementViewUser">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同的屏幕，但使用Keycloak安全提供程序时看起来像：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementViewUserKC.png" alt="SecurityManagementViewUserKC">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，使用Keycloak提供程序时，会显示一个新的用户属性部分，但在使用Wildfly提供程序时它不存在。</font><font style="vertical-align: inherit;">这是因为可用的信息和操作总是取决于每个提供商的功能，如下面的
 </font></font><a href="index.html#_security_provider_capabilities"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全提供程序功能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分所述。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来是用户详细信息屏幕中处理的信息类型：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户名</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户的属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定的组</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分配的角色</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授予或拒绝的权限</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新或删除现有用户</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请单击</font><font style="vertical-align: inherit;">用户编辑器屏幕中用户名附近</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementEditUser.png" alt="SecurityManagementEditUser">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑器处于编辑模式后，可以执行不同的操作（前提是安全提供程序支持它们）：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，要修改分配给用户的角色和组的集合，或者也要更改用户的密码。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限摘要</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡显示分配给此特定用户的所有权限的摘要。</font><font style="vertical-align: inherit;">这是一个非常有用的视图，因为它允许管理员用户根据其角色和组的安全设置验证目标用户是否具有正确的权限级别。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementUserPermissions.png" alt="SecurityManagementUserPermissions">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关如何为角色和组分配权限的更多详细信息，请参阅</font><font style="vertical-align: inherit;">下面</font><font style="vertical-align: inherit;">的“ </font></font><a href="index.html#_security_settings_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全设置编辑器”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新用户的属性</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用属性表中可用的操作添加或删除用户属性：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementUserAttributes.png" alt="SecurityManagementUserAttributes">
</div>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新已分配的组</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡中，单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加到组”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">时会显示组选择弹出</font><font style="vertical-align: inherit;">窗口：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementGroupsSelection.png" alt="SecurityManagementGroupsSelection">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此弹出屏幕允许用户搜索和选择或取消选择分配给用户的组。</font></font></p>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新指定的角色</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡中，单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加到角色”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">时会显示角色选择弹出</font><font style="vertical-align: inherit;">窗口：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementRolesSelection.png" alt="SecurityManagementRolesSelection">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此弹出屏幕允许用户搜索和选择或取消选择分配给用户的角色。</font></font></p>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改用户密码</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改密码”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮</font><font style="vertical-align: inherit;">时，将</font><em><font style="vertical-align: inherit;">显示</font></em><font style="vertical-align: inherit;">更改密码弹出屏幕</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementChangePassword.png" alt="SecurityManagementChangePassword">
</div>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除用户</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮，</font><font style="vertical-align: inherit;">可以从领域中删除当前正在编辑的用户</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementDeleteUser.png" alt="SecurityManagementDeleteUser">
</div>
</div>
<div class="sect5">
<h6 id="_security_provider_capabilities"><a class="anchor" href="index.html#_security_provider_capabilities"></a><a class="link" href="index.html#_security_provider_capabilities"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全提供程序功能</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个安全领域都可以为不同的操作提供支持。</font><font style="vertical-align: inherit;">例如，考虑使用基于属性文件的Wildfly域。</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">applications-users.properties</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的内容</font><font style="vertical-align: inherit;">如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ini"><span class="hljs-setting">admin=<span class="hljs-value"><span class="hljs-number">207</span>b6e0cc556d7084b5e2db7d822555c</span></span>
<span class="hljs-setting">salaboy=<span class="hljs-value">d4af256e7007fea2e581d539e05edd1b</span></span>
<span class="hljs-setting">maciej=<span class="hljs-value"><span class="hljs-number">3</span>c8609f5e0c908a8c361ca633ed23844</span></span>
<span class="hljs-setting">kris=<span class="hljs-value"><span class="hljs-number">0</span>bfd0f47d4817f2557c91cbab38bb92d</span></span>
<span class="hljs-setting">katy=<span class="hljs-value">fd37b5d0b82ce027bfad677a54fbccee</span></span>
<span class="hljs-setting">john=<span class="hljs-value">afda4373c6021f3f5841cd6c0a027244</span></span>
<span class="hljs-setting">jack=<span class="hljs-value"><span class="hljs-number">984</span>ba30e11dda7b9ed86ba7b73d01481</span></span>
<span class="hljs-setting">director=<span class="hljs-value"><span class="hljs-number">6</span>b7f87a92b62bedd0a5a94c98bd83e21</span></span>
<span class="hljs-setting">user=<span class="hljs-value">c5568adea472163dfc00c19c6348a665</span></span>
<span class="hljs-setting">guest=<span class="hljs-value">b5d048a237bfd2874b6928e1f37ee15e</span></span>
<span class="hljs-setting">kiewb=<span class="hljs-value"><span class="hljs-number">78541</span>b7b451d8012223f29ba5141bcc2</span></span>
<span class="hljs-setting">kieserver=<span class="hljs-value"><span class="hljs-number">16</span>c6511893651c9b4b57e0c027a96075</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，它基于键值对，其中键是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户名</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，值是用户</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的哈希值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，用户仅由密钥及其用户名表示，它没有名称，地址或任何其他元信息。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一方面，考虑使用Keycloak服务器提供的领域。</font><font style="vertical-align: inherit;">用户信息由更多元数据组成，例如姓氏，地址等，如下图所示：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementViewUserKC.png" alt="SecurityManagementViewUserKC">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，用户和组管理API中的不同服务和客户端组件基于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于公开或限制由不同服务和客户端组件提供的可用功能。</font><font style="vertical-align: inherit;">能力的例子是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新用户的属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个组</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更新组</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将组分配给用户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将角色分配给用户</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个安全提供程序都必须指定一组支持的功能。</font><font style="vertical-align: inherit;">从前面的示例中可以看出，Wildfly安全提供程序不支持属性管理功能 - 用户仅由用户名组成。</font><font style="vertical-align: inherit;">另一方面，Keycloak提供商确实支持此功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不同的视图和用户界面组件依赖于每个提供程序支持的功能，因此，如果正在使用的提供程序不支持某项功能，则UI不会提供该功能管理的视图。</font><font style="vertical-align: inherit;">例如，考虑具体提供程序不支持删除用户 - 用户界面上的删除用户按钮将不可用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请查看具体的服务提供商文档以检查每个支持的功能，可在</font></font><a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到默认功能</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_group_management"><a class="anchor" href="index.html#_group_management"></a><a class="link" href="index.html#_group_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.3.2。</font><font style="vertical-align: inherit;">集团管理</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择</font><font style="vertical-align: inherit;">左侧边栏中</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡，应用程序将默认显示应用程序安全领域中显示的所有组：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementGroupsExplorer.png" alt="SecurityManagementGroupsExplorer">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正在搜索群组</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除列出所有组外，还允许搜索：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+在搜索框中指定搜索模式时，列出的组将仅缩减为与搜索模式匹配的组。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementGroupsSearch.png" alt="SecurityManagementGroupsSearch">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+搜索模式取决于应用程序使用的具体安全提供程序。</font><font style="vertical-align: inherit;">请阅读每个</font></font><a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供商的文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新组</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新组+</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”锚点，将在中心面板上显示一个新屏幕以执行新组创建。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementNewGroup.png" alt="SecurityManagementNewGroup">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入名称和单击</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存后</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，下一步是为用户分配：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementNewGroupUserSelection.png" alt="SecurityManagementNewGroupUserSelection">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加所选用户</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ”按钮完成组创建。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改组</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击左侧栏中的组后，将在屏幕右侧打开所选组实例的安全设置编辑器。</font></font><a href="index.html#_security_settings_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全设置编辑器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的</font><font style="vertical-align: inherit;">更多详细信息
 </font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除组</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要删除现有组，只需单击“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_role_management"><a class="anchor" href="index.html#_role_management"></a><a class="link" href="index.html#_role_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.3.3。</font><font style="vertical-align: inherit;">角色管理</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择</font><font style="vertical-align: inherit;">左侧栏中</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡，应用程序将显示所有应用程序角色：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementRolesExplorer.png" alt="SecurityManagementRolesExplorer">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与用户和组不同，无法创建或删除角色，因为它们来自应用程序的web.xml描述符。</font><font style="vertical-align: inherit;">单击左侧边栏中的角色后，将在屏幕右侧打开角色编辑器，这与用于组的安全设置编辑器完全相同。</font></font><a href="index.html#_security_settings_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全设置编辑器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分的</font><font style="vertical-align: inherit;">更多详细信息</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementEditRole.png" alt="SecurityManagementEditRole">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着可以定义基于角色和组的权限。</font><font style="vertical-align: inherit;">角色和组之间的主要区别是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色是应用程序定义的资源。</font><font style="vertical-align: inherit;">它们在应用程序的web.xml描述符中定义为&lt;security-role&gt;条目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组是动态的，可以在运行时定义。</font><font style="vertical-align: inherit;">已安装的安全提供程序确定存储组实例的位置。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们可以毫无困难地一起使用。</font><font style="vertical-align: inherit;">建议使用组，因为它们比角色更灵活。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索角色</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除列出所有角色外，还允许搜索：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+在搜索框中指定搜索模式时，列出的角色将仅缩减为与搜索模式匹配的角色。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementRolesSearch.png" alt="SecurityManagementRolesSearch">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+搜索模式取决于应用程序使用的具体安全提供程序。</font><font style="vertical-align: inherit;">请阅读每个</font></font><a href="https://github.com/kiegroup/appformer/tree/master/uberfire-extensions/uberfire-security/uberfire-security-management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供商的文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_security_settings_editor"><a class="anchor" href="index.html#_security_settings_editor"></a><a class="link" href="index.html#_security_settings_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.4。</font><font style="vertical-align: inherit;">安全设置编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此编辑器用于为角色和组设置多个安全设置。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementSecuritySettsEditor.png" alt="SecurityManagementSecuritySettsEditor">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></p>
</div>
<div class="sect4">
<h5 id="_home_page"><a class="anchor" href="index.html#_home_page"></a><a class="link" href="index.html#_home_page"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.4.1。</font><font style="vertical-align: inherit;">主页</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是登录后用户所指向的页面。</font><font style="vertical-align: inherit;">这使得可以为不同的用户提供不同的主页，因为可以将用户分配给不同的角色或组。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_priority"><a class="anchor" href="index.html#_priority"></a><a class="link" href="index.html#_priority"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.4.2。</font><font style="vertical-align: inherit;">优先</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它用于确定哪些设置（主页，权限，...）优先于分配了多个角色或组的用户。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有此设置，将无法确定哪个角色/组应优先。</font><font style="vertical-align: inherit;">例如，管理角色的优先级高于非管理角色。</font><font style="vertical-align: inherit;">对于同时授予管理角色和非管理角色的用户，如果管理角色的优先级高于另一个，则管理权限将始终获胜。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_permissions_2"><a class="anchor" href="index.html#_permissions_2"></a><a class="link" href="index.html#_permissions_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.7.4.3。</font><font style="vertical-align: inherit;">权限</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，工作台支持以下权限类别。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench：常规工作台权限，不依赖于任何特定资源类型。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面：如果拒绝访问页面，则不会在任何应用程序菜单中显示。</font><font style="vertical-align: inherit;">更新，删除和创建权限会更改页面管理插件编辑器的行为。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组织单位：从“管理”页面的“组织单位”部分设置可以创建，更新或删除组织单位的人员。</font><font style="vertical-align: inherit;">还可以在“项目创作”页面的“项目资源管理器”中设置可见的组织单位。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库：从“管理”页面的“存储库”部分设置可以创建，更新或删除存储库的人员。</font><font style="vertical-align: inherit;">还可以在Project Authoring页面的Project Explorer中设置可见的存储库。</font></font></p>
</li>
<li>
<p>Projects: In the Project Authoring page, sets who can Create, Update, Delete or Build projects from the Project Editor screen as well as what projects are visible in the Project Explorer.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For pages, organizational units, repositories and projects it is possible to define global permissions and add single instance exceptions afterwards. For instance,
<em>Read</em> access can be granted to all the pages and deny access just to an individual page. This is called the <em>grant all deny a few</em> strategy.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementPerspectiveDenied.png" alt="SecurityManagementPerspectiveDenied">
</div>
</div>
<div class="paragraph">
<p>The opposite, <em>deny all grant a few</em> strategy is also supported:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementPerspectiveGranted.png" alt="SecurityManagementPerspectiveGranted">
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
In the example above, the <em>Update</em> and <em>Delete</em> permissions are disabled as it does not makes sense to define such permissions if the user is not even able to read
pages.
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_security_policy_storage"><a class="anchor" href="index.html#_security_policy_storage"></a><a class="link" href="index.html#_security_policy_storage">18.7.5. Security Policy Storage</a></h4>
<div class="paragraph">
<p>The security policy is stored under the workbench’s VFS. Most concrete, in a GIT repo called “security”.
The ACL table is stored in a file called “security-policy.properties” under the “authz” directory. Next is an example of the entries this file contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">role.admin.home=HomePage<font></font>
role.admin.priority=<span class="hljs-number">0</span>
role.admin.permission.perspective.read=<span class="hljs-literal">true</span>
role.admin.permission.perspective.create=<span class="hljs-literal">true</span>
role.admin.permission.perspective.<span class="hljs-keyword">delete</span>=<span class="hljs-literal">true</span>
role.admin.permission.perspective.update=<span class="hljs-literal">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Every time the ACL is modified from the security settings UI the changes are stored into the GIT repo.</p>
</div>
<div class="paragraph">
<p>Initially, when the application is deployed for the first time there is no security policy stored in GIT. However, the application might need to set-up a default policy with the different access profiles for each of the application roles.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了支持默认策略，系统允许将安全策略声明为webapp内容的一部分。</font><font style="vertical-align: inherit;">这可以通过在webapp的资源类路径下放置security-policy.properties文件来完成（WAR存档中的WEB-INF / classes目录是有效的）。</font><font style="vertical-align: inherit;">在应用启动时，执行以下步骤：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查活动策略是否已存储在GIT中</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果没有，则检查是否已在webapp的类路径下定义了策略</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果找到，则此类策略存储在GIT下</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上是一种自动部署机制，在工作台中用于设置其默认安全策略。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署过程的一个细微变化是能够将“security-policy.properties”文件拆分成小块，以便例如可以为每个角色定义一个文件。</font><font style="vertical-align: inherit;">拆分文件必须以“security-module-”前缀开头，例如：“security-module-admin.properties”。</font><font style="vertical-align: inherit;">部署机制将读取和部署“security-policy.properties”以及类路径中找到的所有可选“security-module  - ？。properties”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，尽管使用了拆分方法，但“security-policy.properties”必须始终存在，因为它被安全子系统用作标记文件，以便找到其他策略文件。</font><font style="vertical-align: inherit;">这种拆分机制可以更好地组织整个安全策略。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.embedding"><a class="anchor" href="index.html#_wb.embedding"></a><a class="link" href="index.html#_wb.embedding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.8。</font><font style="vertical-align: inherit;">在您的应用程序中嵌入Workbench</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了个人观点（例如图书馆或内容管理）之外，Workbench还提供了许多用于设计和管理不同格式资产的编辑器。</font><font style="vertical-align: inherit;">在Workbench中，每种资产类型都有一个相应的编辑器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench提供了使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独立模式</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将透视图和编辑器嵌入用户应用程序的可能性</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在没有实际切换到Workbench的情况下，可以在单独的应用程序中显示透视图并编辑各种资产，例如规则，流程或决策表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要将Workbench的一部分嵌入到应用程序中，必须在Web服务器或应用程序服务器上部署并运行Workbench。</font><font style="vertical-align: inherit;">然后，在您的应用程序中，包含</font><font style="vertical-align: inherit;">带有正确HTTP查询参数</font><font style="vertical-align: inherit;">的</font></font><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML内联框架</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下表所述。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表40.独立模式的HTTP查询参数</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>standalone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此参数必须包含在将在独立模式下使用的透视图或编辑器的每个URL中。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>perspective</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LibraryPerspective</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>ContentManagerPerspective</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或任何自定义创建的页面</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于指定要显示的透视图。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>header</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UberfireBreadcrumbsContainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示页面顶部的面包屑，可用于导航到库中的空间和项目列表。</font><font style="vertical-align: inherit;">仅在</font></font><code>perspective=LibraryPerspective</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定时</font><font style="vertical-align: inherit;">才能使用此参数</font><font style="vertical-align: inherit;">。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>default://master@MySpace/Shop/src/main/java/com/Product.java</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定要在相应编辑器中打开的资产的路径。</font><font style="vertical-align: inherit;">必须以格式指定路径</font><font style="vertical-align: inherit;">。</font></font><code>default://<em>BRANCH</em>@<em>SPACE</em>/<em>PROJECT</em>/<em>PATH_TO_ASSET</em>/<em>ASSET_NAME</em>.<em>FILE_EXTENSION</em></code><font style="vertical-align: inherit;"></font></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表41.用法示例</font></font></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网址</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/business-central/kie-wb.jsp?standalone&amp;perspective=LibraryPerspective" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP：//本地主机：8080 /商务中心/纪伊-wb.jsp独立＆透视= LibraryPerspective</font></font></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开库，可以选择要管理的项目。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/business-central/kie-wb.jsp?standalone&amp;perspective=LibraryPerspective&amp;header=UberfireBreadcrumbsContainer" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP：//本地主机：8080 /商务中心/纪伊-wb.jsp独立＆透视= LibraryPerspective＆头= UberfireBreadcrumbsContainer</font></font></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目列表打开库。</font><font style="vertical-align: inherit;">该</font></font><code>header</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数显示页面顶部的面包屑，允许用户在空间和项目之间切换。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/business-central/kie-wb.jsp?standalone&amp;path=default://master@MySpace/Shop/src/main/java/com/Product.java" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP：//本地主机：8080 /商务中心/纪伊-wb.jsp独立和路径=默认：//master@MySpace/Shop/src/main/java/com/Product.java</font></font></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开指定资产的编辑器。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/business-central/kie-wb.jsp?standalone&amp;perspective=ContentManagerPerspective" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP：//本地主机：8080 /商务中心/纪伊-wb.jsp独立＆透视= ContentManagerPerspective</font></font></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开“内容管理”透视图，可以在其中创建和管理自定义页面。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://localhost:8080/business-central/kie-wb.jsp?standalone&amp;perspective=MyCustomPage" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTTP：//本地主机：8080 /商务中心/纪伊-wb.jsp独立＆透视= MyCustomPage</font></font></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开在使用Content Management透视图之前创建的指定自定义页面。</font></font><code>perspective</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">必须与页面的实际名称相对应。</font></font></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_wb.execserverui"><a class="anchor" href="index.html#_wb.execserverui"></a><a class="link" href="index.html#_wb.execserverui"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.9。</font><font style="vertical-align: inherit;">执行服务器管理UI</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execution Server Management UI允许用户创建和修改服务器模板和容器，它还允许用户管理远程服务器。</font><font style="vertical-align: inherit;">此屏幕可通过Deploy→Rule Deployments菜单获得。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewExecServerUI.png" alt="NewExecServerUI">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图225.执行服务器管理</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理UI仅适用于KIE受管服务器。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_wb.execserveruitemplate"><a class="anchor" href="index.html#_wb.execserveruitemplate"></a><a class="link" href="index.html#_wb.execserveruitemplate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.9.1。</font><font style="vertical-align: inherit;">服务器模板</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器模板用于定义可用于多个服务器的通用配置，因此名称为：模板。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器模板可以直接从管理UI创建，也可以在服务器连接到Drools控制器时自动创建，并且没有该远程服务器的模板定义。</font><font style="vertical-align: inherit;">服务器模板可能具有一个或多个功能，如果您需要修改创建新模板所需的功能，则无法修改此类功能。</font><font style="vertical-align: inherit;">以下是当前功能列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则（Drools）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流程（jBPM）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规划（Optaplanner）</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于Planner功能，还必须启用Rule的功能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要创建新的服务器模板，您必须单击“新建服务器模板”按钮并按照向导进行操作。</font><font style="vertical-align: inherit;">在向导期间也可以创建一个容器，但是现在我们只限制模板。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewServerTemplateWizard.png" alt="NewServerTemplateWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图226.新服务器模板向导</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建后，您将在左侧列出新模板，并突出显示新的服务器模板。</font><font style="vertical-align: inherit;">在右侧，您将获得第二级导航，其中列出了与所选服务器模板相关的容器和远程服务器。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ServerTemplates.png" alt="ServerTemplates">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图227.服务器模板</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在导航的顶部还可以删除当前的服务器模板或创建它的副本。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ServerTemplateActions.png" alt="ServerTemplateActions">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图228.服务器模板操作</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.execserveruicontainer"><a class="anchor" href="index.html#_wb.execserveruicontainer"></a><a class="link" href="index.html#_wb.execserveruicontainer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.9.2。</font><font style="vertical-align: inherit;">容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container是服务器模板的KIE Con​​tainer配置。</font><font style="vertical-align: inherit;">单击“添加容器”按钮为当前的“服务器模板”创建新容器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索区域可以帮助用户找到他们正在寻找的特定KJAR。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewContainerWizard.png" alt="NewContainerWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图229.新容器向导</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于启用了Process功能的服务器模板，向导具有第二个可选步骤，用户可以在其中配置某些与流程相关的行为。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ProcessConfigNewContainerWizard.png" alt="ProcessConfigNewContainerWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图230.流程配置</font></font></div>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Base Name</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定将使用部署工件的Kie Base。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie会话名称</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定将使用所选Kie Base的哪个Kie会话。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，仅当部署的项目包含某些业务流程时，此选项卡上的配置才会生效。</font><font style="vertical-align: inherit;">仅当服务器模板具有启用的进程的扩展名时，这还不够。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建后，新Container将显示在远程服务器列表正上方的容器列表中。</font><font style="vertical-align: inherit;">在创建容器之后，默认情况下是Stopped，这是允许用户删除它的唯一状态。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewContainer.png" alt="NewContainer">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图231.容器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container具有以下可用于管理和/或配置的选项卡：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本配置</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流程配置</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“状态”选项卡列出了运行活动Container的所有远程服务器。</font><font style="vertical-align: inherit;">每个远程服务器都呈现为卡，显示给用户状态和端点。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅启动容器部署到远程服务器。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContainerStatus.png" alt="ContainerStatus">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图232.状态容器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于没有进程功能的容器，“版本配置”选项卡允许用户更改Container的当前版本。</font><font style="vertical-align: inherit;">用户可以使用“升级”按钮手动升级到特定版本，或启用/禁用扫描仪。</font><font style="vertical-align: inherit;">也可以执行立即扫描操作，仅扫描新版本一次。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用您的最新更改重新部署SNAPSHOT kjars，必须首先删除具有该版本的所有现有容器。</font><font style="vertical-align: inherit;">然后执行'build and deploy'将创建一个包含最新SNAPSHOT kjar的容器。</font><font style="vertical-align: inherit;">但是，对于发行版本，这是不可能的。</font><font style="vertical-align: inherit;">如果一个kjar的GAV正在反对但是SNAPSHOT，则需要将GAV更新到更新版本并部署到其自己的容器中。</font><font style="vertical-align: inherit;">新版本也可用于升级现有容器，如前所述，前提是容器没有进程功能。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContainerVersionConfiguration.png" alt="ContainerVersionConfiguration">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图233.版本配置</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“流程配置”与“具有流程功能的模板服务器的新容器向导”期间显示的格式相同。</font><font style="vertical-align: inherit;">如果Template Server没有此功能，则将禁用操作按钮。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContainerProcessConfiguration.png" alt="ContainerProcessConfiguration">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图234.流程配置</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_wb.execserveruiremoteserver"><a class="anchor" href="index.html#_wb.execserveruiremoteserver"></a><a class="link" href="index.html#_wb.execserveruiremoteserver"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18.9.3。</font><font style="vertical-align: inherit;">远程服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程服务器是运行的托管KIE服务器实例，配置了Drools控制器。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，Workbench附带嵌入的Drools控制器。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程服务器列表显示在容器列表的正下方。</font><font style="vertical-align: inherit;">选择后，屏幕将显示远程服务器详细信息和卡列表，每个卡代表一个正在运行的Container。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/RemoteServers.png" alt="RemoteServers">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图235.远程服务器</font></font></div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="drools.AuthoringAssets"><a class="anchor" href="index.html#drools.AuthoringAssets"></a><a class="link" href="index.html#drools.AuthoringAssets"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.编写规则资产</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_drools.newpackage"><a class="anchor" href="index.html#_drools.newpackage"></a><a class="link" href="index.html#_drools.newpackage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1。</font><font style="vertical-align: inherit;">创建包</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置包通常是一次完成的事情，并且由具有一些规则/模型经验的人完成。</font><font style="vertical-align: inherit;">一般来说，很少有人需要配置包，一旦设置完毕，可以根据需要反复复制。</font><font style="vertical-align: inherit;">包配置绝对是一项技术任务，需要适当的专业知识。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有资产都存在于Drools Workbench的“软件包”中 - 软件包就像一个文件夹（它也可以作为“命名空间”）。</font><font style="vertical-align: inherit;">规则资产的主文件夹。规则尤其需要知道事实模型是什么，名称空间是什么等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，虽然规则（和一般资产）可以出现在任意数量的类别中，但它们只存在于一个包中。</font><font style="vertical-align: inherit;">如果您认为Drools Workbench是一个文件系统，那么每个包都是一个文件夹，资产就存在于该文件夹中 - 作为一个非常幸福的文件列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要创建空包，请从“创建新资产”菜单中选择“包”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/newItemMenu.png" alt="newItemMenu">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图236.新包</font></font></div>
</div>
<div class="sect3">
<h4 id="_empty_package"><a class="anchor" href="index.html#_empty_package"></a><a class="link" href="index.html#_empty_package"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1.1。</font><font style="vertical-align: inherit;">空包装</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只需指定名称即可创建空包。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/newItem-package.png" alt="newItem包">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图237.新的空包</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建包后，它将显示在Project Explorer中。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/newItem-package-project-explorer.png" alt="newItem包项目资源管理器">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图238.显示新Package的Project Explorer</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_copy_rename_and_delete_packages"><a class="anchor" href="index.html#_copy_rename_and_delete_packages"></a><a class="link" href="index.html#_copy_rename_and_delete_packages"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.1.2。</font><font style="vertical-align: inherit;">复制，重命名和删除包</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如</font></font><a href="index.html#_wb.projectexplorercopyrenamedeleteactions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Project Explorer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中</font><font style="vertical-align: inherit;">已经提到的</font><font style="vertical-align: inherit;">，用户可以直接从Project Explorer复制，重命名或删除包。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guidedruleeditor"><a class="anchor" href="index.html#_drools.guidedruleeditor"></a><a class="link" href="index.html#_drools.guidedruleeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2。</font><font style="vertical-align: inherit;">使用指导编辑器的业务规则</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导规则是使用UI创作的，用于根据对象模型的知识控制和提示用户输入。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这也可以用DSL句子来增强。</font></font></p>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditorparts"><a class="anchor" href="index.html#_drools.guidedruleeditorparts"></a><a class="link" href="index.html#_drools.guidedruleeditorparts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.1。</font><font style="vertical-align: inherit;">引导规则编辑器的各个部分</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导规则编辑器由三个主要部分组成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下图显示了正在运行的编辑器。</font><font style="vertical-align: inherit;">以下描述适用于图中的字母框：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedEditor-overview.png" alt="GuidedEditor概述">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图239.引导的BRL编辑器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">答：规则的不同部分：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的“WHEN”部分或条件。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则中的“那个”行动部分。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能影响规则操作的可选属性。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditorlhs"><a class="anchor" href="index.html#_drools.guidedruleeditorlhs"></a><a class="link" href="index.html#_drools.guidedruleeditorlhs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.2。</font><font style="vertical-align: inherit;">规则的“WHEN”（左侧）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B：这显示了一种模式，该模式声明该规则正在寻找“LoanApplication”事实（下面列出了这些字段，在本例中没有列出）。</font><font style="vertical-align: inherit;">另一种模式“申请人”列在“贷款申请”下面。</font><font style="vertical-align: inherit;">字段“creditRating”和“applicationDate”列出。</font><font style="vertical-align: inherit;">单击事实名称（“LoanApplication”）将弹出一个选项列表以添加到事实声明中：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加更多字段（例如，他们的“位置”）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为事实分配变量名称（如果需要，可以在以后使用）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加“多个字段”约束 - 即跨越字段的约束（例如，年龄&gt; 42或风险&gt; 2）。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C：“减号”图标（“[ - ]”）表示您可以删除某些内容。</font><font style="vertical-align: inherit;">在这种情况下，它将删除整个“LoanApplication”事实声明。</font><font style="vertical-align: inherit;">根据图标的位置，可以删除规则声明的不同组件，例如事实模式，字段约束，其他条件元素（“存在”，“不存在”，“来自”等）或操作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D：“加号”图标（“+”）允许您向规则的条件或操作部分添加更多模式，或更多属性。</font><font style="vertical-align: inherit;">在所有情况下，都会提供弹出选项框。</font><font style="vertical-align: inherit;">对于规则的“WHEN”部分，您可以从要添加的条件元素列表中进行选择：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对事实的约束：它会给你一个事实清单。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“以下不存在”：事实加上约束不得存在。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“以下存在”：至少应存在一个匹配（但只需要一个 - 它不会触发每个匹配）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“以下任何一种都是真的”：任何模式都可以匹配（然后将模式添加到这些更高级别的模式）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“From”：这将在规则中插入新的From Conditional Element。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“From Accumulate”：这将在规则中插入一个新的Accumulate Conditional Element。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“From Collect”：这将在规则中插入一个新的Collect Conditional Element。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“从入口点”：这允许您为模式定义入口点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Free Form DRL”：这将允许您插入一个免费的DRL块。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果你只是提出一个事实（如上所​​示），那么所有的模式都会组合在一起，所以它们都是真的（“和”）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E：这显示“creditRating”字段的约束。</font><font style="vertical-align: inherit;">从左到右看你会发现：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段名称：“creditRating”。</font><font style="vertical-align: inherit;">单击它可以为其分配变量名称，或访问它的嵌套属性。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束操作列表（“等于”被选中）：此列表的内容根据字段的数据类型而变化。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段：可以是以下之一：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串→文本框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数值→文本框限制条目对数值子类型有效的值（例如，一个字节可以保存-128到127的值）。</font><font style="vertical-align: inherit;">还支持BigDecimal和BigInteger数据类型。</font><font style="vertical-align: inherit;">请确保已在Package配置中导入相应的Class。</font><font style="vertical-align: inherit;">如果已上载POJO模型，则会自动添加导入，该模型会公开BigDecimal或BigInteger字段的访问者或变更器。</font><font style="vertical-align: inherit;">BigDecimal值自动以“B”为后缀，指示底层Engine应将文字值解释为BigDecimal。</font><font style="vertical-align: inherit;">BigIntegers后缀为“I”。</font><font style="vertical-align: inherit;">用户无需输入后缀。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期→日历</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举→列表框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔→复选框</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式 - 这将允许您使用表达式构建器来构建完整的mvel表达式。</font><font style="vertical-align: inherit;">（目前只支持基本表达式）</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F：这显示“applicationDate”字段的约束。</font><font style="vertical-align: inherit;">从左到右看你会发现：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段名称：“applicationDate”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束操作列表：选择“后”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个“时钟”图标。</font><font style="vertical-align: inherit;">由于“applicationDate”是Date数据类型，因此可用运算符列表包括与复杂事件处理（CEP）相关的运算符。</font><font style="vertical-align: inherit;">使用CEP操作员时，将显示此附加图标，以允许您输入其他CEP操作员参数。</font><font style="vertical-align: inherit;">单击“时钟”将循环可用的CEP操作员参数组合。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当Fact已被声明为事件时，也可以使用复杂事件处理运算符。</font><font style="vertical-align: inherit;">有关如何向Fact模型添加注释的详细信息，请参阅本用户指南的“事实模型”一章。</font><font style="vertical-align: inherit;">事件可以访问所有CEP操作员; </font><font style="vertical-align: inherit;">日期字段类型限制为“之后”，“之前”和“重合”。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释为事件的事实也可以定义CEP滑动窗口。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect4">
<h5 id="_drools.guidedruleeditoraddingpatterns"><a class="anchor" href="index.html#_drools.guidedruleeditoraddingpatterns"></a><a class="link" href="index.html#_drools.guidedruleeditoraddingpatterns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.2.1。</font><font style="vertical-align: inherit;">添加模式</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击WHEN部分的+按钮时，将出现一个新的弹出窗口，允许您向规则添加新模式。</font><font style="vertical-align: inherit;">弹出窗口看起来类似于下图。</font><font style="vertical-align: inherit;">在此弹出窗口中，您可以通过选择其中一个列表项来选择要添加的模式类型。</font><font style="vertical-align: inherit;">在列表中，除了已经提到的条件元素（如“存在”，“不存在”，“来自”，“收集”，“累积”，“来自条目 - ）之外，您还将拥有每个已定义事实类型的条目。点“和”自由形式DRL“。</font><font style="vertical-align: inherit;">选择其中一个元素后，可以通过单击“确定”按钮添加新模式。</font><font style="vertical-align: inherit;">新模式将添加在规则左侧的底部。</font><font style="vertical-align: inherit;">如果要选择其他位置，可以使用弹出窗口顶部的组合框。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以通过单击Pattern的操作工具栏中的[+]按钮打开此弹出窗口。</font><font style="vertical-align: inherit;">如果是这种情况，出现的弹出窗口不会限制位置组合框，因为新模板将在您单击的模板之后添加。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedLHSPatterns.png" alt="GuidedLHSPatterns">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图240.添加模式</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guidedruleeditoraddingconstraints"><a class="anchor" href="index.html#_drools.guidedruleeditoraddingconstraints"></a><a class="link" href="index.html#_drools.guidedruleeditoraddingconstraints"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.2.2。</font><font style="vertical-align: inherit;">添加约束</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您想要为事实添加约束时，您将获得以下对话框。</font><font style="vertical-align: inherit;">上半部分是简单的选项：您可以立即添加字段约束（将显示适用事实的字段列表），也可以使用AND或OR操作数添加“多字段约束”。</font><font style="vertical-align: inherit;">在窗口的下半部分，您有高级选项：您可以添加公式（解析为True或False  - 这与上面的示例类似：“... salary&gt;（2500 * 4.1）”。您也可以分配a事实的变量名称（这意味着您可以在规则的操作部分访问该变量，设置值等）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedLHSConstraints.png" alt="GuidedLHSConstraints">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图241.添加约束</font></font></div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditorrhs"><a class="anchor" href="index.html#_drools.guidedruleeditorrhs"></a><a class="link" href="index.html#_drools.guidedruleeditorrhs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.3。</font><font style="vertical-align: inherit;">规则的“那个”（右侧）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">H：这表示规则的“动作”，规则的右侧包含动作列表。</font><font style="vertical-align: inherit;">在这种情况下，我们正在更新“LoanApplication”事实的“说明”字段。</font><font style="vertical-align: inherit;">您可以使用其他类型的操作：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入一个全新的事实，并可选择在事实上设置一个字段。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串→文本框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数值→文本框限制条目对数值子类型有效的值（例如，一个字节可以保存-128到127的值）。</font><font style="vertical-align: inherit;">还支持BigDecimal和BigInteger数据类型。</font><font style="vertical-align: inherit;">请确保已在Package配置中导入相应的Class。</font><font style="vertical-align: inherit;">如果已上载POJO模型，则会自动添加导入，该模型会公开BigDecimal或BigInteger字段的访问者或变更器。</font><font style="vertical-align: inherit;">BigDecimal值自动以“B”为后缀，指示底层Engine应将文字值解释为BigDecimal。</font><font style="vertical-align: inherit;">BigIntegers后缀为“I”。</font><font style="vertical-align: inherit;">用户无需输入后缀。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期→日历</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举→列表框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔→复选框</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到左侧的Fact或Field的变量。</font><font style="vertical-align: inherit;">要设置的字段的数据类型必须与变量的数据类型匹配。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑上插入一个全新的事实（请参阅专家文档中的“真相维护”），并可选择在事实上设置一个字段。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串→文本框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数值→文本框限制条目对数值子类型有效的值（例如，一个字节可以保存-128到127的值）。</font><font style="vertical-align: inherit;">还支持BigDecimal和BigInteger数据类型。</font><font style="vertical-align: inherit;">请确保已在Package配置中导入相应的Class。</font><font style="vertical-align: inherit;">如果已上载POJO模型，则会自动添加导入，该模型会公开BigDecimal或BigInteger字段的访问者或变更器。</font><font style="vertical-align: inherit;">BigDecimal值自动以“B”为后缀，指示底层Engine应将文字值解释为BigDecimal。</font><font style="vertical-align: inherit;">BigIntegers后缀为“I”。</font><font style="vertical-align: inherit;">用户无需输入后缀。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期→日历</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举→列表框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔→复选框</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到左侧的Fact或Field的变量。</font><font style="vertical-align: inherit;">要设置的字段的数据类型必须与变量的数据类型匹配。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到左侧的Fact或Field的变量。</font><font style="vertical-align: inherit;">要设置的字段的数据类型必须与变量的数据类型匹配。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改现有事实的字段（告诉引擎事实已经改变）。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串→文本框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数值→文本框限制条目对数值子类型有效的值（例如，一个字节可以保存-128到127的值）。</font><font style="vertical-align: inherit;">还支持BigDecimal和BigInteger数据类型。</font><font style="vertical-align: inherit;">请确保已在Package配置中导入相应的Class。</font><font style="vertical-align: inherit;">如果已上载POJO模型，则会自动添加导入，该模型会公开BigDecimal或BigInteger字段的访问者或变更器。</font><font style="vertical-align: inherit;">BigDecimal值自动以“B”为后缀，指示底层Engine应将文字值解释为BigDecimal。</font><font style="vertical-align: inherit;">BigIntegers后缀为“I”。</font><font style="vertical-align: inherit;">用户无需输入后缀。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期→日历</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举→列表框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔→复选框</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到左侧的Fact或Field的变量。</font><font style="vertical-align: inherit;">要设置的字段的数据类型必须与变量的数据类型匹配。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在事实上设置一个字段（在这种情况下，引擎不知道更改 - 通常是因为您正在设置结果）。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字值：根据字段的数据类型，将显示不同的组件：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串→文本框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何数值→文本框限制条目对数值子类型有效的值（例如，一个字节可以保存-128到127的值）。</font><font style="vertical-align: inherit;">还支持BigDecimal和BigInteger数据类型。</font><font style="vertical-align: inherit;">请确保已在Package配置中导入相应的Class。</font><font style="vertical-align: inherit;">如果已上载POJO模型，则会自动添加导入，该模型会公开BigDecimal或BigInteger字段的访问者或变更器。</font><font style="vertical-align: inherit;">BigDecimal值自动以“B”为后缀，指示底层Engine应将文字值解释为BigDecimal。</font><font style="vertical-align: inherit;">BigIntegers后缀为“I”。</font><font style="vertical-align: inherit;">用户无需输入后缀。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">日期→日历</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举→列表框</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔→复选框</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到左侧的Fact或Field的变量。</font><font style="vertical-align: inherit;">要设置的字段的数据类型必须与变量的数据类型匹配。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“公式”：这是一个计算的表达式（仅适用于高级用户）</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从引擎的工作记忆中删除一个事实。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将事实添加到现有全局列表。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在变量上调用方法。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">写一大堆自由格式代码。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditoroptionalattributes"><a class="anchor" href="index.html#_drools.guidedruleeditoroptionalattributes"></a><a class="link" href="index.html#_drools.guidedruleeditoroptionalattributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.4。</font><font style="vertical-align: inherit;">可选属性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的属性部分提供了定义元数据和属性的方法（例如“突出性”，“无循环”等）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“+”图标以添加新的元数据或属性定义。</font><font style="vertical-align: inherit;">每个定义的将出现在本节中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击每个元数据或属性旁边的“ - ”图标将其删除。</font></font></p>
</div>
<div class="sect4">
<h5 id="_drools.guidedruleeditoroptionalattributessalience"><a class="anchor" href="index.html#_drools.guidedruleeditoroptionalattributessalience"></a><a class="link" href="index.html#_drools.guidedruleeditoroptionalattributessalience"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.4.1。</font><font style="vertical-align: inherit;">凸显</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个规则都有一个显着值，该值是一个默认为零的整数值。</font><font style="vertical-align: inherit;">突出值表示具有较高显着性值的规则的优先级，表示较高优先级。</font><font style="vertical-align: inherit;">显着性值可以是正数或负数。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditortoolbar"><a class="anchor" href="index.html#_drools.guidedruleeditortoolbar"></a><a class="link" href="index.html#_drools.guidedruleeditortoolbar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.5。</font><font style="vertical-align: inherit;">模式/动作工具栏</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G：每个模板或动作旁边都有一个包含3个按钮的工具栏。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一个“+”图标允许您在任意位置插入新的Pattern / Action。</font><font style="vertical-align: inherit;">其他“+”图标允许您在所选项下面插入新的模式/操作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剩余的箭头图标允许您向上或向下移动当前模式/动作。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditorenumerations"><a class="anchor" href="index.html#_drools.guidedruleeditorenumerations"></a><a class="link" href="index.html#_drools.guidedruleeditorenumerations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.6。</font><font style="vertical-align: inherit;">用户驱动的下拉列表</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/EnumDropDown.png" alt="EnumDropDown">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图242.数据枚举显示为下拉列表</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，可以将字段值限制为预配置列表中的项目。</font><font style="vertical-align: inherit;">此列表由Java枚举定义或配置为程序包的一部分（使用数据枚举为下拉列表提供值）。</font><font style="vertical-align: inherit;">这些值可以是固定列表，也可以（例如）从数据库加载。</font><font style="vertical-align: inherit;">这对于代码和有设置值的其他字段很有用。</font><font style="vertical-align: inherit;">屏幕上显示的内容也可以在下拉列表中与规则中使用的值（或代码）不同。</font><font style="vertical-align: inherit;">有关如何配置数据枚举的信息，请参阅有关数据枚举的部分。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在同一事实上定义依赖于一个或多个其他字段的值的一个字段的值列表（例如，取决于所选“国家区域”的“城市”列表）。</font><font style="vertical-align: inherit;">有关更多信息，请参阅“枚举”一节。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditordsl"><a class="anchor" href="index.html#_drools.guidedruleeditordsl"></a><a class="link" href="index.html#_drools.guidedruleeditordsl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.7。</font><font style="vertical-align: inherit;">增加DSL句子</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果规则所属的包具有DSL配置，那么当您添加条件或操作时，它将提供您可以选择的“DSL Sentences”列表 - 当您选择一个时，它将添加一行到规则 -  DSL指定值来自用户，然后将显示编辑框（文本）（因此它最终看起来有点像表单）。</font><font style="vertical-align: inherit;">这是可选的，还有另一个DSL编辑器。</font><font style="vertical-align: inherit;">请注意，此编辑器中的DSL功能略低于完整的DSL功能（基本上您只能执行DSL的[when]和[then]部分 - 这与有效的drools 3没有什么不同）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下图显示了指导编辑器中的DSL句子：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDSL.png" alt="GuidedDSL">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图243.引导编辑器中的DSL</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruleeditorcomplexexample"><a class="anchor" href="index.html#_drools.guidedruleeditorcomplexexample"></a><a class="link" href="index.html#_drools.guidedruleeditorcomplexexample"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.2.8。</font><font style="vertical-align: inherit;">一个更复杂的例子：</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedComplex.png" alt="GuidedComplex">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图244.更复杂的BRL示例</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的示例中，您可以看到如何使用条件元素，文字值和公式的混合。</font><font style="vertical-align: inherit;">规则有4个“顶级”模式和1个动作。</font><font style="vertical-align: inherit;">“顶级”模式是：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于人的事实模式。</font><font style="vertical-align: inherit;">此模式包含两个字段约束：一个用于birthDate字段，另一个是公式。</font><font style="vertical-align: inherit;">请注意，birthDate限制的值是从日历中选择的。</font><font style="vertical-align: inherit;">另外需要注意的是，您可以在公式限制（即car.brand）中进行计算并使用嵌套字段。</font><font style="vertical-align: inherit;">最后，我们将一个变量名称（$ p）设置为Person Fact Type。</font><font style="vertical-align: inherit;">然后，您可以在其他模式中使用此变量。</font></font></p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从这个模式生成的DRL将是：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$p</span> : Person( birthDate &lt; <span class="hljs-string">"19-Dec-1982"</span> , <span class="hljs-built_in">eval</span>( car.brand == <span class="hljs-string">"Ford"</span> &amp;&amp; salary &gt; (<span class="hljs-number">2500</span> * <span class="hljs-number">4.1</span>) ))</code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>A From Pattern. This condition will create a match for every Address whose street name is "Elm St." from the Person’s list of addresses. The left side of the from is a regular Fact Pattern and the right side is an Expression Builder that let us inspect variable’s fields.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated DRL from this Pattern will be: <code>Address( street == "Elm St." ) from
          $p.addresses</code></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>A "Not Exist" Conditional Element. This condition will match when its content doesn’t create a match. In this case, its content is a regular Fact Pattern (on Person). In this Fact Pattern you can see how variables ($p) could be used inside a formula value.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated DRL from this Pattern will be: <code>not Person( salary == ( $p.salary * 2 )
          )</code></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>A "From Accumulate" Conditional Element. This is maybe one of the most complex Patterns you can use. It consist in a Left Pattern (It must be a Fact Pattern. In this case is a Number Pattern. The Number is named $totalAddresses), a Source Pattern (Which could be a Fact Pattern, From, Collect or Accumulate conditional elements. In this case is an Address Pattern Restriction with a field restriction in its zip field) and a Formula Section where you can use any built-in or custom Accumulate Function (in this example a count() function is used). Basically, this Conditional Element will count the addresses having a zip code of 43240 from the Person’s list of addresses.</p>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated DRL from this Pattern will be: `$totalAddresses : Number() from accumulate ($a :
          Address( zipCode == " 43240") from $p.addresses, count($a)) `</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guidedruletemplateeditor"><a class="anchor" href="index.html#_drools.guidedruletemplateeditor"></a><a class="link" href="index.html#_drools.guidedruletemplateeditor">19.3. Templates of assets/rules</a></h3>
<div class="paragraph">
<p>The guided rule editor is great when you need to define a single rule, however if you need to define multiple rules following the same structure but with different values in field constraints or action sections a "Rule Template" is a valuable asset.
Rule templates allow the user to define a rule structure with place-holders for values that are to be interpolated from a table of data.
Literal values, formulae and expressions can also continue to be used.</p>
</div>
<div class="paragraph">
<p>Rule Templates can often be used as an alternative for Decision Tables in Drools Workbench.</p>
</div>
<div class="sect3">
<h4 id="_drools.guidedruletemplateeditorcreating"><a class="anchor" href="index.html#_drools.guidedruletemplateeditorcreating"></a><a class="link" href="index.html#_drools.guidedruletemplateeditorcreating">19.3.1. Creating a rule template</a></h4>
<div class="paragraph">
<p>To create a template for a rule simply select the "Guided Rule Template" from the "New Item" menu.</p>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruletemplateeditordefining"><a class="anchor" href="index.html#_drools.guidedruletemplateeditordefining"></a><a class="link" href="index.html#_drools.guidedruletemplateeditordefining">19.3.2. Define the template</a></h4>
<div class="paragraph">
<p>Once a rule template has been created the editor is displayed.
The editor takes the form of the standard guided editor explained in more detail under the "Rule Authoring" section.
As the rule is constructed you are given the ability to insert "Template Keys" as place-holders within your field constraints and action sections.
Literal values, formulae and expressions can continue to be used as in the standard guided editor.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template1.png" alt="引导模板1">
</div>
<div class="title">Figure 245. Template Key popup</div>
</div>
<div class="paragraph">
<p>The following screenshot illustrates a simple rule that has been defined with a "Template Key" for the applicants' maximum age, minimum age and credit rating.
The template keys have been defined as "$max_age", "$min_age" and "$cr" respectively.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template2.png" alt="引导模板2">
</div>
<div class="title">Figure 246. Rule template in the guided editor</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruletemplateeditordefiningdata"><a class="anchor" href="index.html#_drools.guidedruletemplateeditordefiningdata"></a><a class="link" href="index.html#_drools.guidedruletemplateeditordefiningdata">19.3.3. Defining the template data</a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成规则模板的定义后，您需要输入将用于插入“模板键”占位符的数据。</font><font style="vertical-align: inherit;">Drools Workbench提供了在指导编辑器屏幕内以灵活网格输入数据的功能。</font><font style="vertical-align: inherit;">数据输入部分位于编辑器中的“数据”选项卡上。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则模板数据网格非常灵活; </font><font style="vertical-align: inherit;">使用基础字段数据类型的不同弹出编辑器。</font><font style="vertical-align: inherit;">列可以调整大小和排序; </font><font style="vertical-align: inherit;">并且可以合并和分组单元以便于快速输入数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一行数据为单个规则插入“模板键”占位符; </font><font style="vertical-align: inherit;">因此，一行成为一条规则。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一行的任何单元格保留为空，则不会生成适用行的规则。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template3.png" alt="引导模板3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图247.模板数据网格</font></font></div>
</div>
<div class="sect4">
<h5 id="_drools.guidedruletemplateeditorcellmerging"><a class="anchor" href="index.html#_drools.guidedruletemplateeditorcellmerging"></a><a class="link" href="index.html#_drools.guidedruletemplateeditorcellmerging"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.3.1。</font><font style="vertical-align: inherit;">细胞合并</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网格左上角的图标可以打开和关闭单元格合并。</font><font style="vertical-align: inherit;">合并单元格时，具有相同值的同一列中的单元将合并为单个单元格。</font><font style="vertical-align: inherit;">这简化了更改共享相同原始值的多个单元格的值。</font><font style="vertical-align: inherit;">合并单元格时，它们还会在单元格的左上角获得一个图标，该图标允许跨越合并单元格的行进行分组。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template4.png" alt="引导模板4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图248.细胞合并</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guidedruletemplateeditorcellgrouping"><a class="anchor" href="index.html#_drools.guidedruletemplateeditorcellgrouping"></a><a class="link" href="index.html#_drools.guidedruletemplateeditorcellgrouping"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.3.2。</font><font style="vertical-align: inherit;">细胞分组</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已合并的单元格可以进一步折叠为单行。</font><font style="vertical-align: inherit;">单击合并单元格左上角的[+ \  - ]图标会将相应的行折叠为单个条目。</font><font style="vertical-align: inherit;">跨越具有相同值的折叠行的其他列中的单元格将保持不变。</font><font style="vertical-align: inherit;">将突出显示具有不同值的折叠行的其他列中的单元格，并显示第一个值。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template5.png" alt="指导模板5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图249.细胞分组</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当更改分组单元格的值时，所有已折叠的单元格也会更新其值。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedruletemplateeditorgenerateddrl"><a class="anchor" href="index.html#_drools.guidedruletemplateeditorgenerateddrl"></a><a class="link" href="index.html#_drools.guidedruletemplateeditorgenerateddrl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.3.4。</font><font style="vertical-align: inherit;">生成的DRL</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然没有必要，但规则作者可以查看将为“规则模板”和相关数据生成的DRL。</font><font style="vertical-align: inherit;">此功能及其操作与其他资产的功能没有区别。</font><font style="vertical-align: inherit;">从编辑器屏幕底部选择“源”选项卡。</font><font style="vertical-align: inherit;">将显示所有规则的DRL。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-template6.png" alt="指导模板6">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图250.生成的DRL</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guideddecisiontableeditor"><a class="anchor" href="index.html#_drools.guideddecisiontableeditor"></a><a class="link" href="index.html#_drools.guideddecisiontableeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4。</font><font style="vertical-align: inherit;">指导决策表</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guided Decision Table编辑器支持创作决策表。</font><font style="vertical-align: inherit;">规则属性，元数据，条件和动作可以以表格格式定义，从而有助于快速输入大量相关规则。</font><font style="vertical-align: inherit;">与所有其他规则资产一样，基于Web的决策表规则被编译到DRL中。</font></font></p>
</div>
<div class="paragraph">
<p>Data Objects available in the project, either manually created with the Data Object Editor or present in dependencies added to the Project, can be used in column definitions.</p>
</div>
<div class="sect3">
<h4 id="_drools.guideddecisiontableeditortypesofdecisiontable"><a class="anchor" href="index.html#_drools.guideddecisiontableeditortypesofdecisiontable"></a><a class="link" href="index.html#_drools.guideddecisiontableeditortypesofdecisiontable">19.4.1. Types of decision table</a></h4>
<div class="paragraph">
<p>There are broadly two different types of decision table, both of which are supported in the Workbench:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extended Entry</p>
</li>
<li>
<p>Limited Entry</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorextendedentrydecisiontable"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorextendedentrydecisiontable"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorextendedentrydecisiontable">19.4.1.1. Extended Entry</a></h5>
<div class="paragraph">
<p>An Extended Entry decision table is one for which the column definitions, or stubs, specify Pattern, Field and operator but not value. The values, or states, are themselves held in the body of the decision table. It is normal, but not essential, for the range of possible values to be restricted by limiting entry to values from a list. The Workbench supports use of Java enumerations, Workbench enumerations or decision table "optional value lists" to restrict value entry.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-extended-entry.png" alt="dtable扩展入口">
</div>
<div class="title">Figure 251. Extended Entry Decision table</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorlimitedentrydecisiontable"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorlimitedentrydecisiontable"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorlimitedentrydecisiontable">19.4.1.2. Limited Entry</a></h5>
<div class="paragraph">
<p>A Limited Entry decision table is one for which the column definitions specify a value in addition to Pattern, Field and operator. The decision table states, held in the body of the table, are boolean where a positive value (a checked tick-box) has the effect of meaning the column should apply, or be matched. A negative value (a cleared tick-box) means the column does not apply.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-limited-entry.png" alt="dtable限制进入">
</div>
<div class="title">Figure 252. Limited Entry Decision table</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditornavigation"><a class="anchor" href="index.html#_drools.guideddecisiontableeditornavigation"></a><a class="link" href="index.html#_drools.guideddecisiontableeditornavigation">19.4.1.3. Navigation</a></h5>
<div class="paragraph">
<p>The editor can be "panned" by pressing the left-mouse button and dragging. Tables can also be repositioned by left-clicking on the table title and dragging. Double-clicking the table title locks the table in the editor preventing repositioning; however content overflowing the visible bounds of the editor can be scrolled into view by panning the editor.</p>
</div>
<div class="paragraph">
<p>Cells can be selected in a variety of ways:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Firstly individual cells can be double-clicked and an in-cell editor corresponding to the underlying data-type will appear. Groups of cells in the same column can be selected by clicking in the first cell and then clicking the extent of the required range with the shift key pressed.</p>
</li>
<li>
<p>Secondly the keyboard cursor keys can be used to navigate around the table. Pressing the enter key will pop-up the corresponding editor. Ranges can be selected by pressing the shift key whilst extending the range with the cursor keys.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Columns can be resized by hovering over the corresponding divider in the table body.
The mouse pointer will change and then the column width dragged either narrower or wider.</p>
</div>
<div class="paragraph">
<p>Columns can be moved by hovering over the corresponding header in the table header. The mouse pointer will change to indicate the operation is possible and then the column can be dragged to a new permissible position. Constraints on individual fields can be repositioned within their parent pattern. Blocks of columns for a single pattern can be repositioned by dragging the pattern header.</p>
</div>
<div class="sect5">
<h6 id="_menus"><a class="anchor" href="index.html#_menus"></a><a class="link" href="index.html#_menus">Menus</a></h6>
<div class="sect6">
<h7 id="_menu_bar"><a class="anchor" href="index.html#_menu_bar"></a><a class="link" href="index.html#_menu_bar">Menu bar</a></h7>
<div class="paragraph">
<p>The principle menu bar contains items to perform the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Save</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Saves changes made in the Editor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Delete the table entirely.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rename</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rename the table.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Copy the file.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validate</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Validate the rules generated from the table.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Edit</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cut, copy, paste, delete cells selected within the table.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Adjust the "zoom" level of the view and toggle between merged state. The Audit Log can also be viewed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Insert</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Insert rows or columns.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Radar</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Radar shows a "mini-view" of the editor. Tables and the region visible in the Editor are simply represented by rectangles. The User can drag the visble region rectangle to reposition the Editor’s visible range.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-radar.png" alt="dtable雷达">
</div>
<div class="title">Figure 253. Radar</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Version history</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Shows the different versions of the table.</p>
</div>
</div>
<div class="sect6">
<h7 id="_context_menu"><a class="anchor" href="index.html#_context_menu"></a><a class="link" href="index.html#_context_menu">Context menu</a></h7>
<div class="paragraph">
<p>Pressing the right mouse button whilst over the table shows a context menu. The context menu differs depending on whether the mouse pointer is hovering over a cell or the first, row number, column. The options available in each however is consistent offering the User the ability to cut, copy, insert or delete items.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-context-menu.png" alt="dtable上下文菜单">
</div>
<div class="title">Figure 254. Context menu</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorcellmerging"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorcellmerging"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorcellmerging">19.4.1.4. Cell merging</a></h5>
<div class="paragraph">
<p>The View→Merged menu entry toggles cell merging on and off. When cells are merged those in the same column with identical values are merged into a single cell. This simplifies changing the value of multiple cells that shared the same original value. When cells are merged they also gain an icon in the top-left of the cell that allows rows spanning the merged cell to be grouped.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-merged.png" alt="dtable合并">
</div>
<div class="title">Figure 255. Cell merging</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorcellgrouping"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorcellgrouping"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorcellgrouping">19.4.1.5. Cell grouping</a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已合并的单元格可以进一步折叠为单行。</font><font style="vertical-align: inherit;">单击合并单元格右上角的三角形图标会将相应的行折叠为单个条目。</font><font style="vertical-align: inherit;">跨越具有相同值的折叠行的其他列中的单元格将保持不变。</font><font style="vertical-align: inherit;">将突出显示具有不同值的折叠行的其他列中的单元格，并显示第一个值。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-grouped.png" alt="dtable分组">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图256.细胞分组</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当更改分组单元格的值时，所有已折叠的单元格也会更新其值。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guideddecisiontableeditordefining"><a class="anchor" href="index.html#_drools.guideddecisiontableeditordefining"></a><a class="link" href="index.html#_drools.guideddecisiontableeditordefining"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2。</font><font style="vertical-align: inherit;">定义基于Web的决策表</font></font></a></h4>
<div class="sect4">
<h5 id="_defining_the_table"><a class="anchor" href="index.html#_defining_the_table"></a><a class="link" href="index.html#_defining_the_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2.1。</font><font style="vertical-align: inherit;">定义表格</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用向导定义用户来创建列或手动定义表。</font><font style="vertical-align: inherit;">向导仅支持简单的列定义; </font><font style="vertical-align: inherit;">如果用户需要更复杂的列定义，则需要在初始创建后手动添加这些列定义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当创建新的空决策表时，用户需要为事实，其约束和相应的操作定义列。</font><font style="vertical-align: inherit;">表始终有两个自动创建且无法删除的列：行/规则编号的列和可以提供规则描述的列。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorwizard"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizard"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2.2。</font><font style="vertical-align: inherit;">使用向导定义表</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向导可用于帮助定义决策表列。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首次选择创建新规则时，可以选择向导。</font><font style="vertical-align: inherit;">该向导提供了许多页面来定义表： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概要</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加事实模式</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加约束</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加操作以更新事实</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加动作以插入事实</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要扩展的列</font></font></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorselectingwizard"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorselectingwizard"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorselectingwizard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择向导</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“新建向导”对话框显示“使用向导”复选框。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard1.png" alt="dtable wizard1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图257.选择向导</font></font></div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardsummarypage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardsummarypage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardsummarypage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要页面</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要页面显示有关决策表的一些基本详细信息，并允许更改资产名称。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard2.png" alt="dtable向导2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图258.摘要页面</font></font></div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardfactpatternspage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardfactpatternspage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardfactpatternspage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加事实模式页面</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面允许定义将形成规则的“When”列的Fact类型。</font><font style="vertical-align: inherit;">模型中可用的事实类型将显示在左侧列表框中。</font><font style="vertical-align: inherit;">选择事实类型并使用“&gt;&gt;”按钮将其添加到右侧列表框中选定事实的列表中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除是一个类似的过程：可以在右侧列表框中选择不再需要的事实，并使用“&lt;&lt;”按钮将其删除。</font><font style="vertical-align: inherit;">所有Fact类型都需要绑定到变量。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard3.png" alt="dtable wizard3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图259.添加事实模式页面</font></font></div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardaddconstraintpage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardaddconstraintpage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardaddconstraintpage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加约束页面</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此页面允许对用户选择在决策表中定义的事实类型进行字段约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上一个向导页面上选择的事实类型列在右侧列表框中。</font><font style="vertical-align: inherit;">通过单击选择事件类型将导致在中间列表框中显示可用字段的列表以及创建不需要特定字段的谓词的选项。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击字段然后单击“&gt;&gt;”按钮，可以将字段添加到模式的约束中。</font><font style="vertical-align: inherit;">通过单击右侧列表框中的Condition然后单击“&lt;&lt;”按钮，可以从模式定义中删除字段。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有字段都需要有一个列标题和操作符。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将突出显示不完整的字段并显示警告消息。</font><font style="vertical-align: inherit;">在所有警告都已解决之前，用户将无法完成定义。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard4.png" alt="dtable wizard4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图260.“添加约束”页面</font></font></div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardupdatefactspage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardupdatefactspage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardupdatefactspage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加操作以更新事实页面</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已定义的事实类型可以在结果或操作中更新为规则的一部分。</font><font style="vertical-align: inherit;">此页面允许定义此类操作。</font></font></p>
</div>
<div class="paragraph">
<p>Fact types added to the decision table definition are listed in the left-hand listbox.
Selecting a Fact type by clicking on it will result in a list of available fields being shown in the middle listbox.</p>
</div>
<div class="paragraph">
<p>Fields that need to be updated by the rule can be added by selecting an available field and pressing the "&gt;&gt;" button. Fields can be removed similarly by clicking on a chosen field and then the "&lt;&lt;" button.</p>
</div>
<div class="paragraph">
<p>All actions require a column header.</p>
</div>
<div class="paragraph">
<p>Any incomplete actions will be highlighted and a warning message displayed.
The User will be unable to finish the definition until all warnings have been resolved.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard5.png" alt="dtable向导5">
</div>
<div class="title">Figure 261. Add Actions to update facts page</div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardinsertfactspage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardinsertfactspage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardinsertfactspage">Add Actions to insert facts page</a></h6>
<div class="paragraph">
<p>Actions can also be defined to insert new Facts into the Drools engine.</p>
</div>
<div class="paragraph">
<p>A list of Fact types available in the model are listed in the left-hand listbox.
Select those the User wishes to include in the decision table definition by clicking on them and pressing the “&gt;&gt;” button between the left most listbox and that titled "Chosen patterns".</p>
</div>
<div class="paragraph">
<p>Removal is a similar process whereby a chosen pattern can be selected and removed by pressing the “&lt;&lt;” button.</p>
</div>
<div class="paragraph">
<p>Selection of a chosen pattern presents the user with a list of available fields.
Fields that need to have values set by the action can be added by selecting them and pressing the “&gt;&gt;” button between the "Available fields" and "Chosen fields" listbox.</p>
</div>
<div class="paragraph">
<p>Removal is a similar process as already described.</p>
</div>
<div class="paragraph">
<p>New Facts need to be bound to a variable and have a column heading specified.</p>
</div>
<div class="paragraph">
<p>Incomplete Facts and\or fields will be highlighted and a warning message displayed.
The User will be unable to finish the definition until all warnings have been resolved.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard6.png" alt="dtable向导6">
</div>
<div class="title">Figure 262. Add Actions to insert facts page</div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorwizardexpandcolumnspage"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorwizardexpandcolumnspage"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorwizardexpandcolumnspage">Columns to expand page</a></h6>
<div class="paragraph">
<p>This page controls how the decision table, based upon Conditions defined on the prior pages, will be created.</p>
</div>
<div class="paragraph">
<p>Condition columns defined with an optional list of permitted values can be used to create rows in the decision table. Where a number of Condition columns have been defined with lists of permitted values the resulting table will contain a row for every combination of values; i.e.
the decision table will be in expanded form.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，使用值列表定义的所有条件列都将包含在扩展中，但是如果需要，用户可以选择列的子集。</font><font style="vertical-align: inherit;">这可以通过取消选中“完全展开”复选框并将列添加到右侧列表框来完成。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果不需要扩展，请取消选中“完全展开”复选框，并确保将零列添加到右侧列表框中。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard7.png" alt="dtable向导7">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图263.要展开页面的列</font></font></div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditordefiningmanuallycolumns"><a class="anchor" href="index.html#_drools.guideddecisiontableeditordefiningmanuallycolumns"></a><a class="link" href="index.html#_drools.guideddecisiontableeditordefiningmanuallycolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2.3。</font><font style="vertical-align: inherit;">手动添加列</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当选择在没有向导的帮助下创建表时，首先向用户呈现空表。</font><font style="vertical-align: inherit;">要添加列，请单击“添加列”按钮以启动“新列向导”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-add-column-wizard.png" alt="dtable添加列向导">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图264.新列向导</font></font></div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditorsimplecolumns"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorsimplecolumns"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorsimplecolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的列类型</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，“新列向导”仅显示以下简单类型： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加一个简单的条件</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除现有事实</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置字段的值</font></font></p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditorsimplecondition"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorsimplecondition"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorsimplecondition"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简单的条件</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件表示在规则的左侧或“何时”部分中定义的事实模式的约束。</font><font style="vertical-align: inherit;">要定义条件列，用户必须首先选择或定义绑定到模型类的事实模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以选择否定模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完成此操作后，用户可以定义字段约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果使用相同的事实模式绑定定义了两个或更多列，则字段约束将成为同一模式上的复合字段约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果用户为单个模型类定义多个绑定，则每个绑定在规则的左侧成为单独的模型类。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当用户编辑或创建新列时，他们将可以选择约束类型： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字：使用运算符将​​单元格中的值与字段进行比较。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公式：将评估单元格中的表达式，然后与字段进行比较。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">谓词：不需要字段，表达式将被评估为真或假。</font></font></p>
</li>
</ul>
</div>
<div class="sect7">
<h8 id="_drools.guideddecisiontableeditorotherwiseoperation"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorotherwiseoperation"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorotherwiseoperation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作“否则”</font></font></a></h8>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用使用等式（==）或不等式（！=）运算符的文字值定义的条件列可以利用“否则”的特殊决策表单元格值。</font><font style="vertical-align: inherit;">此特殊值允许定义规则，该规则匹配未在表中定义的所有其他规则中明确定义的所有值。</font><font style="vertical-align: inherit;">最好用一个例子来说明： - </font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
  <span class="hljs-constant">Cheese</span>( name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">"Cheddar"</span>, <span class="hljs-string">"Edam"</span>, <span class="hljs-string">"Brie"</span>) )<font></font>
  ...<font></font>
<span class="hljs-keyword">then</span><font></font>
  ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
  <span class="hljs-constant">Cheese</span>( name <span class="hljs-keyword">in</span> (<span class="hljs-string">"Cheddar"</span>, <span class="hljs-string">"Edam"</span>, <span class="hljs-string">"Brie"</span>) )<font></font>
  ...<font></font>
<span class="hljs-keyword">then</span><font></font>
  ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditordeletefact"><a class="anchor" href="index.html#_drools.guideddecisiontableeditordeletefact"></a><a class="link" href="index.html#_drools.guideddecisiontableeditordeletefact"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除现有事实</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除绑定事实的操作。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_drools.decisiontablesetfield"><a class="anchor" href="index.html#_drools.decisiontablesetfield"></a><a class="link" href="index.html#_drools.decisiontablesetfield"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置字段的值</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在先前绑定的事实或事实的新实例上设置字段值的操作。</font><font style="vertical-align: inherit;">用户可以选择通知Drools引擎修改后的值，这可能导致其他规则被重新激活。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以选择“逻辑插入”新事实，这意味着如果导致调用操作的条件不再成立，它将自动删除。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关真值维护和逻辑插入的详细信息，请参阅Drools Expert文档。</font></font></p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_drools.guideddecisiontableeditoradvancedcolumns"><a class="anchor" href="index.html#_drools.guideddecisiontableeditoradvancedcolumns"></a><a class="link" href="index.html#_drools.guideddecisiontableeditoradvancedcolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高级列类型</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“包含高级选项”可为更高级的用例添加以下附加“高级”列类型： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加条件BRL片段</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加新的“属性”列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加新的元数据列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加Action BRL片段</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行工作项</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用“工作项”参数设置字段的值</font></font></p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditorconditionbrl"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorconditionbrl"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorconditionbrl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件BRL片段</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许BRL片段在规则的左侧使用的构造。</font><font style="vertical-align: inherit;">使用引导规则编辑器创作BRL片段，因此该编辑器中可用的所有功能都可用于定义决策表列; </font><font style="vertical-align: inherit;">如“来自”，“收集”和“积累”等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用嵌入式引导规则编辑器时，定义为“模板键”的字段值将在决策表中形成列。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BRL片段中绑定的事实和事实字段可以通过更简单的列类型引用，反之亦然。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下示例中，已定义了两个模板键，因此决策表中将显示两列。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户也可以使用“自由格式DRL”来定义条件列。</font><font style="vertical-align: inherit;">如果用户需要DRL中变量的占位符，则用户可以使用</font></font><code>@{variable-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如</font><font style="vertical-align: inherit;">Drools模板语法</font></font><code>Smurf( name = "@{name}" )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-column-condition-brl1-popup.png" alt="dtable列条件brl1弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图265.使用BRL定义条件</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-column-condition-brl2-popup.png" alt="dtable列条件brl2弹出">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图266.生成的决策表</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditorattributecolumns"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorattributecolumns"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorattributecolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以添加表示任何DRL规则属性的零个或多个属性列（例如显着性，计时器，启用等）。</font><font style="vertical-align: inherit;">在引导决策表编辑器中提供额外的伪属性以“否定”规则。</font><font style="vertical-align: inherit;">使用此属性可以取消完整的规则。</font><font style="vertical-align: inherit;">例如，如下所示，可以否定以下简单规则。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
  <span class="hljs-variable">$c</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Cheese</span>( name == <span class="hljs-string">"Cheddar"</span> )
<span class="hljs-keyword">then</span><font></font>
  ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-keyword">when</span>
  <span class="hljs-keyword">not</span> <span class="hljs-constant">Cheese</span>( name == <span class="hljs-string">"Cheddar"</span> )
<span class="hljs-keyword">then</span><font></font>
  ...<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditormetadatacolumns"><a class="anchor" href="index.html#_drools.guideddecisiontableeditormetadatacolumns"></a><a class="link" href="index.html#_drools.guideddecisiontableeditormetadatacolumns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以定义零个或多个元数据列，每个列代表DRL规则上的正常元数据注释。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditoractionbrl"><a class="anchor" href="index.html#_drools.guideddecisiontableeditoractionbrl"></a><a class="link" href="index.html#_drools.guideddecisiontableeditoractionbrl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行动BRL片段</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许BRL片段用于规则右侧的构造。</font><font style="vertical-align: inherit;">使用引导规则编辑器创作BRL片段，因此该编辑器中可用的所有功能都可用于定义决策表列。</font><font style="vertical-align: inherit;">使用嵌入式引导规则编辑器时，定义为“模板键”的字段值将在决策表中形成列。</font><font style="vertical-align: inherit;">BRL片段中绑定的事实可以通过更简单的列类型引用，反之亦然。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户也可以使用“自由格式DRL”来定义“操作”列。</font><font style="vertical-align: inherit;">如果用户需要DRL中变量的占位符，则可以使用</font></font><code>@{variable-name}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如</font><font style="vertical-align: inherit;">Drools Templates语法</font></font><code>$s.setName( "@{name}" )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下示例中，已定义了两个模板键，因此决策表中将显示两列。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-column-action-brl1-popup.png" alt="dtable列动作brl1弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图267.使用BRL定义操作</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-column-action-brl2-popup.png" alt="dtable列动作brl2弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图268.生成的决策表</font></font></div>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditorexecuteworkitem"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorexecuteworkitem"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorexecuteworkitem"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行工作项</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用jBPM工作项处理程序的Action将其输入参数设置为绑定Facts \ Facts字段值。</font></font></p>
</div>
</div>
<div class="sect6">
<h7 id="_drools.guideddecisiontableeditorsetworkitemparameter"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorsetworkitemparameter"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorsetworkitemparameter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用“工作项”参数设置字段的值</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Action将现有Fact或新Fact的字段的值设置为jBPM Work Item Handler的结果参数的值。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过撤消“编辑指导决策表列”权限，可以为用户禁用列定义的创建和编辑。</font><font style="vertical-align: inherit;">这些用户仍然可以修改决策表数据，但是他们无法更改决策表的结构，避免了他们可能意外破坏其功能的情况。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请参阅</font></font><a href="index.html#_wb.userandgroupmgmt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以在常规工作台权限部分中检查如何禁用它。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditoreditcolumn"><a class="anchor" href="index.html#_drools.guideddecisiontableeditoreditcolumn"></a><a class="link" href="index.html#_drools.guideddecisiontableeditoreditcolumn"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.2.4。</font><font style="vertical-align: inherit;">编辑列</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要编辑列，请单击“编辑列”按钮以显示现有列定义。</font><font style="vertical-align: inherit;">单击“编辑”将启动一个窗口以编辑列定义。</font><font style="vertical-align: inherit;">单击“删除”将从表中删除该列。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-edit-column.png" alt="dtable编辑列">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图269.编辑列</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过将鼠标指针悬停在列上来找到列的定义。</font><font style="vertical-align: inherit;">将出现一个弹出窗口，显示</font><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它被认为是一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提示，</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为所有条件都有一个内插的虚拟值。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-column-hint.png" alt="dtable列提示">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图270.列定义提示</font></font></div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guideddecisiontableeditorhitpolicy"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorhitpolicy"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorhitpolicy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.3。</font><font style="vertical-align: inherit;">命中政策</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命中策略决策表可以使用类似于DMN规范的内容。</font><font style="vertical-align: inherit;">命中策略声明规则行之间的优先级以及表中可以触发的规则数。</font><font style="vertical-align: inherit;">可以通过为每行设置正确的激活组和突出值来复制所有命中策略，实际上这就是下面的DRL所做的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命中策略只能在首次创建决策表时设置。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-dtable-selecting-hit-policy.png" alt="指导dtable选择命中政策">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图271.选择命中策略</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在编辑器中查看表格后。</font><font style="vertical-align: inherit;">正在使用的命中策略可以在表格的左上角看到。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-dtable-hit-policy.png" alt="引导dtable命中政策">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图272.命中策略</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">U =唯一命中使用唯一命中策略，每行必须是唯一的，这意味着不能重叠。</font><font style="vertical-align: inherit;">如果有Verification功能在开发时就此发出警告，那么永远不会出现两行可以触发的情况。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F =第一击第一击只发射一行，首先从上到下满足。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RC =已解决命中类似于第一次命中，但您可以例如在第5行提供第10行优先级。这意味着您可以保留所需行的顺序以获得可视化可读性，但指定优先级例外。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R =规则顺序可以触发多行，并且Verification不报告行之间的冲突，因为它们预计会发生。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">＃=无这是正常的点击模式。</font><font style="vertical-align: inherit;">旧决策表默认使用此选项，但由于7.0使用PHREAK，因此行顺序现在很重要。</font><font style="vertical-align: inherit;">旧表不需要迁移工具。</font><font style="vertical-align: inherit;">多行可以触发。</font><font style="vertical-align: inherit;">验证警告有冲突的行。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guideddecisiontableeditorauditlog"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorauditlog"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorauditlog"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.4。</font><font style="vertical-align: inherit;">审核日志</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">审计日志已添加到Web引导的决策表编辑器中，以跟踪添加，删除和修改。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，审计日志未配置为记录任何事件，但是，用户可以轻松选择他们感兴趣的事件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每当签入资产时，审核日志都会保留。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-dtable-audit-log1.png" alt="引导dtable审计log1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图273.空审计日志</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦启用了事件捕获，就会记录所有后续操作。</font><font style="vertical-align: inherit;">用户可以执行以下操作： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每个事件旁边记录解释性说明。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从日志中删除事件。</font><font style="vertical-align: inherit;">事件详细信息保留在底层存储库中。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/guided-dtable-audit-log2.png" alt="引导dtable审计log2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图274.审计事件的示例</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guideddecisiontableeditorverification"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverification"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverification"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5。</font><font style="vertical-align: inherit;">实时验证和验证</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在每次更改单元格后验证决策表。</font><font style="vertical-align: inherit;">如果发现任何问题，结果将显示在表格右侧的列中。</font><font style="vertical-align: inherit;">验证和验证包括以下问题：</font></font></p>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorverificationredundancy"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverificationredundancy"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverificationredundancy"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5.1。</font><font style="vertical-align: inherit;">冗余</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当两行在给定相同的事实集时执行相同的操作时，两行之间存在冗余。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果冗余规则在现有事实上设置值，则冗余可能不是问题，这只是将值设置两次。</font><font style="vertical-align: inherit;">当两个规则增加计数器或将更多事实添加到工作存储器中时会出现问题，因为这会导致不必要的副作用。</font><font style="vertical-align: inherit;">在这两种情况下，不需要另一行。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorverificationsubsumption"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverificationsubsumption"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverificationsubsumption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5.2。</font><font style="vertical-align: inherit;">涵摄</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当给定相同的事实集合时，当一行与另一行执行相同的动作时，存在允许。</font><font style="vertical-align: inherit;">行不是多余的，因为另一行更复杂，并且可以使用一组不触发子行的事实来触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含的问题类似于冗余的情况。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorverificationconflicts"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverificationconflicts"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverificationconflicts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5.3。</font><font style="vertical-align: inherit;">冲突</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冲突可以存在于单行或行之间。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单行冲突会阻止执行行操作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当两个规则的条件满足同一组事实时，两行之间存在冲突，但操作将事实字段设置为不同的值。</font><font style="vertical-align: inherit;">条件可能是多余的，也可能只是下划线。</font><font style="vertical-align: inherit;">冲突是一个问题，因为无法知道最后采取的行动。</font><font style="vertical-align: inherit;">条件可能会为已批准和拒绝提供贷款。</font><font style="vertical-align: inherit;">每次运行规则时以及每个Drools引擎软件版本的最终结果可能不同。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorverificationmissingrhslhs"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverificationmissingrhslhs"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverificationmissingrhslhs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5.4。</font><font style="vertical-align: inherit;">缺少列</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下，通常是偶然的，用户可以删除所有条件或操作列。</font><font style="vertical-align: inherit;">删除条件后，将执行所有操作，并且当缺少操作列时，行不执行任何操作。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guideddecisiontableeditorverificationmissinrange"><a class="anchor" href="index.html#_drools.guideddecisiontableeditorverificationmissinrange"></a><a class="link" href="index.html#_drools.guideddecisiontableeditorverificationmissinrange"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.4.5.5。</font><font style="vertical-align: inherit;">范围检查</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围检查可帮助您制作更完整的决策表。</font><font style="vertical-align: inherit;">它们检查表是否包含对字段可能具有的所有可能值的约束。</font><font style="vertical-align: inherit;">一旦表格完成，任何给定的事实都会有一个动作。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guideddecisiontablegrapheditor"><a class="anchor" href="index.html#_drools.guideddecisiontablegrapheditor"></a><a class="link" href="index.html#_drools.guideddecisiontablegrapheditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5。</font><font style="vertical-align: inherit;">引导决策表图</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然可以编写单个引导决策表，但也可以创建相关表的图表，其中一个人的动作可以提供另一个人的条件的潜在匹配。</font><font style="vertical-align: inherit;">在这种情况下，表格被认为是相关的。</font></font></p>
</div>
<div class="sect3">
<h4 id="_editor"><a class="anchor" href="index.html#_editor"></a><a class="link" href="index.html#_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.5.1。</font><font style="vertical-align: inherit;">编辑</font></font></a></h4>
<div class="paragraph">
<p>The editor itself preserves all the features of the Guided Decision Table Editor merely adding the ability to visualise multiple tables and their relationships in a single view. Selecting a single table leads to the column definitions panel, Source and Data Objects tabs being updated to reflect the selected table. Validation &amp; Verification reporting is also updated to reflect the selected table. The Overview tab maintains state of the graph as a whole.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-graph-radar.png" alt="dtable图雷达">
</div>
<div class="title">Figure 275. Graph editor and radar</div>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_new_graph"><a class="anchor" href="index.html#_creating_a_new_graph"></a><a class="link" href="index.html#_creating_a_new_graph">19.5.2. Creating a new graph</a></h4>
<div class="paragraph">
<p>When a new "Guided Decision Table Graph" is first created the target package is scanned for existing single Guided Decision Tables. Those found are checked for relationships and, if any exist, added automatically to the new graph.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_new_tables_to_the_graph"><a class="anchor" href="index.html#_adding_new_tables_to_the_graph"></a><a class="link" href="index.html#_adding_new_tables_to_the_graph">19.5.3. Adding new tables to the graph</a></h4>
<div class="paragraph">
<p>Tables can be added to the graph by clicking on the "Documents…​" menu entry. This reveals a tool panel that lists the tables already part of the graph. The same panel gives the User the ability to either add a new table or open an existing table.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-documents-selector.png" alt="dtable文档选择器">
</div>
<div class="title">Figure 276. Documents popup</div>
</div>
<div class="sect4">
<h5 id="_adding_new_tables"><a class="anchor" href="index.html#_adding_new_tables"></a><a class="link" href="index.html#_adding_new_tables">19.5.3.1. Adding new tables</a></h5>
<div class="paragraph">
<p>Clicking on "New…​" launches the New Guided Decision Table Wizard. On completion of the Wizard the new table will be added to the graph and any relationships automatically added.</p>
</div>
</div>
<div class="sect4">
<h5 id="_adding_existing_tables"><a class="anchor" href="index.html#_adding_existing_tables"></a><a class="link" href="index.html#_adding_existing_tables">19.5.3.2. Adding existing tables</a></h5>
<div class="paragraph">
<p>Clicking on "Open…​" reveals a file selector wherefrom one or more existing Guided Decision Tables can be selected and added to the graph. If no additional Guided Decision Tables are found a message is shown to the User.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-documents-open.png" alt="dtable文件打开">
</div>
<div class="title">Figure 277. Documents popup - Opening existing</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_removing_tables"><a class="anchor" href="index.html#_removing_tables"></a><a class="link" href="index.html#_removing_tables">19.5.4. Removing tables</a></h4>
<div class="paragraph">
<p>Tables can be removed from the graph by opening the "Documents…​" panel and clicking on the "X" icon beside the table. Tables removed from the graph are not deleted from the Project and can continue to be edited by the Gudied Decision Table Editor.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guideddecisiontreeeditor"><a class="anchor" href="index.html#_drools.guideddecisiontreeeditor"></a><a class="link" href="index.html#_drools.guideddecisiontreeeditor">19.6. Guided Decision Trees</a></h3>
<div class="paragraph">
<p>The Workbench supports authoring of simple Decision Trees.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The editor does not support nested Data Objects at present.
It is therefore advised to only use Guided Decision Trees with flat Data Object models.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_the_initial_editor_layout"><a class="anchor" href="index.html#_the_initial_editor_layout"></a><a class="link" href="index.html#_the_initial_editor_layout">19.6.1. The initial editor layout</a></h4>
<div class="paragraph">
<p>When a new Guided Decision Tree is created the editor is initially blank.</p>
</div>
<div class="paragraph">
<p>The left-hand side is a palette of available Data Objects, their fields and Actions.</p>
</div>
<div class="paragraph">
<p>The right-hand side is the area where you can drag and drop Data Objects, their fields or Actions to build a tree.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑器将在被拖动的节点和可以附加的适用子节点之间显示一个连接器。</font><font style="vertical-align: inherit;">拖动完成后，新节点将附加到适用的子节点。</font><font style="vertical-align: inherit;">拖动到空树时，根节点不会显示连接器。</font><font style="vertical-align: inherit;">完成拖动将根节点定位在编辑器的中心。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组成树时有各种限制： - </font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树必须在根目录下有一个数据对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一棵树只能有一个根。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据对象可以具有其他数据对象，字段约束或作为子项的操作。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段约束必须位于与父节点相同的数据对象的字段上。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段约束可以具有其他字段约束或作为子项的Actions。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段约束必须位于与父节点相同的数据对象的字段上。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动作只能将其他动作作为子动作。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor1.png" alt="GuidedDecisionTreeEditor1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图278.引导决策树 - 空编辑器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开调色板会显示数据对象及其字段的树节点。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor2.png" alt="GuidedDecisionTreeEditor2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图279.引导决策树 - 扩展调色板</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_first_steps"><a class="anchor" href="index.html#_first_steps"></a><a class="link" href="index.html#_first_steps"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.2。</font><font style="vertical-align: inherit;">第一步</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将数据对象拖到树创作区域。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor3.png" alt="GuidedDecisionTreeEditor3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图280.引导决策树 - 数据对象根节点</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击节点可选择它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择节点时，将显示操作节点的图标。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图标是：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除节点也将删除所有子节点。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">折叠节点无法编辑，因为它们包含许多子节点。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">坍方</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor4.png" alt="GuidedDecisionTreeEditor4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图281.引导决策树 - 选定节点</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_editing_data_object_nodes"><a class="anchor" href="index.html#_editing_data_object_nodes"></a><a class="link" href="index.html#_editing_data_object_nodes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.3。</font><font style="vertical-align: inherit;">编辑数据对象节点</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择“数据对象”节点并单击“编辑”图标会显示一个用于管理节点的弹出窗口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出窗口显示数据对象类型，并允许它绑定到变量。</font><font style="vertical-align: inherit;">绑定数据对象可以由Actions修改或撤消。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor5.png" alt="GuidedDecisionTreeEditor5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图282.引导决策树 - 数据对象编辑器</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_editing_field_constraint_nodes"><a class="anchor" href="index.html#_editing_field_constraint_nodes"></a><a class="link" href="index.html#_editing_field_constraint_nodes">19.6.4. Editing Field Constraint nodes</a></h4>
<div class="paragraph">
<p>Selecting a Field Constraint node and clicking the edit icon shows a popup to manage the node.</p>
</div>
<div class="paragraph">
<p>The popup shows the Data Object type and field and allows the field to be bound to a variable.
An operator, applicable to the Data Model field’s data-type, can be selected and a corresponding value entered.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditor6.png" alt="GuidedDecisionTreeEditor6">
</div>
<div class="title">Figure 283. Guided Decision Trees - Field Constraint Editor</div>
</div>
</div>
<div class="sect3">
<h4 id="_editing_action_nodes"><a class="anchor" href="index.html#_editing_action_nodes"></a><a class="link" href="index.html#_editing_action_nodes">19.6.5. Editing Action nodes</a></h4>
<div class="paragraph">
<p>Selecting an Insert Action node and clicking the edit icon shows a popup to manage the node.</p>
</div>
<div class="paragraph">
<p>The popup allows selection of the Data Object to be inserted and whether it’s insertion is "logical". Please refer to Drools documentation regarding Truth Maintenance for more information.
Fields for the new Data Object can have values set.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditorActionInsert.png" alt="GuidedDecisionTreeEditorActionInsert">
</div>
<div class="title">Figure 284. Guided Decision Trees - Action "Insert" Editor</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择“插入撤消”节点并单击编辑图标会显示一个用于管理节点的弹出窗口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出窗口允许选择从选定节点到根节点的路径中绑定的任何数据对象进行撤消。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditorActionRetract.png" alt="GuidedDecisionTreeEditorActionRetract">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图285.引导决策树 - 操作“撤回”编辑器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择“插入更新”节点并单击编辑图标会显示一个用于管理节点的弹出窗口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出窗口允许修改从所选节点到根节点的路径中绑定的任何数据对象。</font><font style="vertical-align: inherit;">修改后的数据对象的字段可以设置值。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditorActionUpdate.png" alt="GuidedDecisionTreeEditorActionUpdate">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图286.引导决策树 - 动作“更新”编辑器</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_the_tree"><a class="anchor" href="index.html#_managing_the_tree"></a><a class="link" href="index.html#_managing_the_tree"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.6.6。</font><font style="vertical-align: inherit;">管理树</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使是简单的树木也会变大，变得难以维护。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，可以折叠树的部分，在用户界面中提供更多空间以维护树的不同部分。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果节点有子节点，则在选中时，它将具有折叠子节点的图标。</font><font style="vertical-align: inherit;">单击此图标将折叠儿童。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过选择折叠节点并单击“扩展”图标，可以同样展开折叠节点。</font><font style="vertical-align: inherit;">折叠节点无法编辑，因为它包含许多子节点。</font><font style="vertical-align: inherit;">删除折叠节点也会删除所有子节点。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditorCollapse1.png" alt="GuidedDecisionTreeEditorCollapse1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图287.引导决策树 - 折叠节点</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTreeEditorCollapse2.png" alt="GuidedDecisionTreeEditorCollapse2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图288.引导决策树 - 折叠节点</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.xlsdecisiontable"><a class="anchor" href="index.html#_drools.xlsdecisiontable"></a><a class="link" href="index.html#_drools.xlsdecisiontable"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.7。</font><font style="vertical-align: inherit;">电子表格决策表</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多个规则可以存储在电子表格中。</font><font style="vertical-align: inherit;">电子表格中的每一行都是规则，每列都是条件，操作或选项。</font><font style="vertical-align: inherit;">本文档的Drools Expert部分更详细地讨论了电子表格决策表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用电子表格，请上载XLS或XLSX文件。</font><font style="vertical-align: inherit;">要创建新的决策表：启动新的“决策表（电子表格）”向导，您将获得一个上传选项的选项。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DecisionTable.png" alt="DecisionTable">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图289.电子表格决策表</font></font></div>
</div>
<div class="sect3">
<h4 id="_convert_to_guided_decision_table"><a class="anchor" href="index.html#_convert_to_guided_decision_table"></a><a class="link" href="index.html#_convert_to_guided_decision_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.7.1。</font><font style="vertical-align: inherit;">转换为指导决策表</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击XLS决策表编辑器中的“转换”菜单项，可以将XLS决策表转换为引导决策表。</font><font style="vertical-align: inherit;">将根据XLS文件的内容创建一个或多个文件。</font><font style="vertical-align: inherit;">转换结果将报告给用户。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DecisionTable-conversion-results.png" alt="DecisionTable转换结果">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图290.电子表格转换结果</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XLS文件中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">字段</font><font style="vertical-align: inherit;">格式</font><font style="vertical-align: inherit;">必须符合为Drools配置的格式，并由系统属性设置</font></font><code>drools.dateformat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认设置为</font></font><code>dd-MMM-yyyy</code></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.guidedscorecardeditor"><a class="anchor" href="index.html#_drools.guidedscorecardeditor"></a><a class="link" href="index.html#_drools.guidedscorecardeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8。</font><font style="vertical-align: inherit;">记分卡</font></font></a></h3>
<div class="paragraph">
<p>A scorecard is a graphical representation of a formula used to calculate an overall score.
A scorecard can be used to predict the likelihood or probability of a certain outcome.
Drools now supports additive scorecards.
An additive scorecard calculates an overall score by adding all partial scores assigned to individual rule conditions.</p>
</div>
<div class="paragraph">
<p>Additionally, Drools Scorecards will allows for reason codes to be set, which help in identifying the specific rules (buckets) that have contributed to the overall score.
Drools Scorecards will be based on the PMML 4.1 Standard.</p>
</div>
<div class="paragraph">
<p>The New Item menu now allows for creation of scorecard assets.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/scorecard_asset_webeditor.png" alt="记分卡资产网络">
</div>
<div class="title">Figure 291. Scorecard Asset - Guided Editor</div>
</div>
<div class="paragraph">
<p>The above image shows a scorecard with one characteristic.
Each scorecard consists of two sections (a) Setup Parameters (b) Characteristic Section</p>
</div>
<div class="sect3">
<h4 id="_drools.guidedscorecardeditorsetupparameters"><a class="anchor" href="index.html#_drools.guidedscorecardeditorsetupparameters"></a><a class="link" href="index.html#_drools.guidedscorecardeditorsetupparameters">19.8.1. (a) Setup Parameters</a></h4>
<div class="paragraph">
<p>The setup section consits of parameters that define the overall behaviour of this scorecard.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Facts: This dropdown shows a list of facts that are visible for this asset.</p>
</li>
<li>
<p>Resultant Score Field: Shows a list of fields from the selected fact. Only fields of type 'double' are shown. If this dropdown is empty double check your fact model. The final calculated score will be stored in this field.</p>
</li>
<li>
<p>Initial Score: Numeric Text Field to capture the initial score. The generated rules will initialize the 'Resultant Score Field' with this score and then is added to the overall score whenever partial scores are summed up.</p>
</li>
<li>
<p>Use Reason Codes: Boolean indicator to compute reason codes along with the final score. Selecting Yes/No in this field will enable/disable the 'Resultant Reason Codes Field', 'Reason Code Algorithm' and the 'Baseline Score' field.</p>
</li>
<li>
<p>Resultant Reason Codes Field: Shows a list of fields from the selected fact. Only fields of type 'java.util.List' are shown. This collection will hold the reason codes selected by this scorecard.</p>
</li>
<li>
<p>Reason Code Algorithm: May be "none", "pointsAbove" or "pointsBelow", describing how reason codes shall be ranked, relative to the baseline score of each Characteristic, or as set at the top-level scorecard.</p>
</li>
<li>
<p>Baseline Score: A single value to use as the baseline comparison score for all characteristics, when determining reason code ranking. Alternatively, unique baseline scores may be set for each individual Characteristic as shown below. This value is required only when UseReasonCodes is "true" and baselineScore is not given for each Characteristic.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If UseReasonCodes is "true", then BaselineScore must be defined at the Scorecard level or for each Characteristic, and ReasonCode must be provided for each Characteristic or for each of its input Attributes.
If UseReasonCodes is "false", then baselineScore and reasonCode are not required.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_drools.guidedscorecardeditorcharacteristics"><a class="anchor" href="index.html#_drools.guidedscorecardeditorcharacteristics"></a><a class="link" href="index.html#_drools.guidedscorecardeditorcharacteristics">19.8.2. (b) Characteristics</a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在单击“新特征”按钮时，会在记分卡中添加一个新的空特征编辑器。</font><font style="vertical-align: inherit;">为每个记分卡特征（数字或分类）定义点分配策略。</font><font style="vertical-align: inherit;">每个记分卡特征被分配单个部分分数，其用于计算总分数。</font><font style="vertical-align: inherit;">总分只是所有部分分数的总和。</font><font style="vertical-align: inherit;">假设部分分数是“double”类型的连续值。</font></font></p>
</div>
<div class="sect4">
<h5 id="_drools.guidedscorecardeditorcreatingcharacteristics"><a class="anchor" href="index.html#_drools.guidedscorecardeditorcreatingcharacteristics"></a><a class="link" href="index.html#_drools.guidedscorecardeditorcreatingcharacteristics"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8.2.1。</font><font style="vertical-align: inherit;">创建角色</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每张记分卡必须至少有一个特征</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/scorecards_new_characteristic.png" alt="记分卡的新特点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图292.新特征</font></font></div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：此特征的描述性名称。</font><font style="vertical-align: inherit;">仅供参考。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除Charteristic：在显示确认对话框后，将从记分卡中删除此特征。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加属性：将为属性（bin）添加行条目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实：选择将用于计算部分分数的评估类。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特征：显示所选事实的字段列表。</font><font style="vertical-align: inherit;">仅显示“String”，“int”，“double”，“boolean”类型的字段。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基线分数：设置特征的基线分数，以便在确定原因代码的排名时比较实际的部分分数。</font><font style="vertical-align: inherit;">当useReasonCodes属性为“true”且未在元素记分卡中定义baselineScore时，此值是必需的。</font><font style="vertical-align: inherit;">每当为特征定义baselineScore时，它优先于元素记分卡中定义的baselineScore值。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原因代码：包含特征的原因代码，通常与不利的决策相关联。</font></font></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_drools.guidedscorecardeditorcreatingattributes"><a class="anchor" href="index.html#_drools.guidedscorecardeditorcreatingattributes"></a><a class="link" href="index.html#_drools.guidedscorecardeditorcreatingattributes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.8.2.2。</font><font style="vertical-align: inherit;">创建属性</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“新建属性”按钮，新建一个空属性编辑器。</font><font style="vertical-align: inherit;">在记分卡模型中，定义特定特征的属性的所有元素都必须引用单个字段。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/scorecards_new_attribute.png" alt="记分卡新属性">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图293.新属性</font></font></div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符：输入属性和部分分数之间的映射发生的条件。</font><font style="vertical-align: inherit;">操作员下拉列表将显示不同的值，具体取决于所选字段的数据类型。</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型字符串：“=”，“in”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataType整数：“=”，“&gt;”，“&lt;”，“&gt; =”，“⇐”，“&gt; .. &lt;”，“&gt; = .. &lt;”，“&gt; = ..⇐”，“&gt;。 .⇐”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DataType Boolean：“true”，“false”。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关更多详细信息，请参阅下一小节（值）。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值：操作员选择指定值的基础可以是单个值，也可以是以逗号（“，”）分隔的一组值。</font><font style="vertical-align: inherit;">对于运算符类型boolean，将禁用value字段。</font></font></p>
<div class="paragraph">
<p></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表42.运算符/值</font></font></caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据类型</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作者</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">备注</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将寻找完全匹配</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔值（a，b，c，...）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果字段值包含在逗号分隔的值列表中，则运算符“in”表示评估为TRUE</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是真的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N / A</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段是不可编辑的（只读）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是假的</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N / A</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值字段是不可编辑的（只读）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于运算符</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">伟大的运营商</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于运营商</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; =</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大于或等于</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;=</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单一价值</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于或等于</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; .. &lt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔值（a，b）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（大于值'a'）和（小于值'b'）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; = .. &lt;</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔值（a，b）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（大于或等于值'a'）和（小于值'b'）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; = .. &lt;=</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔值（a，b）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（大于或等于值'a'）和（小于或等于值'b'）</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&gt; .. &lt;=</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔值（a，b）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（大于值'a'）和（小于或等于值'b'）</font></font></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分得分：定义授予属性的得分。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原因代码：定义属性的原因代码。</font><font style="vertical-align: inherit;">如果在此级别中使用reasonCode属性，则它优先于与Characteristics元素关联的ReasonCode。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">操作：删除此属性。</font><font style="vertical-align: inherit;">提示用户确认。</font></font></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果使用原因代码为“true”，则必须在记分卡级别或每个特征定义基线分数，并且必须为每个特征或每个输入属性提供原因代码。</font><font style="vertical-align: inherit;">如果使用原因代码为“false”，则不需要BaselineScore和ReasonCode。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.testscenarioeditor"><a class="anchor" href="index.html#_drools.testscenarioeditor"></a><a class="link" href="index.html#_drools.testscenarioeditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9。</font><font style="vertical-align: inherit;">测试场景</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试场景用于验证规则和KIE基础是否按预期工作。</font><font style="vertical-align: inherit;">当KIE基础发展时，测试场景防范回归。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TestScenario.png" alt="TestScenario">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图294.示例测试场景</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给定部分列出了行为所需的事实。</font><font style="vertical-align: inherit;">Expect部分列出了行为所做的预期更改和操作。</font><font style="vertical-align: inherit;">给定事实在执行之前传递给测试场景。</font><font style="vertical-align: inherit;">在规则执行期间，记录KIE基础的变化。</font><font style="vertical-align: inherit;">在执行结束记录的动作之后，将KIE基础和KIE基础输出中的现有事实与期望进行比较。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TestScenarioAfterRunningIt.png" alt="TestScenarioAfterRunningIt">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图295.执行后的示例测试场景</font></font></div>
</div>
<div class="sect3">
<h4 id="_drools.ksessionselector"><a class="anchor" href="index.html#_drools.ksessionselector"></a><a class="link" href="index.html#_drools.ksessionselector"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.1。</font><font style="vertical-align: inherit;">KIE会话选择器</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KSessionSelector.png" alt="KSessionSelector">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图296. KIE会话选择器</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE会话选择器用于选择运行规则的会话。</font><font style="vertical-align: inherit;">KIE会话需要是有状态的，并且在使用模拟时间时使用伪时钟。</font><font style="vertical-align: inherit;">KIE会话在项目编辑器，KIE基础和会话部分中定义。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_drools.testscenarioeditorgivensection"><a class="anchor" href="index.html#_drools.testscenarioeditorgivensection"></a><a class="link" href="index.html#_drools.testscenarioeditorgivensection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.2。</font><font style="vertical-align: inherit;">给定部分</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/GivenSection.png" alt="GivenSection">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图297.给定弹出窗口</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入新事实 - 添加将在执行前插入KIE库的新事实。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修改现有事实 - 允许在KIE基本执行之间编辑事实。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除现有事实 - 允许在执行之间删除事实。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活规则流组 - 通过提前激活组，允许测试规则流组中的规则。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.testscenarioeditorexpectedsection"><a class="anchor" href="index.html#_drools.testscenarioeditorexpectedsection"></a><a class="link" href="index.html#_drools.testscenarioeditorexpectedsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.3。</font><font style="vertical-align: inherit;">期待部分</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ExpectSection.png" alt="ExpectSection">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图298.预期弹出窗口</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则 - 验证是否触发了某个规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实值 - 验证在给定部分中创建的事实的事实值。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配的任何事实 - 使用指定的字段值验证KIE基础中至少有一个事实。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.testscenarioeditorglobalsection"><a class="anchor" href="index.html#_drools.testscenarioeditorglobalsection"></a><a class="link" href="index.html#_drools.testscenarioeditorglobalsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.4。</font><font style="vertical-align: inherit;">全球科</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewGlobal.png" alt="NewGlobal">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图299.全局弹出窗口</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局 - 验证全局字段值。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_drools.testscenarioeditorinpuotsection"><a class="anchor" href="index.html#_drools.testscenarioeditorinpuotsection"></a><a class="link" href="index.html#_drools.testscenarioeditorinpuotsection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.9.5。</font><font style="vertical-align: inherit;">新输入部分</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewInput.png" alt="NewInput">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图300.新输入弹出窗口</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对现有事实的调用方法 - 在规则执行开始时从事实中调用方法。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.dsleditor"><a class="anchor" href="index.html#_drools.dsleditor"></a><a class="link" href="index.html#_drools.dsleditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.10。</font><font style="vertical-align: inherit;">DSL编辑器</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DSL编辑器允许编写DSL Sentences。</font><font style="vertical-align: inherit;">读者应该花时间在Drools Expert文档中探索DSL功能; </font><font style="vertical-align: inherit;">因为Drools Workbench的DSL编辑器中的语法是相同的。</font><font style="vertical-align: inherit;">扩展了正常语法以提供“提示”来控制如何在用户界面内呈现和验证DSL变量。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持以下“提示”： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{&lt;varName&gt;：&lt;正则表达式&gt;}</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当在导引编辑器中使用DSL Sentence时，这将呈现文本字段来代替DSL变量。</font><font style="vertical-align: inherit;">将根据正则表达式验证文本字段的内容。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{&lt;的varName&gt;：ENUM：&lt;factType.fieldName&gt;}</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当在导引编辑器中使用DSL Sentence时，这将呈现枚举以代替DSL变量。</font><font style="vertical-align: inherit;">&lt;factType.fieldName&gt;将枚举绑定到模型Fact和Field枚举定义。</font><font style="vertical-align: inherit;">这可以是“Drools Workbench枚举”（即在Workbench中定义）或Java枚举（即在模型POJO JAR文件中定义）。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">{&lt;的varName&gt;：日期：&lt;DATEFORMAT&gt;}</font></font></p>
<div class="paragraph">
<p>This will render a Date selector in place of the DSL variable when the DSL Sentence is used in the guided editor.</p>
</div>
</li>
<li>
<p>{&lt;varName&gt;:BOOLEAN:&lt;[checked | unchecked]&gt;}</p>
<div class="paragraph">
<p>This will render a dropdown selector in place of the DSL variable, providing boolean choices, when the DSL Sentence is used in the guided editor.</p>
</div>
</li>
<li>
<p>{&lt;varName&gt;:CF:&lt;factType.fieldName&gt;}</p>
<div class="paragraph">
<p>This will render a button that will allow you to set the value of this variable using a Custom Form.
In order to use this feature, a  Working-Set containing a Custom Form Configuration for factType.fieldName must be active.
If there is no such Working-Set, a simple text box is used (just like a regular variable).</p>
</div>
<div class="paragraph">
<p>For more information, please read more about Working-Sets and Custom Form Configurations.</p>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DSLEditor.png" alt="DSLEditor">
</div>
<div class="title">Figure 301. DSL rule</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.enumerationeditor"><a class="anchor" href="index.html#_drools.enumerationeditor"></a><a class="link" href="index.html#_drools.enumerationeditor">19.11. Data enumerations (drop down list configurations)</a></h3>
<div class="paragraph">
<p>Data enumerations are an optional asset type that technical folk can configure to provide drop down lists for the guided editor.
These are stored and edited just like any other asset, and apply to the package that they belong to.</p>
</div>
<div class="paragraph">
<p>The contents of an enum config are a mapping of <code>Fact.field</code> to a list of values to be used in a drop down.
The strings are either a value to be shown in a drop down, or a mapping from the code value (what ends up used in the rule) and a display value.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/EnumConfig.png" alt="EnumConfig">
</div>
<div class="title">Figure 302. Data enumeration</div>
</div>
<div class="paragraph">
<p>If you wish to use a mapping between value used in the rule and the value shown in the UI you need to separate the code value and display value with an equals sign.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-string">'Person.gender'</span> : [<span class="hljs-string">'M=Male'</span>,<span class="hljs-string">'F=Female'</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <code>F</code> will be used in the rules but <code>Female</code> shown in the UI.</p>
</div>
<div class="paragraph">
<p>Drop down lists can also depend on other field values.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们想象一个简单的事实模型，我们有一个名为Vehicle的类，它有两个字段：</font></font><code>engineType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>fuelType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们想要选择</font></font><code>engineType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“汽油”或“柴油”。</font><font style="vertical-align: inherit;">现在，显然燃料的选择类型必须取决于发动机类型（因此对于汽油我们有ULP和PULP，而对于柴油，我们有BIO和NORMAL）。</font><font style="vertical-align: inherit;">我们可以在枚举中表达这种依赖关系：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/EnumVehicleEngine.png" alt="EnumVehicleEngine">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这显示了如何根据其他字段值进行选择。</font><font style="vertical-align: inherit;">请注意，一旦选择engineType，将确定fuelType的选项列表。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择不依赖于规则条件和操作。</font><font style="vertical-align: inherit;">如果规则条件检查引擎类型，则引导编辑器将不在规则动作中提供相关燃料类型。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_drools.advancedenumconcepts"><a class="anchor" href="index.html#_drools.advancedenumconcepts"></a><a class="link" href="index.html#_drools.advancedenumconcepts"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.11.1。</font><font style="vertical-align: inherit;">高级枚举概念</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用数据枚举进行一些其他高级操作。</font></font></p>
</div>
<div class="sect4">
<h5 id="_drools.advanceenumconcepts.external"><a class="anchor" href="index.html#_drools.advanceenumconcepts.external"></a><a class="link" href="index.html#_drools.advanceenumconcepts.external"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.11.1.1。</font><font style="vertical-align: inherit;">外部数据源</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用帮助程序类从外部数据源检索列表，而不是定义静态列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帮助程序类必须位于Project的类路径中; </font><font style="vertical-align: inherit;">通过添加JAR将类包含为项目依赖项。</font><font style="vertical-align: inherit;">辅助类必须是可实例化的，并且具有返回a的非静态方法</font></font><code>java.util.List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列表的人口是特定于实施的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript"><span class="hljs-string">'Person.age'</span> : (<span class="hljs-keyword">new</span> org.yourco.DataHelper()).getListOfAges()</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些其他情况下，您可能希望完全从外部数据源（例如关系数据库）加载枚举数据。</font><font style="vertical-align: inherit;">为此，您可以实现一个返回a的类</font></font><code>Map&lt;String, List&lt;String&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">地图的关键是</font></font><code>Fact.field</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  和，值是</font></font><code>java.util.List&lt;String&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用的值。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SampleDataSource2</span> </span>{<font></font>
<font></font>
  <span class="hljs-keyword">public</span> Map&lt;String&gt;, <span class="hljs-function">List&lt;String&gt; <span class="hljs-title">loadData</span><span class="hljs-params">()</span> </span>{<font></font>
    Map data = <span class="hljs-keyword">new</span> HashMap();<font></font>
<font></font>
    List d = <span class="hljs-keyword">new</span> ArrayList();<font></font>
    d.add(<span class="hljs-string">"value1"</span>);<font></font>
    d.add(<span class="hljs-string">"value2"</span>);<font></font>
    data.put(<span class="hljs-string">"Fact.field"</span>, d);<font></font>
<font></font>
    <span class="hljs-keyword">return</span> data;<font></font>
  }<font></font>
<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举定义将简单如下（不引用事实或字段名称）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">=(<span class="hljs-keyword">new</span> SampleDataSource2()).loadData()</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运营商通知工作台从辅助类加载所有枚举数据。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当请求在编辑器中使用枚举定义时，将静态评估辅助方法。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_drools.advanceenumconcepts.dynamic"><a class="anchor" href="index.html#_drools.advanceenumconcepts.dynamic"></a><a class="link" href="index.html#_drools.advanceenumconcepts.dynamic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.11.1.2。</font><font style="vertical-align: inherit;">动态查找</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有上述情况都通过在编辑器需要枚举时静态评估枚举定义来检索值列表。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过在引号内包含对helper类的调用，从辅助类动态加载依赖的枚举定义。</font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-string">'Country.region[countryCode]'</span> : <span class="hljs-string">'(new org.yourco.DataHelper()).getListOfRegions("@{countryCode}")'</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.drleditor"><a class="anchor" href="index.html#_drools.drleditor"></a><a class="link" href="index.html#_drools.drleditor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19.12。</font><font style="vertical-align: inherit;">DRL文件</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL文件存储为文本 - 可以在Drools Workbench中进行管理。</font><font style="vertical-align: inherit;">DRL文件可以包含一个或多个全局变量，规则，函数，枚举，类型声明或DRL语言支持的任何内容。</font><font style="vertical-align: inherit;">通常，您将使用IDE编辑原始DRL文件，因为它具有所有高级工具和内容辅助和调试功能。</font><font style="vertical-align: inherit;">但是，有时候规则可能需要在Drools Workbench中处理包中相当技术性的东西。</font><font style="vertical-align: inherit;">在任何典型的规则包中，您通常都需要一些“技术规则” - 当然，您可以将所有规则类型混合在一起。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DRLRule.png" alt="DRLRule">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图303. DRL技术规则</font></font></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wb.workbenchintegration"><a class="anchor" href="index.html#_wb.workbenchintegration"></a><a class="link" href="index.html#_wb.workbenchintegration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.工作台集成</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_drools.workbenchremoteapi"><a class="anchor" href="index.html#_drools.workbenchremoteapi"></a><a class="link" href="index.html#_drools.workbenchremoteapi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1。</font><font style="vertical-align: inherit;">休息</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对知识库的REST API调用允许您管理知识库内容并操纵知识库的存储库中的静态数据。</font><font style="vertical-align: inherit;">这些调用是异步的，也就是说，它们在执行调用后继续作为作业执行。</font><font style="vertical-align: inherit;">每次调用允许（在执行REST API调用之后）返回作业ID，以请求作业状态并验证作业是否成功完成。</font><font style="vertical-align: inherit;">这些调用的参数以JSON实体的形式提供。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Java代码与REST API进行交互时，可以在</font></font><a href="https://origin-repository.jboss.org/nexus/#nexus-search;quick~uberfire-rest-client"><code>(org.uberfire:)uberfire-rest-client</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAR中</font><font style="vertical-align: inherit;">找到POST操作中使用的类或各种操作返回的类</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">下面提到的所有类都可以</font></font><code>org.guvnor.rest.client</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该JAR </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">包中</font><font style="vertical-align: inherit;">找到</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect3">
<h4 id="_job_calls"><a class="anchor" href="index.html#_job_calls"></a><a class="link" href="index.html#_job_calls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.1。</font><font style="vertical-align: inherit;">工作电话</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个Knowledge Store REST调用在发送后返回其作业ID。</font><font style="vertical-align: inherit;">这是必要的，因为调用是异步的，您需要能够引用作业以检查其在生命周期中的状态。</font><font style="vertical-align: inherit;">在其生命周期中，作业可以具有以下状态：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ACCEPTED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：工作被接受并正在处理中</font></font></p>
</li>
<li>
<p><code>BAD_REQUEST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：请求未被接受，因为它包含不正确的内容</font></font></p>
</li>
<li>
<p><code>RESOURCE_NOT_EXIST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：请求的资源（路径）不存在</font></font></p>
</li>
<li>
<p><code>DUPLICATE_RESOURCE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：资源已存在</font></font></p>
</li>
<li>
<p><code>SERVER_ERROR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：服务器上发生错误</font></font></p>
</li>
<li>
<p><code>SUCCESS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：工作顺利完成</font></font></p>
</li>
<li>
<p><code>FAIL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：工作失败了</font></font></p>
</li>
<li>
<p><code>DENIED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：工作被拒绝了</font></font></p>
</li>
<li>
<p><code>GONE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：找不到作业ID</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下情况下作业可以为GONE：
 </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作业已明确删除
</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作业已完成并已从状态缓存中删除（在缓存达到其最大容量后，作业将从状态缓存中删除）**作业从未存在过</font></font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>job</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">电话：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/jobs/<em>{jobID}</em></code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回作业状态</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[删除] </font></font><code>/jobs/<em>{jobID}</em></code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除作业：如果作业尚未处理，则会从作业队列中删除作业。</font><font style="vertical-align: inherit;">但是，这不会取消或停止正在进行的工作</font></font></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_project_calls"><a class="anchor" href="index.html#_project_calls"></a><a class="link" href="index.html#_project_calls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.2。</font><font style="vertical-align: inherit;">项目电话</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过知识库的项目调用，您可以管理Workspace项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>project</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">电话：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/projects</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取有关知识库中所有项目的信息。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/spaces/{spaceName}/projects/{projectName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取有关项目的信息。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/projects/{projectName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在给定空间中创建新项目。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[删除] </font></font><code>/spaces/{spaceName}/projects/{projectName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从知识库中删除项目。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/spaces/{spaceName}/projects</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取有关空间中所有项目的信息</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/git/clone</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从提供的git地址将项目克隆到空间中。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[删除] </font></font><code>/spaces/{spaceName}/projects/{projectName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从空间中删除项目。</font></font></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_space_calls"><a class="anchor" href="index.html#_space_calls"></a><a class="link" href="index.html#_space_calls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.3。</font><font style="vertical-align: inherit;">太空电话</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对知识库的空间调用允许您管理空间。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>spaces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">电话：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/spaces</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取所有空格。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[得到] </font></font><code>/spaces/{spaceName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取单个空格。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建</font></font><code>Space</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JSON实体</font><font style="vertical-align: inherit;">描述的空间</font><font style="vertical-align: inherit;">。</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[删除] </font></font><code>/spaces/{spaceName}</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除空格。</font></font></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_maven_calls"><a class="anchor" href="index.html#_maven_calls"></a><a class="link" href="index.html#_maven_calls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.4。</font><font style="vertical-align: inherit;">Maven打来电话</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven调用知识库中的项目允许您编译，测试，安装和部署项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>maven</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供</font><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">电话：</font></font></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/projects/{projectName}/maven/compile</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译项目（相当于</font></font><code>mvn compile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/projects/{projectName}/maven/test</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试项目（相当于</font></font><code>mvn test</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/projects/{projectName}/maven/install</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装项目（相当于</font></font><code>mvn install</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</dd>
<dt class="hdlist1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[POST] </font></font><code>/spaces/{spaceName}/projects/{projectName}/maven/deploy</code></dt>
<dd>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署项目（相当于   </font></font><code>mvn deploy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_rest_summary"><a class="anchor" href="index.html#_rest_summary"></a><a class="link" href="index.html#_rest_summary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.5。</font><font style="vertical-align: inherit;">REST摘要</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下表中的URL模板与以下URL相关：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>http://<em>{server}</em>:<em>{port}</em>/kie-wb/rest</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_embedded_drools_controller_calls"><a class="anchor" href="index.html#_embedded_drools_controller_calls"></a><a class="link" href="index.html#_embedded_drools_controller_calls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.1.6。</font><font style="vertical-align: inherit;">嵌入式Drools控制器调用</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用嵌入式Drools控制器模式运行Workbench时，还可以使用与管理Kie Server模板，Kie Server实例和容器的所有方面相关的一系列端点。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多详细信息，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="index.html#_controller_rest_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器REST API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一个</font></font><a href="index.html#_kie_server_controller_client_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java客户端API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以与这些端点进行交互。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie.keycloakssointegration"><a class="anchor" href="index.html#_kie.keycloakssointegration"></a><a class="link" href="index.html#_kie.keycloakssointegration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2。</font><font style="vertical-align: inherit;">Keycloak SSO集成</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单点登录（SSO）和相关令牌交换机制正成为Web上不同环境中身份验证和授权的最常见方案，特别是在迁移到云时。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本节讨论Keycloak与jBPM或Drools应用程序的集成，以便使用Keycloak上提供的所有功能。</font><font style="vertical-align: inherit;">Keycloak是用于浏览器应用程序和RESTful Web服务的集成SSO和IDM。</font><font style="vertical-align: inherit;">在</font></font><a href="http://keycloak.jboss.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak的主页上</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多地了解它</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与Keycloak集成的结果具有许多优点，例如：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为不同的客户提供集成的SSO和IDM环境，包括jBPM和Drools工作台</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社交登录 - 使用您的Facebook，Google，LinkedIn等帐户</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户会话管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有更多......</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来的部分将介绍Keycloak的以下集成点：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Keycloak服务器进行Workbench身份验证</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它主要包括通过Keycloak SSO保护Web客户端和远程服务客户端。</font><font style="vertical-align: inherit;">因此，无论是Web界面还是远程服务使用者（无论是用户还是服务）都将通过KC进行身份验证。</font></font></p>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Keycloak服务器执行服务器身份验证</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括保护执行服务器提供的远程服务（因为它不提供Web界面）。</font><font style="vertical-align: inherit;">任何远程服务使用者（无论是用户还是服务）都将通过KC进行身份验证。</font></font></p>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消费远程服务</font></font></strong></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本节介绍第三方客户端如何使用Workbench和Execution Server提供的远程服务端点，例如REST API或远程文件系统服务。</font></font></p>
</div>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloakd和Workbench的安全管理区域</font></font></strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_scenario"><a class="anchor" href="index.html#_scenario"></a><a class="link" href="index.html#_scenario"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.1。</font><font style="vertical-align: inherit;">脚本</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请考虑以下图表作为此文档示例的环境：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak是一个独立的流程，提供远程身份验证，授权和管理服务，这些服务可能会被网络上的一个或多个jBPM应用程序占用。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/KeyCloak_sso_scenario.png" alt="KeyCloak sso场景">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考虑构建此环境的以下主要步骤：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装并设置Keycloak服务器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此示例创建和设置领域 - 配置领域的客户端，用户和角色</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装并设置SSO客户端适配器和jBPM应用程序</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：生成的环境和本文档的不同配置基于jBPM（KIE）Workbench，但同样也可以应用于KIE Drools Workbench。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_install_and_set_up_a_keycloak_server"><a class="anchor" href="index.html#_install_and_set_up_a_keycloak_server"></a><a class="link" href="index.html#_install_and_set_up_a_keycloak_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.2。</font><font style="vertical-align: inherit;">安装并设置Keycloak服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak提供了大量文档和几篇关于在不同环境中安装的文章。</font><font style="vertical-align: inherit;">本节介绍了为该示例构建集成环境的最小设置。</font><font style="vertical-align: inherit;">如果您需要更多信息，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="http://www.keycloak.org/documentation.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是最小的Keycloak安装和设置的步骤：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><a href="http://www.keycloak.org/downloads.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font><font style="vertical-align: inherit;">下载最新版本的Keycloak </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此示例基于Keycloak 1.9.0.Final</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将下载的Keycloak发行版解压缩到一个文件夹中，我们将其引用为</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$KC_HOME</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行KC服务器 - 此示例基于在同一主机上运行Keycloak和jBPM。</font><font style="vertical-align: inherit;">为了避免端口冲突，您可以使用Keycloak服务器的端口偏移量：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl"><span class="hljs-variable">$KC_HOME</span>/bin/standalone.sh -Djboss.<span class="hljs-keyword">socket</span>.binding.port-offset=<span class="hljs-number">100</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过导航到</font><a href="http://localhost:8180/auth/" class="bare"><font style="vertical-align: inherit;">http：// localhost：8180 / auth /</font></a><font style="vertical-align: inherit;">创建Keycloak的管理'admin'用户</font></font><a href="http://localhost:8180/auth/" class="bare"><font style="vertical-align: inherit;"></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak管理控制台将在</font></font><a href="http://localhost:8180/auth/admin/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// localhost：8180 / auth / admin /上提供</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_create_and_set_up_the_demo_realm"><a class="anchor" href="index.html#_create_and_set_up_the_demo_realm"></a><a class="link" href="index.html#_create_and_set_up_the_demo_realm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.3。</font><font style="vertical-align: inherit;">创建并设置演示领域</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全领域用于限制对不同应用程序资源的访问。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦Keycloak服务器运行，下一步就是创建一个领域。</font><font style="vertical-align: inherit;">该领域将为jBPM应用程序提供不同的用户，角色，会话等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak提供了几个领域创建和管理的</font></font><a href="https://github.com/keycloak/keycloak/tree/master/examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从</font><a href="https://github.com/keycloak/keycloak/tree/master/examples"><font style="vertical-align: inherit;">官方示例</font></a><font style="vertical-align: inherit;">到包含更多示例的不同文章。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请按照以下步骤创建</font><font style="vertical-align: inherit;">本文档后面使用</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到Keycloak </font></font><a href="http://localhost:8180/auth/admin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理控制台</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后单击</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add realm</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font><font style="vertical-align: inherit;">给它起名称</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demo</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到Clients部分（从主管理控制台菜单）并为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demo</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域</font><font style="vertical-align: inherit;">创建一个新客户端</font><font style="vertical-align: inherit;">：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户ID：   </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端协议：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openid-connect</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问类型：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机密</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根URL：</font></font><em><a href="http://localhost:8080/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// localhost：8080</font></font></a></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本网址：   </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kie-wb-xyzFinal</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重定向URI：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kie-wb-xyzFinal / *</font></font></em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端设置屏幕：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/kie_client_settings.png" alt="kie客户端设置">
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如您在上面的设置中所看到的，它被认为</font><font style="vertical-align: inherit;">是应用程序上下文路径</font><font style="vertical-align: inherit;">的值</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-wb-xyzFinal</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您的jBPM应用程序将部署在不同的上下文路径，主机或端口上，请在此处使用您的具体设置。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">能够使用</font><font style="vertical-align: inherit;">jBPM工作台中</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域的</font><font style="vertical-align: inherit;">最后一步</font><font style="vertical-align: inherit;">是创建应用程序的用户和角色：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到角色部分并创建角色</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kiemgmt</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rest-all</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到“用户”部分，然后创建</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户。</font><font style="vertical-align: inherit;">在凭证选项卡中</font><font style="vertical-align: inherit;">使用值</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">password</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置密码</font><font style="vertical-align: inherit;">，取消设置临时开关。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“用户”部分中，导航到“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色映射”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡，并将</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kiemgmt</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rest-all</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色分配给</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/admin_user_roles.png" alt="管理员用户角色">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，Keycloak服务器正在主机上运行，​​并使用最小配置集进行设置。</font><font style="vertical-align: inherit;">让我们转到jBPM工作台设置。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_install_and_set_up_jbpm_workbench"><a class="anchor" href="index.html#_install_and_set_up_jbpm_workbench"></a><a class="link" href="index.html#_install_and_set_up_jbpm_workbench"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.4。</font><font style="vertical-align: inherit;">安装并设置jBPM Workbench</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本教程中，我们使用Wildfly作为jBPM工作台的应用程序服务器，因为jBPM安装程序默认使用它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在运行jBPM安装程序之后，假设</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ JBPM_HOME</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为部署了应用程序的Wildfly服务器的根路径。</font></font></p>
</div>
<div class="sect4">
<h5 id="_install_the_kc_adapter"><a class="anchor" href="index.html#_install_the_kc_adapter"></a><a class="link" href="index.html#_install_the_kc_adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.4.1。</font><font style="vertical-align: inherit;">安装KC适配器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使用来自jBPM应用程序的Keycloak的身份验证和授权模块，</font><font style="vertical-align: inherit;">必须在</font><em><font style="vertical-align: inherit;">$ JBPM_HOME</font></em><font style="vertical-align: inherit;">的服务器上安装</font></font><a href="http://www.keycloak.org/docs/latest/securing_apps/#jboss-eap-wildfly-adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak JBoss EAP / Wildfly适配器</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Keycloak为开箱即用的不同容器提供多个适配器，如果您使用其他容器或需要使用其他适配器，请查看</font><font style="vertical-align: inherit;">Keycloak文档</font><font style="vertical-align: inherit;">中的“ </font><a href="http://www.keycloak.org/docs/latest/securing_apps/index.html"><font style="vertical-align: inherit;">保护应用程序”部分</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下是为Wildfly 11/10/9安装和设置适配器的步骤：</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><a href="http://www.keycloak.org/docs/latest/securing_apps/index.html"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font><a href="https://downloads.jboss.org/keycloak/3.4.3.Final/adapters/keycloak-oidc/keycloak-wildfly-adapter-dist-3.4.3.Final.zip"><font style="vertical-align: inherit;">Keycloak Client Adapter for Wildfly 11/10/9</font></a><font style="vertical-align: inherit;">下载适配器</font></font><a href="https://downloads.jboss.org/keycloak/3.4.3.Final/adapters/keycloak-oidc/keycloak-wildfly-adapter-dist-3.4.3.Final.zip"><font style="vertical-align: inherit;"></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在shell上执行以下命令：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">cd $JBPM_HOME<font></font>
unzip keycloak-wildfly-adapter-dist-3.4.3.Final.zip // <span class="hljs-operator"><span class="hljs-keyword">Install</span> the KC <span class="hljs-keyword">client</span> adapter

cd $JBPM_HOME/<span class="hljs-keyword">bin</span>
./<span class="hljs-keyword">standalone</span>.sh -<span class="hljs-keyword">c</span> <span class="hljs-keyword">standalone</span>-<span class="hljs-keyword">full</span>.<span class="hljs-keyword">xml</span> // <span class="hljs-keyword">set</span> up the KC <span class="hljs-keyword">client</span> adapter.

// ** Once <span class="hljs-keyword">server</span> <span class="hljs-keyword">is</span> up, <span class="hljs-keyword">open</span> a <span class="hljs-keyword">new</span> command line terminal <span class="hljs-keyword">and</span> run:
cd $JBPM_HOME/<span class="hljs-keyword">bin</span>
./jboss-cli.sh -<span class="hljs-keyword">c</span> <span class="hljs-comment">--file=adapter-install.cli</span></span></code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_configure_the_kc_adapter"><a class="anchor" href="index.html#_configure_the_kc_adapter"></a><a class="link" href="index.html#_configure_the_kc_adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.4.2。</font><font style="vertical-align: inherit;">配置KC适配器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将KC适配器安装到Wildfly后，下一步是配置适配器以指定不同的设置，例如身份验证服务器的位置，要使用的域等等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak提供了两种配置适配器的方法：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每WAR配置</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Keycloak子系统</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这个例子中，让我们使用第二个选项，使用Keycloak子系统，因此我们的WAR没有这种设置。</font><font style="vertical-align: inherit;">如果要使用每种WAR方法，请查看</font></font><a href="http://www.keycloak.org/docs/latest/securing_apps/index.html#jboss-eap-wildfly-adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个WAR配置必需的内容</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑配置文件</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ JBPM_HOME / standalone / configuration / standalone-full.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并找到子系统配置部分。</font><font style="vertical-align: inherit;">添加以下内容：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">subsystem</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"urn:jboss:domain:keycloak:1.1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">secure-deployment</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kie-wb-x.y.z.Final.war"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">realm</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">realm</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">realm-public-key</span>&gt;</span>MIIBIjANBgkqhkiG9w0BAQEFAAOCA...<span class="hljs-tag">&lt;/<span class="hljs-title">realm-public-key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">auth-server-url</span>&gt;</span>http://localhost:8180/auth<span class="hljs-tag">&lt;/<span class="hljs-title">auth-server-url</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ssl-required</span>&gt;</span>external<span class="hljs-tag">&lt;/<span class="hljs-title">ssl-required</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">resource</span>&gt;</span>kie<span class="hljs-tag">&lt;/<span class="hljs-title">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">enable-basic-auth</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">enable-basic-auth</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">credential</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"secret"</span>&gt;</span>925f9190-a7c1-4cfd-8a3c-004f9c73dae6<span class="hljs-tag">&lt;/<span class="hljs-title">credential</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">principal-attribute</span>&gt;</span>preferred_username<span class="hljs-tag">&lt;/<span class="hljs-title">principal-attribute</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">secure-deployment</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">subsystem</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤2中已</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从此文档导入示例json文件</font><font style="vertical-align: inherit;">，则可以使用具体部署名称来使用与上面相同的配置。</font><font style="vertical-align: inherit;">否则请使用您的值进行这些配置：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全部署的名称</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用具体应用程序的WAR文件名</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 应用程序将使用的领域，在我们的示例中，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域创建了上一步。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域公钥</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 在此提供</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域的</font><font style="vertical-align: inherit;">公钥</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它不是强制性的，如果没有指定，它将从服务器中检索。</font><font style="vertical-align: inherit;">否则，您可以在Keycloak管理控制台→Realm设置（对于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域）→按键中</font><font style="vertical-align: inherit;">找到它</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">身份验证服务器URL</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -  Keycloak身份验证服务器的URL</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 在步骤2中创建的客户端的名称。在我们的示例中，使用值</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用基本身份验证</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 对于此示例，我们也启用基本身份验证机制，因此客户端可以使用令牌（承载）和基本方法来执行请求。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭据</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端</font><font style="vertical-align: inherit;">的密码值</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以在Keycloak管理控制台→客户端→kie→凭据选项卡→复制</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密钥</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的值中找到它</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于此示例，您必须注意使用具体值来</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取安全部署</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">realm-public-key</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭证</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码。</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保Widfly / EAP配置文件的配置文件中不存在以下标记（例如：standalone.xml）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs apache"><span class="hljs-tag">&lt;single-sign-on/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些服务器版本中默认启用它。</font><font style="vertical-align: inherit;">如果存在，则必须删除/禁用它才能允许Keycloak正确处理客户端。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_run_the_environment"><a class="anchor" href="index.html#_run_the_environment"></a><a class="link" href="index.html#_run_the_environment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.4.3。</font><font style="vertical-align: inherit;">运行环境</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，Keycloak服务器已在主机上启动并运行，并且已为jBPM应用程序服务器安装并配置了KC适配器。</font><font style="vertical-align: inherit;">您可以使用以下命令运行该应用</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash"><span class="hljs-variable">$JBPM_HOME</span>/bin/standalone.sh -c standalone-full.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在服务器启动后导航到应用程序：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"> http:<span class="hljs-comment">//localhost:8080/kie-wb-x.y.z.Final</span></code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/jbpm_login_screen.png" alt="jbpm登录界面">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用您的Keycloak的管理员用户凭据登录：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin / password</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_securing_workbench_remote_services_via_keycloak"><a class="anchor" href="index.html#_securing_workbench_remote_services_via_keycloak"></a><a class="link" href="index.html#_securing_workbench_remote_services_via_keycloak"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.5。</font><font style="vertical-align: inherit;">通过Keycloak保护工作台远程服务</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM和Drools工作台都提供了不同的远程服务端点，可以由使用</font></font><a href="index.html#_drools.workbenchremoteapi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程API的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第三方客户端使用</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了通过Keycloak对这些服务进行身份验证，</font><font style="vertical-align: inherit;">必须禁用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BasicAuthSecurityFilter</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">从jBPM的WAR文件中</font><font style="vertical-align: inherit;">对</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB-INF / web.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件（应用程序部署描述符）</font><font style="vertical-align: inherit;">应用这些修改</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从部署描述符中删除以下过滤器：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>HTTP Basic Auth Filter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>org.uberfire.ext.security.server.BasicAuthSecurityFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>realmName<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>KIE Workbench Realm<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>HTTP Basic Auth Filter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/rest/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/maven2/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/ws/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将远程服务URL模式约束为：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">security-constraint</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">web-resource-collection</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">web-resource-name</span>&gt;</span>remote-services<span class="hljs-tag">&lt;/<span class="hljs-title">web-resource-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/rest/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/maven2/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/ws/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">web-resource-collection</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">auth-constraint</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">role-name</span>&gt;</span>rest-all<span class="hljs-tag">&lt;/<span class="hljs-title">role-name</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">auth-constraint</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">security-constraint</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用远程服务的用户必须是角色</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rest-all的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如前面所述的步骤，</font><font style="vertical-align: inherit;">在此示例中</font><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户已经是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rest-all</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font><font style="vertical-align: inherit;">的成员</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_securing_workbench_s_file_system_services_via_keycloak"><a class="anchor" href="index.html#_securing_workbench_s_file_system_services_via_keycloak"></a><a class="link" href="index.html#_securing_workbench_s_file_system_services_via_keycloak"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.6。</font><font style="vertical-align: inherit;">通过Keycloak保护工作台的文件系统服务</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使用其他远程服务（例如文件系统）（例如远程GIT），</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ JBPM_HOME / standalone / configuration / standalone-full.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">为应用程序的安全域
 </font><strong><font style="vertical-align: inherit;">使用</font></strong><font style="vertical-align: inherit;">特定的</font><strong><font style="vertical-align: inherit;">Keycloak登录模块</font></strong><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，工作台使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全域，因此</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ JBPM_HOME / standalone / configuration / standalone-full.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上的结果配置
 </font><font style="vertical-align: inherit;">应如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">security-domain</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"other"</span> <span class="hljs-attribute">cache-type</span>=<span class="hljs-value">"default"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">authentication</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">login-module</span> <span class="hljs-attribute">code</span>=<span class="hljs-value">"org.keycloak.adapters.jaas.DirectAccessGrantsLoginModule"</span> <span class="hljs-attribute">flag</span>=<span class="hljs-value">"required"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Parameter value can be a file system absolute path or a classpath (e.g. "classpath:/some-path/kie-git.json")--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">module-option</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"keycloak-config-file"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"$JBPM_HOME/kie-git.json"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">login-module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">authentication</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">security-domain</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><em><font style="vertical-align: inherit;">$ JBPM_HOME / standalone / configuration / standalone-full.xml</font></em><font style="vertical-align: inherit;">文件中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另一个</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全域</font><font style="vertical-align: inherit;">上的登录模块</font><font style="vertical-align: inherit;">必须由上面给出的文件替换。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于用于远程服务客户端的json配置文件，用</font><font style="vertical-align: inherit;">路径（在文件系统上）或类路径（例如</font><em><font style="vertical-align: inherit;">classpath：/some-path/kie-git.json</font></em><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">替换</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ JBPM_HOME / kie-git.json</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请继续阅读以创建此Keycloak客户端以及如何获取此json文件。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，使用JAAS进行身份验证过程的远程服务（例如文件系统的远程服务（例如GIT））由Keycloak使用上述json配置文件中指定的客户端进行保护。</font><font style="vertical-align: inherit;">所以让我们在Keycloak上创建这个客户端并生成所需的JSON文件：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航到</font></font><a href="http://localhost:8180/auth/admin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KC管理控制台，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font><font style="vertical-align: inherit;">使用</font><em><font style="vertical-align: inherit;">kie-git</font></em><font style="vertical-align: inherit;">作为名称</font><font style="vertical-align: inherit;">为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域</font><font style="vertical-align: inherit;">创建新客户端</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Direct Access Grants Enabled</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标准流启用</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对此客户端</font><font style="vertical-align: inherit;">使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机密</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问类型。</font><font style="vertical-align: inherit;">见下图作为例子：</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/kie_git_client_settings.png" alt="kie git客户端设置">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到</font><font style="vertical-align: inherit;">相同</font><em><font style="vertical-align: inherit;">kie-git</font></em><font style="vertical-align: inherit;">客户端配置屏幕中</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡，</font><font style="vertical-align: inherit;">然后使用</font><em><font style="vertical-align: inherit;">Keycloak OIDC JSON</font></em><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">导出</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后将生成的JSON文件复制到服务器文件系统上的可访问目录中，或将其添加到应用程序的类路径中。</font><font style="vertical-align: inherit;">将此路径值用作</font><em><font style="vertical-align: inherit;">org.keycloak.adapters.jaas.DirectAccessGrantsLoginModule</font></em><font style="vertical-align: inherit;">登录模块</font><font style="vertical-align: inherit;">的上述配置</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keycloak-config-file</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">。</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关Keycloak JAAS登录模块的更多信息，请参阅</font></font><a href="http://www.keycloak.org/docs/latest/securing_apps/index.html#_jaas_adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Keycloak JAAS插件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，所有通过Keycloak服务器验证的用户都可以克隆内部Git存储库：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-comment"># Command example:</span>
<span class="hljs-title">git</span> clone <span class="hljs-url">ssh://admin<span class="hljs-variable">@localhost</span>:8001/system</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_execution_server"><a class="anchor" href="index.html#_execution_server"></a><a class="link" href="index.html#_execution_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.7。</font><font style="vertical-align: inherit;">执行服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE Execution Server提供</font><font style="vertical-align: inherit;">可以为任何第三方客户端使用</font><font style="vertical-align: inherit;">的</font></font><a href="index.html#_kie.ksrestapi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本节介绍如何将KIE Execution Server与Keycloak SSO集成，以便将第三方客户端身份管理委派给SSO服务器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考虑上面的环境运行，所以考虑：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行和侦听</font><a href="http://localhost:8180/auth" class="bare"><font style="vertical-align: inherit;">http：// localhost：8180 / auth的</font></a><font style="vertical-align: inherit;"> Keycloak服务器</font></font><a href="http://localhost:8180/auth" class="bare"><font style="vertical-align: inherit;"></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">demo</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的领域，</font><font style="vertical-align: inherit;">其中一个名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的客户端</font><font style="vertical-align: inherit;">用于jBPM Workbench</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行在</font><a href="http://localhost:8080/kie-wb-x.y.z.Final" class="bare"><font style="vertical-align: inherit;">http：// localhost：8080 / kie-wb-xyzFinal的</font></a><font style="vertical-align: inherit;"> jBPM Workbench</font></font><a href="http://localhost:8080/kie-wb-x.y.z.Final" class="bare"><font style="vertical-align: inherit;"></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请按照以下步骤将执行服务器添加到此环境中：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Keycloak上为执行服务器创建客户端</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装设置和执行服务器（使用KC客户端适配器）</font></font></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_create_the_execution_server_s_client_on_keycloak"><a class="anchor" href="index.html#_create_the_execution_server_s_client_on_keycloak"></a><a class="link" href="index.html#_create_the_execution_server_s_client_on_keycloak"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.7.1。</font><font style="vertical-align: inherit;">在Keycloak上创建执行服务器的客户端</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据要部署的每个执行服务器，您必须</font><font style="vertical-align: inherit;">在Keycloak </font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">演示</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">领域中</font><font style="vertical-align: inherit;">创建一个新客户端</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到</font></font><a href="http://localhost:8180/auth/admin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KC管理控制台</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> →客户端→新客户端</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-execution-server</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根URL：</font></font><em><a href="http://localhost:8280/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// localhost：8280 /</font></font></a></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端协议：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openid-connect</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问类型：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">机密</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">如果您愿意，</font><font style="vertical-align: inherit;">可以</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公开</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但不建议用于生产环境）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效的重定向URI：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kie-server-xyzFinal / *</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本URL：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ kie-server-xyzFinal</font></font></em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此示例中，</font><font style="vertical-align: inherit;">已在先前步骤中创建</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户是用于客户端请求的用户。</font><font style="vertical-align: inherit;">因此，请确保</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">admin</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户是角色</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-server的</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员，</font><font style="vertical-align: inherit;">以便使用执行服务器的远程服务。</font><font style="vertical-align: inherit;">如果角色不存在，请创建它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：此示例认为执行服务器将配置为使用端口偏移量200运行，因此HTTP端口将在localhost：8280中可用。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_install_and_set_up_the_kc_adapter_on_the_execution_server"><a class="anchor" href="index.html#_install_and_set_up_the_kc_adapter_on_the_execution_server"></a><a class="link" href="index.html#_install_and_set_up_the_kc_adapter_on_the_execution_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.7.2。</font><font style="vertical-align: inherit;">在执行服务器上安装并设置KC适配器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-execution-server</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的客户端</font><font style="vertical-align: inherit;">已在KC服务器上准备好从执行服务器使用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们安装，设置和部署执行服务器：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装另一个Wildfly服务器以用于执行服务器和KC客户端适配器。</font><font style="vertical-align: inherit;">您可以按照上述Workbench说明进行操作，也可以按照</font></font><a href="http://www.keycloak.org/docs/latest/securing_apps/index.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全应用指南进行操作</font></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Wildfly服务器的配置路径</font><font style="vertical-align: inherit;">编辑</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">standalone-full.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件，并将KC子系统适配器配置为：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">secure-deployment</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kie-server-x.y.z.Final.war"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">realm</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">realm</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">realm-public-key</span>&gt;</span>MIGfMA0GCSqGSIb...<span class="hljs-tag">&lt;/<span class="hljs-title">realm-public-key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">auth-server-url</span>&gt;</span>http://localhost:8180/auth<span class="hljs-tag">&lt;/<span class="hljs-title">auth-server-url</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ssl-required</span>&gt;</span>external<span class="hljs-tag">&lt;/<span class="hljs-title">ssl-required</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">resource</span>&gt;</span>kie-execution-server<span class="hljs-tag">&lt;/<span class="hljs-title">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">enable-basic-auth</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">enable-basic-auth</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">credential</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"secret"</span>&gt;</span>e92ec68d-6177-4239-be05-28ef2f3460ff<span class="hljs-tag">&lt;/<span class="hljs-title">credential</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">principal-attribute</span>&gt;</span>preferred_username<span class="hljs-tag">&lt;/<span class="hljs-title">principal-attribute</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">secure-deployment</span>&gt;</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果与此示例不同，请考虑您的具体环境设置：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全部署名称→使用正在部署的执行服务器war文件的名称</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公钥→使用demo领域公钥或将其留空，如果是，服务器将提供一个</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源→这次，使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-execution-server</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端</font><font style="vertical-align: inherit;">，而不是WB配置中使用的</font><em><font style="vertical-align: inherit;">kie</font></em><font style="vertical-align: inherit;">客户端</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用基本身份验证→由您决定。</font><font style="vertical-align: inherit;">您可以为第三方服务使用者启用基本身份验证</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭据→使用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-execution-server</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端的</font><font style="vertical-align: inherit;">密钥</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以</font><font style="vertical-align: inherit;">在KC管理控制台</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">凭据”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡中</font><font style="vertical-align: inherit;">找到它</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_deploy_and_run_the_execution_server"><a class="anchor" href="index.html#_deploy_and_run_the_execution_server"></a><a class="link" href="index.html#_deploy_and_run_the_execution_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.7.3。</font><font style="vertical-align: inherit;">部署并运行执行服务器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只需使用任何可用的机制在Wildfly中部署执行服务器。</font><font style="vertical-align: inherit;">使用以下命令运行执行服务器：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml">$EXEC_SERVER_HOME/bin/standalone.sh -c standalone-full.xml -Djboss.socket.binding.port-offset=200 -Dorg.kie.server.id=<span class="hljs-tag">&lt;<span class="hljs-title">ID</span>&gt;</span> -Dorg.kie.server.user=<span class="hljs-tag">&lt;<span class="hljs-title">USER</span>&gt;</span> -Dorg.kie.server.pwd=<span class="hljs-tag">&lt;<span class="hljs-title">PWD</span>&gt;</span> -Dorg.kie.server.location=<span class="hljs-tag">&lt;<span class="hljs-title">LOCATION_URL</span>&gt;</span>  -Dorg.kie.server.controller=<span class="hljs-tag">&lt;<span class="hljs-title">CONTROLLER_URL</span>&gt;</span> -Dorg.kie.server.controller.user=<span class="hljs-tag">&lt;<span class="hljs-title">CONTROLLER_USER</span>&gt;</span> -Dorg.kie.server.controller.pwd=<span class="hljs-tag">&lt;<span class="hljs-title">CONTOLLER_PASSWORD</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-variable">$EXEC_SERVER_HOME</span>/bin/standalone.sh -c standalone-full.xml -<span class="hljs-constant">Djboss</span>.socket.binding.port-offset=<span class="hljs-number">200</span> -<span class="hljs-constant">Dorg</span>.kie.server.id=kieserver1 -<span class="hljs-constant">Dorg</span>.kie.server.user=admin -<span class="hljs-constant">Dorg</span>.kie.server.pwd=password -<span class="hljs-constant">Dorg</span>.kie.server.location=<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/localhost:8280/kie</span>-server-x.y.z.<span class="hljs-constant">Final</span>/services/rest/server -<span class="hljs-constant">Dorg</span>.kie.server.controller=<span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/localhost:8080/kie</span>-wb-x.y.z.<span class="hljs-constant">Final</span>/rest/controller -<span class="hljs-constant">Dorg</span>.kie.server.controller.user=admin -<span class="hljs-constant">Dorg</span>.kie.server.controller.pwd=password</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用执行服务器远程服务端点的用户必须</font><font style="vertical-align: inherit;">分配</font><font style="vertical-align: inherit;">角色</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-server</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，在KC管理控制台中为将使用执行服务器远程服务的用户创建并分配此角色。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动后，您可以检查服务器状态（考虑使用此请求的基本身份验证，请参阅下一步使用</font></font><a href="index.html#consumingRemoteServices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程服务</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多信息）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">curl <span class="hljs-attribute">http</span>:<span class="hljs-regexp">//</span><span class="hljs-attribute">admin</span>:password<span class="hljs-property">@localhost</span>:<span class="hljs-number">8280</span>/kie-server-x.y.z.Final<span class="hljs-regexp">/services/rest/server/</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="consumingRemoteServices"><a class="anchor" href="index.html#consumingRemoteServices"></a><a class="link" href="index.html#consumingRemoteServices"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.8。</font><font style="vertical-align: inherit;">消费远程服务</font></font></a></h4>
<div class="paragraph">
<p>In order to use the different remote services provided by the Workbench or by an Execution Server, your client must be authenticated on the KC server and have a valid token to perform the requests.</p>
</div>
<div class="paragraph">
<p>Remember that in order to use the remote services, the authenticated user must have assigned:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The role <em>rest-all</em> for using the WB remote services</p>
</li>
<li>
<p>The role <em>kie-server</em> for using the Execution Server remote services</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please ensure necessary roles are created and assigned to the users that will consume the remote services on the Keycloak admin console.</p>
</div>
<div class="paragraph">
<p>You have two options to consume the different remove service endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using basic authentication, if the application’s client supports it</p>
</li>
<li>
<p>Using Bearer (token) based authentication</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_using_basic_authentication"><a class="anchor" href="index.html#_using_basic_authentication"></a><a class="link" href="index.html#_using_basic_authentication">20.2.8.1. Using basic authentication</a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果KC客户端适配器配置启用了基本身份验证，如本指南中针对WB（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤3.2</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和执行服务器所建议的那样，您可以避免令牌授予/刷新调用，只需按以下示例调用服务即可。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WB远程存储库端点的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">curl</span> <span class="hljs-url">http://admin:password<span class="hljs-variable">@localhost</span>:8080/kie-wb-x.y.z.Final/rest/repositories</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查执行服务器状态的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">curl <span class="hljs-attribute">http</span>:<span class="hljs-regexp">//</span><span class="hljs-attribute">admin</span>:password<span class="hljs-property">@localhost</span>:<span class="hljs-number">8280</span>/kie-server-x.y.z.Final<span class="hljs-regexp">/services/rest/server/</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="usingTokenBasedAuthentication"><a class="anchor" href="index.html#usingTokenBasedAuthentication"></a><a class="link" href="index.html#usingTokenBasedAuthentication"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.8.2。</font><font style="vertical-align: inherit;">使用基于令牌的身份验</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一步是在Keycloak上创建一个新客户端，允许第三方远程服务客户端获取令牌。</font><font style="vertical-align: inherit;">可以这样做：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到KC管理控制台并</font><font style="vertical-align: inherit;">使用此配置</font><font style="vertical-align: inherit;">创建</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新客户端</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户ID：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-remote</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端协议：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openid-connect</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问类型：</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公共</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效的重定向URI：</font></font><em><a href="http://localhost/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// localhost /</font></font></a></em></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们要手动获取令牌并调用服务时，让我们稍微增加令牌的生命周期。</font><font style="vertical-align: inherit;">在生产中，访问令牌应具有相对较低的超时，理想情况下小于5分钟：</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转到KC管理控制台</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击您的领域设置</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击Tokens选项卡</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将Access Token Lifespan的值更改为15分钟。</font><font style="vertical-align: inherit;">这应该给我们足够的时间来获取令牌并在服务到期之前调用它。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦创建了远程客户端的公共客户端，您现在可以通过向KC服务器的令牌端点执行HTTP请求来获取令牌。</font><font style="vertical-align: inherit;">以下是命令行的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">RESULT=`<span class="javascript">curl --data <span class="hljs-string">"grant_type=password&amp;client_id=kie-remote&amp;username=admin&amp;passwordpassword=&lt;the_client_secret&gt;"</span> http:<span class="hljs-comment">//localhost:8180/auth/realms/demo/protocol/openid-connect/token</span></span>`</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">TOKEN=`<span class="hljs-built_in">echo</span> <span class="hljs-variable">$RESULT</span> | sed <span class="hljs-string">'s/.*access_token":"//g'</span> | sed <span class="hljs-string">'s/".*//g'</span>`</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时，如果您回显</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ TOKEN</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它将输出从KC服务器获得的令牌字符串，该字符串现在可用于授权对远程端点的进一步调用。</font><font style="vertical-align: inherit;">例如，如果要检查内部jBPM存储库：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">curl</span> -H <span class="hljs-string">"Authorization: bearer <span class="hljs-variable">$TOKEN</span>"</span> <span class="hljs-url">http://localhost:8080/kie-wb-x.y.z.Final/rest/repositories</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_keycloak_and_the_workbench_s_security_administration_area"><a class="anchor" href="index.html#_keycloak_and_the_workbench_s_security_administration_area"></a><a class="link" href="index.html#_keycloak_and_the_workbench_s_security_administration_area"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.2.9。</font><font style="vertical-align: inherit;">Keycloak和工作台的安全管理区域</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM工作台提供了一个管理区域，提供用户，组和角色管理功能（请参阅</font></font><a href="index.html#_wb.userandgroupmgmt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，应用程序的安全管理系统指向应用程序的服务器领域。</font><font style="vertical-align: inherit;">例如，在使用Wildfly的打包发行版的情况下，它指向Wildfly的ApplicationRealm（基于属性）。</font><font style="vertical-align: inherit;">这意味着管理区域中提供的领域中的实体不是应用程序正在使用的Keycloak领域中的实体。</font><font style="vertical-align: inherit;">存在以下选项以更改此默认行为：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用用户系统管理</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用内置的Keycloak安全管理提供程序而不是默认的</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要自定义现有的jBPM应用程序（WAR文件）以使用Keycloak安全管理提供程序，请按照以下步骤操作：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将工件</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keycloak-core-xyzFinal.jar添加</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WEB-INF / lib中</font></font></em></p>
</li>
<li>
<p>Add the artifact <em>keycloak-common-x.y.z.Final.jar</em> into <em>WEB-INF/lib</em></p>
</li>
<li>
<p>Remove the actual <em>jar</em> artifact for any security management provider in use from <em>WEB-INF/lib</em> (eg: remove <em>WEB-INF/lib/uberfire-security-management-wdilfly-x.y.Z.jar</em>)</p>
</li>
<li>
<p>Replace the content for <em>WEB-INF/classes/security-management.properties</em> by:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>org.uberfire.ext.security.management.api.userManagementServices=KCAdapterUserManagementService<font></font>
org.uberfire.ext.security.management.keycloak.authServer=&lt;authz_server_url&gt;<font></font>
# eg: org.uberfire.ext.security.management.keycloak.authServer=http://localhost:8180/auth</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update the <em>/META-INF/jboss-deployment-structure.xml</em> in order to include/exclude the following modules:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;deployment&gt;<font></font>
    &lt;dependencies&gt;<font></font>
        ...<font></font>
        &lt;module name="org.jboss.resteasy.resteasy-jackson-provider" services="import"/&gt;<font></font>
        ...<font></font>
    &lt;/dependencies&gt;<font></font>
    &lt;exclusions&gt;<font></font>
        ...<font></font>
        &lt;module name="org.jboss.resteasy.resteasy-jackson2-provider"/&gt;<font></font>
        ...<font></font>
    &lt;/exclusions&gt;<font></font>
&lt;/deployment&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <em>jar</em> artifacts required in the steps above can be either downloaded from <a href="https://repository.jboss.org/nexus/">JBoss Nexus</a> or either build from <a href="https://github.com/kiegroup/appformer">sources</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Once applying the above changes, the security administration area uses the access token present in the user’s session in order to authorize and manage the specific Keycloak realm data.</p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to be able to manage Keycloak realms remotely, please ensure the user has the <em>realm-management</em> client role assigned</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wb.workbenchhighavailability"><a class="anchor" href="index.html#_wb.workbenchhighavailability"></a><a class="link" href="index.html#_wb.workbenchhighavailability">21. Workbench High Availability</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_wb.vfsclustering"><a class="anchor" href="index.html#_wb.vfsclustering"></a><a class="link" href="index.html#_wb.vfsclustering">21.1. VFS clustering</a></h3>
<div class="paragraph">
<p>The <a href="index.html#_wb.vfsrepository">VFS repositories</a> (usually git repositories) stores all the assets (such
as rules, decision tables, process definitions, forms, etc). If that VFS resides on each local
server, then it must be kept in sync between all servers of a cluster.</p>
</div>
<div class="paragraph">
<p>Use <a href="http://zookeeper.apache.org/">Apache Zookeeper</a> and <a href="http://helix.incubator.apache.org/">Apache Helix</a>
to accomplish this. Zookeeper glues all the parts together. Helix is the cluster management
component that registers all cluster details (nodes, resources and the cluster itself). Uberfire
(on top of which Workbench is build) uses those 2 components to provide VFS clustering.</p>
</div>
<div class="paragraph">
<p>To create a VFS cluster:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download <a href="http://zookeeper.apache.org/">Apache Zookeeper</a> and <a href="http://helix.incubator.apache.org/">Apache Helix</a>.</p>
</li>
<li>
<p>Install both:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Unzip Zookeeper into a directory (<code>$ZOOKEEPER_HOME</code>).</p>
</li>
<li>
<p>In <code>$ZOOKEEPER_HOME</code>, copy <code>zoo_sample.conf</code> to <code>zoo.conf</code></p>
</li>
<li>
<p>Edit <code>zoo.conf</code>. Adjust the settings if needed. Usually only these 2 properties are relevant:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties" data-lang="properties"># the directory where the snapshot is stored.<font></font>
dataDir=/tmp/zookeeper<font></font>
# the port at which the clients will connect<font></font>
clientPort=2181</code></pre>
</div>
</div>
</li>
<li>
<p>Unzip Helix into a directory (<code>$HELIX_HOME</code>).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the cluster in Zookeeper:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to its <code>bin</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell" data-lang="shell">$ cd $ZOOKEEPER_HOME/bin</code></pre>
</div>
</div>
</li>
<li>
<p>Start the Zookeeper server:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell" data-lang="shell">$ sudo ./zkServer.sh start</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the server fails to start, verify that the <code>dataDir</code> (as specified in <code>zoo.conf</code>) is accessible.</p>
</div>
</li>
<li>
<p>To review Zookeeper’s activities, open <code>zookeeper.out</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby"><span class="hljs-variable">$ </span>cat <span class="hljs-variable">$ZOOKEEPER_HOME</span>/bin/zookeeper.out</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Configure the cluster in Helix:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to its <code>bin</code> directory:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">$ <span class="hljs-built_in">cd</span> <span class="hljs-variable">$HELIX_HOME</span>/bin</code></pre>
</div>
</div>
</li>
<li>
<p>Create the cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$ ./helix-admin.sh --zkSvr localhost:<span class="hljs-number">2181</span> --addCluster kie-cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>zkSvr</code> value must match the used Zookeeper server.
The cluster name (<code>kie-cluster</code>) can be changed as needed.</p>
</div>
</li>
<li>
<p>Add nodes to the cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-preprocessor"># Node <span class="hljs-number">1</span></span>
$ ./helix-admin.sh --zkSvr localhost:<span class="hljs-number">2181</span> --addNode kie-cluster nodeOne:<span class="hljs-number">12345</span>
<span class="hljs-preprocessor"># Node <span class="hljs-number">2</span></span>
$ ./helix-admin.sh --zkSvr localhost:<span class="hljs-number">2181</span> --addNode kie-cluster nodeTwo:<span class="hljs-number">12346</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常，群集中的节点数a等于群集中的应用程序服务器数。</font></font><code>nodeOne:12345</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以根据需要更改</font><font style="vertical-align: inherit;">节点名称（</font><font style="vertical-align: inherit;">，...）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>nodeOne:12345</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是节点的唯一标识符，稍后将在配置应用程序服务器时引用该标识符。</font><font style="vertical-align: inherit;">它不是主机和端口号，而是用于唯一标识逻辑节点。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向集群添加资源：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$ ./helix-admin.sh --zkSvr localhost:<span class="hljs-number">2181</span> --addResource kie-cluster vfs-repo <span class="hljs-number">1</span> LeaderStandby AUTO_REBALANCE</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>vfs-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以根据需要更改</font><font style="vertical-align: inherit;">资源名称（</font><font style="vertical-align: inherit;">）。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新平衡群集以初始化它：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$ ./helix-admin.sh --zkSvr localhost:<span class="hljs-number">2181</span> --rebalance kie-cluster vfs-repo <span class="hljs-number">2</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动Helix控制器以管理集群：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">$  ./run-helix-controller.sh --zkSvr localhost:<span class="hljs-number">2181</span> --cluster kie-cluster <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &gt; /tmp/controller.<span class="hljs-built_in">log</span> &amp;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序服务器上正确配置安全域。</font><font style="vertical-align: inherit;">例如，在WildFly和JBoss EAP上：</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑文件</font></font><code>$JBOSS_HOME/domain/configuration/domain.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为简单起见，假设我们使用默认域配置，该配置</font></font><code>full</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用定义两个服务器节点</font><font style="vertical-align: inherit;">的配置文件</font><font style="vertical-align: inherit;">作为其一部分</font></font><code>main-server-group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>full</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过复制默认情况下已定义的其他安全域，</font><font style="vertical-align: inherit;">找到该配置文件</font><font style="vertical-align: inherit;">并添加新的安全域：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">security-domain</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kie-ide"</span> <span class="hljs-attribute">cache-type</span>=<span class="hljs-value">"default"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">authentication</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">login-module</span> <span class="hljs-attribute">code</span>=<span class="hljs-value">"Remoting"</span> <span class="hljs-attribute">flag</span>=<span class="hljs-value">"optional"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-title">module-option</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password-stacking"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"useFirstPass"</span>/&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-title">login-module</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">login-module</span> <span class="hljs-attribute">code</span>=<span class="hljs-value">"RealmDirect"</span> <span class="hljs-attribute">flag</span>=<span class="hljs-value">"required"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-title">module-option</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password-stacking"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"useFirstPass"</span>/&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-title">login-module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">authentication</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">security-domain</span>&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全域名称是一个神奇的值。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序服务器上</font><font style="vertical-align: inherit;">配置</font><font style="vertical-align: inherit;">群集</font><font style="vertical-align: inherit;">的</font></font><a href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，在WildFly和JBoss EAP上：</font></font></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑文件</font></font><code>$JBOSS_HOME/domain/configuration/host.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到</font></font><code>server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属于</font><font style="vertical-align: inherit;">该元素的XML元素</font></font><code>main-server-group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并添加必要的系统属性。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如对于nodeOne：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">system-properties</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jboss.node.name"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"nodeOne"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.nio.git.dir"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/tmp/kie/nodeone"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.metadata.index.dir"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/tmp/kie/nodeone"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.id"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"kie-cluster"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.zk"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"localhost:2181"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.local.id"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"nodeOne_12345"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.vfs.lock"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"vfs-repo"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-comment">&lt;!-- If you're running both nodes on the same machine: --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.nio.git.daemon.port"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"9418"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">system-properties</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于nodeTwo：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">system-properties</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"jboss.node.name"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"nodeTwo"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.nio.git.dir"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/tmp/kie/nodetwo"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.metadata.index.dir"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/tmp/kie/nodetwo"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.id"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"kie-cluster"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.zk"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"localhost:2181"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.local.id"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"nodeTwo_12346"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.cluster.vfs.lock"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"vfs-repo"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
  <span class="hljs-comment">&lt;!-- If you're running both nodes on the same machine: --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"org.uberfire.nio.git.daemon.port"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"9419"</span> <span class="hljs-attribute">boot-time</span>=<span class="hljs-value">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">system-properties</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保群集，节点和资源名称与Helix中配置的名称相匹配。</font></font></p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_jbpm_clustering"><a class="anchor" href="index.html#_jbpm_clustering"></a><a class="link" href="index.html#_jbpm_clustering"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">21.2。</font><font style="vertical-align: inherit;">jBPM集群</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除上述信息外，jBPM群集还需要其他配置。</font><font style="vertical-align: inherit;">请参阅</font></font><a href="http://mswiderski.blogspot.com.br/2013/06/clustering-in-jbpm-v6.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此博客文章</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以正确配置数据库等。</font></font></p>
</div>
<h1 id="_kie_server" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE服务器</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE服务器是规则的独立执行服务器。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ch.kie.server"><a class="anchor" href="index.html#_ch.kie.server"></a><a class="link" href="index.html#_ch.kie.server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22. KIE执行服务器</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="anchor" href="index.html#_overview_4"></a><a class="link" href="index.html#_overview_4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.1。</font><font style="vertical-align: inherit;">概观</font></font></a></h3>
<div class="paragraph">
<p>The <em>Kie Server</em> is a modular, standalone server component that can be used to instantiate and execute rules and processes.
It exposes this functionality via REST, JMS and Java interfaces to client application.
It also provides seamless integration with the <em>Kie Workbench</em>.</p>
</div>
<div class="paragraph">
<p>At its core, the <em>Kie Server</em> is a configurable web application packaged as a WAR file.
Distributions are availables for pure web containers (like Tomcat) and for JEE 6 and JEE 7 containers.</p>
</div>
<div class="paragraph">
<p>Most capabilities on the Kie Server are configurable, and based on the concepts of extensions.
Each extension can be enabled/disabled independently, allowing the user to configure the server to its need.</p>
</div>
<div class="paragraph">
<p>The current version of the Kie Server ships with two default extensions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BRM: provides support for the execution of Business Rules using the Drools rules engine.</p>
</li>
<li>
<p>BPM: provides support for the execution of Business Processes using the Drools engine. It supports:</p>
<div class="ulist">
<ul>
<li>
<p>process execution</p>
</li>
<li>
<p>task execution</p>
</li>
<li>
<p>assynchronous job execution</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both extensions enabled by default, but can be disabled by setting the corresponding property (see configuration chapter for details).</p>
</div>
<div class="paragraph">
<p>This server was designed to have a low footprint, with minimal memory consumption, and therefore, to be easily deployable on a cloud environment.
Each instance of this server can open and instantiate multiple <em>Kie Containers</em> which allows you to execute multiple services in parallel.</p>
</div>
<div class="sect3">
<h4 id="_glossary"><a class="anchor" href="index.html#_glossary"></a><a class="link" href="index.html#_glossary">22.1.1. Glossary</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Kie Server</strong>: execution server purely focusing on providing runtime environment for both rules and processes. These capabilities are provided by <em>Kie Server Extensions</em>. More capabilities can be added by further extensions (e.g. customer could add his own extensions in case of missing functionality that will then use infrastructure of the KIE Server). A Kie Server instance is a standalone Kie Server executing on a given application server/web container. A Kie Server instantiates and provides support for multiple Kie Containers.</p>
</li>
<li>
<p><strong>Kie Server Extension</strong>: a "plugin" for the Kie Server that adds capabilities to the server. The Kie Server ships with two default kie server extensions: BRM and BPM.</p>
</li>
<li>
<p><strong>Kie Container</strong>: an in-memory instantiation of a kjar, allowing for the instantiation and usage of its assets (domain models, processes, rules, etc). A Kie Server exposes Kie Containers through a standard API over transport protocols like REST and JMS.</p>
</li>
<li>
<p><strong>Controller</strong>: a server-backed REST endpoint that will be responsible for managing KIE Server instances. Such end point must provide following capabilities:</p>
<div class="ulist">
<ul>
<li>
<p>respond to connect requests</p>
</li>
<li>
<p>sync all registered containers on the corresponding <em>Kie Server ID</em></p>
</li>
<li>
<p>respond to disconnect requests</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Kie Server state</strong>: currently known state of given Kie Server instance. This is a local storage (by default in file) that maintains the following information:</p>
<div class="ulist">
<ul>
<li>
<p>list of registered Drools controllers</p>
</li>
<li>
<p>list of known containers</p>
</li>
<li>
<p>kie server configuration</p>
<div class="paragraph">
<p>The server state is persisted upon receival of events like: <em>Kie Container</em> created, <em>Kie Container</em> is disposed, Drools controller accepts registration of <em>Kie Server</em> instance, etc.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Kie Server ID</strong>: an arbitrary assigned identifier to which configurations are assigned. At boot, each Kie Server Instance is assigned an ID, and that ID is matched to a configuration on the Drools controller. The Kie Server Instance fetches and uses that configuration to setup itself.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_kie_server"><a class="anchor" href="index.html#_installing_the_kie_server"></a><a class="link" href="index.html#_installing_the_kie_server">22.2. Installing the KIE Server</a></h3>
<div class="paragraph">
<p>The KIE Server is distributed as a web application archive (WAR) file.
The WAR file comes in three different packagings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>webc</em> - WAR for ordinary Web (Servlet) containers like Tomcat</p>
</li>
<li>
<p><em>ee6</em> - WAR for JavaEE 6 containers like JBoss EAP 6.x</p>
</li>
<li>
<p><em>ee7</em> - WAR for JavaEE 7 containers like WildFly 11.x</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To install the KIE Execution Server and verify it is running, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Deploy the WAR file into your web container.</p>
</li>
<li>
<p>Create a user with the role of <code>kie-server</code> on the container.</p>
</li>
<li>
<p>Test that you can access the execution engine by navigating to the endpoint in a browser window: <code><a href="http://server:PORT/CONTEXT/services/rest/server/" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/</a></code>.</p>
</li>
<li>
<p>When prompted for username/password, type in the username and password that you created in step 2.</p>
</li>
<li>
<p>Once authenticated, you will see an XML response in the form of engine status, similar to this:</p>
<div class="exampleblock">
<div class="title">Example 205. Sample handshaking server response</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"KIE Server info"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-server-info</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>7.12.0.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie-server-info</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_bootstrap_switches"><a class="anchor" href="index.html#_bootstrap_switches"></a><a class="link" href="index.html#_bootstrap_switches">22.2.1. Bootstrap switches</a></h4>
<div class="paragraph">
<p>The Kie Server accepts a number of bootstrap switches (system properties) to configure the behaviour of the server.
The following is a table of all the supported switches.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 43. Kie Server bootstrap switches</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Required</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.drools.server.ext.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, disables the BRM support (i.e. rules support).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.jbpm.server.ext.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, disables the BPM support (i.e. processes support)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.jbpm.ui.server.ext.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, disables the BPM UI support (i.e. processes image support)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.optaplanner.server.ext.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, disables the BRP support (i.e. planner support)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.kie.executor.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, disables the BPM job executor support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.kie.server.id</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要分配给此服务器的任意ID。</font><font style="vertical-align: inherit;">如果配置了无头Drools控制器，则这是服务器连接到无头Drools控制器以获取kie容器配置的ID。</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否。如果未提供，则自动生成ID。</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.user</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string（默认为“kieserver”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在Drools控制器中与kieserver连接的用户名，在托管模式下运行时需要</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.pwd</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string（默认为“kieserver1！”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在Drools控制器中与kieserver连接的密码，在托管模式下运行时需要</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.controller</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逗号分隔的网址列表</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器REST端点的URL列表。</font><font style="vertical-align: inherit;">例如：
                  </font></font><code><a href="http://localhost:8080/kie-wb/rest/controller" class="bare">http://localhost:8080/kie-wb/rest/controller</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Drools控制器时是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.controller.user</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string（默认为“kieserver”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于连接Drools控制器REST api的用户名</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Drools控制器时是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.controller.pwd</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string（默认为“kieserver1！”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于连接Drools控制器REST api的密码</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Drools控制器时是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.location</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie服务器实例的URL位置</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器用于在此服务器上回调的URL。</font><font style="vertical-align: inherit;">例如：
                  </font></font><code><a href="http://localhost:8230/kie-server/services/rest/server" class="bare">http://localhost:8230/kie-server/services/rest/server</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Drools控制器时是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.domain</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JAAS LoginContext域，用于在使用JMS时对用户进行身份验证</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.bypass.auth.user</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">布尔值（默认为“false”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许绕过经过身份验证的用户执行与任务相关的操作，例如查询</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.repo</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效的文件系统路径（默认为“。”）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于本地文件系统上的位置，其中将存储kie服务器状态文件</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.persistence.ds</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据源JNDI名称</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用BPM支持时为是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.persistence.tm</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hibernate属性集的事务管理器平台</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用BPM支持时为是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.server.persistence.dialect</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用Hibernate方言</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用BPM支持时为是</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.jbpm.ht.callback</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任务服务支持的回调之一（默认jaas）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.jbpm.ht.custom.callback</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果org.jbpm.ht.callback设置为'custom'，则自定义实现UserGroupCallback</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.maven.settings.custom</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有效的文件系统路径</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">maven配置的自定义settings.xml的位置</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.executor.interval</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数（默认为3）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行人的民意调查之间的时间单位数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.executor.pool.size</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数（默认为1）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">池中用于异步工作的线程数</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.executor.retry.count</font></font></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整数（默认为3）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of retries to handle errors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.kie.executor.timeunit</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit (default is "SECONDS")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit representing interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.kie.executor.disabled</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disables executor completely</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>kie.server.jms.queues.response</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string (default is "queue/KIE.SERVER.RESPONSE")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JNDI name of response queue for JMS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.kie.server.controller.connect</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">long (default is 10000)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting time in milliseconds between repeated attempts to connect kie server to
                Drools controller when kie server starts up</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>org.drools.server.filter.classes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean (default is "false")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, accept only classes which are annotated with @org.kie.api.remote.Remotable
                or @javax.xml.bind.annotation.XmlRootElement as extra JAXB classes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are running both KIE Server and KIE Workbench you must configure KIE Server to use a different Data Source to KIE Workbench using the  <strong>org.kie.server.persistence.ds</strong> property.
KIE Workbench uses a jBPM Executor Service that can conflict with  KIE Server if they share the same Data Source.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_installation_details_for_different_containers"><a class="anchor" href="index.html#_installation_details_for_different_containers"></a><a class="link" href="index.html#_installation_details_for_different_containers">22.2.2. Installation details for different containers</a></h4>
<div class="sect4">
<h5 id="_tomcat_7_x_8_x"><a class="anchor" href="index.html#_tomcat_7_x_8_x"></a><a class="link" href="index.html#_tomcat_7_x_8_x">22.2.2.1. Tomcat 7.x/8.x</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and unzip the Tomcat distribution. Let’s call the root of the distribution <code>TOMCAT_HOME</code>. This directory is named after the Tomcat version, so for example <code>apache-tomcat-7.0.55</code>.</p>
</li>
<li>
<p>Download <em>kie-server- -webc.war</em> and place it into <code>TOMCAT_HOME/webapps</code>.</p>
</li>
<li>
<p>Configure user(s) and role(s). Make sure that file <code>TOMCAT_HOME/conf/tomcat-users.xml</code> contains the following username and role definition. You can of course choose different username and password, just make sure that the user has role <code>kie-server</code>:</p>
<div class="exampleblock">
<div class="title">Example 206. Username and role definition for Tomcat</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">role</span> <span class="hljs-attribute">rolename</span>=<span class="hljs-value">"kie-server"</span>/&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">user</span> <span class="hljs-attribute">username</span>=<span class="hljs-value">"serveruser"</span> <span class="hljs-attribute">password</span>=<span class="hljs-value">"my.s3cr3t.pass"</span> <span class="hljs-attribute">roles</span>=<span class="hljs-value">"kie-server"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Start the server by running <code>TOMCAT_HOME/bin/startup.[sh|bat]</code>. You can check out the Tomcat logs in <code>TOMCAT_HOME/logs</code> to see if the application deployed successfully. Please read the table above for the bootstrap switches that can be used to properly configure the instance. For instance:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">./startup.sh -Dorg.kie.server.id=first-kie-server<font></font>
             -Dorg.kie.server.location=http:<span class="hljs-comment">//localhost:8080/kie-server/services/rest/server</span></code></pre>
</div>
</div>
</li>
<li>
<p>Verify the server is running. Go to <code><a href="http://server:PORT/CONTEXT/services/rest/server/" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/</a></code> and type the specified username and password. You should see simple XML message with basic information about the server.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在使用Tomcat或任何其他Web容器运行时，您无法利用JMS接口。</font><font style="vertical-align: inherit;">WAR的Web容器版本仅包含REST接口。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_wildfly_11_x"><a class="anchor" href="index.html#_wildfly_11_x"></a><a class="link" href="index.html#_wildfly_11_x"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.2.2.2。</font><font style="vertical-align: inherit;">WildFly 11.x</font></font></a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载并解压缩WildFly发行版。</font><font style="vertical-align: inherit;">我们称之为分布的根</font></font><code>WILDFLY_HOME</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该目录以WildFly版本命名，例如</font></font><code>wildfly-11.0.0.Final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-server- -ee7.war</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将其放入</font></font><code>WILDFLY_HOME/standalone/deployments</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置用户和角色。</font><font style="vertical-align: inherit;">执行以下命令</font></font><code> WILDFLY_HOME/bin/add-user.[sh|bat] -a -u 'kieserver' -p 'kieserver1!' -ro 'kie-server'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您当然可以选择不同的用户名和密码，只需确保用户具有角色即可</font></font><code>kie-server</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过运行启动服务器</font></font><code>WILDFLY_HOME/bin/standalone.[sh|bat] -c standalone-full.xml &lt;bootstrap_switches&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以查看标准输出或WildFly登录，</font></font><code>WILDFLY_HOME/standalone/logs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以查看应用程序是否已成功部署。</font><font style="vertical-align: inherit;">请阅读上表，了解可用于正确配置实例的引导开关。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">./standalone.sh  --server-config=standalone-full.xml<font></font>
                 -Djboss.socket.binding.port-offset=<span class="hljs-number">150</span><font></font>
                 -Dorg.kie.server.id=first-kie-server<font></font>
                 -Dorg.kie.server.location=http:<span class="hljs-comment">//localhost:8230/kie-server/services/rest/server</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证服务器是否正在运行。</font><font style="vertical-align: inherit;">转到</font></font><code><a href="http://server:PORT/CONTEXT/services/rest/server/" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并键入指定的用户名和密码。</font><font style="vertical-align: inherit;">您应该看到包含有关服务器基本信息的简单XML消息。</font></font></p>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/kie-server-info.png" alt="kie服务器信息">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie_server_setup"><a class="anchor" href="index.html#_kie_server_setup"></a><a class="link" href="index.html#_kie_server_setup"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3。</font><font style="vertical-align: inherit;">Kie Server设置</font></font></a></h3>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器设置和注册从版本6.2及之前发生了显着变化。</font><font style="vertical-align: inherit;">以下内容仅适用于版本6.3和转发版。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_managed_kie_server"><a class="anchor" href="index.html#_managed_kie_server"></a><a class="link" href="index.html#_managed_kie_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3.1。</font><font style="vertical-align: inherit;">托管Kie服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">托管实例是需要Drools控制器才能正常启动Kie Server实例的实例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器是一个负责以集中方式保持和管理Kie服务器配置的组件。</font><font style="vertical-align: inherit;">每个Drools控制器可以同时管理多个配置，并且环境中可以有多个Drools控制器。</font><font style="vertical-align: inherit;">托管KIE服务器可以配置Drools控制器列表，但一次只能连接一个。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得一提的是，即使可以有多个Drools控制器，它们也应该保持同步，以确保无论KIE Server实例与哪一个相接触，它都将提供相同的配置集。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>At startup, if a Kie Server is configured with a list of Drools controllers, it will try succesivelly to connect to each of them until a connection is successfully stablished with one of them.
If for any reason a connection can’t be stablished, the server will not start, even if there is local storage available with configuration.
This happens by design in order to ensure consistency.
For instance, if the Kie  Server was down and the configuration has changed, this restriction guarantees that it will run with up to date configuration or not at all.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to run the Kie Server in standalone mode, without connecting to
any Drools controllers, please see "Unmanaged Kie Server".</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The configuration sets, among other things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>kie containers to be deployed and started</p>
</li>
<li>
<p>configuration items - currently this is a place holder for further enhancements that will allow remotely configure KIE Execution Server components - timers, persistence, etc</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Drools controller, besides providing configuration management, is also responsible for overall management of Kie Servers.
It provides a REST api that is divided into two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Drools controller itself that is exposed to interact with KIE Execution Server instances</p>
</li>
<li>
<p>an administration API that allows to remotely manage Kie Server instances:</p>
<div class="ulist">
<ul>
<li>
<p>add/remove servers</p>
</li>
<li>
<p>add/remove containers to/from the servers</p>
</li>
<li>
<p>start/stop containers on servers</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Drools controller deals only with the Kie Server configuration or definition to put it differently.
It does not handle any runtime components of KIE Execution Server instances.
They are always considered remote to Drools controller.
The Drools controller is responsible for persisting the configuration to preserve restarts of the Drools controller itself.
It should manage the synchronization as well in case multiple Drools controllers are configured to keep all definitions up to date on all instances of the Drools controller.</p>
</div>
<div class="paragraph">
<p>By default Drools controller is shipped with Kie Workbench and provides a fully featured management interface (both REST api and UI). It uses underlying git repository as persistent store and thus when GIT repositories are clustered (using Apache Zookeeper and Apache Helix) it will cover the Drools controllers synchronization as well.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/kie-server-simple-architecture.png" alt="kie服务器简单的架构">
</div>
</div>
<div class="paragraph">
<p>The diagram above illustrates the single Drools controller (workbench) setup with multiple Kie Server instances managed by it.</p>
</div>
<div class="paragraph">
<p>The diagram bellow illustrates the clustered setup where there are multiple instances of Drools controller synchronized over Zookeeper.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/kie-server-architecture.png" alt="kie服务器架构">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上图中，我们可以看到Kie Server实例能够连接到任何Drools控制器，但它们只能连接到一个。</font><font style="vertical-align: inherit;">每个实例都会尝试连接到Drools控制器，只要它可以连接到Drools控制器。</font><font style="vertical-align: inherit;">一旦与其中一个Drools控制器建立连接，它将跳过其他控制器。</font></font></p>
</div>
<div class="sect4">
<h5 id="_working_with_managed_servers"><a class="anchor" href="index.html#_working_with_managed_servers"></a><a class="link" href="index.html#_working_with_managed_servers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3.1.1。</font><font style="vertical-align: inherit;">使用托管服务器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用托管KIE Server实例时，用户可以采用两种方法：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置优先：</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用此方法，用户将开始使用Drools控制器（UI或REST API）并创建和配置Kie服务器定义。</font><font style="vertical-align: inherit;">这基本上包括服务器定义的标识（id和名称+可选的版本以提高可读性）以及在服务器上运行的Kie Containers的配置。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先注册：</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用这种方法，首先启动Kie Server实例并在Drools控制器上自动注册。</font><font style="vertical-align: inherit;">然后，用户可以配置Kie Containers。</font><font style="vertical-align: inherit;">此选项只是跳过在第一种方法中完成的注册步骤，并在自动注册时直接使用服务器ID，名称和版本填充它。</font><font style="vertical-align: inherit;">这两种方法之间没有其他差异。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_unmanaged_kie_execution_server"><a class="anchor" href="index.html#_unmanaged_kie_execution_server"></a><a class="link" href="index.html#_unmanaged_kie_execution_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.3.2。</font><font style="vertical-align: inherit;">非托管KIE执行服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非托管Kie Server反过来只是一个独立的实例，因此必须使用Kie Server本身的REST / JMS api单独配置。</font><font style="vertical-align: inherit;">没有涉及Drools控制器。</font><font style="vertical-align: inherit;">服务器将配置自动保存到文件中，并在重新启动时用作内部服务器状态。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下操作期间更新配置：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署Kie Container</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取消部署Kie Container</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动Kie Container</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止Kie Container</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果Kie Server重新启动，它将尝试重新建立在关闭之前保持的状态。</font><font style="vertical-align: inherit;">这意味着正在运行的Kie Containers将会启动，但之前停止/处理的Kie Containers将不会启动。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在大多数用例中，Kie Server应该以托管模式执行，因为它提供了一些好处，例如Web用户界面（如果使用工作台作为Drools控制器）和一些用于群集的工具。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_kie_container"><a class="anchor" href="index.html#_creating_a_kie_container"></a><a class="link" href="index.html#_creating_a_kie_container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.4。</font><font style="vertical-align: inherit;">创建Kie容器</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册Execution Server后，即可开始</font><font style="vertical-align: inherit;">向其</font><font style="vertical-align: inherit;">添加</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Containers</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Containers</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是自包含的环境，已经过配置以保存打包和部署的规则实例的实例。</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先单击</font><font style="vertical-align: inherit;">要部署Container的Execution Server旁边</font><font style="vertical-align: inherit;">的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ +</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图标。</font><font style="vertical-align: inherit;">这将打开New Container屏幕。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您知道已</font><font style="vertical-align: inherit;">部署程序包</font><font style="vertical-align: inherit;">的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组名</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工件ID</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（GAV），则可以输入这些详细信息并单击“确定”按钮以选择该实例（并提供Container的名称）;</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您不知道这些值，可以在KIE Workbench中搜索可以部署的所有软件包。</font><font style="vertical-align: inherit;">单击“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮而不在搜索字段中输入任何值（您可以通过输入您要在其中部署的任何术语来缩小搜索范围）。</font></font></p>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里插入屏幕截图</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上图显示有三个可部署的软件包可用作Execution Server上的容器。</font><font style="vertical-align: inherit;">单击“选择”按钮选择所需的一个。</font><font style="vertical-align: inherit;">这将自动填充</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GAV</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后您可以单击“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮将此可部署用作新Container。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在顶部输入此Container的名称，然后按“确定”按钮。</font></font></p>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container名称在每个执行服务器中必须是唯一的，并且不能包含任何空格。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GAV</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行的</font><font style="vertical-align: inherit;">下方</font><font style="vertical-align: inherit;">，您将看到一个不可编辑的行，显示您的</font><font style="vertical-align: inherit;">Container </font><font style="vertical-align: inherit;">的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您</font><font style="vertical-align: inherit;">可以使用该</font><strong><font style="vertical-align: inherit;">URL</font></strong><font style="vertical-align: inherit;">执行REST命令。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_managing_containers"><a class="anchor" href="index.html#_managing_containers"></a><a class="link" href="index.html#_managing_containers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5。</font><font style="vertical-align: inherit;">管理容器</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在KIE Workbench.内启动，停止和更新Execution Server中的容器</font></font></p>
</div>
<div class="sect3">
<h4 id="_starting_a_container"><a class="anchor" href="index.html#_starting_a_container"></a><a class="link" href="index.html#_starting_a_container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.1。</font><font style="vertical-align: inherit;">启动容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册后，Container处于“已停止”模式。</font><font style="vertical-align: inherit;">首先选择它然后单击“开始”按钮即可启动它。</font><font style="vertical-align: inherit;">您还可以选择多个容器并同时启动它们。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container处于“运行”模式后，旁边会出现绿色箭头。</font><font style="vertical-align: inherit;">如果启动Container时出现任何错误，则容器和部署它们的执行服务器旁边会显示红色图标。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您应该检查Execution Server和当前Business Central的日志，以便在重新部署容器（可能还有Execution Server）之前查看错误。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_stopping_and_deleting_a_container"><a class="anchor" href="index.html#_stopping_and_deleting_a_container"></a><a class="link" href="index.html#_stopping_and_deleting_a_container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.2。</font><font style="vertical-align: inherit;">停止和删除容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与启动Container类似，选择要停止（或删除）的容器，然后单击“停止”按钮（在该容器进入“运行”模式后替换该容器的“开始”按钮）或“删除”按钮。 ⁠</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_updating_a_container"><a class="anchor" href="index.html#_updating_a_container"></a><a class="link" href="index.html#_updating_a_container"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.5.3。</font><font style="vertical-align: inherit;">更新容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在</font></font><code>KieContainers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不重新启动Execution Server的情况下</font><font style="vertical-align: inherit;">更新已部署</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这在业务规则更改的情况下非常有用，可以创建要配置的新版本的软件包。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以为同一个软件包配置和部署多个版本，每个版本都有不同的版本</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动态</font><font style="vertical-align: inherit;">更新部署</font><font style="vertical-align: inherit;">，请单击Container旁边的图标。</font><font style="vertical-align: inherit;">这将打开Container Info屏幕。</font><font style="vertical-align: inherit;">此屏幕的示例如下所示：</font></font></p>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里插入屏幕截图</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The Container Info screen is a useful tool because it not only allows you to see the endpoint for this <code>KieContainer</code>, but it also allows you to either manually or automatically refresh the provision if an update is available.
The update can be manual or automatic:</p>
</div>
<div class="paragraph">
<p><strong>Manual Update:</strong> To manually update a <code>KieContainer</code>, enter the new Version number in the Version box and click on the <strong>Update</strong> button.
You can of course, update the Group Id or the Artifact Id , if these have changed as well.
Once updated, the Execution server updates the container and shows you the resolved GAV attributes at the bottom of the screen in the <strong>Resolved Release Id</strong> section.</p>
</div>
<div class="paragraph">
<p><strong>Automatic Update:</strong> If you want a deployed Container to always have the latest version of your deployment without manually editing it, you will need to set the Version property to the value of <code>LATEST</code> and start a <code>Scanner</code>.
This will ensure that the deployed provision always contains the latest version.
The Scanner can be started just once on demand by clicking the Scan Now button or you can start it in the background with scans happening at a specified interval (in milliseconds).You can also set this value to <code>LATEST</code> when you are first creating this deployment.
The <strong>Resolved Release
                            Id</strong> in this case will show you the actual, latest version number.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie.ksrestapi"><a class="anchor" href="index.html#_kie.ksrestapi"></a><a class="link" href="index.html#_kie.ksrestapi">22.6. Kie Server REST API</a></h3>
<div class="paragraph">
<p>The Execution Server supports the following commands via the REST API.</p>
</div>
<div class="paragraph">
<p>Please note the following before using these commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The base URL for these will remain as the endpoint defined earlier (for example: <code><a href="http://server:PORT/CONTEXT/services/rest/server/" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/</a></code> )</p>
</li>
<li>
<p>All requests require basic HTTP Authentication for the role kie-server as indicated earlier.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="__get"><a class="anchor" href="index.html#__get"></a><a class="link" href="index.html#__get">22.6.1. [GET] /</a></h4>
<div class="paragraph">
<p>Returns the Execution Server information</p>
</div>
<div class="exampleblock">
<div class="title">Example 207. Example Server Response</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"KIE Server info"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-server-info</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>6.2.0.redhat-1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie-server-info</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_config"><a class="anchor" href="index.html#__post_config"></a><a class="link" href="index.html#__post_config">22.6.2. [POST] /config</a></h4>
<div class="paragraph">
<p>Using POST HTTP method, you can execute various commands on the Execution Server.
E.g: create-container, list-containers, dispose-container and call-container.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CreateContainerCommand</p>
</li>
<li>
<p>GetServerInfoCommand</p>
</li>
<li>
<p>ListContainersCommand</p>
</li>
<li>
<p>CallContainerCommand</p>
</li>
<li>
<p>DisposeContainerCommand</p>
</li>
<li>
<p>GetContainerInfoCommand</p>
</li>
<li>
<p>GetScannerInfoCommand</p>
</li>
<li>
<p>UpdateScannerCommand</p>
</li>
<li>
<p>UpdateReleaseIdCommand</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The commands itself can be found in the <code>org.kie.server.api.commands</code> package.</p>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers"><a class="anchor" href="index.html#__get_containers"></a><a class="link" href="index.html#__get_containers">22.6.3. [GET] /containers</a></h4>
<div class="paragraph">
<p>Returns a list of containers that have been created on this Execution Server.</p>
</div>
<div class="exampleblock">
<div class="title">Example 208. Example Server Response</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"List of created containers"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-containers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span> <span class="hljs-attribute">container-id</span>=<span class="hljs-value">"MyProjectContainer"</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"STARTED"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">resolved-release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">resolved-release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie-containers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The endpoint supports also filtering based on <code>ReleaseId</code> and <code>container status</code>. Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/containers?groupId=org.example</code> - returns only containers with the specified groupId</p>
</li>
<li>
<p><code>/containers?groupId=org.example&amp;artifactId=project1&amp;version=1.0.0.Final</code> - returns only containers with the specified <code>ReleaseId</code></p>
</li>
<li>
<p><code>/containers?status=started,failed</code> - returns containers which are either started or failed</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_id"><a class="anchor" href="index.html#__get_containers_id"></a><a class="link" href="index.html#__get_containers_id">22.6.4. ⁠[GET] /containers/{id}</a></h4>
<div class="paragraph">
<p>Returns the status and information about a particular container.
For example, executing <code><a href="http://server:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer</a></code> could return the following example container info.</p>
</div>
<div class="exampleblock">
<div class="title">Example 209. Example Server Response</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">⁠<span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Info for container MyProjectContainer"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span> <span class="hljs-attribute">container-id</span>=<span class="hljs-value">"MyProjectContainer"</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"STARTED"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">resolved-release-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">resolved-release-id</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__put_containers_id"><a class="anchor" href="index.html#__put_containers_id"></a><a class="link" href="index.html#__put_containers_id">22.6.5. [PUT] /containers/{id}</a></h4>
<div class="paragraph">
<p>Allows you to create a new Container in the Execution Server.
For example, to create a Container with the id of <strong>MyRESTContainer</strong> the complete endpoint will be: <code><a href="http://server:PORT/CONTEXT/services/rest/server/containers/MyRESTContainer" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyRESTContainer</a></code>.
An example of request is:⁠</p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例210.示例请求创建容器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span> <span class="hljs-attribute">container-id</span>=<span class="hljs-value">"MyRESTContainer"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果成功，服务器的响应将是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例211.创建容器时的示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Container MyRESTContainer successfully deployed with module com.redhat:Project1:1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span> <span class="hljs-attribute">container-id</span>=<span class="hljs-value">"MyProjectContainer"</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"STARTED"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">resolved-release-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">resolved-release-id</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__delete_containers_id"><a class="anchor" href="index.html#__delete_containers_id"></a><a class="link" href="index.html#__delete_containers_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.6。</font><font style="vertical-align: inherit;">[DELETE] / containers / {id}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁠Dispos由id指定的Container。</font><font style="vertical-align: inherit;">例如，</font></font><code><a href="http://server:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用DELETE HTTP方法</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">将返回以下服务器响应：⁠</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例212.示例服务器响应处理容器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Container MyProjectContainer successfully disposed."</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_instances_id"><a class="anchor" href="index.html#__post_containers_instances_id"></a><a class="link" href="index.html#__post_containers_instances_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.7。</font><font style="vertical-align: inherit;">[POST] / containers / instances / {id}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对指定的Container执行操作和命令。</font><font style="vertical-align: inherit;">您可以在POST请求的正文中向此Container发送命令。</font><font style="vertical-align: inherit;">例如，要使用id MyRESTContainer（</font></font><code><a href="http://server:PORT/CONTEXT/services/rest/server/containers/instances/MyRESTContainer" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/containers/instances/MyRESTContainer</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">触发Container的所有规则</font><font style="vertical-align: inherit;">，您将向其发送fire-all-rules命令，如下所示（在POST请求的正文中）：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例213.示例服务器请求触发所有规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">fire-all-rules</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是支持的命令列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AgendaGroupSetFocusCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClearActivationGroupCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClearAgendaCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClearAgendaGroupCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ClearRuleFlowGroupCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的DeleteCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertObjectCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ModifyCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetObjectCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">InsertElementsCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FireAllRulesCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QueryCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SetGlobalCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetGlobalCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GetObjectsCommand</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BatchExecutionCommand</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些命令可以在</font></font><code>org.drools.core.command.runtime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包中</font><font style="vertical-align: inherit;">找到</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_id_release_id"><a class="anchor" href="index.html#__get_containers_id_release_id"></a><a class="link" href="index.html#__get_containers_id_release_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.8。</font><font style="vertical-align: inherit;">[GET] / containers / {id} / release-id</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回id指定的Container的完整版本ID。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子214.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">⁠<span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"ReleaseId for container MyProjectContainer"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_id_release_id"><a class="anchor" href="index.html#__post_containers_id_release_id"></a><a class="link" href="index.html#__post_containers_id_release_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.9。</font><font style="vertical-align: inherit;">[POST] / containers / {id} / release-id</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您更新容器部署的版本ID。</font><font style="vertical-align: inherit;">将新的完整版本ID发送到服务器。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子215.示例服务器请求</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.1<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器将响应成功或错误消息，类似于下面的消息：⁠</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例216.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Release id successfully updated."</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>Project1<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>com.redhat<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_id_scanner"><a class="anchor" href="index.html#__get_containers_id_scanner"></a><a class="link" href="index.html#__get_containers_id_scanner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.10。</font><font style="vertical-align: inherit;">[GET] / containers / {id} / scanner</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回有关此Container自动更新的扫描程序的信息</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子217.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Scanner info successfully retrieved"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-scanner</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"DISPOSED"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_id_scanner"><a class="anchor" href="index.html#__post_containers_id_scanner"></a><a class="link" href="index.html#__post_containers_id_scanner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.6.11节。</font><font style="vertical-align: inherit;">[POST] / containers / {id} / scanner</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许您启动或停止控制轮询更新的Container部署的扫描程序。</font><font style="vertical-align: inherit;">要启动扫描程序，请发送类似于</font></font><code><a href="http://server:PORT/CONTEXT/services/rest/server/containers/%7Bcontainer-id%7D/scanner" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/containers/{container-id}/scanner</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下</font><font style="vertical-align: inherit;">的请求：</font><font style="vertical-align: inherit;">使用以下POST数据</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例218.示例服务器请求启动扫描程序</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie-scanner</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"STARTED"</span> <span class="hljs-attribute">poll-interval</span>=<span class="hljs-value">"2000"</span>/&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁠trour-interval属性以毫秒为单位。</font><font style="vertical-align: inherit;">服务器的响应类似于：⁠</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子219.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"Kie scanner successfully created."</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kie-scanner</span> <span class="hljs-attribute">status</span>=<span class="hljs-value">"STARTED"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要停止扫描程序，请用状态替换</font></font><code>DISPOSED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并删除poll-interval属性。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optaplanner_rest_api"><a class="anchor" href="index.html#_optaplanner_rest_api"></a><a class="link" href="index.html#_optaplanner_rest_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7。</font><font style="vertical-align: inherit;">OptaPlanner REST API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Server支持以下Planner REST API。</font><font style="vertical-align: inherit;">所有这些API也可通过JMS和Java客户端API获得。</font><font style="vertical-align: inherit;">还请注意：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些的基本URL将保留为先前定义的端点（例如</font></font><code><a href="http://server:PORT/CONTEXT/services/rest/server/" class="bare">http://SERVER:PORT/CONTEXT/services/rest/server/</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，所有请求都需要角色kie-server的基本HTTP身份验证。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要获取特定的编组格式，请</font><font style="vertical-align: inherit;">在HTTP请求中</font><font style="vertical-align: inherit;">添加HTTP标头</font></font><code>Content-Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和可选项</font></font><code>X-KIE-ContentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs http"><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/xml</span>
<span class="hljs-attribute">X-KIE-ContentType</span>: <span class="hljs-string">xstream</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>X-KIE-ContentType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持以下值：</font></font><code>xstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例中的请求和响应假定使用Planner Workbench的optacloud示例构建Kie容器，方法是使用</font><font style="vertical-align: inherit;">以下内容</font><font style="vertical-align: inherit;">调用</font></font><code>PUT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">on </font></font><code>/services/rest/server/containers/optacloud-kiecontainer-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span> <span class="hljs-attribute">container-id</span>=<span class="hljs-value">"optacloud-kiecontainer-1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>opta<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>optacloud<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_2"><a class="anchor" href="index.html#__get_containers_2"></a><a class="link" href="index.html#__get_containers_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.1。</font><font style="vertical-align: inherit;">[GET] /容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回已创建容器的列表。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例220.示例服务器响应（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">response</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"SUCCESS"</span> <span class="hljs-attribute">msg</span>=<span class="hljs-value">"List of created containers"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"kie-containers"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">kie-container</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>optacloud<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>optacloud<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">resolved-release-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>optacloud<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>optacloud<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">resolved-release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">scanner</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>DISPOSED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">scanner</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">kie-container</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">result</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">response</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__put_containers_containerid_solvers_solverid"><a class="anchor" href="index.html#__put_containers_containerid_solvers_solverid"></a><a class="link" href="index.html#__put_containers_containerid_solvers_solverid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.2。</font><font style="vertical-align: inherit;">[PUT] / containers / {containerId} / solvers / {solverId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>{solverId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容器中</font><font style="vertical-align: inherit;">的给定创建新的解算器</font></font><code>{containerId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请求的主体是一个编组的SolverInstance实体，必须指定解算器配置文件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是请求和相应响应的示例。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例221.示例服务器请求（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子222.示例服务器响应（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-id</span>&gt;</span>solver1<span class="hljs-tag">&lt;/<span class="hljs-title">solver-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>NOT_SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">score</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_containerid_solvers"><a class="anchor" href="index.html#__get_containers_containerid_solvers"></a><a class="link" href="index.html#__get_containers_containerid_solvers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.3。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回在容器中创建的解算器列表。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例223.示例服务器响应（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">org.kie.server.api.model.instance.SolverInstanceList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solvers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">solver-id</span>&gt;</span>solver2<span class="hljs-tag">&lt;/<span class="hljs-title">solver-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig2.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>NOT_SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">score</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">solver-id</span>&gt;</span>solver1<span class="hljs-tag">&lt;/<span class="hljs-title">solver-id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>NOT_SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">score</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">solvers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">org.kie.server.api.model.instance.SolverInstanceList</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_containerid_solvers_solverid"><a class="anchor" href="index.html#__get_containers_containerid_solvers_solverid"></a><a class="link" href="index.html#__get_containers_containerid_solvers_solverid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.4。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code>{solverId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容器中</font><font style="vertical-align: inherit;">求解器的当前状态</font></font><code>{containerId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子224.示例服务器响应（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-id</span>&gt;</span>solver1<span class="hljs-tag">&lt;/<span class="hljs-title">solver-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>NOT_SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">score</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_containerid_solvers_solverid_state_solving"><a class="anchor" href="index.html#__post_containers_containerid_solvers_solverid_state_solving"></a><a class="link" href="index.html#__post_containers_containerid_solvers_solverid_state_solving"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.5。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / state / solving</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果尚未执行，则在容器{containerId}中启动解算器{solverId}。</font><font style="vertical-align: inherit;">请求的正文是</font></font><code>PlanningSolution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经过优化</font><font style="vertical-align: inherit;">的编组</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是使用2台计算机和6个进程解决OptaCloud问题的示例。</font><font style="vertical-align: inherit;">求解器以异步方式运行。</font><font style="vertical-align: inherit;">向bestsolution URL发送请求以获得最佳解决方案。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子225.示例服务器请求（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.CloudSolution</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"1"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">computerList</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"2"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Computer</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"3"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>24<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>96<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>4800<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Computer</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"4"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>660<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">computerList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"5"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"6"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"7"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"8"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"9"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"10"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"11"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.CloudSolution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例226.示例服务器请求（JAXB）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">cloudSolution</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">computerList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>4800<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>24<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>96<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">computerList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">computerList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>660<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">computerList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">cloudSolution</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例227.示例服务器请求（JSON）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{<font></font>
  "<span class="hljs-attribute">optacloud.optacloud.CloudSolution</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">computerList</span>": <span class="hljs-value">[
      {
        "<span class="hljs-attribute">cpuPower</span>": <span class="hljs-value"><span class="hljs-number">24</span></span>,
        "<span class="hljs-attribute">memory</span>": <span class="hljs-value"><span class="hljs-number">96</span></span>,
        "<span class="hljs-attribute">networkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">16</span></span>,
        "<span class="hljs-attribute">cost</span>": <span class="hljs-value"><span class="hljs-number">4800</span>
      </span>},
      {
        "<span class="hljs-attribute">cpuPower</span>": <span class="hljs-value"><span class="hljs-number">6</span></span>,
        "<span class="hljs-attribute">memory</span>": <span class="hljs-value"><span class="hljs-number">4</span></span>,
        "<span class="hljs-attribute">networkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">6</span></span>,
        "<span class="hljs-attribute">cost</span>": <span class="hljs-value"><span class="hljs-number">660</span>
      </span>}
    ]</span>,
    "<span class="hljs-attribute">processList</span>": <span class="hljs-value">[
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">1</span>
      </span>},
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">3</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">6</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">1</span>
      </span>},
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">3</span>
      </span>},
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">2</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">11</span>
      </span>},
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">1</span>
      </span>},
      {
        "<span class="hljs-attribute">requiredCpuPower</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredMemory</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
        "<span class="hljs-attribute">requiredNetworkBandwidth</span>": <span class="hljs-value"><span class="hljs-number">5</span>
      </span>}
    ]
  </span>}
</span>}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_containerid_solvers_solverid_state_terminating_early"><a class="anchor" href="index.html#__post_containers_containerid_solvers_solverid_state_terminating_early"></a><a class="link" href="index.html#__post_containers_containerid_solvers_solverid_state_terminating_early"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.6。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / state / terminating-early</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果求解器正在运行，则请求解算器提前终止。</font><font style="vertical-align: inherit;">这不会删除解算器，仍然可以检索最佳解决方案。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_containerid_solvers_solverid_bestsolution"><a class="anchor" href="index.html#__get_containers_containerid_solvers_solverid_bestsolution"></a><a class="link" href="index.html#__get_containers_containerid_solvers_solverid_bestsolution"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.7。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId} / bestsolution</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回发出请求时找到的最佳解决方案。</font><font style="vertical-align: inherit;">如果解算器尚未终止（因此该</font></font><code>status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段仍然是</font></font><code>SOLVING</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），它将返回</font><font style="vertical-align: inherit;">到目前为止</font><font style="vertical-align: inherit;">找到的最佳解决方案，但以后的调用可以返回更好的解决方案。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例228.示例服务器响应（XStream）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>optacloud-kiecontainer-1<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-id</span>&gt;</span>solver1<span class="hljs-tag">&lt;/<span class="hljs-title">solver-id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">solver-config-file</span>&gt;</span>optacloud/optacloud/cloudSolverConfig.solver.xml<span class="hljs-tag">&lt;/<span class="hljs-title">solver-config-file</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>NOT_SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">score</span> <span class="hljs-attribute">scoreClass</span>=<span class="hljs-value">"org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore"</span>&gt;</span>0hard/-5460soft<span class="hljs-tag">&lt;/<span class="hljs-title">score</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">best-solution</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"optacloud.optacloud.CloudSolution"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">computerList</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>24<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>96<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>16<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>4800<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">cpuPower</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">cpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">memory</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">memory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">networkBandwidth</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">networkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">cost</span>&gt;</span>660<span class="hljs-tag">&lt;/<span class="hljs-title">cost</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Computer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">computerList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">processList</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer[2]"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>6<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredCpuPower</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredCpuPower</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredMemory</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">requiredMemory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">requiredNetworkBandwidth</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">computer</span> <span class="hljs-attribute">reference</span>=<span class="hljs-value">"../../../computerList/optacloud.optacloud.Computer[2]"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">optacloud.optacloud.Process</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">processList</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">score</span>&gt;</span>0hard/-5460soft<span class="hljs-tag">&lt;/<span class="hljs-title">score</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">best-solution</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__post_containers_containerid_solvers_solverid_problemfactchanges"><a class="anchor" href="index.html#__post_containers_containerid_solvers_solverid_problemfactchanges"></a><a class="link" href="index.html#__post_containers_containerid_solvers_solverid_problemfactchanges"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.8。</font><font style="vertical-align: inherit;">[POST] / containers / {containerId} / solvers / {solverId} / problemfactchanges</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时规划功能。</font><font style="vertical-align: inherit;">提交一个或多个ProblemFactChanges以更新解算器当前优化的数据集。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__get_containers_containerid_solvers_solverid_problemfactchanges_processed"><a class="anchor" href="index.html#__get_containers_containerid_solvers_solverid_problemfactchanges_processed"></a><a class="link" href="index.html#__get_containers_containerid_solvers_solverid_problemfactchanges_processed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.7.9。</font><font style="vertical-align: inherit;">[GET] / containers / {containerId} / solvers / {solverId} / problemfactchanges / processed</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时规划功能。</font><font style="vertical-align: inherit;">如果求解程序处理了已提交的所有ProblemFactChanges，则返回true。</font><font style="vertical-align: inherit;">否则返回false。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__delete_containers_containerid_solvers_solverid"><a class="anchor" href="index.html#__delete_containers_containerid_solvers_solverid"></a><a class="link" href="index.html#__delete_containers_containerid_solvers_solverid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10年7月22日。</font><font style="vertical-align: inherit;">[DELETE] / containers / {containerId} / solvers / {solverId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⁠将求解器</font></font><code>{solverId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放在容器中</font></font><code>{containerId}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果尚未终止，则首先终止它。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools_controller_rest_api"><a class="anchor" href="index.html#_drools_controller_rest_api"></a><a class="link" href="index.html#_drools_controller_rest_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8。</font><font style="vertical-align: inherit;">Drools控制器REST API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您具有托管Kie Server设置时，您需要通过Drools控制器管理Kie Servers和Containers。</font><font style="vertical-align: inherit;">通常，它由Workbench UI完成，但您也可以使用Drools控制器REST API。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器基本URL由kie-wb war部署提供，它与org.kie.server.controller属性相同。</font><font style="vertical-align: inherit;">（例如：</font></font><code><a href="http://localhost:8080/kie-wb/rest/controller" class="bare">http://localhost:8080/kie-wb/rest/controller</a></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如前所述，所有请求都需要角色kie-server的基本HTTP身份验证。</font></font></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="__get_management_servers"><a class="anchor" href="index.html#__get_management_servers"></a><a class="link" href="index.html#__get_management_servers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.1。</font><font style="vertical-align: inherit;">[GET] /管理/服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回Kie Server模板列表</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例229.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">server-template-list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-template</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-name</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">container-specs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">container-name</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-template-key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">server-template-key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>HR<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>org.jbpm<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ruleConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">scanner-status</span>&gt;</span>STOPPED<span class="hljs-tag">&lt;/<span class="hljs-title">scanner-status</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"processConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">strategy</span>&gt;</span>Singleton<span class="hljs-tag">&lt;/<span class="hljs-title">strategy</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">kie-base-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-base-name</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">kie-session-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-session-name</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-title">merge-mode</span>&gt;</span>Merge Collections<span class="hljs-tag">&lt;/<span class="hljs-title">merge-mode</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">configs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">container-specs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-instances</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-instance-id</span>&gt;</span>demo@localhost:8230<span class="hljs-tag">&lt;/<span class="hljs-title">server-instance-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-name</span>&gt;</span>demo@localhost:8230<span class="hljs-tag">&lt;/<span class="hljs-title">server-name</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-template-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-template-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-url</span>&gt;</span>http://localhost:8230/kie-server/services/rest/server<span class="hljs-tag">&lt;/<span class="hljs-title">server-url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">server-instances</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PLANNING<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">server-template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">server-template-list</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__get_management_server_id"><a class="anchor" href="index.html#__get_management_server_id"></a><a class="link" href="index.html#__get_management_server_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.2。</font><font style="vertical-align: inherit;">[GET] / management / server / {id}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回Kie服务器模板</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例230.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">server-template-details</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>product-demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-name</span>&gt;</span>product-demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-specs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">container-name</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-template-key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">server-template-key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>HR<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>org.jbpm<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ruleConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">scanner-status</span>&gt;</span>STOPPED<span class="hljs-tag">&lt;/<span class="hljs-title">scanner-status</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"processConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">strategy</span>&gt;</span>Singleton<span class="hljs-tag">&lt;/<span class="hljs-title">strategy</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">kie-base-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-base-name</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">kie-session-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-session-name</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">merge-mode</span>&gt;</span>Merge Collections<span class="hljs-tag">&lt;/<span class="hljs-title">merge-mode</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">configs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">container-specs</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-instances</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-instance-id</span>&gt;</span>demo@localhost:8230<span class="hljs-tag">&lt;/<span class="hljs-title">server-instance-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-name</span>&gt;</span>demo@localhost:8230<span class="hljs-tag">&lt;/<span class="hljs-title">server-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-template-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-template-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-url</span>&gt;</span>http://localhost:8230/kie-server/services/rest/server<span class="hljs-tag">&lt;/<span class="hljs-title">server-url</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">server-instances</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PLANNING<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">server-template-details</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__put_management_server_id"><a class="anchor" href="index.html#__put_management_server_id"></a><a class="link" href="index.html#__put_management_server_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.3。</font><font style="vertical-align: inherit;">[PUT] / management / server / {id}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建具有指定标识的新Kie Server模板</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例231.示例请求创建新的Kie Server模板</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">server-template-details</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>test-demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-name</span>&gt;</span>test-demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">capabilities</span>&gt;</span>PLANNING<span class="hljs-tag">&lt;/<span class="hljs-title">capabilities</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">server-template-details</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__delete_management_server_id"><a class="anchor" href="index.html#__delete_management_server_id"></a><a class="link" href="index.html#__delete_management_server_id"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.4。</font><font style="vertical-align: inherit;">[DELETE] / management / server / {id}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除具有指定标识的Kie Server模板</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__get_management_server_id_containers"><a class="anchor" href="index.html#__get_management_server_id_containers"></a><a class="link" href="index.html#__get_management_server_id_containers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.5。</font><font style="vertical-align: inherit;">[GET] / management / server / {id} / containers</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回给定服务器上的所有容器</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例232.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">container-spec-list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-spec</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">container-name</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-name</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-template-key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">server-template-key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>HR<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>org.jbpm<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ruleConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">scanner-status</span>&gt;</span>STOPPED<span class="hljs-tag">&lt;/<span class="hljs-title">scanner-status</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"processConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">strategy</span>&gt;</span>Singleton<span class="hljs-tag">&lt;/<span class="hljs-title">strategy</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">kie-base-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-base-name</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">kie-session-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-session-name</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">merge-mode</span>&gt;</span>Merge Collections<span class="hljs-tag">&lt;/<span class="hljs-title">merge-mode</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">configs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">container-spec</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">container-spec-list</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__get_management_server_id_containers_containerid"><a class="anchor" href="index.html#__get_management_server_id_containers_containerid"></a><a class="link" href="index.html#__get_management_server_id_containers_containerid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.6。</font><font style="vertical-align: inherit;">[GET] / management / server / {id} / containers / {containerId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回Container信息，包括其发布ID和配置</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例233.示例服务器响应</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">container-spec-details</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-name</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-template-key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">server-template-key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>HR<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>org.jbpm<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"processConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">strategy</span>&gt;</span>Singleton<span class="hljs-tag">&lt;/<span class="hljs-title">strategy</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">kie-base-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-base-name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">kie-session-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-session-name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">merge-mode</span>&gt;</span>Merge Collections<span class="hljs-tag">&lt;/<span class="hljs-title">merge-mode</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ruleConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">scanner-status</span>&gt;</span>STOPPED<span class="hljs-tag">&lt;/<span class="hljs-title">scanner-status</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">configs</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">container-spec-details</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__put_management_server_id_containers_containerid"><a class="anchor" href="index.html#__put_management_server_id_containers_containerid"></a><a class="link" href="index.html#__put_management_server_id_containers_containerid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.7。</font><font style="vertical-align: inherit;">[PUT] / management / server / {id} / containers / {containerId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用指定的containerId和给定的版本ID以及可选的配置创建一个新的Container</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例234.示例服务器请求</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">container-spec-details</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-id</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">container-name</span>&gt;</span>hr<span class="hljs-tag">&lt;/<span class="hljs-title">container-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">server-template-key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">server-id</span>&gt;</span>demo<span class="hljs-tag">&lt;/<span class="hljs-title">server-id</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">server-template-key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">release-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">artifact-id</span>&gt;</span>HR<span class="hljs-tag">&lt;/<span class="hljs-title">artifact-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">group-id</span>&gt;</span>org.jbpm<span class="hljs-tag">&lt;/<span class="hljs-title">group-id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">release-id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">configs</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>PROCESS<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"processConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">strategy</span>&gt;</span>Singleton<span class="hljs-tag">&lt;/<span class="hljs-title">strategy</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">kie-base-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-base-name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">kie-session-name</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">kie-session-name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">merge-mode</span>&gt;</span>Merge Collections<span class="hljs-tag">&lt;/<span class="hljs-title">merge-mode</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">entry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">key</span>&gt;</span>RULE<span class="hljs-tag">&lt;/<span class="hljs-title">key</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">value</span> <span class="hljs-attribute">xsi:type</span>=<span class="hljs-value">"ruleConfig"</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">scanner-status</span>&gt;</span>STOPPED<span class="hljs-tag">&lt;/<span class="hljs-title">scanner-status</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">entry</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">configs</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>STARTED<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">container-spec-details</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__delete_management_server_id_containers_containerid"><a class="anchor" href="index.html#__delete_management_server_id_containers_containerid"></a><a class="link" href="index.html#__delete_management_server_id_containers_containerid"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.8。</font><font style="vertical-align: inherit;">[DELETE] / management / server / {id} / containers / {containerId}</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用指定的containerId释放Container</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__post_management_server_id_containers_containerid_status_started"><a class="anchor" href="index.html#__post_management_server_id_containers_containerid_status_started"></a><a class="link" href="index.html#__post_management_server_id_containers_containerid_status_started"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.8.9。</font><font style="vertical-align: inherit;">[POST] / management / server / {id} / containers / {containerId} / status / started</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动容器。</font><font style="vertical-align: inherit;">不需要请求机构</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="__post_management_server_id_containers_containerid_status_stopped"><a class="anchor" href="index.html#__post_management_server_id_containers_containerid_status_stopped"></a><a class="link" href="index.html#__post_management_server_id_containers_containerid_status_stopped"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10年8月22日。</font><font style="vertical-align: inherit;">[POST] / management / server / {id} / containers / {containerId} / status / stopped</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止容器。</font><font style="vertical-align: inherit;">不需要请求机构</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie_server_java_client_api"><a class="anchor" href="index.html#_kie_server_java_client_api"></a><a class="link" href="index.html#_kie_server_java_client_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9。</font><font style="vertical-align: inherit;">Kie Server Java客户端API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Server有一个很棒的Java API来包装要发送到服务器的REST或JMS请求。</font><font style="vertical-align: inherit;">在本节中，我们将探讨此API的一些可能性。</font></font></p>
</div>
<div class="sect3">
<h4 id="_maven_configuration_2"><a class="anchor" href="index.html#_maven_configuration_2"></a><a class="link" href="index.html#_maven_configuration_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.1。</font><font style="vertical-align: inherit;">Maven配置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您是Maven用户，请确保项目的</font><em><font style="vertical-align: inherit;">pom.xml中</font></em><font style="vertical-align: inherit;">至少具有以下依赖项</font></font><em><font style="vertical-align: inherit;"></font></em></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven依赖</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie.server<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-server-client<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${kie.api.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Logging --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Drools Commands --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-title">scope</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${kie.api.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.api.version</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于您使用的Kie Server版本。</font><font style="vertical-align: inherit;">例如，对于jBPM 6.3，您可以使用6.3.1-SNAPSHOT。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_client_configuration"><a class="anchor" href="index.html#_client_configuration"></a><a class="link" href="index.html#_client_configuration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.2。</font><font style="vertical-align: inherit;">客户端配置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端需要一个配置对象，您可以在其中设置大多数服务器通信方面，例如协议（REST和JMS）凭据和有效负载格式（XStream，JAXB和JSON目前是受支持的格式）。</font><font style="vertical-align: inherit;">首先要做的是创建配置，然后创建</font></font><strong><code><strong>KieServicesClient</strong></code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，即启动服务器通信的入口点。</font><font style="vertical-align: inherit;">请参阅下面的源代码，我们使用REST客户端配置：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端配置示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> org.kie.server.api.marshalling.MarshallingFormat;
<span class="hljs-keyword">import</span> org.kie.server.client.KieServicesClient;
<span class="hljs-keyword">import</span> org.kie.server.client.KieServicesConfiguration;
<span class="hljs-keyword">import</span> org.kie.server.client.KieServicesFactory;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DecisionServerTest</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"http://localhost:8080/kie-server/services/rest/server"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> MarshallingFormat FORMAT = MarshallingFormat.JSON;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> KieServicesConfiguration conf;
    <span class="hljs-keyword">private</span> KieServicesClient kieServicesClient;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{<font></font>
        conf = KieServicesFactory.newRestConfiguration(URL, USER, PASSWORD);<font></font>
        conf.setMarshallingFormat(FORMAT);<font></font>
        kieServicesClient = KieServicesFactory.newKieServicesClient(conf);<font></font>
    }</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_jms_interaction_patterns"><a class="anchor" href="index.html#_jms_interaction_patterns"></a><a class="link" href="index.html#_jms_interaction_patterns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.2.1。</font><font style="vertical-align: inherit;">JMS交互模式</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在6.5版本中，KIE Server Client JMS集成得到了增强，可以使用各种交互模式。</font><font style="vertical-align: inherit;">目前可用的是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请求回复（这是默认设置） - 使JMS集成同步 - 它阻止客户端直到它获得响应 - 不适合JMS事务用例</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火与遗忘 - 使集成只有一种方式，适用于与kie服务器集成的通知 - 非常适合事务性JMS传递 - 只有在调用ckie服务器客户端的事务成功提交时才向kie服务器传递消息</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与回调异步 - 允许在向kie服务器发送消息并异步接收响应后不阻塞客户端 - 可以与事务JMS交付集成</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应处理程序可以全局设置 - 创建KieServicesConfiguration时，也可以在运行时更改各个客户端实例（如RuleServiceClient，ProcessServicesClient等）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然'fire and forget'和'request reply'模式不需要任何其他配置'async with callback'。</font><font style="vertical-align: inherit;">而主要的是回调。</font><font style="vertical-align: inherit;">KIE Server CLient提供了一个开箱即用的功能 - </font></font><code>BlockingResponseCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它提供了内部阻塞队列支持的基本支持。</font><font style="vertical-align: inherit;">队列的大小是可配置的，因此允许接收多个消息，尽管这个回调的意图是它一次只接收一个消息 - 所以它就像一个消息（请求），然后每个客户端交互一个响应。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
切换响应处理程序时，Kie Server Client不是线程安全的，这意味着处理程序的更改将影响使用相同客户端实例的所有线程。</font><font style="vertical-align: inherit;">因此，在处理程序的动态更改的情况下，建议使用单独的客户端实例。</font><font style="vertical-align: inherit;">一种好的方法是维护一组使用专用响应处理程序的客户端，然后使用这些客户端依赖于需要哪个处理程序。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端1将使用fire并忘记，而客户端2将使用请求回复。</font><font style="vertical-align: inherit;">因此，客户端1可用于启动进程，客户端2可用于查询用户任务。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户可以通过实现</font></font><code>org.kie.server.client.jms.ResponseCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">来提供自己的回调</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组态</font></font></strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Global JMS configuration<font></font>
----<font></font>
InitialContext context = ...;<font></font>
Queue requestQueue = (Queue) context.lookup(<span class="hljs-string">"jms/queue/KIE.SERVER.REQUEST"</span>));<font></font>
Queue responseQueue = (Queue) context.lookup(<span class="hljs-string">"jms/queue/KIE.SERVER.RESPONSE"</span>);<font></font>
ConnectionFactory connectionFactory = (ConnectionFactory) context.lookup(<span class="hljs-string">"jms/RemoteConnectionFactory"</span>);<font></font>
KieServicesConfiguration jmsConfiguration = KieServicesFactory.newJMSConfiguration( connectionFactory, requestQueue, responseQueue, <span class="hljs-string">"user"</span>, <span class="hljs-string">"password"</span>);
<span class="hljs-comment">// here you set response handler globally</span>
jmsConfiguration.setResponseHandler(<span class="hljs-keyword">new</span> FireAndForgetResponseHandler());<font></font>
----</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，可能实际上更常见的是在使用之前在各个客户端上设置处理程序</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Per client configuration<font></font>
----<font></font>
ProcessServiceClient processClient = client.getServicesClient(ProcessServicesClient.class);<font></font>
<span class="hljs-comment">// change response handler for processClient others are not affected</span>
processClient.setResponseHandler(<span class="hljs-keyword">new</span> FireAndForgetResponseHandler());<font></font>
---</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_server_response"><a class="anchor" href="index.html#_server_response"></a><a class="link" href="index.html#_server_response"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.3。</font><font style="vertical-align: inherit;">服务器响应</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有服务响应都由对象表示，</font></font><code>org.kie.server.api.model.ServiceResponse&lt;T&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中T是有效载荷的类型。</font><font style="vertical-align: inherit;">它具有以下属性：</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">String msg：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应消息;</font></font></p>
</div>
<div class="paragraph">
<p><code>org.kie.server.api.model.ServiceResponse.ResponseType</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">type：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应类型枚举，可以是SUCCESS或FAILURE;</font></font></p>
</div>
<div class="paragraph">
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T result：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">响应的实际有效负载，即请求的对象。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，如果您使用的是REST或JMS，则返回的是同一个对象，换句话说，它与协议无关。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_server_capabilities"><a class="anchor" href="index.html#_server_capabilities"></a><a class="link" href="index.html#_server_capabilities"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.4。</font><font style="vertical-align: inherit;">服务器功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Decision Server最初仅支持规则执行，从6.3版开始，它开始支持业务流程执行。</font><font style="vertical-align: inherit;">要了解服务器支持的确切内容，可以通过</font><font style="vertical-align: inherit;">使用客户端</font><font style="vertical-align: inherit;">访问对象</font></font><code>org.kie.server.api.model.KieServerInfo</code><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> *来</font><font style="vertical-align: inherit;">列出服务器功能</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出服务器功能</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listCapabilities</span><span class="hljs-params">()</span> </span>{<font></font>
    KieServerInfo serverInfo = kieServicesClient.getServerInfo().getResult();<font></font>
    System.out.print(<span class="hljs-string">"Server capabilities:"</span>);
    <span class="hljs-keyword">for</span>(String capability: serverInfo.getCapabilities()) {<font></font>
        System.out.print(<span class="hljs-string">" "</span> + capability);<font></font>
    }<font></font>
    System.out.println();<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果服务器支持规则和进程，则在运行上述代码时应打印以下内容：</font></font></p>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器功能：BRM KieServer BPM</font></font></em></p>
</div>
</div>
<div class="sect3">
<h4 id="_kie_containers"><a class="anchor" href="index.html#_kie_containers"></a><a class="link" href="index.html#_kie_containers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.5。</font><font style="vertical-align: inherit;">Kie Containers</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要发布kjar以接收请求，则必须将其发布到容器中。</font><font style="vertical-align: inherit;">容器由客户端在客户端中表示</font></font><code>org.kie.server.api.model.KieContainerResource</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，资源列表是</font></font><code>org.kie.server.api.model.KieContainerResourceList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下是如何打印容器列表的示例：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出Kie容器</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listContainers</span><span class="hljs-params">()</span> </span>{<font></font>
    KieContainerResourceList containersList = kieServicesClient.listContainers().getResult();<font></font>
    List&lt;KieContainerResource&gt; kieContainers = containersList.getContainers();<font></font>
    System.out.println(<span class="hljs-string">"Available containers: "</span>);
    <span class="hljs-keyword">for</span> (KieContainerResource container : kieContainers) {<font></font>
        System.out.println(<span class="hljs-string">"\t"</span> + container.getContainerId() + <span class="hljs-string">" ("</span> + container.getReleaseId() + <span class="hljs-string">")"</span>);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以根据特定的ReleaseId（及其各个部分）或状态列出容器：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用自定义过滤器列出Kie容器</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listContainersWithFilter</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// the following filter will match only containers with ReleaseId "org.example:contatner:1.0.0.Final" and status FAILED</span>
    KieContainerResourceFilter filter = <span class="hljs-keyword">new</span> KieContainerResourceFilter.Builder()<font></font>
            .releaseId(<span class="hljs-string">"org.example"</span>, <span class="hljs-string">"container"</span>, <span class="hljs-string">"1.0.0.Final"</span>)<font></font>
            .status(KieContainerStatus.FAILED)<font></font>
            .build();<font></font>
    KieContainerResourceList containersList = kieServicesClient.listContainers(filter).getResult();<font></font>
    List&lt;KieContainerResource&gt; kieContainers = containersList.getContainers();<font></font>
    System.out.println(<span class="hljs-string">"Available containers: "</span>);
    <span class="hljs-keyword">for</span> (KieContainerResource container : kieContainers) {<font></font>
        System.out.println(<span class="hljs-string">"\t"</span> + container.getContainerId() + <span class="hljs-string">" ("</span> + container.getReleaseId() + <span class="hljs-string">")"</span>);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_managing_containers_2"><a class="anchor" href="index.html#_managing_containers_2"></a><a class="link" href="index.html#_managing_containers_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.6。</font><font style="vertical-align: inherit;">管理容器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用客户端来处置和创建容器。</font><font style="vertical-align: inherit;">如果您处置容器，将返回带有Void有效负载（无负载）的ServiceResponse，如果您创建它，将在响应中返回KieContainerResource对象本身。</font><font style="vertical-align: inherit;">示例代码：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处置和创建容器</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">disposeAndCreateContainer</span><span class="hljs-params">()</span> </span>{<font></font>
    System.out.println(<span class="hljs-string">"== Disposing and creating containers =="</span>);<font></font>
    List&lt;KieContainerResource&gt; kieContainers = kieServicesClient.listContainers().getResult().getContainers();<font></font>
    <span class="hljs-keyword">if</span> (kieContainers.size() == <span class="hljs-number">0</span>) {<font></font>
        System.out.println(<span class="hljs-string">"No containers available..."</span>);
        <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
    KieContainerResource container = kieContainers.get(<span class="hljs-number">0</span>);<font></font>
    String containerId = container.getContainerId();<font></font>
    ServiceResponse&lt;Void&gt; responseDispose = kieServicesClient.disposeContainer(containerId);<font></font>
    <span class="hljs-keyword">if</span> (responseDispose.getType() == ResponseType.FAILURE) {<font></font>
        System.out.println(<span class="hljs-string">"Error disposing "</span> + containerId + <span class="hljs-string">". Message: "</span>);<font></font>
        System.out.println(responseDispose.getMsg());<font></font>
        <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
    System.out.println(<span class="hljs-string">"Success Disposing container "</span> + containerId);<font></font>
    System.out.println(<span class="hljs-string">"Trying to recreate the container..."</span>);<font></font>
    ServiceResponse&lt;KieContainerResource&gt; createResponse = kieServicesClient.createContainer(containerId, container);<font></font>
    <span class="hljs-keyword">if</span>(createResponse.getType() == ResponseType.FAILURE) {<font></font>
        System.out.println(<span class="hljs-string">"Error creating "</span> + containerId + <span class="hljs-string">". Message: "</span>);<font></font>
        System.out.println(responseDispose.getMsg());<font></font>
        <span class="hljs-keyword">return</span>;<font></font>
    }<font></font>
     System.out.println(<span class="hljs-string">"Container recreated with success!"</span>);<font></font>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_available_clients_for_the_decision_server"><a class="anchor" href="index.html#_available_clients_for_the_decision_server"></a><a class="link" href="index.html#_available_clients_for_the_decision_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.7。</font><font style="vertical-align: inherit;">Decision Server的可用客户端</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieServicesClient也是其他客户端执行特定操作的入口点，例如发送BRMS命令和管理进程。</font><font style="vertical-align: inherit;">目前，您可以从KieServicesClient访问</font></font><code>org.kie.server.client</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包中</font><font style="vertical-align: inherit;">提供的以下服务</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JobServicesClient：此客户端允许您安排，取消，重新排队和获取作业请求;</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ProcessServicesClient：允许您启动，发出信号中止过程; </font><font style="vertical-align: inherit;">完成和中止其他功能的工作项目;</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QueryServicesClient：强大的查询客户端允许您查询进程，进程节点和进程变量;</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RuleServicesClient：简单但功能强大的规则客户端可用于向服务器发送命令以执行与规则相关的操作（在工作内存中插入对象，触发规则，获取全局...）;</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UserTaskServicesClient：最后，用户任务客户端允许您使用用户任务（启动，声明，取消等）执行所有操作，并通过某些字段（流程实例ID，用户等）查询任务。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关这些接口的更多信息，请检查github：</font><a href="https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client" class="bare"><font style="vertical-align: inherit;">https</font></a><font style="vertical-align: inherit;">：</font></font><a href="https://github.com/kiegroup/droolsjbpm-integration/tree/master/kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">//github.com/kiegroup/droolsjbpm-integration/tree/master/kie-server-parent/kie-server-remote/kie-server-client/src/main/java /组织/纪伊/服务器/客户端</font></font></a></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用</font></font><code>getServicesClient</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieServicesClient类中</font><font style="vertical-align: inherit;">的方法访问任何这些客户端</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：</font></font><code>RuleServicesClient rulesClient = kieServicesClient.getServicesClient(RuleServicesClient.class);</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_sending_commands_to_the_server"><a class="anchor" href="index.html#_sending_commands_to_the_server"></a><a class="link" href="index.html#_sending_commands_to_the_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.8。</font><font style="vertical-align: inherit;">将命令发送到服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要为服务器构建命令，必须使用可以使用的类创建的org.kie.api.command.KieCommands类</font></font><code>org.kie.api.KieServices.get().getCommands()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要发送的命令必须是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BatchExecutionCommand</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或单个命令（如果发送单个命令，则服务器将其包装到BatchExecutionCommand中）：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例235.向容器发送命令</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">executeCommands</span><span class="hljs-params">()</span> </span>{<font></font>
    System.out.println(<span class="hljs-string">"== Sending commands to the server =="</span>);<font></font>
    RuleServicesClient rulesClient = kieServicesClient.getServicesClient(RuleServicesClient.class);<font></font>
    KieCommands commandsFactory = KieServices.Factory.get().getCommands();<font></font>
    Command&lt;?&gt; insert = commandsFactory.newInsert(<span class="hljs-string">"Some String OBJ"</span>);<font></font>
    Command&lt;?&gt; fireAllRules = commandsFactory.newFireAllRules();<font></font>
    Command&lt;?&gt; batchCommand = commandsFactory.newBatchExecution(Arrays.asList(insert, fireAllRules));<font></font>
    ServiceResponse&lt;String&gt; executeResponse = rulesClient.executeCommands(<span class="hljs-string">"hello"</span>, batchCommand);
    <span class="hljs-keyword">if</span>(executeResponse.getType() == ResponseType.SUCCESS) {<font></font>
        System.out.println(<span class="hljs-string">"Commands executed with success! Response: "</span>);<font></font>
        System.out.println(executeResponse.getResult());<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span> {<font></font>
        System.out.println(<span class="hljs-string">"Error executing rules. Message: "</span>);<font></font>
        System.out.println(executeResponse.getMsg());<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下的结果是带有命令执行结果的String。</font><font style="vertical-align: inherit;">在我们的例子中，它将打印以下内容：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs javascript">    == Sending commands to the server ==<font></font>
    Commands executed <span class="hljs-keyword">with</span> success! Response:<font></font>
    {<font></font>
      <span class="hljs-string">"results"</span> : [ ],
      <span class="hljs-string">"facts"</span> : [ ]<font></font>
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\ *您必须添加</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.drools：drools-compiler</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖项才能使此部分正常工作</font></font></em></p>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在创建BatchExecutionCommand期间，</font><font style="vertical-align: inherit;">可以指定</font><font style="vertical-align: inherit;">可选的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，该参数确定命令的运行位置。</font><font style="vertical-align: inherit;">Lookup参数可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署描述符中定义的Kie会话名称</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Container Id</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Container Id后跟Process Instance Id（必须在容器上使用Process Instance运行时策略）</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后两个选项需要在Kie Container上激活jBPM扩展。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第三种情况下，lookup参数的用法如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Command&lt;?&gt; batchCommand = commandsFactory.newBatchExecution(Arrays.asList(insert, fireAllRules), <span class="hljs-string">"demo-container#1"</span>);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_listing_available_business_processes"><a class="anchor" href="index.html#_listing_available_business_processes"></a><a class="link" href="index.html#_listing_available_business_processes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.9.9。</font><font style="vertical-align: inherit;">列出可用的业务流程</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要列出流程定义，我们使用QueryClient。</font><font style="vertical-align: inherit;">QueryClient的方法通常使用分页，这意味着除了您正在进行的查询之外，还必须提供当前页面和每页的结果数。</font><font style="vertical-align: inherit;">在下面的代码中，来自给定容器的流程定义查询从第0页开始，列表1000结果，换句话说，1000个第一个结果。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列出业务流程定义示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">listProcesses</span><span class="hljs-params">()</span> </span>{<font></font>
    System.out.println(<span class="hljs-string">"== Listing Business Processes =="</span>);<font></font>
    QueryServicesClient queryClient = kieServicesClient.getServicesClient(QueryServicesClient.class);<font></font>
    List&lt;ProcessDefinition&gt; findProcessesByContainerId = queryClient.findProcessesByContainerId(<span class="hljs-string">"rewards"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">for</span> (ProcessDefinition def : findProcessesByContainerId) {<font></font>
        System.out.println(def.getName() + <span class="hljs-string">" - "</span> + def.getId() + <span class="hljs-string">" v"</span> + def.getVersion());<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_securing_password_using_key_store"><a class="anchor" href="index.html#_securing_password_using_key_store"></a><a class="link" href="index.html#_securing_password_using_key_store"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10。</font><font style="vertical-align: inherit;">使用密钥库保护密码</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE服务器用于某些通信（例如REST api）基本身份验证和密码。</font><font style="vertical-align: inherit;">从安全角度来看，将此类密码以明文形式存储在光盘上是不安全的。</font><font style="vertical-align: inherit;">为此，开发了一种机制来将密码存储在密钥存储区中，然后在应用程序中使用它。</font></font></p>
</div>
<div class="sect3">
<h4 id="_simple_usecase"><a class="anchor" href="index.html#_simple_usecase"></a><a class="link" href="index.html#_simple_usecase"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.1。</font><font style="vertical-align: inherit;">简单的用例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户希望通过REST客户端保护其密码以进行通信。</font><font style="vertical-align: inherit;">他创建了新的密钥库，他将密码放入密码库，他将设置带有信息的系统变量到密钥库，KIE将自动加载密钥库，并使用密码来保证通信安全。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_and_business_logic"><a class="anchor" href="index.html#_implementation_and_business_logic"></a><a class="link" href="index.html#_implementation_and_business_logic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.2。</font><font style="vertical-align: inherit;">实施和业务逻辑</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果定义了当前实现，则使用密钥库。</font><font style="vertical-align: inherit;">如果没有，功能性将使用配置参数回退到旧行为。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_system_requirements"><a class="anchor" href="index.html#_system_requirements"></a><a class="link" href="index.html#_system_requirements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.3。</font><font style="vertical-align: inherit;">系统要求</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要使用密钥库，我们需要先创建它。</font><font style="vertical-align: inherit;">由于JKS不支持symetric键，我们必须创建JCEKS密钥库。</font><font style="vertical-align: inherit;">此外，密码只能存储在Java 8及更高版本的密钥存储区中。</font><font style="vertical-align: inherit;">要生成密钥库，您可以使用标准工具KeyTool，它是JDK安装的一部分。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_initialization_of_a_key_store"><a class="anchor" href="index.html#_initialization_of_a_key_store"></a><a class="link" href="index.html#_initialization_of_a_key_store"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.4。</font><font style="vertical-align: inherit;">密钥库的初始化</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于密钥库初始化，我们建议使用keytool。</font><font style="vertical-align: inherit;">语法如下：</font></font><br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -importpassword -keystore _keystore_url_ -keypass _<span class="hljs-built_in">alias</span>_key_password_ -alias _password_<span class="hljs-built_in">alias</span>_ -storepass _keystore_password_ -storetype JCEKS</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">别名</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 要处理的条目的别名</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keypass</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 密码</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keystore</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 密钥库名称</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storepass</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 密钥库密码</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">storetype</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 密钥库类型</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行此命令后，将要求用户输入他要存储的密码。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_system_parameters_for_loading_key_store"><a class="anchor" href="index.html#_system_parameters_for_loading_key_store"></a><a class="link" href="index.html#_system_parameters_for_loading_key_store"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.5。</font><font style="vertical-align: inherit;">用于加载密钥库的系统参数</font></font></a></h4>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.keyStoreURL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 应该使用的密钥库的URL</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.keyStorePwd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 密钥库的密码</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.key.server.alias</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 存储密码的REST服务密钥的别名</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.key.server.pwd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 存储密码的REST服务别名的密码</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.key.ctrl.alias</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 存储密码的默认REST Drools控制器的密钥的别名</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.keystore.key.ctrl.pwd</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 具有存储密码的默认REST Drools控制器的别名密码</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_example_3"><a class="anchor" href="index.html#_example_3"></a><a class="link" href="index.html#_example_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.10.6。</font><font style="vertical-align: inherit;">例</font></font></a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序服务器中创建用户和密码（它必须具有kie-server角色）</font></font></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ {EAP_HOME} /add-user.sh -a -e -u kieserver -p“kiePassword1！” </font><font style="vertical-align: inherit;">-g kie-server</font></font></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用密钥工具创建带密码的密钥库</font></font><br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -importpassword -keystore /home/kie/keystores/droolsServer.jceks -keypass keypwd -alias droolsKey -storepass serverpwd -storetype JCEKS<font></font>
<font></font>
Enter the password to be stored:<font></font>
Re-enter password:<font></font>
<font></font>
$ keytool -importpassword -keystore /home/kie/keystores/droolsServer.jceks -keypass keypwd -alias restKey -storepass serverpwd -storetype JCEKS<font></font>
<font></font>
Enter the password to be stored:<font></font>
Re-enter password:</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在应用程序服务器上设置以下系统属性，使KIE服务器或Drools控制器从密钥库读取密码</font></font></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    &lt;系统属性&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.keyStoreURL”value =“droolsServer.jceks”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.keyStorePwd”value =“serverpwd”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.key.server.alias”value =“restKey”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.key.server.pwd”value =“keypwd”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.key.ctrl.alias”value =“droolsKey”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        &lt;property name =“kie.keystore.key.ctrl.pwd”value =“keypwd”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;/系统的属性&gt;</font></font></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动服务器以验证配置</font></font></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools_controller_client_api"><a class="anchor" href="index.html#_drools_controller_client_api"></a><a class="link" href="index.html#_drools_controller_client_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11。</font><font style="vertical-align: inherit;">Drools控制器客户端API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器提供了一个Java API来包装</font><font style="vertical-align: inherit;">要发送到服务器的</font></font><a href="index.html#ControllerRestAPI-section"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或Web Socket请求。</font><font style="vertical-align: inherit;">在本节中，我们将探讨此API的一些功能。</font></font></p>
</div>
<div class="sect3">
<h4 id="_maven_configuration_3"><a class="anchor" href="index.html#_maven_configuration_3"></a><a class="link" href="index.html#_maven_configuration_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11.1。</font><font style="vertical-align: inherit;">Maven配置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您是Maven用户，则必须在项目的</font><em><font style="vertical-align: inherit;">pom.xml中</font></em><font style="vertical-align: inherit;">具有以下依赖项</font></font><em><font style="vertical-align: inherit;"></font></em></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven依赖</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie.server<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-server-controller-client<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${kie.api.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-comment">&lt;!-- REST Client --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.jboss.resteasy<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>resteasy-client<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>3.0.19.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-comment">&lt;!-- Web Socket Client --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>io.undertow<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>undertow-websockets-jsr<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.4.21.Final<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-comment">&lt;!-- Logging --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie.api.version</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">取决于您使用的Drools控制器版本。</font><font style="vertical-align: inherit;">例如，对于jBPM 7.6，您可以使用7.6.0.Final。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_client_configuration_2"><a class="anchor" href="index.html#_client_configuration_2"></a><a class="link" href="index.html#_client_configuration_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11.2。</font><font style="vertical-align: inherit;">客户端配置</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先要做的是创建你的</font></font><strong><code><strong>KieServerControllerClient</strong></code></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，开始服务器通信的入口点，使用提供的</font></font><code>KieServerControllerClientFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数服务器通信方面</font><font style="vertical-align: inherit;">提供的工厂方法</font><font style="vertical-align: inherit;">，例如协议（REST或Web Socket），凭证，和有效负载格式（目前，JAXB和JSON是REST协议唯一支持的格式）。</font><font style="vertical-align: inherit;">开始时，请参阅以下示例：</font></font></p>
</div>
<div class="sect4">
<h5 id="_drools_controller_endpoints"><a class="anchor" href="index.html#_drools_controller_endpoints"></a><a class="link" href="index.html#_drools_controller_endpoints"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11.2.1。</font><font style="vertical-align: inherit;">Drools控制器端点</font></font></a></h5>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST：/ rest / controller</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web Socket：/ websocket / controller</font></font></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用REST的客户端配置示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> org.kie.server.controller.api.model.spec.ServerTemplateList;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClient;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClientFactory;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListServerTemplatesExample</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"http://localhost:8080/kie-server-controller/rest/controller"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        KieServerControllerClient client = KieServerControllerClientFactory.newRestClient(URL,<font></font>
                                                                                          USER,<font></font>
                                                                                          PASSWORD);<font></font>
<font></font>
        <span class="hljs-keyword">final</span> ServerTemplateList serverTemplateList = client.listServerTemplates();<font></font>
        System.out.println(String.format(<span class="hljs-string">"Found %s server template(s) at controller url: %s"</span>,<font></font>
                                         serverTemplateList.getServerTemplates().length,<font></font>
                                         URL));<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Web Socket的客户端配置示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> org.kie.server.controller.api.model.spec.ServerTemplateList;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClient;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClientFactory;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ListServerTemplatesExample</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"ws://localhost:8080/kie-server-controller/websocket/controller"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        KieServerControllerClient client = KieServerControllerClientFactory.newWebSocketClient(URL,<font></font>
                                                                                               USER,<font></font>
                                                                                               PASSWORD);<font></font>
<font></font>
        <span class="hljs-keyword">final</span> ServerTemplateList serverTemplateList = client.listServerTemplates();<font></font>
        System.out.println(String.format(<span class="hljs-string">"Found %s server template(s) at controller url: %s"</span>,<font></font>
                                         serverTemplateList.getServerTemplates().length,<font></font>
                                         URL));<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_protocol_specific_settings"><a class="anchor" href="index.html#_protocol_specific_settings"></a><a class="link" href="index.html#_protocol_specific_settings"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11.2.2。</font><font style="vertical-align: inherit;">协议特定设置</font></font></a></h5>
<div class="sect5">
<h6 id="_rest"><a class="anchor" href="index.html#_rest"></a><a class="link" href="index.html#_rest"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">休息</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用REST协议时，Drools控制器客户端允许您指定自己的协议</font></font><code>javax.ws.rs.core.Configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这对于微调底层REST客户端API非常有用。</font><font style="vertical-align: inherit;">例如，您可以根据需要调整连接超时。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">REST客户端超时配置示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
<span class="hljs-keyword">import</span> javax.ws.rs.core.Configuration;
<span class="hljs-keyword">import</span> org.jboss.resteasy.client.jaxrs.ResteasyClientBuilder;<font></font>
<font></font>
<span class="hljs-keyword">import</span> org.kie.server.api.marshalling.MarshallingFormat;
<span class="hljs-keyword">import</span> org.kie.server.controller.api.model.spec.ServerTemplateList;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClient;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClientFactory;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RESTTimeoutExample</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"http://localhost:8080/kie-server-controller/rest/controller"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        <span class="hljs-keyword">final</span> Configuration configuration =
                <span class="hljs-keyword">new</span> ResteasyClientBuilder()<font></font>
                        .establishConnectionTimeout(<span class="hljs-number">10</span>,<font></font>
                                                    TimeUnit.SECONDS)<font></font>
                        .socketTimeout(<span class="hljs-number">60</span>,<font></font>
                                       TimeUnit.SECONDS)<font></font>
                        .getConfiguration();<font></font>
        KieServerControllerClient client = KieServerControllerClientFactory.newRestClient(URL,<font></font>
                                                                                          USER,<font></font>
                                                                                          PASSWORD,<font></font>
                                                                                          MarshallingFormat.JSON,<font></font>
                                                                                          configuration);<font></font>
<font></font>
        <span class="hljs-keyword">final</span> ServerTemplateList serverTemplateList = client.listServerTemplates();<font></font>
        System.out.println(String.format(<span class="hljs-string">"Found %s server template(s) at controller url: %s"</span>,<font></font>
                                         serverTemplateList.getServerTemplates().length,<font></font>
                                         URL));<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_web_socket"><a class="anchor" href="index.html#_web_socket"></a><a class="link" href="index.html#_web_socket"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Web套接字</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Web Socket协议进行连接时，Drools控制器客户端允许您根据客户端API所连接的特定Drools控制器中发生的更改来接收事件通知。</font><font style="vertical-align: inherit;">例如，您可以收到有关已连接到Drools控制器的Kie Sever实例的通知。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器事件示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> org.kie.server.controller.api.model.events.*;
<span class="hljs-keyword">import</span> org.kie.server.controller.api.model.spec.ServerTemplateList;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClient;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClientFactory;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.event.EventHandler;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketEventsExample</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"ws://localhost:8080/kie-server-controller/websocket/controller"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        KieServerControllerClient client = KieServerControllerClientFactory.newWebSocketClient(URL,<font></font>
                                                                                               USER,<font></font>
                                                                                               PASSWORD,<font></font>
                                                                                               <span class="hljs-keyword">new</span> TestEventHandler());<font></font>
<font></font>
        <span class="hljs-keyword">final</span> ServerTemplateList serverTemplateList = client.listServerTemplates();<font></font>
        System.out.println(String.format(<span class="hljs-string">"Found %s server template(s) at controller url: %s"</span>,<font></font>
                                         serverTemplateList.getServerTemplates().length,<font></font>
                                         URL));<font></font>
        <span class="hljs-keyword">try</span> {<font></font>
            Thread.sleep(<span class="hljs-number">60</span> * <span class="hljs-number">1000</span>);<font></font>
        } <span class="hljs-keyword">catch</span> (Exception e) {<font></font>
            e.printStackTrace();<font></font>
        }<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestEventHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">EventHandler</span> </span>{<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerInstanceConnected</span><span class="hljs-params">(ServerInstanceConnected serverInstanceConnected)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverInstanceConnected = "</span> + serverInstanceConnected);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerInstanceDeleted</span><span class="hljs-params">(ServerInstanceDeleted serverInstanceDeleted)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverInstanceDeleted = "</span> + serverInstanceDeleted);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerInstanceDisconnected</span><span class="hljs-params">(ServerInstanceDisconnected serverInstanceDisconnected)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverInstanceDisconnected = "</span> + serverInstanceDisconnected);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerTemplateDeleted</span><span class="hljs-params">(ServerTemplateDeleted serverTemplateDeleted)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverTemplateDeleted = "</span> + serverTemplateDeleted);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerTemplateUpdated</span><span class="hljs-params">(ServerTemplateUpdated serverTemplateUpdated)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverTemplateUpdated = "</span> + serverTemplateUpdated);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onServerInstanceUpdated</span><span class="hljs-params">(ServerInstanceUpdated serverInstanceUpdated)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"serverInstanceUpdated = "</span> + serverInstanceUpdated);<font></font>
        }<font></font>
<font></font>
        <span class="hljs-annotation">@Override</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onContainerSpecUpdated</span><span class="hljs-params">(ContainerSpecUpdated containerSpecUpdated)</span> </span>{<font></font>
            System.out.println(<span class="hljs-string">"onContainerSpecUpdated = "</span> + containerSpecUpdated);<font></font>
        }<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setting_up_a_drools_controller"><a class="anchor" href="index.html#_setting_up_a_drools_controller"></a><a class="link" href="index.html#_setting_up_a_drools_controller"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22.11.3。</font><font style="vertical-align: inherit;">设置Drools控制器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是此API的其他功能的演示。</font><font style="vertical-align: inherit;">您可以按照本指南开始使用空的Drools控制器实例。</font><font style="vertical-align: inherit;">此示例说明如何使用某些基本配置创建服务器模板以及设置单个容器。</font><font style="vertical-align: inherit;">它还说明了如何启动和停止特定容器并删除新创建的服务器模板。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置Drools控制器示例</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> java.util.Arrays;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;<font></font>
<font></font>
<span class="hljs-keyword">import</span> org.kie.server.api.model.KieContainerStatus;
<span class="hljs-keyword">import</span> org.kie.server.api.model.KieScannerStatus;
<span class="hljs-keyword">import</span> org.kie.server.api.model.ReleaseId;
<span class="hljs-keyword">import</span> org.kie.server.controller.api.model.spec.*;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClient;
<span class="hljs-keyword">import</span> org.kie.server.controller.client.KieServerControllerClientFactory;<font></font>
<font></font>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketSetupControllerExample</span> </span>{<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String URL = <span class="hljs-string">"ws://localhost:8080/kie-server-controller/websocket/controller"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String USER = <span class="hljs-string">"kieserver"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String PASSWORD = <span class="hljs-string">"kieserver1!"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> KieServerControllerClient client;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{<font></font>
        KieServerControllerClient client = KieServerControllerClientFactory.newWebSocketClient(URL,<font></font>
                                                                                               USER,<font></font>
                                                                                               PASSWORD);<font></font>
        ServerTemplate serverTemplate = createServerTemplate();<font></font>
        ContainerSpec container = createContainer(serverTemplate);<font></font>
        client.startContainer(container);<font></font>
        client.stopContainer(container);<font></font>
        client.deleteServerTemplate(serverTemplate.getId());<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> ServerTemplate <span class="hljs-title">createServerTemplate</span><span class="hljs-params">()</span> </span>{<font></font>
        ServerTemplate serverTemplate = <span class="hljs-keyword">new</span> ServerTemplate();<font></font>
        serverTemplate.setId(<span class="hljs-string">"example-client-id"</span>);<font></font>
        serverTemplate.setName(<span class="hljs-string">"example-client-name"</span>);<font></font>
        serverTemplate.setCapabilities(Arrays.asList(Capability.PROCESS.name(),<font></font>
                                                     Capability.RULE.name(),<font></font>
                                                     Capability.PLANNING.name()));<font></font>
<font></font>
        client.saveServerTemplate(serverTemplate);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> serverTemplate;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> ContainerSpec <span class="hljs-title">createContainer</span><span class="hljs-params">(ServerTemplate serverTemplate)</span></span>{<font></font>
        Map&lt;Capability, ContainerConfig&gt; containerConfigMap = <span class="hljs-keyword">new</span> HashMap();<font></font>
<font></font>
        ProcessConfig processConfig = <span class="hljs-keyword">new</span> ProcessConfig(<span class="hljs-string">"PER_PROCESS_INSTANCE"</span>, <span class="hljs-string">"kieBase"</span>, <span class="hljs-string">"kieSession"</span>, <span class="hljs-string">"MERGE_COLLECTION"</span>);<font></font>
        containerConfigMap.put(Capability.PROCESS, processConfig);<font></font>
<font></font>
        RuleConfig ruleConfig = <span class="hljs-keyword">new</span> RuleConfig(<span class="hljs-number">500l</span>, KieScannerStatus.SCANNING);<font></font>
        containerConfigMap.put(Capability.RULE, ruleConfig);<font></font>
<font></font>
        ReleaseId releaseId = <span class="hljs-keyword">new</span> ReleaseId(<span class="hljs-string">"org.kie.server.testing"</span>, <span class="hljs-string">"stateless-session-kjar"</span>, <span class="hljs-string">"1.0.0-SNAPSHOT"</span>);<font></font>
<font></font>
        ContainerSpec containerSpec = <span class="hljs-keyword">new</span> ContainerSpec(<span class="hljs-string">"example-container-id"</span>, <span class="hljs-string">"example-client-name"</span>, serverTemplate, releaseId, KieContainerStatus.STOPPED, containerConfigMap);<font></font>
        client.saveContainerSpec(serverTemplate.getId(), containerSpec);<font></font>
<font></font>
        <span class="hljs-keyword">return</span> containerSpec;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<h1 id="_drools_examples" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools示例</font></font></h1>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帮助您学习Drools的示例</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples_2"><a class="anchor" href="index.html#_examples_2"></a><a class="link" href="index.html#_examples_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.例子</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_the_examples"><a class="anchor" href="index.html#_getting_the_examples"></a><a class="link" href="index.html#_getting_the_examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.1。</font><font style="vertical-align: inherit;">得到例子</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确保安装了Drools Eclipse插件，该插件首先需要安装图形编辑框架（GEF）依赖项。</font><font style="vertical-align: inherit;">然后下载并解压缩drools-examples zip文件，其中包含已创建的Eclipse项目。</font><font style="vertical-align: inherit;">将该项目导入新的Eclipse工作区。</font><font style="vertical-align: inherit;">规则都有执行规则的示例类。</font><font style="vertical-align: inherit;">如果您想在另一个项目（或另一个IDE）中尝试这些示例，那么您需要手动设置依赖项。</font><font style="vertical-align: inherit;">下面记录了许多但不是所有的例子，享受！</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些示例需要运行Java 1.6。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_hello_world"><a class="anchor" href="index.html#_hello_world"></a><a class="link" href="index.html#_hello_world"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.2。</font><font style="vertical-align: inherit;">你好，世界</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：Hello World</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主类：org.drools.examples.helloworld.HelloWorldExample</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模块：drools-例子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类型：Java应用程序</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
规则文件：HelloWorld.drl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目标：演示使用中的基本规则</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Hello World”示例显示了一个使用规则的简单应用程序，使用MVEL和Java方言编写。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例演示如何创建和使用</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此外，还显示了审计日志记录和调试输出，其他示例中省略了它们，因为它们非常相似。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下代码段显示了如何使用3行代码创建会话。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例236. HelloWorld：创建KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        KieServices ks = KieServices.Factory.get(); <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b>
        KieContainer kc = ks.getKieClasspathContainer(); <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b>
        KieSession ksession = kc.newKieSession(<span class="hljs-string">"HelloWorldKS"</span>); <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得KieServices工厂。</font><font style="vertical-align: inherit;">这是应用程序用于与引擎交互的主要界面。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从项目类路径创建KieContainer。</font><font style="vertical-align: inherit;">这将查找</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/META-INF/kmodule.xml</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
文件，以配置KieModule并将其实例化为KieContainer。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于命名的“HelloWorldKS”会话配置创建会话。</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools有一个事件模型，可以揭示内部发生的大部分事情。</font><font style="vertical-align: inherit;">两个默认的调试监听器提供的，</font></font><code>DebugAgendaEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而</font></font><code>DebugWorkingMemoryEventListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其打印出的调试事件信息</font></font><code>System.err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在控制台窗口中显示的流。</font><font style="vertical-align: inherit;">将侦听器添加到Session非常简单，如下一个代码段所示。</font><font style="vertical-align: inherit;">在</font></font><code>KieRuntimeLogger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供执行审计，这些都可以在一个图形可被观众看到的结果。</font><font style="vertical-align: inherit;">记录器实际上是一个基于</font></font><code>Agenda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>RuleRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">监听</font><font style="vertical-align: inherit;">器的专用实现</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当引擎完成执行时，</font></font><code>logger.close()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须调用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大多数示例使用Drools的Audit日志记录功能来记录执行流程以供以后检查。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例237. HelloWorld：事件记录和审计</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        <span class="hljs-comment">// The application can also setup listeners</span>
        ksession.addEventListener( <span class="hljs-keyword">new</span> DebugAgendaEventListener() );<font></font>
        ksession.addEventListener( <span class="hljs-keyword">new</span> DebugRuleRuntimeEventListener() );<font></font>
<font></font>
        <span class="hljs-comment">// To setup a file based audit logger, uncomment the next line</span>
        <span class="hljs-comment">// KieRuntimeLogger logger = ks.getLoggers().newFileLogger( ksession, "./helloworld" );</span><font></font>
<font></font>
        <span class="hljs-comment">// To setup a ThreadedFileLogger, so that the audit view reflects events whilst debugging,</span>
        <span class="hljs-comment">// uncomment the next line</span>
        <span class="hljs-comment">// KieRuntimeLogger logger = ks.getLoggers().newThreadedFileLogger( ksession, "./helloworld", 1000 );</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本例中使用的单个类非常简单。</font><font style="vertical-align: inherit;">它有两个字段：消息，即a </font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和状态，可以是两个整数之一</font></font><code>HELLO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>GOODBYE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子238. HelloWorld示例：消息类</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Message</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> HELLO   = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> GOODBYE = <span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String          message;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>             status;<font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用消息文本“Hello World”和状态创建</font><font style="vertical-align: inherit;">单个</font><font style="vertical-align: inherit;">对象</font></font><code>HELLO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后将其插入引擎，此时</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将执行该对象。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例239.HelloWorld：执行</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        <span class="hljs-comment">// The application can insert facts into the session</span>
        <span class="hljs-keyword">final</span> Message message = <span class="hljs-keyword">new</span> Message();<font></font>
        message.setMessage( <span class="hljs-string">"Hello World"</span> );<font></font>
        message.setStatus( Message.HELLO );<font></font>
        ksession.insert( message );<font></font>
<font></font>
        <span class="hljs-comment">// and fire the rules</span>
        ksession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要将示例作为Java应用程序执行：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"></font><code>org.drools.examples.helloworld.HelloWorldExample</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Eclipse IDE中</font><font style="vertical-align: inherit;">打开该类</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右键单击该类并选择“Run as ...”然后选择“Java application”</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们在</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">上放置断点</font><font style="vertical-align: inherit;">并选择</font></font><code>ksession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量，我们可以看到“Hello World”规则已在议程中激活。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/helloworld_agenda1.png" alt="helloworld议程1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图304. Hello World：fireAllRules议程视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>System.out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调试监听器打印输出时</font><font style="vertical-align: inherit;">应用程序打印输出</font></font><code>System.err</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子240. HelloWorld：Console窗口中的System.out</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">Hello</span> World<font></font>
Goodbye cruel world</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例241. HelloWorld：Console窗口中的System.err</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">==&gt;[ActivationCreated(<span class="hljs-number">0</span>): rule=Hello World;<font></font>
                   tuple=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">1</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]]<font></font>
[ObjectInserted: handle=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">1</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96];<font></font>
                 object=org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]<font></font>
[BeforeActivationFired: rule=Hello World;<font></font>
                   tuple=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">1</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]]<font></font>
==&gt;[ActivationCreated(<span class="hljs-number">4</span>): rule=Good Bye;<font></font>
                   tuple=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">2</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]]<font></font>
[ObjectUpdated: handle=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">2</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96];<font></font>
                old_object=org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96;<font></font>
                new_object=org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]<font></font>
[AfterActivationFired(<span class="hljs-number">0</span>): rule=Hello World]<font></font>
[BeforeActivationFired: rule=Good Bye;<font></font>
                   tuple=[fid:<span class="hljs-number">1</span>:<span class="hljs-number">2</span>:org.drools.examples.helloworld.HelloWorldExample$Message@<span class="hljs-number">17</span>cec96]]<font></font>
[AfterActivationFired(<span class="hljs-number">4</span>): rule=Good Bye]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际规则在文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">src / main / resources / org / drools / examples / helloworld / HelloWorld.drl中</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例242. HelloWorld：规则“Hello World”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Hello World"</span>
      dialect <span class="hljs-string">"mvel"</span>
  <span class="hljs-keyword">when</span>
      m <span class="hljs-symbol">:</span> <span class="hljs-constant">Message</span>( status == <span class="hljs-constant">Message</span>.<span class="hljs-constant">HELLO</span>, message <span class="hljs-symbol">:</span> message )
  <span class="hljs-keyword">then</span>
      <span class="hljs-constant">System</span>.out.println( message );<font></font>
      modify ( m ) { message = <span class="hljs-string">"Goodbye cruel world"</span>,<font></font>
                     status = <span class="hljs-constant">Message</span>.<span class="hljs-constant">GOODBYE</span> };
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的LHS（之后</font></font><code>when</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）部分声明它将为</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入到状态为的规则运行时的</font><font style="vertical-align: inherit;">每个</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">激活</font></font><code>Message.HELLO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">除此之外，还创建了两个变量绑定：变量</font></font><code>message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到</font></font><code>message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性，变量</font></font><code>m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到匹配的</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象本身。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的RHS（后</font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或后果部分是使用MVEL表达式语言编写的，如规则属性所声明的</font></font><code>dialect</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">打印绑定变量的内容后</font></font><code>message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向</font></font><code>System.out</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，规则改变的值</font></font><code>message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的属性</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到对象</font></font><code>m</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是使用MVEL完成的</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句</font><font style="vertical-align: inherit;">，该语句允许您在一个语句中应用一个赋值块，引擎会自动通知块结束时的更改。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用时</font><font style="vertical-align: inherit;">将断点设置为DRL，</font><font style="vertical-align: inherit;">并在执行规则后果期间再次检查议程视图。</font><font style="vertical-align: inherit;">这次我们通过“Debug As”和“Drools application”开始执行，而不是通过运行“Java应用程序”：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"></font><code>org.drools.examples.HelloWorld</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Eclipse IDE中</font><font style="vertical-align: inherit;">打开该类</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右键单击该类，然后选择“Debug as ...”，然后选择“Drools application”。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们可以看到</font></font><code>"Good Bye"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Java方言</font><font style="vertical-align: inherit;">的另一条规则</font><font style="vertical-align: inherit;">被激活并放在议程上。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/helloworld_agenda2.png" alt="helloworld议程2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图305. Hello World：规则“Hello World”议程视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定“java”方言的“Good Bye”规则类似于“Hello World”规则，除了它匹配</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态为的对象</font></font><code>Message.GOODBYE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例243. HelloWorld：规则“再见”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Good Bye"</span>
      dialect <span class="hljs-string">"java"</span>
  <span class="hljs-function"><span class="hljs-keyword">when</span>
      <span class="hljs-title">Message</span>(<span class="hljs-params"> status == Message.GOODBYE, message : message </span>)
  then
      System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> message </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例化的Java代码</font></font><code>KieRuntimeLogger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建可以加载到Audit视图的审核日志文件。</font><font style="vertical-align: inherit;">许多示例中使用Audit视图来演示示例执行流程。</font><font style="vertical-align: inherit;">在下面的视图屏幕截图中，我们可以看到插入了对象，这会为“Hello World”规则创建一个激活; </font><font style="vertical-align: inherit;">然后执行激活，更新</font></font><code>Message</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，激活“再见”规则; </font><font style="vertical-align: inherit;">最后，“再见”规则也会执行。</font><font style="vertical-align: inherit;">在“审核”视图中选择事件会以绿色突出显示原始事件; </font><font style="vertical-align: inherit;">因此，“激活已创建”事件以绿色突出显示为“激活已执行”事件的原点。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/helloworld_auditview1.png" alt="helloworld auditview1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图306. Hello World：Audit View</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="_state_example"><a class="anchor" href="index.html#_state_example"></a><a class="link" href="index.html#_state_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.3。</font><font style="vertical-align: inherit;">状态示例</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例以两个不同的版本实现，以演示实现相同基本行为的不同方式：正向链接，即引擎必须根据工作内存中的事实变化依次评估，激活和触发规则的能力。</font></font></p>
</div>
<div class="sect3">
<h4 id="_understanding_the_state_example"><a class="anchor" href="index.html#_understanding_the_state_example"></a><a class="link" href="index.html#_understanding_the_state_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.3.1。</font><font style="vertical-align: inherit;">了解状态示例</font></font></a></h4>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：状态示例</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主类：org.drools.examples.state.StateExampleUsingSalience</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模块：drools-例子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类型：Java应用程序</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
规则文件：StateExampleUsingSalience.drl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目标：演示规则激发优先级的基本规则使用和冲突解决。</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个</font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类都有其名称和当前状态的字段（请参阅类</font></font><code>org.drools.examples.state.State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">每个对象的两种可能状态是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NOTRUN</code></p>
</li>
<li>
<p><code>FINISHED</code></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例244.州一级</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">State</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> NOTRUN   = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> FINISHED = <span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PropertyChangeSupport changes =
        <span class="hljs-keyword">new</span> PropertyChangeSupport( <span class="hljs-keyword">this</span> );<font></font>
<font></font>
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>    state;<font></font>
<font></font>
    ... setters and getters go here...<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">忽略</font></font><code>PropertyChangeSupport</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在后面解释的，我们看到创建了四个</font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名为A，B，C和D的对象。最初它们的状态被设置为</font></font><code>NOTRUN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是使用的构造函数的默认值。</font><font style="vertical-align: inherit;">每个实例依次声明为Session，然后</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被调用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例245.显着性状态：执行</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        <span class="hljs-keyword">final</span> State a = <span class="hljs-keyword">new</span> State( <span class="hljs-string">"A"</span> );
        <span class="hljs-keyword">final</span> State b = <span class="hljs-keyword">new</span> State( <span class="hljs-string">"B"</span> );
        <span class="hljs-keyword">final</span> State c = <span class="hljs-keyword">new</span> State( <span class="hljs-string">"C"</span> );
        <span class="hljs-keyword">final</span> State d = <span class="hljs-keyword">new</span> State( <span class="hljs-string">"D"</span> );<font></font>
<font></font>
        ksession.insert( a );<font></font>
        ksession.insert( b );<font></font>
        ksession.insert( c );<font></font>
        ksession.insert( d );<font></font>
<font></font>
        ksession.fireAllRules();<font></font>
<font></font>
        ksession.dispose(); <span class="hljs-comment">// Stateful rule session must always be disposed when finished</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要执行应用程序：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"></font><code>org.drools.examples.state.StateExampleUsingSalience</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Eclipse IDE中</font><font style="vertical-align: inherit;">打开该类</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右键单击该类并选择“Run as ...”然后选择“Java application”</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您将在Eclipse控制台窗口中看到以下输出：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例246.突出状态：控制台输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">A</span> finished<font></font>
B finished<font></font>
C finished<font></font>
D finished</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总共有四条规则。</font><font style="vertical-align: inherit;">首先，</font></font><code>Bootstrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则触发，将A设置为state </font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后使B将其状态更改为</font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">C和D都依赖于B，导致由突出值解决的冲突。</font><font style="vertical-align: inherit;">让我们来看看它的执行方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解发生情况的最佳方法是使用“审核日志记录”功能以图形方式查看每个操作的结果。</font><font style="vertical-align: inherit;">要查看此示例运行生成的审核日志，请执行以下操作：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果审核视图不可见，请单击“窗口”，然后选择“显示视图”，然后选择“其他...”和“Drools”，最后选择“审核视图”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“审核视图”中，单击“打开日志”按钮，然后选择文件“&lt;drools-examples-dir&gt; /log/state.log”。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之后，“审核视图”将如下所示：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/state_example_audit1.png" alt="状态示例audit1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图307.突出状态示例审计视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从上到下阅读“审核视图”中的日志，我们会看到每个操作以及工作内存中的相应更改。</font><font style="vertical-align: inherit;">通过这种方式，我们观察到状态中状态对象A的断言</font></font><code>NOTRUN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活了</font></font><code>Bootstrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则，而其他</font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的断言</font><font style="vertical-align: inherit;">没有立即生效。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例247.突出状态：规则“Bootstrap”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-constant">Bootstrap</span>
    <span class="hljs-keyword">when</span>
        a <span class="hljs-symbol">:</span> <span class="hljs-constant">State</span>(name == <span class="hljs-string">"A"</span>, state == <span class="hljs-constant">State</span>.<span class="hljs-constant">NOTRUN</span> )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(a.getName() + <span class="hljs-string">" finished"</span> );<font></font>
        a.setState( <span class="hljs-constant">State</span>.<span class="hljs-constant">FINISHED</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则Bootstrap的执行将A的状态改变为</font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后激活规则“A到B”。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例248.突显状态：规则“A到B”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"A to B"</span>
    <span class="hljs-keyword">when</span>
        State(name == <span class="hljs-string">"A"</span>, <span class="hljs-keyword">state</span> == State.FINISHED )<font></font>
        b : State(name == <span class="hljs-string">"B"</span>, <span class="hljs-keyword">state</span> == State.NOTRUN )<font></font>
    then<font></font>
        System.out.println(b.getName() + <span class="hljs-string">" finished"</span> );<font></font>
        b.setState( State.FINISHED );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“A到B”的执行将B的状态改变为</font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">激活两者，规则“B到C”和“B到D”，将其激活放在议程上。</font><font style="vertical-align: inherit;">从这一刻起，这两条规则都可能会触发，因此，据说它们“处于冲突中”。</font><font style="vertical-align: inherit;">冲突解决策略允许引擎的议程决定触发哪个规则。</font><font style="vertical-align: inherit;">规则“B到C”具有</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较高的显着性值</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（10与默认显着性值0相比），它首先触发，将对象C修改为状态</font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">上面显示的审核视图反映了对此的修改</font></font><code>State</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“A到B”中的对象，导致两次激活冲突。</font><font style="vertical-align: inherit;">议程视图还可用于调查议程的状态，调试点放在规则本身并打开议程视图。</font><font style="vertical-align: inherit;">下面的屏幕截图显示了规则“A到B”中的断点以及具有两个冲突规则的议程状态。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/state_example_agenda1.png" alt="国家范例议程1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图308.状态示例日程视图</font></font></div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例249.突出状态：规则“B到C”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"B to C"</span>
        salience <span class="hljs-number">10</span>
    <span class="hljs-keyword">when</span>
        State(name == <span class="hljs-string">"B"</span>, <span class="hljs-keyword">state</span> == State.FINISHED )<font></font>
        c : State(name == <span class="hljs-string">"C"</span>, <span class="hljs-keyword">state</span> == State.NOTRUN )<font></font>
    then<font></font>
        System.out.println(c.getName() + <span class="hljs-string">" finished"</span> );<font></font>
        c.setState( State.FINISHED );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“B到D”最后触发，将对象D修改为状态</font></font><code>FINISHED</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例250.显着性状态：规则“B到D”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs perl">rule <span class="hljs-string">"B to D"</span>
    <span class="hljs-keyword">when</span>
        State(name == <span class="hljs-string">"B"</span>, <span class="hljs-keyword">state</span> == State.FINISHED )<font></font>
        d : State(name == <span class="hljs-string">"D"</span>, <span class="hljs-keyword">state</span> == State.NOTRUN )<font></font>
    then<font></font>
        System.out.println(d.getName() + <span class="hljs-string">" finished"</span> );<font></font>
        d.setState( State.FINISHED );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有更多规则要执行，因此引擎停止。</font></font></p>
</div>
<div class="paragraph">
<p>Another notable concept in this example is the use of <em>dynamic facts</em>, based on <code>PropertyChangeListener</code> objects.
As described in the documentation, in order for the engine to see and react to changes of fact properties, the application must tell the engine that changes occurred.
This can be done explicitly in the rules by using the <code>modify</code> statement, or implicitly by letting the engine know that the facts implement <code>PropertyChangeSupport</code> as defined by the <em>JavaBeans
        specification</em>.
This example demonstrates how to use <code>PropertyChangeSupport</code> to avoid the need for explicit <code>modify</code> statements in the rules.
To make use of this feature, ensure that your facts implement <code>PropertyChangeSupport</code>, the same way the class <code>org.drools.example.State</code> does, and use the following code in the rules file to configure the engine to listen for property changes on those facts:</p>
</div>
<div class="exampleblock">
<div class="title">Example 251. Declaring a Dynamic Fact</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">declare type State
    <span class="hljs-annotation">@propertyChangeSupport</span>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When using <code>PropertyChangeListener</code> objects, each setter must implement a little extra code for the notification.
Here is the setter for <code>state</code> in the class <code>org.drools.examples</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 252. Setter Example with PropertyChangeSupport</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setState</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> newState)</span> </span>{
    <span class="hljs-keyword">int</span> oldState = <span class="hljs-keyword">this</span>.state;
    <span class="hljs-keyword">this</span>.state = newState;
    <span class="hljs-keyword">this</span>.changes.firePropertyChange( <span class="hljs-string">"state"</span>,<font></font>
                                     oldState,<font></font>
                                     newState );<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are another class in this example: <code>StateExampleUsingAgendaGroup</code>.
It executes from A to B to C to D, as just shown, but <code>StateExampleUsingAgendaGroup</code> uses agenda-groups to control the rule conflict and which one fires first.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程小组是将议程分成小组并控制哪些小组可以执行的一种方式。</font><font style="vertical-align: inherit;">默认情况下，所有规则都在议程组“MAIN”中。</font><font style="vertical-align: inherit;">“agenda-group”属性允许您为规则指定不同的议程组。</font><font style="vertical-align: inherit;">最初，工作记忆的重点是议程组“MAIN”。</font><font style="vertical-align: inherit;">组的规则仅在组获得焦点时触发。</font><font style="vertical-align: inherit;">这可以使用方法</font></font><code>setFocus()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或规则属性来实现</font></font><code>auto-focus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">“自动对焦”表示规则在匹配和激活规则时自动将焦点设置到其议程组。</font><font style="vertical-align: inherit;">正是这种“自动对焦”使规则“B到C”在“B到D”之前启动。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例253.议程组状态示例：规则“B到C”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"B to C"</span>
      agenda-<span class="hljs-keyword">group</span> <span class="hljs-string">"B to C"</span>
      auto-<span class="hljs-function">focus <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">when</span>
      <span class="hljs-title">State</span>(<span class="hljs-params">name == <span class="hljs-string">"B"</span>, state == State.FINISHED </span>)
      c : <span class="hljs-title">State</span>(<span class="hljs-params">name == <span class="hljs-string">"C"</span>, state == State.NOTRUN </span>)
  then
      System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params">c.getName(</span>) + " finished" )</span>;<font></font>
      c.setState( State.FINISHED );<font></font>
      kcontext.getKnowledgeRuntime().getAgenda().getAgendaGroup( <span class="hljs-string">"B to D"</span> ).setFocus();<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“B到C”调用</font></font><code>setFocus()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组“B到D”，允许其激活规则，允许激活规则“B到D”。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例254.议程组状态示例：规则“B到D”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"B to D"</span>
      agenda-<span class="hljs-keyword">group</span> <span class="hljs-string">"B to D"</span>
  <span class="hljs-function"><span class="hljs-keyword">when</span>
      <span class="hljs-title">State</span>(<span class="hljs-params">name == <span class="hljs-string">"B"</span>, state == State.FINISHED </span>)
      d : <span class="hljs-title">State</span>(<span class="hljs-params">name == <span class="hljs-string">"D"</span>, state == State.NOTRUN </span>)
  then
      System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params">d.getName(</span>) + " finished" )</span>;<font></font>
      d.setState( State.FINISHED );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_fibonacci_example"><a class="anchor" href="index.html#_fibonacci_example"></a><a class="link" href="index.html#_fibonacci_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.4。</font><font style="vertical-align: inherit;">斐波纳契实例</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">姓名：斐波那契</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主类：org.drools.examples.fibonacci.FibonacciExample</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模块：drools-例子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类型：Java应用程序</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
规则文件：Fibonacci.drl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目标：演示递归，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  CE不和交叉产品匹配</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">比萨的莱昂纳多发现</font><font style="vertical-align: inherit;">的斐波那契数字（见</font></font><a href="http://en.wikipedia.org/wiki/Fibonacci_number" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://en.wikipedia.org/wiki/Fibonacci_number</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）（见</font></font><a href="http://en.wikipedia.org/wiki/Fibonacci" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://en.wikipedia.org/wiki/Fibonacci</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）是一个以0和1开头的序列。下一个Fibonacci数是通过加上前两个Fibonacci数得到的。</font><font style="vertical-align: inherit;">Fibonacci序列以0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181,6765,10946开始，...... Fibonacci示例演示了具有显着性值的递归和冲突解决方案。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此示例中使用</font><font style="vertical-align: inherit;">单个事实类</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它有两个字段，序列和值。</font><font style="vertical-align: inherit;">序列字段用于指示Fibonacci数字序列中对象的位置。</font><font style="vertical-align: inherit;">值字段显示该序列位置的Fibonacci对象的值，使用-1表示仍需要计算的值。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例255.斐波纳契类</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fibonacci</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>  sequence;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> value;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Fibonacci</span><span class="hljs-params">( <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> sequence )</span> </span>{
        <span class="hljs-keyword">this</span>.sequence = sequence;
        <span class="hljs-keyword">this</span>.value = -<span class="hljs-number">1</span>;<font></font>
    }<font></font>
<font></font>
    ... setters and getters go here...<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行示例：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"></font><code class="class">org.drools.examples.fibonacci.FibonacciExample</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Eclipse IDE中</font><font style="vertical-align: inherit;">打开该类</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">右键单击该类并选择“Run as ...”然后选择“Java application”</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eclipse在其控制台窗口中显示以下输出（“... snip ...”表示为了节省空间而删除的行）：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例256.斐波纳契示例：控制台输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">recurse <span class="hljs-keyword">for</span> <span class="hljs-number">50</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">49</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">48</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">47</span><font></font>
...snip...<font></font>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">5</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">4</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">3</span>
recurse <span class="hljs-keyword">for</span> <span class="hljs-number">2</span>
<span class="hljs-number">1</span> == <span class="hljs-number">1</span>
<span class="hljs-number">2</span> == <span class="hljs-number">1</span>
<span class="hljs-number">3</span> == <span class="hljs-number">2</span>
<span class="hljs-number">4</span> == <span class="hljs-number">3</span>
<span class="hljs-number">5</span> == <span class="hljs-number">5</span>
<span class="hljs-number">6</span> == <span class="hljs-number">8</span><font></font>
...snip...<font></font>
<span class="hljs-number">47</span> == <span class="hljs-number">2971215073</span>
<span class="hljs-number">48</span> == <span class="hljs-number">4807526976</span>
<span class="hljs-number">49</span> == <span class="hljs-number">7778742049</span>
<span class="hljs-number">50</span> == <span class="hljs-number">12586269025</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To kick this off from Java we only insert a single Fibonacci object, with a sequence field of 50.
A recursive rule is then used to insert the other 49 <code>Fibonacci</code> objects.
This example doesn’t use <code>PropertyChangeSupport</code>.
It uses the MVEL dialect, which means we can use the <code>modify</code> keyword, which allows a block setter action which also notifies the engine of changes.</p>
</div>
<div class="exampleblock">
<div class="title">Example 257. Fibonacci Example: Execution</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.insert( <span class="hljs-keyword">new</span> Fibonacci( <span class="hljs-number">50</span> ) );<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The rule Recurse is very simple.
It matches each asserted <code>Fibonacci</code> object with a value of -1, creating and  asserting a new <code>Fibonacci</code> object with a sequence of one less than the currently matched object.
Each time a Fibonacci object is added while the one with a sequence field equal to 1 does not exist, the rule re-matches and fires again.
The <code>not</code> conditional element is used to stop the rule’s matching once we have all 50 Fibonacci objects in memory.
The rule also has a salience value, because we need to have all 50 <code>Fibonacci</code> objects asserted before we execute the Bootstrap rule.</p>
</div>
<div class="exampleblock">
<div class="title">Example 258. Fibonacci Example: Rule "Recurse"</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule Recurse<font></font>
    salience 10<font></font>
    when<font></font>
        f : Fibonacci ( value == -1 )<font></font>
        not ( Fibonacci ( sequence == 1 ) )<font></font>
    then<font></font>
        <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Fibonacci( <span class="hljs-keyword">f</span>.<span class="hljs-keyword">sequence</span> - <span class="hljs-number">1</span> ) );</span><font></font>
        System.out.println( "recurse for " + f.sequence );<font></font>
<span class="hljs-operator"><span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Audit视图显示了</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从Java代码完成的序列字段为50 </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的原始断言</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">从那时起，Audit视图显示规则的连续递归，其中每个声明的</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象导致Recurse规则被激活并再次触发。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/fibonacci1.png" alt="fibonacci1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图309. Fibonacci示例：“Recurse”审计视图1</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">序列字段为2 </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">对象被断言时，“Bootstrap”规则与“Recurse”规则一起被匹配和激活。</font><font style="vertical-align: inherit;">注意字段的多限制</font></font><code>sequence</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，测试与1或2的相等性。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例259. Fibonacci示例：规则“Bootstrap”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule Bootstrap
    <span class="hljs-keyword">when</span>
        f : Fibonacci( sequence == <span class="hljs-number">1</span> || == <span class="hljs-number">2</span>, <span class="hljs-keyword">value</span> == -<span class="hljs-number">1</span> ) <span class="hljs-comment">// multi-restriction</span>
    <span class="hljs-function">then
        <span class="hljs-title">modify</span> (<span class="hljs-params"> f </span>)</span>{ <span class="hljs-keyword">value</span> = <span class="hljs-number">1</span> };<font></font>
        System.<span class="hljs-keyword">out</span>.println( f.sequence + <span class="hljs-string">" == "</span> + f.<span class="hljs-keyword">value</span> );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此时议程如下所示。</font><font style="vertical-align: inherit;">但是，“Bootstrap”规则不会触发，因为“Recurse”规则具有更高的显着性。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/fibonacci_agenda1.png" alt="斐波纳契议程1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图310.斐波纳契示例：“递归”议程视图1</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">序列为1 </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">对象被断言时，Bootstrap规则再次匹配，导致该规则的两次激活。</font><font style="vertical-align: inherit;">请注意，“Recurse”规则不匹配并激活，因为</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素一旦</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存在序列为1 </font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">就会停止规则的匹配</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/fibonacci_agenda2.png" alt="斐波纳契议程2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图311.斐波纳契示例：“递归”议程视图2</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们有两个</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值不等于-1的对象，“计算”规则就能匹配。</font><font style="vertical-align: inherit;">正是“Bootstrap”规则将序列1和2的对象设置为值1.此时，工作记忆中有50个Fibonacci对象。</font><font style="vertical-align: inherit;">现在我们需要选择一个合适的三元组来依次计算它们的每个值。</font><font style="vertical-align: inherit;">在没有字段约束的规则中使用三个Fibonacci模式来限制可能的交叉产品将导致50x49x48可能的组合，导致大约125,000个可能的规则发射，其中大多数是不正确的。</font><font style="vertical-align: inherit;">“计算”规则使用字段约束以正确的顺序正确约束Fibonacci模式; </font><font style="vertical-align: inherit;">这种技术称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交叉产品匹配</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个模式找到任何值为！= -1的Fibonacci，并绑定模式和字段。</font><font style="vertical-align: inherit;">第二个Fibonacci也是这样做的，但它增加了一个额外的字段约束，以确保其序列比Fibonacci绑定的序列大1 </font></font><code>f1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当这个规则第一次触发时，我们知道只有序列1和2的值为1，并且这两个约束确保</font></font><code>f1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用序列1和</font></font><code>f2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引用序列2.最终模式找到具有等于-1的值的Fibonacci并且序列一大于</font></font><code>f2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此时，我们</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从可用的交叉产品中正确选择了</font><font style="vertical-align: inherit;">三个</font><font style="vertical-align: inherit;">对象，并且我们可以计算</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定到</font><font style="vertical-align: inherit;">的第三个</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的值</font></font><code>f3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子260.斐波那契例子：规则“计算”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule Calculate
    <span class="hljs-keyword">when</span>
        <span class="hljs-comment">// Bind f1 and s1</span>
        f1 : Fibonacci( s1 : sequence, <span class="hljs-keyword">value</span> != -<span class="hljs-number">1</span> )
        <span class="hljs-comment">// Bind f2 and v2; refer to bound variable s1</span>
        f2 : Fibonacci( sequence == (s1 + <span class="hljs-number">1</span>), v2 : <span class="hljs-keyword">value</span> != -<span class="hljs-number">1</span> )
        <span class="hljs-comment">// Bind f3 and s3; alternative reference of f2.sequence</span>
        f3 : Fibonacci( s3 : sequence == (f2.sequence + <span class="hljs-number">1</span> ), <span class="hljs-keyword">value</span> == -<span class="hljs-number">1</span> )<font></font>
    then<font></font>
        <span class="hljs-comment">// Note the various referencing techniques.</span>
        modify ( f3 ) { <span class="hljs-keyword">value</span> = f1.<span class="hljs-keyword">value</span> + v2 };<font></font>
        System.<span class="hljs-keyword">out</span>.println( s3 + <span class="hljs-string">" == "</span> + f3.<span class="hljs-keyword">value</span> );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>modify</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语句更新了</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">绑定</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的值</font></font><code>f3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着我们现在有另一个新的Fibonacci对象，其值不等于-1，这允许“Calculate”规则重新匹配并计算下一个Fibonacci数。</font><font style="vertical-align: inherit;">下面的Audit视图显示了最后一个“Bootstrap”的触发如何修改</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，使“Calculate”规则匹配，然后修改另一个Fibonacci对象，允许“Calculate”规则再次匹配。</font><font style="vertical-align: inherit;">这将继续，直到为所有</font></font><code>Fibonacci</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">设置值</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/fibonacci4.png" alt="fibonacci4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图312.斐波纳契示例：“Bootstrap”审计视图</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="_banking_tutorial"><a class="anchor" href="index.html#_banking_tutorial"></a><a class="link" href="index.html#_banking_tutorial"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.5。</font><font style="vertical-align: inherit;">银行教程</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称：BankingTutorial</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
主类：org.drools.examples.banking.BankingExamplesApp.java</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
模块：drools-例子</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
类型：Java应用程序</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
规则文件：org.drools.examples.banking。*。drl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
目标：展示模式匹配，基本排序和计算规则。</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本教程演示了开发完整个人银行应用程序以处理多个帐户的贷记和借记的过程。</font><font style="vertical-align: inherit;">它使用一组为流程创建的设计模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类</font></font><code>RuleRunner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个简单的工具，可以针对一组数据执行一个或多个DRL文件。</font><font style="vertical-align: inherit;">它编译包并为每次执行创建KIE基础，使我们能够轻松执行每个场景并检查输出。</font><font style="vertical-align: inherit;">实际上，对于生产系统而言，这不是一个好的解决方案，其中KIE基础应该只构建一次并缓存，但是就本教程而言，它就足够了。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例261. Banking指南：RuleRunner</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RuleRunner</span> </span>{<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RuleRunner</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">runRules</span><span class="hljs-params">(String[] rules,
                         Object[] facts)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
<font></font>
        KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();<font></font>
        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();<font></font>
<font></font>
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rules.length; i++ ) {<font></font>
            String ruleFile = rules[i];<font></font>
            System.out.println( <span class="hljs-string">"Loading file: "</span> + ruleFile );<font></font>
            kbuilder.add( ResourceFactory.newClassPathResource( ruleFile,<font></font>
                                                                RuleRunner.class ),<font></font>
                          ResourceType.DRL );<font></font>
        }<font></font>
<font></font>
        Collection&lt;KnowledgePackage&gt; pkgs = kbuilder.getKnowledgePackages();<font></font>
        kbase.addKnowledgePackages( pkgs );<font></font>
        StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();<font></font>
<font></font>
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; facts.length; i++ ) {<font></font>
            Object fact = facts[i];<font></font>
            System.out.println( <span class="hljs-string">"Inserting fact: "</span> + fact );<font></font>
            ksession.insert( fact );<font></font>
        }<font></font>
<font></font>
        ksession.fireAllRules();<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们的第一个示例Java类加载并执行单个DRL文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，但不插入任何数据。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例262. Banking教程：Java Example1</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example1</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example1.drl"</span> },
                                   <span class="hljs-keyword">new</span> Object[<span class="hljs-number">0</span>] );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要执行的第一个简单规则具有</font></font><code>eval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">始终为真的</font><font style="vertical-align: inherit;">单个</font><font style="vertical-align: inherit;">条件，因此该规则将匹配并在启动后触发一次。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例263. Banking指南：Example1.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Rule 01"</span>
    <span class="hljs-function"><span class="hljs-keyword">when</span>
        <span class="hljs-title">eval</span>(<span class="hljs-params"> <span class="hljs-number">1</span>==<span class="hljs-number">1</span> </span>)
    then
        System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"Rule 01 Works"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的输出如下，表明规则匹配并执行单个print语句。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例264. Banking教程：Example1.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Loading file: Example1.drl<font></font>
Rule <span class="hljs-number">01</span> Works</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一步是断言一些简单的事实并打印出来。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例265. Banking教程：Java Example2</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example2</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        Number[] numbers = <span class="hljs-keyword">new</span> Number[] {wrap(<span class="hljs-number">3</span>), wrap(<span class="hljs-number">1</span>), wrap(<span class="hljs-number">4</span>), wrap(<span class="hljs-number">1</span>), wrap(<span class="hljs-number">5</span>)};
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example2.drl"</span> },<font></font>
                                   numbers );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title">wrap</span><span class="hljs-params">( <span class="hljs-keyword">int</span> i )</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Integer(i);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这不使用任何特定事实，而是断言一组</font></font><code>java.lang.Integer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">这不被认为是“最佳实践”，因为数字不是一个有用的事实，但我们在此处使用它来演示在添加更多复杂性之前的基本技术。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们将创建一个简单的规则来打印出这些数字。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例266. Banking指南：Example2.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Rule 02"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-constant">Number</span>( <span class="hljs-variable">$intValue</span> <span class="hljs-symbol">:</span> intValue )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"Number found with value: "</span> + <span class="hljs-variable">$intValue</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">再一次，这条规则没有什么特别之处。</font><font style="vertical-align: inherit;">它标识任何</font></font><code>Number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的</font><font style="vertical-align: inherit;">事实</font><font style="vertical-align: inherit;">并打印出值。</font><font style="vertical-align: inherit;">注意抽象类的使用</font></font><code>Number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：我们插入了</font></font><code>Integer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，但我们现在寻找任何类型的数字。</font><font style="vertical-align: inherit;">模式匹配引擎能够匹配断言对象的接口和超类。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出显示正在加载的DRL，插入的事实以及匹配和触发的规则。</font><font style="vertical-align: inherit;">我们可以看到每个插入的数字都匹配并触发并打印出来。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例267. Banking指南：Example2.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Loading file: Example2.drl<font></font>
Inserting fact: <span class="hljs-number">3</span>
Inserting fact: <span class="hljs-number">1</span>
Inserting fact: <span class="hljs-number">4</span>
Inserting fact: <span class="hljs-number">1</span>
Inserting fact: <span class="hljs-number">5</span>
Number found with value: <span class="hljs-number">5</span>
Number found with value: <span class="hljs-number">1</span>
Number found with value: <span class="hljs-number">4</span>
Number found with value: <span class="hljs-number">1</span>
Number found with value: <span class="hljs-number">3</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当然，有许多更好的方法来排序数字而不是使用规则，但由于我们在开始查看银行规则时需要按日期顺序应用一些现金流，因此我们将开发基于规则的简单排序技术。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例268. Banking教程：Example3.java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example3</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        Number[] numbers = <span class="hljs-keyword">new</span> Number[] {wrap(<span class="hljs-number">3</span>), wrap(<span class="hljs-number">1</span>), wrap(<span class="hljs-number">4</span>), wrap(<span class="hljs-number">1</span>), wrap(<span class="hljs-number">5</span>)};
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example3.drl"</span> },<font></font>
                                   numbers );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title">wrap</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Integer(i);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们再次插入我们的</font></font><code>Integer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，但这次规则略有不同：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例269. Banking指南：Example3.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Rule 03"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-variable">$number</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Number</span>( )
        <span class="hljs-keyword">not</span> <span class="hljs-constant">Number</span>( intValue &lt; <span class="hljs-variable">$number</span>.intValue )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Number found with value: "</span> + <span class="hljs-variable">$number</span>.intValue() );<font></font>
        retract( <span class="hljs-variable">$number</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则的第一行标识a </font></font><code>Number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提取值。</font><font style="vertical-align: inherit;">第二行确保不存在比第一个模式找到的数字更小的数字。</font><font style="vertical-align: inherit;">我们可能期望只匹配一个数字 - 集合中的最小数字。</font><font style="vertical-align: inherit;">但是，打印后数字的缩回意味着已删除最小数字，显示下一个最小数字，依此类推。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果输出显示数字现在按数字排序。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子270. Banking教程：Example3.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Loading file: Example3.drl<font></font>
Inserting fact: <span class="hljs-number">3</span>
Inserting fact: <span class="hljs-number">1</span>
Inserting fact: <span class="hljs-number">4</span>
Inserting fact: <span class="hljs-number">1</span>
Inserting fact: <span class="hljs-number">5</span>
Number found with value: <span class="hljs-number">1</span>
Number found with value: <span class="hljs-number">1</span>
Number found with value: <span class="hljs-number">3</span>
Number found with value: <span class="hljs-number">4</span>
Number found with value: <span class="hljs-number">5</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们准备开始迈向个人会计规则。</font><font style="vertical-align: inherit;">第一步是创建一个</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例271.银行业务指南：类现金流</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cashflow</span> </span>{
    <span class="hljs-keyword">private</span> Date   date;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> amount;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Cashflow</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Cashflow</span><span class="hljs-params">(Date date, <span class="hljs-keyword">double</span> amount)</span> </span>{
        <span class="hljs-keyword">this</span>.date = date;
        <span class="hljs-keyword">this</span>.amount = amount;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Date <span class="hljs-title">getDate</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> date;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDate</span><span class="hljs-params">(Date date)</span> </span>{
        <span class="hljs-keyword">this</span>.date = date;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getAmount</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> amount;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAmount</span><span class="hljs-params">(<span class="hljs-keyword">double</span> amount)</span> </span>{
        <span class="hljs-keyword">this</span>.amount = amount;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Cashflow[date="</span> + date + <span class="hljs-string">",amount="</span> + amount + <span class="hljs-string">"]"</span>;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有两个简单的属性，日期和金额。</font><font style="vertical-align: inherit;">（请注意，使用</font></font><code>double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">货币单位</font><font style="vertical-align: inherit;">的类型</font><font style="vertical-align: inherit;">通常</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个好主意，因为浮点数不能准确地表示大多数数字。）还有一个重载的构造函数来设置值，以及一种</font></font><code>toString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印现金流</font><font style="vertical-align: inherit;">的方法</font><font style="vertical-align: inherit;">。</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example4.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的Java代码</font><font style="vertical-align: inherit;">
 插入五个Cashflow对象，具有不同的日期和金额。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例272. Banking教程：Example4.java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example4</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        Object[] cashflows = {<font></font>
            <span class="hljs-keyword">new</span> Cashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"01/01/2007"</span>), <span class="hljs-number">300.00</span>),
            <span class="hljs-keyword">new</span> Cashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"05/01/2007"</span>), <span class="hljs-number">100.00</span>),
            <span class="hljs-keyword">new</span> Cashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"11/01/2007"</span>), <span class="hljs-number">500.00</span>),
            <span class="hljs-keyword">new</span> Cashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"07/01/2007"</span>), <span class="hljs-number">800.00</span>),
            <span class="hljs-keyword">new</span> Cashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"02/01/2007"</span>), <span class="hljs-number">400.00</span>),<font></font>
        };<font></font>
<font></font>
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example4.drl"</span> },<font></font>
                                   cashflows );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">便捷类</font></font><code>SimpleDate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展</font></font><code>java.util.Date</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，提供构造函数，将String作为输入并定义日期格式。</font><font style="vertical-align: inherit;">代码如下所示</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例273. Banking教程：Class SimpleDate</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleDate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Date</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SimpleDateFormat format = <span class="hljs-keyword">new</span> SimpleDateFormat(<span class="hljs-string">"dd/MM/yyyy"</span>);<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SimpleDate</span><span class="hljs-params">(String datestr)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        setTime(format.parse(datestr).getTime());<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，让我们看看</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example4.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 ，看看我们如何打印已排序的</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子274. Banking指南：Example4.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Rule 04"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-variable">$cashflow</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Cashflow</span>( <span class="hljs-variable">$date</span> <span class="hljs-symbol">:</span> date, <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount )
        <span class="hljs-keyword">not</span> <span class="hljs-constant">Cashflow</span>( date &lt; <span class="hljs-variable">$date</span>)
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Cashflow: "</span>+<span class="hljs-variable">$date</span>+<span class="hljs-string">" :: "</span>+<span class="hljs-variable">$amount</span>);<font></font>
        retract(<span class="hljs-variable">$cashflow</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，我们识别</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提取日期和金额。</font><font style="vertical-align: inherit;">在规则的第二行，我们确保没有现金流的日期早于找到的日期。</font><font style="vertical-align: inherit;">在结果中，我们打印</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">满足规则然后收回它的规则，为下一个最早让路</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所以，我们生成的输出是：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子275. Banking教程：Example4.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Loading file: Example4.drl<font></font>
Inserting fact: Cashflow[date=Mon Jan <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,amount=<span class="hljs-number">300.0</span>]<font></font>
Inserting fact: Cashflow[date=Fri Jan <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,amount=<span class="hljs-number">100.0</span>]<font></font>
Inserting fact: Cashflow[date=Thu Jan <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,amount=<span class="hljs-number">500.0</span>]<font></font>
Inserting fact: Cashflow[date=Sun Jan <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,amount=<span class="hljs-number">800.0</span>]<font></font>
Inserting fact: Cashflow[date=Tue Jan <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,amount=<span class="hljs-number">400.0</span>]<font></font>
Cashflow: Mon Jan <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">300.0</span>
Cashflow: Tue Jan <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">400.0</span>
Cashflow: Fri Jan <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">100.0</span>
Cashflow: Sun Jan <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">800.0</span>
Cashflow: Thu Jan <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">500.0</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来，我们对我们进行扩展</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而产生</font></font><code>TypedCashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以是信用卡或借记卡操作。</font><font style="vertical-align: inherit;">（通常，我们只是将其添加到</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型中，但我们使用扩展来保持类的先前版本完整。）</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例276. Banking教程：Class TypedCashflow</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TypedCashflow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Cashflow</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> CREDIT = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEBIT  = <span class="hljs-number">1</span>;<font></font>
<font></font>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>             type;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TypedCashflow</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TypedCashflow</span><span class="hljs-params">(Date date, <span class="hljs-keyword">int</span> type, <span class="hljs-keyword">double</span> amount)</span> </span>{
        <span class="hljs-keyword">super</span>( date, amount );
        <span class="hljs-keyword">this</span>.type = type;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getType</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> type;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setType</span><span class="hljs-params">(<span class="hljs-keyword">int</span> type)</span> </span>{
        <span class="hljs-keyword">this</span>.type = type;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"TypedCashflow[date="</span> + getDate() +
               <span class="hljs-string">",type="</span> + (type == CREDIT ? <span class="hljs-string">"Credit"</span> : <span class="hljs-string">"Debit"</span>) +
               <span class="hljs-string">",amount="</span> + getAmount() + <span class="hljs-string">"]"</span>;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有很多方法可以改进这个代码，但是为了这个例子，这样做可以。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在让我们创建Example5，一个用于运行代码的类。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例277. Banking教程：Example5.java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example5</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        Object[] cashflows = {<font></font>
            <span class="hljs-keyword">new</span> TypedCashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"01/01/2007"</span>),<font></font>
                              TypedCashflow.CREDIT, <span class="hljs-number">300.00</span>),
            <span class="hljs-keyword">new</span> TypedCashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"05/01/2007"</span>),<font></font>
                              TypedCashflow.CREDIT, <span class="hljs-number">100.00</span>),
            <span class="hljs-keyword">new</span> TypedCashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"11/01/2007"</span>),<font></font>
                              TypedCashflow.CREDIT, <span class="hljs-number">500.00</span>),
            <span class="hljs-keyword">new</span> TypedCashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"07/01/2007"</span>),<font></font>
                              TypedCashflow.DEBIT, <span class="hljs-number">800.00</span>),
            <span class="hljs-keyword">new</span> TypedCashflow(<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"02/01/2007"</span>),<font></font>
                              TypedCashflow.DEBIT, <span class="hljs-number">400.00</span>),<font></font>
        };<font></font>
<font></font>
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example5.drl"</span> },<font></font>
                                   cashflows );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，我们只创建一组</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，即信用或借记操作。</font><font style="vertical-align: inherit;">我们将它们和</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example5.drl提供</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 给RuleEngine。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，让我们看一下打印已排序</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的规则</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例278. Banking指南：Example5.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Rule 05"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-variable">$cashflow</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">TypedCashflow</span>( <span class="hljs-variable">$date</span> <span class="hljs-symbol">:</span> date,
                                   <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount,<font></font>
                                   type == <span class="hljs-constant">TypedCashflow</span>.<span class="hljs-constant">CREDIT</span> )
        <span class="hljs-keyword">not</span> <span class="hljs-constant">TypedCashflow</span>( date &lt; <span class="hljs-variable">$date</span>,<font></font>
                           type == <span class="hljs-constant">TypedCashflow</span>.<span class="hljs-constant">CREDIT</span> )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Credit: "</span>+<span class="hljs-variable">$date</span>+<span class="hljs-string">" :: "</span>+<span class="hljs-variable">$amount</span>);<font></font>
        retract(<span class="hljs-variable">$cashflow</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，我们确定一个</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的事实</font></font><code>CREDIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提取日期和金额。</font><font style="vertical-align: inherit;">在规则的第二行中，我们确保没有</font></font><code>Cashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同类型的日期早于找到的日期。</font><font style="vertical-align: inherit;">结果，我们打印满足模式的现金流，然后收回它，为下一个最早的类型现金流腾出空间</font></font><code>CREDIT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以，我们生成的输出是</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例279. Banking指南：Example5.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载文件：Example5.drl</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入事实：TypedCashflow [date = Mon Jan 01 00:00:00 GMT 2007，type = Credit，amount = 300.0]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入事实：TypedCashflow [date = Fri Jan 05 00:00:00 GMT 2007，type = Credit，amount = 100.0]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入事实：TypedCashflow [date = Thu Jan 11 00:00:00 GMT 2007，type = Credit，amount = 500.0]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入事实：TypedCashflow [date = Sun Jan 07 00:00:00 GMT 2007，type = Debit，amount = 800.0]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
插入事实：TypedCashflow [date = Tue Jan 02 00:00:00 GMT 2007，type = Debit，amount = 400.0]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图片来源：Mon Jan 01 00:00:00 GMT 2007 :: 300.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图片来源：Fri Jan 05 00:00:00 GMT 2007 :: 100.0</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
图片来源：2007年1月11日00:00:00 GMT 2007 :: 500.0</font></font></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">继续我们的银行业务，我们现在将处理两个银行账户的贷方和借方，计算账户余额。</font><font style="vertical-align: inherit;">为了做到这一点，我们创建了两个单独的</font></font><code>Account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，并在将它们</font></font><code>Cashflows</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传递给Drools引擎之前将它们</font><font style="vertical-align: inherit;">注入到</font><font style="vertical-align: inherit;">对象中。</font><font style="vertical-align: inherit;">这样做的原因是提供了对正确帐户的轻松访问，而无需求助于帮助类。</font><font style="vertical-align: inherit;">我们先来看看</font></font><code>Account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">课程。</font><font style="vertical-align: inherit;">这是一个简单的Java对象，具有帐号和余额：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例280.银行业务教程：班级帐户</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Account</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span>   accountNo;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> balance = <span class="hljs-number">0</span>;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Account</span><span class="hljs-params">(<span class="hljs-keyword">long</span> accountNo)</span> </span>{
        <span class="hljs-keyword">this</span>.accountNo = accountNo;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getAccountNo</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> accountNo;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAccountNo</span><span class="hljs-params">(<span class="hljs-keyword">long</span> accountNo)</span> </span>{
        <span class="hljs-keyword">this</span>.accountNo = accountNo;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getBalance</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> balance;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBalance</span><span class="hljs-params">(<span class="hljs-keyword">double</span> balance)</span> </span>{
        <span class="hljs-keyword">this</span>.balance = balance;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Account["</span> + <span class="hljs-string">"accountNo="</span> + accountNo + <span class="hljs-string">",balance="</span> + balance + <span class="hljs-string">"]"</span>;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在让我们扩展我们的</font></font><code>TypedCashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果</font></font><code>AllocatedCashflow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，包括一个</font></font><code>Account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例281.银行业务教程：Class AllocatedCashflow</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AllocatedCashflow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TypedCashflow</span> </span>{
    <span class="hljs-keyword">private</span> Account account;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AllocatedCashflow</span><span class="hljs-params">()</span> </span>{<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AllocatedCashflow</span><span class="hljs-params">(Account account, Date date, <span class="hljs-keyword">int</span> type, <span class="hljs-keyword">double</span> amount)</span> </span>{
        <span class="hljs-keyword">super</span>( date, type, amount );
        <span class="hljs-keyword">this</span>.account = account;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Account <span class="hljs-title">getAccount</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> account;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAccount</span><span class="hljs-params">(Account account)</span> </span>{
        <span class="hljs-keyword">this</span>.account = account;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"AllocatedCashflow["</span> +
               <span class="hljs-string">"account="</span> + account +
               <span class="hljs-string">",date="</span> + getDate() +
               <span class="hljs-string">",type="</span> + (getType() == CREDIT ? <span class="hljs-string">"Credit"</span> : <span class="hljs-string">"Debit"</span>) +
               <span class="hljs-string">",amount="</span> + getAmount() + <span class="hljs-string">"]"</span>;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example5.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的Java代码</font><font style="vertical-align: inherit;">
 创建了两个</font></font><code>Account</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，并在构造函数调用中将其中一个传递给每个</font><em class="path"><font style="vertical-align: inherit;">cashflow</font></em><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例282. Banking教程：Example5.java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example6</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception </span>{<font></font>
        Account acc1 = <span class="hljs-keyword">new</span> Account(<span class="hljs-number">1</span>);<font></font>
        Account acc2 = <span class="hljs-keyword">new</span> Account(<span class="hljs-number">2</span>);<font></font>
<font></font>
        Object[] cashflows = {<font></font>
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"01/01/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">300.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"05/02/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">100.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc2,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"11/03/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">500.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"07/02/2007"</span>),<font></font>
                                  TypedCashflow.DEBIT,  <span class="hljs-number">800.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc2,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"02/03/2007"</span>),<font></font>
                                  TypedCashflow.DEBIT,  <span class="hljs-number">400.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"01/04/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">200.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"05/04/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">300.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc2,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"11/05/2007"</span>),<font></font>
                                  TypedCashflow.CREDIT, <span class="hljs-number">700.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc1,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"07/05/2007"</span>),<font></font>
                                  TypedCashflow.DEBIT,  <span class="hljs-number">900.00</span>),
            <span class="hljs-keyword">new</span> AllocatedCashflow(acc2,<span class="hljs-keyword">new</span> SimpleDate(<span class="hljs-string">"02/05/2007"</span>),<font></font>
                                  TypedCashflow.DEBIT,  <span class="hljs-number">100.00</span>)<font></font>
        };<font></font>
<font></font>
        <span class="hljs-keyword">new</span> RuleRunner().runRules( <span class="hljs-keyword">new</span> String[] { <span class="hljs-string">"Example6.drl"</span> },<font></font>
                                   cashflows );<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，让我们看看</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example6.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的规则，</font><font style="vertical-align: inherit;">
 看看我们如何按日期顺序应用每个现金流并计算和打印余额。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例283. Banking指南：Example6.drl中的规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Rule 06 - Credit"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-variable">$cashflow</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">AllocatedCashflow</span>( <span class="hljs-variable">$account</span> <span class="hljs-symbol">:</span> account,
                                       <span class="hljs-variable">$date</span> <span class="hljs-symbol">:</span> date,
                                       <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount,<font></font>
                                       type == <span class="hljs-constant">TypedCashflow</span>.<span class="hljs-constant">CREDIT</span> )
        <span class="hljs-keyword">not</span> <span class="hljs-constant">AllocatedCashflow</span>( account == <span class="hljs-variable">$account</span>, date &lt; <span class="hljs-variable">$date</span>)
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Credit: "</span> + <span class="hljs-variable">$date</span> + <span class="hljs-string">" :: "</span> + <span class="hljs-variable">$amount</span>);
        <span class="hljs-variable">$account</span>.setBalance(<span class="hljs-variable">$account</span>.getBalance()+<span class="hljs-variable">$amount</span>);
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Account: "</span> + <span class="hljs-variable">$account</span>.getAccountNo() +
                           <span class="hljs-string">" - new balance: "</span> + <span class="hljs-variable">$account</span>.getBalance());<font></font>
        retract(<span class="hljs-variable">$cashflow</span>);
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Rule 06 - Debit"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-variable">$cashflow</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">AllocatedCashflow</span>( <span class="hljs-variable">$account</span> <span class="hljs-symbol">:</span> account,
                            <span class="hljs-variable">$date</span> <span class="hljs-symbol">:</span> date,
                            <span class="hljs-variable">$amount</span> <span class="hljs-symbol">:</span> amount,<font></font>
                            type == <span class="hljs-constant">TypedCashflow</span>.<span class="hljs-constant">DEBIT</span> )
        <span class="hljs-keyword">not</span> <span class="hljs-constant">AllocatedCashflow</span>( account == <span class="hljs-variable">$account</span>, date &lt; <span class="hljs-variable">$date</span>)
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Debit: "</span> + <span class="hljs-variable">$date</span> + <span class="hljs-string">" :: "</span> + <span class="hljs-variable">$amount</span>);
        <span class="hljs-variable">$account</span>.setBalance(<span class="hljs-variable">$account</span>.getBalance() - <span class="hljs-variable">$amount</span>);
        <span class="hljs-constant">System</span>.out.println(<span class="hljs-string">"Account: "</span> + <span class="hljs-variable">$account</span>.getAccountNo() +
                           <span class="hljs-string">" - new balance: "</span> + <span class="hljs-variable">$account</span>.getBalance());<font></font>
        retract(<span class="hljs-variable">$cashflow</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然我们对信用和借记有单独的规则，但在检查早期现金流时我们没有指定类型。</font><font style="vertical-align: inherit;">这样，无论现金流类型如何，所有现金流都按日期顺序应用。</font><font style="vertical-align: inherit;">在条件中，我们确定要使用的帐户，并在后果中使用现金流量更新它。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例284. Banking指南：Example6.java的输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Loading file: Example6.drl<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Mon Jan <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">300.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Mon Feb <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">100.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">2</span>,balance=<span class="hljs-number">0.0</span>],date=Sun Mar <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">500.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Wed Feb <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,type=Debit,amount=<span class="hljs-number">800.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">2</span>,balance=<span class="hljs-number">0.0</span>],date=Fri Mar <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span>,type=Debit,amount=<span class="hljs-number">400.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Sun Apr <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">200.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Thu Apr <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">300.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">2</span>,balance=<span class="hljs-number">0.0</span>],date=Fri May <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span>,type=Credit,amount=<span class="hljs-number">700.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">1</span>,balance=<span class="hljs-number">0.0</span>],date=Mon May <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span>,type=Debit,amount=<span class="hljs-number">900.0</span>]<font></font>
Inserting fact: AllocatedCashflow[account=Account[accountNo=<span class="hljs-number">2</span>,balance=<span class="hljs-number">0.0</span>],date=Wed May <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span>,type=Debit,amount=<span class="hljs-number">100.0</span>]<font></font>
Debit: Fri Mar <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">400.0</span>
Account: <span class="hljs-number">2</span> - <span class="hljs-keyword">new</span> balance: -<span class="hljs-number">400.0</span>
Credit: Sun Mar <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">500.0</span>
Account: <span class="hljs-number">2</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">100.0</span>
Debit: Wed May <span class="hljs-number">02</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span> :: <span class="hljs-number">100.0</span>
Account: <span class="hljs-number">2</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">0.0</span>
Credit: Fri May <span class="hljs-number">11</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span> :: <span class="hljs-number">700.0</span>
Account: <span class="hljs-number">2</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">700.0</span>
Credit: Mon Jan <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">300.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">300.0</span>
Credit: Mon Feb <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">100.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">400.0</span>
Debit: Wed Feb <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> GMT <span class="hljs-number">2007</span> :: <span class="hljs-number">800.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: -<span class="hljs-number">400.0</span>
Credit: Sun Apr <span class="hljs-number">01</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span> :: <span class="hljs-number">200.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: -<span class="hljs-number">200.0</span>
Credit: Thu Apr <span class="hljs-number">05</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span> :: <span class="hljs-number">300.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: <span class="hljs-number">100.0</span>
Debit: Mon May <span class="hljs-number">07</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> BST <span class="hljs-number">2007</span> :: <span class="hljs-number">900.0</span>
Account: <span class="hljs-number">1</span> - <span class="hljs-keyword">new</span> balance: -<span class="hljs-number">800.0</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pricing_rule_decision_table_example"><a class="anchor" href="index.html#_pricing_rule_decision_table_example"></a><a class="link" href="index.html#_pricing_rule_decision_table_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.6。</font><font style="vertical-align: inherit;">定价规则决策表示例</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定价规则决策表演示了在Excel的XLS格式的电子表格中使用决策表来计算保险单的零售成本。</font><font style="vertical-align: inherit;">提供规则集的目的是计算申请特定策略的汽车驾驶员的基本价格和折扣。</font><font style="vertical-align: inherit;">司机的年龄，历史和政策类型都会影响基本保费，而额外的一系列规则则以折扣百分比来改善这一点。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Example</span> <span class="hljs-tag">Policy</span> <span class="hljs-tag">Pricing</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.decisiontable</span><span class="hljs-class">.PricingRuleDTExample</span>
<span class="hljs-tag">Module</span>: <span class="hljs-tag">drools-examples</span>
<span class="hljs-tag">Type</span>: <span class="hljs-tag">Java</span> <span class="hljs-tag">application</span>
<span class="hljs-tag">Rules</span> <span class="hljs-tag">file</span>: <span class="hljs-tag">ExamplePolicyPricing</span><span class="hljs-class">.xls</span>
<span class="hljs-tag">Objective</span>: <span class="hljs-tag">demonstrate</span> <span class="hljs-tag">spreadsheet-based</span> <span class="hljs-tag">decision</span> <span class="hljs-tag">tables</span>.</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_executing_the_example"><a class="anchor" href="index.html#_executing_the_example"></a><a class="link" href="index.html#_executing_the_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.6.1。</font><font style="vertical-align: inherit;">执行示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PricingRuleDTExample.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 并将其作为Java应用程序执行。</font><font style="vertical-align: inherit;">它应该在控制台窗口中生成以下输出：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Cheapest possible<font></font>
BASE PRICE IS: <span class="hljs-number">120</span>
DISCOUNT IS: <span class="hljs-number">20</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行该示例的代码遵循通常的模式。</font><font style="vertical-align: inherit;">加载规则，插入事实并创建无状态会话。</font><font style="vertical-align: inherit;">不同的是如何添加规则。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DecisionTableConfiguration dtableconfiguration =<font></font>
    KnowledgeBuilderFactory.newDecisionTableConfiguration();<font></font>
        dtableconfiguration.setInputType( DecisionTableInputType.XLS );<font></font>
<font></font>
        KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();<font></font>
<font></font>
        Resource xlsRes = ResourceFactory.newClassPathResource( <span class="hljs-string">"ExamplePolicyPricing.xls"</span>,<font></font>
                                                                getClass() );<font></font>
        kbuilder.add( xlsRes,<font></font>
                      ResourceType.DTABLE,<font></font>
                      dtableconfiguration );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font><code>DecisionTableConfiguration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的使用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">其输入类型设置为</font></font><code>DecisionTableInputType.XLS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您使用BRMS，所有这一切当然都会照顾您。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例中使用了两种事实类型，</font></font><code>Driver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">两者都使用其默认值。</font><font style="vertical-align: inherit;">这</font></font><code>Driver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是30岁，没有事先索赔，目前有风险的概况</font></font><code>LOW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该</font></font><code>Policy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所申请的</font></font><code>COMPREHENSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而且还没有被批准。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_decision_table"><a class="anchor" href="index.html#_the_decision_table"></a><a class="link" href="index.html#_the_decision_table"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.6.2。</font><font style="vertical-align: inherit;">决策表</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此决策表中，每行都是规则，每列都是条件或操作。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DT_Config.png" alt="DT配置">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图313.决策表配置</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考上面的电子表格，我们有</font></font><code>RuleSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明，它提供了包名。</font><font style="vertical-align: inherit;">您还可以在此处使用其他可选项，例如</font></font><code>Variables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局变量和</font></font><code>Imports</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导入类。</font><font style="vertical-align: inherit;">在这种情况下，规则的命名空间与我们使用的事实类相同，因此我们可以省略它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向下移动，我们可以看到</font></font><code>RuleTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明。</font><font style="vertical-align: inherit;">此后的名称（定价括号）用作所有生成规则的前缀。</font><font style="vertical-align: inherit;">在此之下，我们有“条件或行动”，表明该列的目的，即它是否构成条件的一部分或将生成的规则的结果。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以看到有一个驱动程序，他的数据跨越三个单元格，这意味着它下面的模板表达式适用于该事实。</font><font style="vertical-align: inherit;">我们观察驱动程序的年龄范围（使用</font></font><code>$1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>$2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用逗号分隔值）   </font></font><code>locationRiskProfile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及</font></font><code>priorClaims</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各自的列。</font><font style="vertical-align: inherit;">在操作列中，我们设置策略基本价格并记录消息。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DT_Table1.png" alt="DT表1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图314.基本价格计算</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的电子表格部分中，有一些广泛的类别括号，由最左侧列中的注释表示。</font><font style="vertical-align: inherit;">由于我们知道我们的司机及其政策的细节，我们可以（通过一些思考）告诉他们应该匹配第18行，因为他们之前没有事故，并且已经30岁了。</font><font style="vertical-align: inherit;">这给我们的基本价格为120。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DT_Table2.png" alt="DT表2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图315.折扣计算</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上部分包含我们可能授予我们的驱动程序的折扣的条件。</font><font style="vertical-align: inherit;">折扣来自</font></font><code>Age</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">括号，先前声明的数量和策略类型。</font><font style="vertical-align: inherit;">在我们的案例中，司机是30，没有事先索赔，并且正在申请</font></font><code>COMPREHENSIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保单，这意味着我们可以给予20％的折扣。</font><font style="vertical-align: inherit;">请注意，这实际上是一个单独的表，但在同一工作表中，以便应用不同的模板。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要注意决策表生成规则。</font><font style="vertical-align: inherit;">这意味着它们不仅仅是自上而下的逻辑，而是更多捕获数据的手段，从而产生规则。</font><font style="vertical-align: inherit;">这是一个让一些人感到困惑的微妙差异。</font><font style="vertical-align: inherit;">规则的评估不一定​​按给定的顺序进行，因为Drools引擎的所有常规机制仍然适用。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pet_store_example"><a class="anchor" href="index.html#_pet_store_example"></a><a class="link" href="index.html#_pet_store_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.7。</font><font style="vertical-align: inherit;">宠物店示例</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">Name: Pet Store<font></font>
Main class: org.drools.examples.petstore.PetStoreExample<font></font>
Module: drools-examples<font></font>
Type: Java application<font></font>
Rules file: PetStore.drl<font></font>
Objective: Demonstrate <span class="hljs-operator"><span class="hljs-keyword">use</span> <span class="hljs-keyword">of</span> Agenda <span class="hljs-keyword">Groups</span>, <span class="hljs-keyword">Global</span> <span class="hljs-keyword">Variables</span> <span class="hljs-keyword">and</span> integration <span class="hljs-keyword">with</span> a GUI,
<span class="hljs-keyword">including</span> callbacks <span class="hljs-keyword">from</span> <span class="hljs-keyword">within</span> the <span class="hljs-keyword">rules</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pet Store示例显示了如何将Rules与GUI集成，在本例中是基于Swing的桌面应用程序。</font><font style="vertical-align: inherit;">在规则文件中，它演示了如何使用议程组和自动对焦来控制在任何给定时间允许触发哪一组规则。</font><font style="vertical-align: inherit;">它还说明了规则中Java和MVEL方言的混合，累积函数的使用以及从规则集中调用Java函数的方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有Java代码都包含在一个文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PetStore.java中</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
，定义了以下主要类（除了几个类来处理Swing事件）：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Petstore</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将很快看到</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法。</font></font></p>
</li>
<li>
<p><code>PetStoreUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负责创建和显示基于Swing的GUI。</font><font style="vertical-align: inherit;">它包含几个较小的类，主要用于响应各种GUI事件，如鼠标按钮单击。</font></font></p>
</li>
<li>
<p><code>TableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存表数据。</font><font style="vertical-align: inherit;">可以把它想象成扩展Swing类的JavaBean </font></font><code>AbstractTableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><code>CheckoutCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 允许GUI与规则交互。</font></font></p>
</li>
<li>
<p><code>Ordershow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 保留我们想要购买的物品。</font></font></p>
</li>
<li>
<p><code>Purchase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 存储订单的详细信息和我们购买的产品。</font></font></p>
</li>
<li>
<p><code>Product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 是一个JavaBean，包含可供购买的产品的详细信息及其价格。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">许多Java代码都是普通的JavaBeans或基于Swing的。</font><font style="vertical-align: inherit;">本节仅讨论几个与Swing相关的要点，但有关Swing组件的优秀教程可以在Sun的Swing网站上找到，网址为</font></font><a href="http://java.sun.com/docs/books/tutorial/uiswing/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://java.sun.com/docs/books/tutorial/uiswing/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Petstore.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 中与规则和事实相关</font><font style="vertical-align: inherit;">的Java代码片段</font><font style="vertical-align: inherit;">如下所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例285.在PetStore.main中创建PetStore KieContainer</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-comment">// KieServices is the factory for all KIE services</span><font></font>
KieServices ks = KieServices.Factory.get();<font></font>
<font></font>
<span class="hljs-comment">// From the kie services, a container is created from the classpath</span><font></font>
KieContainer kc = ks.getKieClasspathContainer();<font></font>
<font></font>
<span class="hljs-comment">// Create the stock.</span>
Vector&lt;Product&gt; stock = <span class="hljs-keyword">new</span> Vector&lt;Product&gt;();<font></font>
stock.add( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Gold Fish"</span>, <span class="hljs-number">5</span> ) );<font></font>
stock.add( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Fish Tank"</span>, <span class="hljs-number">25</span> ) );<font></font>
stock.add( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Fish Food"</span>, <span class="hljs-number">2</span> ) );<font></font>
<font></font>
<span class="hljs-comment">// A callback is responsible for populating the</span>
<span class="hljs-comment">// Working Memory and for firing all rules.</span>
PetStoreUI ui = <span class="hljs-keyword">new</span> PetStoreUI( stock,
                                <span class="hljs-keyword">new</span> CheckoutCallback( kc ) );<font></font>
ui.createAndShowGUI();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面显示的代码</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据类路径并基于</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kmodule.xml</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 文件中</font><font style="vertical-align: inherit;">的定义</font><font style="vertical-align: inherit;">创建一个</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">与其他事实被断言并立即解雇的示例不同，此示例将此步骤推迟到以后。</font><font style="vertical-align: inherit;">它的方式是通过第二行，</font></font><code>PetStoreUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用构造函数创建</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">对象，接受</font><font style="vertical-align: inherit;">收集我们产品</font><font style="vertical-align: inherit;">的</font></font><code>Vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font></font><code>stock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及</font></font><code>CheckoutCallback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含我们刚刚加载的规则库</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">的实例</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">触发规则的Java代码位于   </font></font><code>CheckoutCallBack.checkout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法中。</font><font style="vertical-align: inherit;">当用户按下Checkout按钮时（最终）触发此操作。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例286.触发规则 - 从CheckoutCallBack.checkout（）中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">checkout</span><span class="hljs-params">(JFrame frame, List&lt;Product&gt; items)</span> </span>{<font></font>
    Order order = <span class="hljs-keyword">new</span> Order();<font></font>
<font></font>
    <span class="hljs-comment">// Iterate through list and add to cart</span>
    <span class="hljs-keyword">for</span> ( Product p: items ) {<font></font>
        order.addItem( <span class="hljs-keyword">new</span> Purchase( order, p ) );<font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment">// Add the JFrame to the ApplicationData to allow for user interaction</span><font></font>
<font></font>
    <span class="hljs-comment">// From the container, a session is created based on</span>
    <span class="hljs-comment">// its definition and configuration in the META-INF/kmodule.xml file</span>
    KieSession ksession = kcontainer.newKieSession(<span class="hljs-string">"PetStoreKS"</span>);<font></font>
<font></font>
    ksession.setGlobal( <span class="hljs-string">"frame"</span>, frame );<font></font>
    ksession.setGlobal( <span class="hljs-string">"textArea"</span>, <span class="hljs-keyword">this</span>.output );<font></font>
<font></font>
    ksession.insert( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Gold Fish"</span>, <span class="hljs-number">5</span> ) );<font></font>
    ksession.insert( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Fish Tank"</span>, <span class="hljs-number">25</span> ) );<font></font>
    ksession.insert( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Fish Food"</span>, <span class="hljs-number">2</span> ) );<font></font>
<font></font>
    ksession.insert( <span class="hljs-keyword">new</span> Product( <span class="hljs-string">"Fish Food Sample"</span>, <span class="hljs-number">0</span> ) );<font></font>
<font></font>
    ksession.insert( order );<font></font>
    ksession.fireAllRules();<font></font>
<font></font>
    <span class="hljs-comment">// Return the state of the cart</span>
    <span class="hljs-keyword">return</span> order.toString();<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个项目传递给此方法。</font><font style="vertical-align: inherit;">一个是</font></font><code>JFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">围绕输出文本框架</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">Swing组件</font><font style="vertical-align: inherit;">的句柄</font><font style="vertical-align: inherit;">，位于GUI的底部。</font><font style="vertical-align: inherit;">第二个是订单商品清单; </font><font style="vertical-align: inherit;">这来自于</font></font><code>TableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储GUI右上角“表”区域的信息。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for循环将来自GUI的订单项列表转换为</font></font><code>Order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaBean，也包含在</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PetStore.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中</font><font style="vertical-align: inherit;">
。</font><font style="vertical-align: inherit;">请注意，可以直接在规则中引用Swing数据集，但使用简单的Java对象，这样做是更好的编码实践。</font><font style="vertical-align: inherit;">这意味着如果我们想将样本转换为Web应用程序，我们就不会与Swing联系在一起。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值得注意的是</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，此示例</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的</font><em><font style="vertical-align: inherit;">所有状态都存储在Swing组件中，并且规则实际上是无状态的。</font></em><font style="vertical-align: inherit;">每次按下“Checkout”按钮，此代码都会将Swing的内容复制</font></font><code>TableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到Session的工作内存中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这段代码中，有九个调用</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个创建了一个新</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请记住，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当我们</font></font><code>CheckoutCallBack</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法中</font><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">时</font><font style="vertical-align: inherit;">，我们传入了这个</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">接下来的两个调用传入两个对象，我们将在规则中将其作为全局变量保存：Swing文本区域和用于编写消息的Swing框架。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多插入将产品信息放入</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">订单列表中。</font><font style="vertical-align: inherit;">最后的电话是标准</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">接下来，我们将查看此方法在规则文件中发生的情况。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例287.包，进口，全局和方言：从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">package</span> org.drools.examples<font></font>
<font></font>
<span class="hljs-keyword">import</span> org.kie.api.runtime.KieRuntime
<span class="hljs-keyword">import</span> org.drools.examples.petstore.PetStoreExample.Order
<span class="hljs-keyword">import</span> org.drools.examples.petstore.PetStoreExample.Purchase
<span class="hljs-keyword">import</span> org.drools.examples.petstore.PetStoreExample.Product
<span class="hljs-keyword">import</span> java.util.ArrayList
<span class="hljs-keyword">import</span> javax.swing.JOptionPane;<font></font>
<font></font>
<span class="hljs-keyword">import</span> javax.swing.JFrame<font></font>
<font></font>
global JFrame frame<font></font>
global javax.swing.JTextArea textArea</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PetStore.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的第一部分</font><font style="vertical-align: inherit;">
 包含标准包和import语句，以使各种Java类可用于规则。</font><font style="vertical-align: inherit;">对我们来说，新的是两个全局</font></font><code>frame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>textArea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它们</font><font style="vertical-align: inherit;">包含对先前由调用该</font><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">的Java代码传递</font><font style="vertical-align: inherit;">的Swing组件</font></font><code>JFrame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>JTextArea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件的</font><font style="vertical-align: inherit;">引用</font></font><code>setGlobal()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">与规则中的变量不同，规则一旦触发规则就会过期，全局变量会在会话的生命周期内保留其值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PetStore.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的下一个摘录</font><font style="vertical-align: inherit;">
 包含两个函数，这些函数将很快被我们看到的规则引用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例288.规则中的Java函数：从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function">function <span class="hljs-keyword">void</span> <span class="hljs-title">doCheckout</span><span class="hljs-params">(JFrame frame, KieRuntime krt)</span> </span>{<font></font>
        Object[] options = {<span class="hljs-string">"Yes"</span>,
                            <span class="hljs-string">"No"</span>};<font></font>
<font></font>
        <span class="hljs-keyword">int</span> n = JOptionPane.showOptionDialog(frame,
                                             <span class="hljs-string">"Would you like to checkout?"</span>,
                                             <span class="hljs-string">""</span>,<font></font>
                                             JOptionPane.YES_NO_OPTION,<font></font>
                                             JOptionPane.QUESTION_MESSAGE,<font></font>
                                             <span class="hljs-keyword">null</span>,<font></font>
                                             options,<font></font>
                                             options[<span class="hljs-number">0</span>]);<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) {<font></font>
            krt.getAgenda().getAgendaGroup( <span class="hljs-string">"checkout"</span> ).setFocus();<font></font>
       }<font></font>
}<font></font>
<font></font>
<span class="hljs-function">function <span class="hljs-keyword">boolean</span> <span class="hljs-title">requireTank</span><span class="hljs-params">(JFrame frame, KieRuntime krt, Order order, Product fishTank, <span class="hljs-keyword">int</span> total)</span> </span>{<font></font>
        Object[] options = {<span class="hljs-string">"Yes"</span>,
                            <span class="hljs-string">"No"</span>};<font></font>
<font></font>
        <span class="hljs-keyword">int</span> n = JOptionPane.showOptionDialog(frame,
                                             <span class="hljs-string">"Would you like to buy a tank for your "</span> + total + <span class="hljs-string">" fish?"</span>,
                                             <span class="hljs-string">"Purchase Suggestion"</span>,<font></font>
                                             JOptionPane.YES_NO_OPTION,<font></font>
                                             JOptionPane.QUESTION_MESSAGE,<font></font>
                                             <span class="hljs-keyword">null</span>,<font></font>
                                             options,<font></font>
                                             options[<span class="hljs-number">0</span>]);<font></font>
<font></font>
       System.out.print( <span class="hljs-string">"SUGGESTION: Would you like to buy a tank for your "</span>
                           + total + <span class="hljs-string">" fish? - "</span> );<font></font>
<font></font>
       <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) {<font></font>
             Purchase purchase = <span class="hljs-keyword">new</span> Purchase( order, fishTank );<font></font>
             krt.insert( purchase );<font></font>
             order.addItem( purchase );<font></font>
             System.out.println( <span class="hljs-string">"Yes"</span> );<font></font>
       } <span class="hljs-keyword">else</span> {<font></font>
            System.out.println( <span class="hljs-string">"No"</span> );<font></font>
       }<font></font>
       <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在规则文件中使用这些功能只会使Pet Store示例更加紧​​凑。</font><font style="vertical-align: inherit;">在现实生活中，您可能将函数放在自己的文件中，在相同的规则包中，或者作为标准Java类上的静态方法，并使用它们导入它们</font></font><code>import function my.package.Foo.hello</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个功能的目的是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>doCheckout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示一个对话框，询问用户是否要结帐。</font><font style="vertical-align: inherit;">如果他们这样做，焦点将设置为</font></font><code>checkout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组，允许该组中的规则（可能）触发。</font></font></p>
</li>
<li>
<p><code>requireTank()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示一个对话框，询问用户是否要购买油箱。</font><font style="vertical-align: inherit;">如果是这样，新的鱼缸</font></font><code>Product</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将添加到工作记忆中的订单列表中。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将在稍后看到调用这些函数的规则。</font><font style="vertical-align: inherit;">下一组示例来自Pet Store规则本身。</font><font style="vertical-align: inherit;">第一个提取是首先触发的提取，部分原因是它将</font></font><code>auto-focus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性设置为true。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例289.将项目放入工作内存：从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">// <span class="hljs-operator"><span class="hljs-keyword">Insert</span> <span class="hljs-keyword">each</span> item <span class="hljs-keyword">in</span> the shopping cart <span class="hljs-keyword">into</span> the Working <span class="hljs-keyword">Memory</span>
// <span class="hljs-keyword">Insert</span> <span class="hljs-keyword">each</span> item <span class="hljs-keyword">in</span> the shopping cart <span class="hljs-keyword">into</span> the Working <span class="hljs-keyword">Memory</span>
rule <span class="hljs-string">"Explode Cart"</span>
    agenda-<span class="hljs-keyword">group</span> <span class="hljs-string">"init"</span>
    <span class="hljs-keyword">auto</span>-focus <span class="hljs-literal">true</span>
    salience <span class="hljs-number">10</span>
    dialect <span class="hljs-string">"java"</span>
<span class="hljs-keyword">when</span>
    $<span class="hljs-keyword">order</span> : <span class="hljs-keyword">Order</span>( grossTotal == -<span class="hljs-number">1</span> )
    $item : Purchase() <span class="hljs-keyword">from</span> $<span class="hljs-keyword">order</span>.items
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">insert</span>( $item );</span>
    kcontext.getKnowledgeRuntime().getAgenda().getAgendaGroup( "<span class="hljs-operator"><span class="hljs-keyword">show</span> items<span class="hljs-string">" ).setFocus();
    kcontext.getKnowledgeRuntime().getAgenda().getAgendaGroup( "</span><span class="hljs-keyword">evaluate</span><span class="hljs-string">" ).setFocus();
end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此规则与尚未</font></font><code>grossTotal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算的</font><font style="vertical-align: inherit;">所有订单匹配</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它按顺序循环每个购买项目。</font><font style="vertical-align: inherit;">“爆炸购物车”规则的某些部分应该是熟悉的：规则名称，突出性（暗示规则被触发的顺序）和方言设置为</font></font><code>"java"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有三个新功能：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">`议程组</font></font><code>`"init"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">议程组</font><font style="vertical-align: inherit;">的名称。</font><font style="vertical-align: inherit;">在这种情况下，组中只有一个规则。</font><font style="vertical-align: inherit;">但是，Java代码和规则结果都没有将焦点设置为该组，因此它依赖于下一个属性来触发它。</font></font></p>
</li>
<li>
<p><code>auto-focus<code>`true</code> ensures that this rule, while being the only rule in the agenda group, gets a chance to fire when `fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 从Java代码调用。</font></font></p>
</li>
<li>
<p><code>kcontext…​.setFocus()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依次</font><font style="vertical-align: inherit;">将重点放在</font><font style="vertical-align: inherit;">议程</font></font><code>"show items"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>"evaluate"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程小组上，允许其规则触发。</font><font style="vertical-align: inherit;">在实践中，我们遍历订单上的所有项目，将它们插入到内存中，然后在每次插入后触发其他规则。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接下来的两个列表显示了</font><font style="vertical-align: inherit;">议程组</font></font><code>"show items"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>evaluate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组中</font><font style="vertical-align: inherit;">的规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我们按照它们被调用的顺序查看它们。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子290.在GUI中显示项目 - 从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Show Items"</span>
    agenda-group <span class="hljs-string">"show items"</span>
    dialect <span class="hljs-string">"mvel"</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-variable">$order</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Order</span>( )
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Purchase</span>( order == <span class="hljs-variable">$order</span> )
<span class="hljs-keyword">then</span>
   textArea.append( <span class="hljs-variable">$p</span>.product + <span class="hljs-string">"\n"</span>);
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>"show items"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组只有一个规则，被称为“显示项目”（注意的情况下的差异）。</font><font style="vertical-align: inherit;">对于当前在工作存储器（或会话）中的订单的每次购买，它将详细信息记录到GUI底部的文本区域。</font><font style="vertical-align: inherit;">该</font></font><code>textArea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来做这个变量就是我们在前面的全局变量之一。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>evaluate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程集团还从获得焦点</font></font><code>"Explode Cart"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前面列出的规则。</font><font style="vertical-align: inherit;">这个日程基团具有两个规则，</font></font><code>"Free Fish Food Sample"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>"Suggest Tank"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例291.评估议程组：从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs php"><span class="hljs-comment">// Free Fish Food sample when we buy a Gold Fish if we haven't already bought</span>
<span class="hljs-comment">// Fish Food and don't already have a Fish Food Sample</span>
rule <span class="hljs-string">"Free Fish Food Sample"</span>
    agenda-group <span class="hljs-string">"evaluate"</span>
    dialect <span class="hljs-string">"mvel"</span><font></font>
when<font></font>
    <span class="hljs-variable">$order</span> : Order()<font></font>
    not ( <span class="hljs-variable">$p</span> : Product( name == <span class="hljs-string">"Fish Food"</span>) &amp;amp;&amp;amp; Purchase( product == <span class="hljs-variable">$p</span> ) )<font></font>
    not ( <span class="hljs-variable">$p</span> : Product( name == <span class="hljs-string">"Fish Food Sample"</span>) &amp;amp;&amp;amp; Purchase( product == <span class="hljs-variable">$p</span> ) )<font></font>
    exists ( <span class="hljs-variable">$p</span> : Product( name == <span class="hljs-string">"Gold Fish"</span>) &amp;amp;&amp;amp; Purchase( product == <span class="hljs-variable">$p</span> ) )
    <span class="hljs-variable">$fishFoodSample</span> : Product( name == <span class="hljs-string">"Fish Food Sample"</span> );<font></font>
then<font></font>
    System.out.println( <span class="hljs-string">"Adding free Fish Food Sample to cart"</span> );<font></font>
    purchase = <span class="hljs-keyword">new</span> Purchase(<span class="hljs-variable">$order</span>, <span class="hljs-variable">$fishFoodSample</span>);<font></font>
    insert( purchase );<font></font>
    <span class="hljs-variable">$order</span>.addItem( purchase );<font></font>
end<font></font>
<font></font>
<span class="hljs-comment">// Suggest a tank if we have bought more than 5 gold fish and don't already have one</span>
rule <span class="hljs-string">"Suggest Tank"</span>
    agenda-group <span class="hljs-string">"evaluate"</span>
    dialect <span class="hljs-string">"java"</span><font></font>
when<font></font>
    <span class="hljs-variable">$order</span> : Order()<font></font>
    not ( <span class="hljs-variable">$p</span> : Product( name == <span class="hljs-string">"Fish Tank"</span>) &amp;amp;&amp;amp; Purchase( product == <span class="hljs-variable">$p</span> ) )<font></font>
    ArrayList( <span class="hljs-variable">$total</span> : size &amp;gt; <span class="hljs-number">5</span> ) from collect( Purchase( product.name == <span class="hljs-string">"Gold Fish"</span> ) )
    <span class="hljs-variable">$fishTank</span> : Product( name == <span class="hljs-string">"Fish Tank"</span> )<font></font>
then<font></font>
    requireTank(frame, kcontext.getKieRuntime(), <span class="hljs-variable">$order</span>, <span class="hljs-variable">$fishTank</span>, <span class="hljs-variable">$total</span>);<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该规则</font></font><code>"Free Fish Food Sample"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只会触发</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经有任何鱼类食物，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还没有</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免费的鱼食样品，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而且</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">做</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们的订单金鱼。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果规则触发，它会创建一个新产品（鱼食样本），并将其添加到工作记忆中的顺序。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该规则</font></font><code>"Suggest Tank"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只会触发</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font><font style="vertical-align: inherit;">的订单中</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还没有</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鱼缸，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而且</font></font></em></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有我们的订单超过5种金鱼产品。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果规则触发，它会调用</font></font><code>requireTank()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们之前查看</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">函数（向用户显示一个Dialog，如果确认则向订单/工作内存添加Tank）。</font><font style="vertical-align: inherit;">当调用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requireTank</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（）函数时，规则传递全局</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">帧</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量，以便该函数具有Swing GUI的句柄。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们要看的下一个规则是</font></font><code>"do checkout"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例292.执行Checkout  - 从PetStore.drl中提取（6）</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"do checkout"</span>
    dialect <span class="hljs-string">"java"</span>
    <span class="hljs-keyword">when</span>
    <span class="hljs-keyword">then</span><font></font>
        doCheckout(frame, kcontext.getKieRuntime());<font></font>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该规则</font></font><code>"do checkout"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有议程组集并没有自动对焦属性</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，被视为默认（MAIN）议程组的一部分。</font><font style="vertical-align: inherit;">默认情况下，当明确设置焦点的议程组中的所有规则都已运行时，此组将获得焦点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该规则没有LHS，因此RHS将始终调用该</font></font><code>doCheckout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">在调用</font></font><code>doCheckout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数时，规则传递全局</font></font><code>frame</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量以为函数提供Swing GUI的句柄。</font><font style="vertical-align: inherit;">如前所述，该</font></font><code>doCheckout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能向用户显示确认对话框。</font><font style="vertical-align: inherit;">如果确认，该功能将焦点设置为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结账</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组，允许触发下一批规则。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子293.结帐规则：从PetStore.drl中提取</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Gross Total"</span>
    agenda-group <span class="hljs-string">"checkout"</span>
    dialect <span class="hljs-string">"mvel"</span>
<span class="hljs-keyword">when</span>
   <span class="hljs-variable">$order</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Order</span>( grossTotal == -<span class="hljs-number">1</span>)
   <span class="hljs-constant">Number</span>( total <span class="hljs-symbol">:</span> doubleValue )<font></font>
       from accumulate( <span class="hljs-constant">Purchase</span>( <span class="hljs-variable">$price</span> <span class="hljs-symbol">:</span> product.price ), sum( <span class="hljs-variable">$price</span> ) )
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$order</span> ) { grossTotal = total };<font></font>
    textArea.append( <span class="hljs-string">"\ngross total="</span> + total + <span class="hljs-string">"\n"</span> );
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-string">"Apply 5% Discount"</span>
    agenda-group <span class="hljs-string">"checkout"</span>
dialect <span class="hljs-string">"mvel"</span>
<span class="hljs-keyword">when</span>
   <span class="hljs-variable">$order</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Order</span>( grossTotal &amp;gt;= <span class="hljs-number">10</span> &amp;amp;&amp;amp; &amp;lt; <span class="hljs-number">20</span> )
<span class="hljs-keyword">then</span>
   <span class="hljs-variable">$order</span>.discountedTotal = <span class="hljs-variable">$order</span>.grossTotal * <span class="hljs-number">0</span>.<span class="hljs-number">95</span>;<font></font>
   textArea.append( <span class="hljs-string">"discountedTotal total="</span> + <span class="hljs-variable">$order</span>.discountedTotal + <span class="hljs-string">"\n"</span> );
<span class="hljs-keyword">end</span><font></font>
<font></font>
<font></font>
rule <span class="hljs-string">"Apply 10% Discount"</span>
    agenda-group <span class="hljs-string">"checkout"</span>
    dialect <span class="hljs-string">"mvel"</span>
<span class="hljs-keyword">when</span>
   <span class="hljs-variable">$order</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Order</span>( grossTotal &amp;gt;= <span class="hljs-number">20</span> )
<span class="hljs-keyword">then</span>
   <span class="hljs-variable">$order</span>.discountedTotal = <span class="hljs-variable">$order</span>.grossTotal * <span class="hljs-number">0</span>.<span class="hljs-number">90</span>;<font></font>
   textArea.append( <span class="hljs-string">"discountedTotal total="</span> + <span class="hljs-variable">$order</span>.discountedTotal + <span class="hljs-string">"\n"</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结账</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组中</font><font style="vertical-align: inherit;">有三条规则</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们还没有计算总总量，</font></font><code>Gross Total</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请将产品价格累计到总数中，将此总数放入会话中，然后</font><font style="vertical-align: inherit;">再次</font></font><code>JTextArea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>textArea</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全局变量</font><font style="vertical-align: inherit;">通过Swing显示它</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果总计在10到20之间，则</font></font><code>"Apply 5% Discount"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算折扣总额并将其添加到会话中并将其显示在文本区域中。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果我们的总计不小于20，则</font></font><code>"Apply 10% Discount"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算折扣总额并将其添加到会话中并将其显示在文本区域中。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我们已经了解了代码中发生的事情，让我们看看实际运行代码时会发生什么。</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PetStore.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">
 包含一个</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法，因此可以从命令行或通过IDE作为标准Java应用程序运行。</font><font style="vertical-align: inherit;">这假设您已正确设置类路径。</font><font style="vertical-align: inherit;">（有关详细信息，请参阅示例部分的开头。）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们看到的第一个屏幕是Pet Store Demo。</font><font style="vertical-align: inherit;">它有一个可用产品列表（左上角），所选产品的空列表（右上角），结帐和重置按钮（中间）和一个空的系统消息区域（底部）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/1-PetStore-Start-Screen.png" alt="1 PetStore开始屏幕">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图316.发布后的PetStore演示</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了达到这一点，发生了以下事情：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法已运行并加载规则库</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但尚未触发规则</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">到目前为止，这是与已运行的规则相关的唯一代码。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>PetStoreUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建了</font><font style="vertical-align: inherit;">一个新</font><font style="vertical-align: inherit;">对象，并为其提供了规则库的句柄，供以后使用。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">各种Swing组件完成它们的工作，并显示上面的屏幕并</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等待用户输入</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击列表中的各种产品可能会为您提供类似于下面的屏幕。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/2-stock-added-to-order-list.png" alt="2库存添加到订单列表">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图317.选择了产品的PetStore演示</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处未触发任何规则代码</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这只是Swing代码，侦听鼠标单击事件，并将一些选定的产品添加到</font></font><code>TableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象以在右上角显示。</font><font style="vertical-align: inherit;">（另外，请注意，这是模型视图控制器设计模式的经典用法）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有当我们按下“结帐”按钮时，我们才会触发业务规则，大致与我们之前通过代码的顺序相同。</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font><code>CheckOutCallBack.checkout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由（最终）由Swing类调用，等待单击“Checkout”按钮。</font><font style="vertical-align: inherit;">这将从</font></font><code>TableModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象（GUI的右上角）</font><font style="vertical-align: inherit;">插入数据</font><font style="vertical-align: inherit;">，并将其插入到Session的工作内存中。</font><font style="vertical-align: inherit;">然后它会触发规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>"Explode Cart"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">鉴于它已</font></font><code>auto-focus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为true </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">规则是第一个触发</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">规则</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它遍历购物车中的所有产品，确保产品在工作记忆中，然后给予</font></font><code>"Show Items"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>Evaluation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组一个机会。</font><font style="vertical-align: inherit;">这些组中的规则将购物车的内容添加到文本区域（窗口底部），决定是否向我们提供免费的鱼食，并询问我们是否要购买鱼缸。</font><font style="vertical-align: inherit;">如下图所示。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/3-purchase-suggestion.png" alt="3购买建议">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图318.我们想买一个鱼缸吗？</font></font></div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">待办事项结帐</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则是火，因为它（一）没有其他议程集团目前专注及（b）它是默认的（主）议程集团的一份子。</font><font style="vertical-align: inherit;">它总是调用</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">doCheckout（）函数</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><em><font style="vertical-align: inherit;">函数</font></em><font style="vertical-align: inherit;">显示“你想结帐吗？” </font><font style="vertical-align: inherit;">对话框。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>doCheckout()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能将焦点设置到</font></font><code>checkout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组，为该组中的规则提供触发选项。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>checkout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">议程组中</font><font style="vertical-align: inherit;">的规则</font><font style="vertical-align: inherit;">显示购物车的内容并应用适当的折扣。</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Swing然后等待用户输入</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以检出更多产品（并使规则再次触发），或者关闭GUI  - 参见下图。</font></font></p>
</li>
</ol>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/4-Petstore-final-screen.png" alt="4 Petstore决赛画面">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图319.触发所有规则后的Petstore Demo。</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以添加更多的System.out调用来演示这个事件流。</font><font style="vertical-align: inherit;">当前显示在控制台窗口中的输出在下面的列表中给出。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例294.控制台（System.out）运行PetStore GUI</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Adding <span class="hljs-built_in">free</span> Fish Food Sample to cart<font></font>
SUGGESTION: Would you like to buy a tank <span class="hljs-keyword">for</span> your <span class="hljs-number">6</span> fish? - Yes</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_honest_politician_example"><a class="anchor" href="index.html#_honest_politician_example"></a><a class="link" href="index.html#_honest_politician_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.8。</font><font style="vertical-align: inherit;">诚实的政客榜样</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Honest</span> <span class="hljs-tag">Politician</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.honestpolitician</span><span class="hljs-class">.HonestPoliticianExample</span>
<span class="hljs-tag">Module</span>: <span class="hljs-tag">drools-examples</span>
<span class="hljs-tag">Type</span>: <span class="hljs-tag">Java</span> <span class="hljs-tag">application</span>
<span class="hljs-tag">Rules</span> <span class="hljs-tag">file</span>: <span class="hljs-tag">HonestPoliticianExample</span><span class="hljs-class">.drl</span>
<span class="hljs-tag">Objective</span>: <span class="hljs-tag">Illustrate</span> <span class="hljs-tag">the</span> <span class="hljs-tag">concept</span> <span class="hljs-tag">of</span> "<span class="hljs-tag">truth</span> <span class="hljs-tag">maintenance</span>" <span class="hljs-tag">based</span> <span class="hljs-tag">on</span> <span class="hljs-tag">the</span> <span class="hljs-tag">logical</span> <span class="hljs-tag">insertion</span> <span class="hljs-tag">of</span> <span class="hljs-tag">facts</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">诚实的政治家示例通过逻辑断言演示了真值维护。</font><font style="vertical-align: inherit;">基本前提是对象只能在语句为真时存在。</font><font style="vertical-align: inherit;">规则的结果可以在逻辑上插入具有该</font></font><code>insertLogical()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">的对象</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着只要逻辑插入的规则仍然存在，对象将仅保留在工作内存中。</font><font style="vertical-align: inherit;">当规则不再为真时，对象将自动缩回。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这个例子中</font></font><code>Politician</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，有一个</font><font style="vertical-align: inherit;">类</font><font style="vertical-align: inherit;">，其名称和布尔值是诚实的。</font><font style="vertical-align: inherit;">插入了四个诚实状态设置为真的政治家。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例295.阶级政治家</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Politician</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> honest;<font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例296.诚实的政治家：执行</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Politician blair = <span class="hljs-keyword">new</span> Politician(<span class="hljs-string">"blair"</span>, <span class="hljs-keyword">true</span>);<font></font>
Politician bush = <span class="hljs-keyword">new</span> Politician(<span class="hljs-string">"bush"</span>, <span class="hljs-keyword">true</span>);<font></font>
Politician chirac = <span class="hljs-keyword">new</span> Politician(<span class="hljs-string">"chirac"</span>, <span class="hljs-keyword">true</span>);<font></font>
Politician schroder = <span class="hljs-keyword">new</span> Politician(<span class="hljs-string">"schroder"</span>, <span class="hljs-keyword">true</span>);<font></font>
<font></font>
ksession.insert( blair );<font></font>
ksession.insert( bush );<font></font>
ksession.insert( chirac );<font></font>
ksession.insert( schroder );<font></font>
<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制台窗口输出显示，虽然至少有一位诚实的政治家，但民主仍然存在。</font><font style="vertical-align: inherit;">然而，由于每个政治家都被一个邪恶的公司腐蚀，所以所有政客都变得不诚实，民主已经死了。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例297.诚实的政治家：控制台输出</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">Hurrah!!! Democracy Lives<font></font>
I<span class="hljs-string">'m an evil corporation and I have corrupted schroder
I'</span>m an evil corporation <span class="hljs-keyword">and</span> I have corrupted chirac<font></font>
I<span class="hljs-string">'m an evil corporation and I have corrupted bush
I'</span>m an evil corporation <span class="hljs-keyword">and</span> I have corrupted blair<font></font>
We are all Doomed!!! Democracy <span class="hljs-keyword">is</span> Dead</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要工作记忆中至少有一位诚实的政治家，</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">逻辑上就会断言</font><font style="vertical-align: inherit;">新</font><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">只有至少有一位诚实的政治家才会存在这个目标。</font><font style="vertical-align: inherit;">一旦所有政客都不诚实，该</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象将自动撤回。</font><font style="vertical-align: inherit;">这个规则有10个显着性，以确保它在任何其他规则之前触发，因为在这个阶段，“希望已死”规则实际上是正确的。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例298.诚实的政治家：规则“我们有一个诚实的政治家”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"We have an honest Politician"</span>
    salience <span class="hljs-number">10</span>
    <span class="hljs-keyword">when</span>
        exists( Politician( honest == <span class="hljs-literal">true</span> ) )
    <span class="hljs-keyword">then</span>
        insertLogical( <span class="hljs-keyword">new</span> Hope() );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只要</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象存在，“Hope Lives”规则就会匹配并触发。</font><font style="vertical-align: inherit;">它具有10的显着性，因此它优先于“腐败的诚实”。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例299.诚实的政治家：统治“希望生活”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"Hope Lives"</span>
    salience <span class="hljs-number">10</span>
        <span class="hljs-function"><span class="hljs-keyword">when</span>
            <span class="hljs-title">exists</span>(<span class="hljs-params"> Hope(</span>) )
        then
            System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"><span class="hljs-string">"Hurrah!!! Democracy Lives"</span></span>)</span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既然有希望，而且我们一开始就有四位诚实的政治家，我们对这条规则有四次激活，一切都在冲突中。</font><font style="vertical-align: inherit;">他们将依次开火，腐蚀每个政客，使他们不再诚实。</font><font style="vertical-align: inherit;">当所有四位政客都被腐化时，我们没有政治家</font></font><code>honest == true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，“我们有一个诚实的政治家”的规则不再是真实的，并且它逻辑插入的对象（由于最后一次执行</font></font><code>new Hope()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）被自动收回。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例300.诚实的政治家：规则“腐败诚实”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Corrupt the Honest"</span>
    <span class="hljs-keyword">when</span>
        politician <span class="hljs-symbol">:</span> <span class="hljs-constant">Politician</span>( honest == <span class="hljs-keyword">true</span> )<font></font>
        exists( <span class="hljs-constant">Hope</span>() )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"I'm an evil corporation and I have corrupted "</span> + politician.getName() );<font></font>
        modify ( politician ) { honest = <span class="hljs-keyword">false</span> };
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象被自动收回时，通过真值维护系统，</font></font><code>not</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用于</font><font style="vertical-align: inherit;">的条件元素</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再成立，以便以下规则匹配并触发。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例301.诚实的政治家：规则“希望已死”</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Hope is Dead"</span>
    <span class="hljs-keyword">when</span>
        <span class="hljs-keyword">not</span>( <span class="hljs-constant">Hope</span>() )
    <span class="hljs-keyword">then</span>
        <span class="hljs-constant">System</span>.out.println( <span class="hljs-string">"We are all Doomed!!! Democracy is Dead"</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们来看看这个应用程序的审计跟踪：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/honest_politician_audit.png" alt="诚实的政治家审计">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图320.诚实的政治家示例审计视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们插入第一位政治家的那一刻，我们有两次激活。</font><font style="vertical-align: inherit;">对于第一个插入的政治家来说，“我们有一个诚实的政治家”的规则只被激活一次，因为它使用了一个</font></font><code>exists</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素，对于任何数字都匹配一次。</font><font style="vertical-align: inherit;">在此阶段也会激活“希望已死”规则，因为我们尚未插入</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">规则“我们有一个诚实的政治家”首先开火，因为它具有比“希望死了”更高的显着性，它插入了</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">物体。</font><font style="vertical-align: inherit;">（该动作突出显示为绿色。）插入</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象激活“希望生活”并取消激活“希望死了”; </font><font style="vertical-align: inherit;">它还激活了每个插入诚实的政治家的“腐败诚实”。</font><font style="vertical-align: inherit;">规则“希望生活”执行，打印“Hurray !!! Democracy Lives”。</font><font style="vertical-align: inherit;">然后，对于每个政治家，规则“腐败诚实”火灾，打印“我是一个邪恶的公司，我已经腐化了X”，其中X是政治家的名字，并将政治家的诚实价值修改为虚假。</font><font style="vertical-align: inherit;">当最后一位诚实的政治家被腐败时，</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由真相维护系统自动收回，如蓝色突出显示的区域所示。</font><font style="vertical-align: inherit;">绿色突出显示区域显示当前所选蓝色突出显示区域的原点。</font><font style="vertical-align: inherit;">一旦</font></font><code>Hope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实被撤回，“希望已经死亡”激活并激活打印“ </font><font style="vertical-align: inherit;">我们都是注定的!!! </font><font style="vertical-align: inherit;">民主是死的“。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_sudoku_example"><a class="anchor" href="index.html#_sudoku_example"></a><a class="link" href="index.html#_sudoku_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9。</font><font style="vertical-align: inherit;">数独示例</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Sudoku</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.sudoku</span><span class="hljs-class">.SudokuExample</span>
<span class="hljs-tag">Type</span>: <span class="hljs-tag">Java</span> <span class="hljs-tag">application</span>
<span class="hljs-tag">Rules</span> <span class="hljs-tag">file</span>: <span class="hljs-tag">sudoku</span><span class="hljs-class">.drl</span>, <span class="hljs-tag">validate</span><span class="hljs-class">.drl</span>
<span class="hljs-tag">Objective</span>: <span class="hljs-tag">Demonstrates</span> <span class="hljs-tag">the</span> <span class="hljs-tag">solving</span> <span class="hljs-tag">of</span> <span class="hljs-tag">logic</span> <span class="hljs-tag">problems</span>, <span class="hljs-tag">and</span> <span class="hljs-tag">complex</span> <span class="hljs-tag">pattern</span> <span class="hljs-tag">matching</span>.</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例演示了如何使用Drools基于许多约束在大型潜在解决方案空间中查找解决方案。</font><font style="vertical-align: inherit;">我们使用Sudoku的流行拼图。</font><font style="vertical-align: inherit;">此示例还显示了如何将Drools集成到图形界面中以及如何使用回调与正在运行的Drools引擎进行交互，以便根据运行时工作内存中的更改来更新图形界面。</font></font></p>
</div>
<div class="sect3">
<h4 id="_sudoku_overview"><a class="anchor" href="index.html#_sudoku_overview"></a><a class="link" href="index.html#_sudoku_overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9.1。</font><font style="vertical-align: inherit;">数独概述</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数独是一个基于逻辑的数字放置难题。</font><font style="vertical-align: inherit;">目标是填充9x9网格，以便每个列，每行和九个3x3区域中的每一个包含1到9的数字，一次，只有一次。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拼图设置器提供了部分完成的网格，拼图解算器的任务是使用这些约束来完成网格。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决问题的一般策略是确保在插入新数字时，它在特定的3x3区域，行和列中应该是唯一的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更详细的说明，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="http://en.wikipedia.org/wiki/Sudoku"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_running_the_example"><a class="anchor" href="index.html#_running_the_example"></a><a class="link" href="index.html#_running_the_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9.2。</font><font style="vertical-align: inherit;">运行示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载并安装如上所述的drools-examples，然后执行</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">java org.drools.examples.DroolsExamplesApp</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 并单击“SudokuExample”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该窗口包含一个空网格，但该程序附带了许多内部存储的网格，可以加载和解决。</font><font style="vertical-align: inherit;">单击“文件”，然后单击“样本”并选择“简单”以加载其中一个示例。</font><font style="vertical-align: inherit;">请注意，在加载网格之前，所有按钮都将被禁用。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/sudoku1.png" alt="sudoku1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图321.初始屏幕</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载“简单”示例根据拼图的初始状态填充网格。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/sudoku2.png" alt="sudoku2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图322.加载“简单”后</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“解决”按钮，基于Drools的引擎将填写剩余值，按钮将再次处于非活动状态。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/sudoku3.png" alt="sudoku3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图323.“简单”解决了</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，您可以单击“步骤”按钮以查看规则集找到的下一个数字。</font><font style="vertical-align: inherit;">“控制台”窗口将显示有关正在执行以解决人类可读形式中的步骤的规则的详细信息。</font><font style="vertical-align: inherit;">下面介绍了这些消息的一些示例。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单身8在[0,1]</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由[1,2]引起的列消除：从[4,2]中删除9</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[1,2]隐藏单曲9</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因[2,8]而删除行：从[2,4]中删除7</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在[3,2]和[3,7]由于裸对而从[3,8]中删除6</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
隐藏在[4,6]和[4,4]的行中</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“转储”按钮以查看网格的状态，单元格显示已建立的值或剩余的可能性。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">       Col：0 Col：1 Col：2 Col：3 Col：4 Col：5 Col：6 Col：7 Col：8</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第0行：2 4 7 9 2 456 4567 9 23 56 9 --- 5 --- --- 1 --- 3 67 9 --- 8 --- 4 67</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第1行：12 7 9 --- 8 --- 1 67 9 23 6 9 --- 4 --- 23 67 1 3 67 9 3 67 9 --- 5 ---</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第2行：1 4 7 9 1 456 --- 3 --- 56 89 5 78 5678 --- 2 --- 4 67 9 1 4 67</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第3行：1234 12345 1 45 12 5 8 --- 6 --- 2 5 78 5 78 45 7 --- 9 ---</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第4行：--- 6 --- --- 7 --- 5 --- 4 --- 2 5 8 --- 9 --- 5 8 --- 1 --- --- 3  -  - </font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第5行：--- 8 --- 12 45 1 45 9 12 5 --- 3 --- 2 5 7 567 4567 2 4 67</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第6行：1 3 7 1 3 6 --- 2 --- 3 56 8 5 8 3 56 8 --- 4 --- 3 567 9 1 678</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第7行：--- 5 --- 1 34 6 1 4 678 3 6 8 --- 9 --- 34 6 8 1 3 678 --- 2 --- 1 678</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
第8行：34 --- 9 --- 4 6 8 --- 7 --- --- 1 --- 23456 8 3 56 8 3 56 6 8</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，让我们加载故意无效的数独网格。</font><font style="vertical-align: inherit;">点击“文件”，“样品”和“！DELIBERATELY BROKEN！”。</font><font style="vertical-align: inherit;">请注意，此网格以某些问题开始，例如值5在第一行中出现两次。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/sudoku4.png" alt="sudoku4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图324.初始状态破坏</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些简单的规则在加载网格后立即执行完整性检查。</font><font style="vertical-align: inherit;">在这种情况下，标准输出上会打印以下消息：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cell [0,8]：5在第0行中有重复</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cell [0,0]：5在第0行中有重复</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cell [6,0]：8在col 0中有重复</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cell [4,0]：8在col 0中有重复</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
验证完成。</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，单击“求解”按钮将解决规则应用于此无效网格。</font><font style="vertical-align: inherit;">这不会完成; </font><font style="vertical-align: inherit;">有些细胞仍然空着。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/sudoku5.png" alt="sudoku5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图325.破碎的“已解决”状态</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过使用实现标准求解技术的规则来实现求解功能。</font><font style="vertical-align: inherit;">它们基于仍然是单元格候选的值集合。</font><font style="vertical-align: inherit;">例如，如果这样的集合包含单个值，则这是该单元格的值。</font><font style="vertical-align: inherit;">不太明显的是在九个单元组中的一个组中单独出现一个值。</font><font style="vertical-align: inherit;">检测这些情况的规则会插入类型设置的事实，其中包含某些特定单元格的解决方案值。</font><font style="vertical-align: inherit;">该事实导致从该单元所属的任何组中的所有其他单元中消除该值。</font><font style="vertical-align: inherit;">最后，它被收回了。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他规则仅减少某些单元格的允许值。</font><font style="vertical-align: inherit;">规则“裸对”，“在行中隐藏对”，“在列中隐藏对”和“在方形中隐藏对”仅仅消除了可能性，但没有建立解决方案。</font><font style="vertical-align: inherit;">通过“行中的X翼”，“列中的X翼”，“交叉点移除行”和“交叉点移除列”完成更复杂的消除。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_java_source_and_rules_overview"><a class="anchor" href="index.html#_java_source_and_rules_overview"></a><a class="link" href="index.html#_java_source_and_rules_overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9.3。</font><font style="vertical-align: inherit;">Java源和规则概述</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java源代码可以在/ src / main / java / org / drools / examples / sudoku目录中找到，两个DRL文件定义了/ src / main / rules / org / drools / examples / sudoku中的规则目录。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该软件包</font></font><code>org.drools.examples.sudoku.swing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含一组实现Sudoku难题框架的类。</font><font style="vertical-align: inherit;">请注意，此包与Drools库没有任何依赖关系。</font></font><code>SudokuGridModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义了一个接口，可以实现将Sudoku难题存储为9x9 </font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">网格</font><font style="vertical-align: inherit;">。</font></font><code>SudokuGridView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个Swing组件，可以可视化任何实现</font></font><code>SudokuGridModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>SudokuGridEvent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>SudokuGridListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在模型和视图之间传递状态更改：在解析或更改单元格的值时触发事件。</font><font style="vertical-align: inherit;">如果您熟悉其他Swing组件中的模型 - 视图 - 控制器模式，</font></font><code>JTable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么这种模式应该是熟悉的。</font></font><code>SudokuGridSamples</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为演示目的提供了一些部分填充的数独谜题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包中</font></font><code>org.drools.examples.sudoku.rules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含一个实用程序类，其中包含编译DRL文件的方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该包装</font></font><code>org.drools.examples.sudoku</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括一组执行的基本类</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象和它的各种聚合：所述</font></font><code>CellFile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亚型</font></font><code>CellRow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>CellCol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code>CellSqr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所有这些都是亚型</font></font><code>CellGroup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是有趣的是，</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>CellGroup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的子类</font></font><code>SetOfNine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它提供了一个属性</font></font><code>free</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与类型</font></font><code>Set&lt;Integer&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因为</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它代表个人候选集; </font><font style="vertical-align: inherit;">对于</font></font><code>CellGroup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集合，它是其单元的所有候选集合的并集，或者简单地说，仍然需要分配的数字集合。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用81 </font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">个27 </font></font><code>CellGroup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目的和通过所提供的联动</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性   </font></font><code>cellRow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>cellCol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code>cellSqr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和所述</font></font><code>CellGroup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font><code>cells</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的列表，</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，则它是可以编写检测允许值的分配，以细胞或值的消除的具体情况的规则从一些候选人集。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类的对象</font></font><code>Setting</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于触发伴随值分配的操作：从候选的兄弟单元和相关的单元组中移除它。</font><font style="vertical-align: inherit;">此外，在</font></font><code>Setting</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应该检测新情况的所有规则中都使用</font><font style="vertical-align: inherit;">了</font><font style="vertical-align: inherit;">事实</font><font style="vertical-align: inherit;">的存在</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">这是为了避免对不一致的中间状态的反应。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>Stepping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当“步骤”没有定期终止时，在低优先级规则中使用</font><font style="vertical-align: inherit;">类的对象</font><font style="vertical-align: inherit;">来执行紧急停止。</font><font style="vertical-align: inherit;">这表明该程序无法解决这个难题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该类</font></font><code>org.drools.examples.sudoku.SudokuExample</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现了一个组合所描述组件的Java应用程序。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_sudoku_validator_rules_validate_drl"><a class="anchor" href="index.html#_sudoku_validator_rules_validate_drl"></a><a class="link" href="index.html#_sudoku_validator_rules_validate_drl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9.4。</font><font style="vertical-align: inherit;">数独验证器规则（validate.drl）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证规则检测单元组中的重复数字。</font><font style="vertical-align: inherit;">它们被组合在一个议程组中，使我们能够在加载拼图后明确地激活它们。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三个规则“在单元格中复制......”非常相似。</font><font style="vertical-align: inherit;">第一个模式定位具有分配值的单元格。</font><font style="vertical-align: inherit;">第二个模式拉入该单元所属的三个单元组中的任何一个。</font><font style="vertical-align: inherit;">最终模式将找到与第一个单元格具有相同值并且分别在同一行，列或方形中的单元格（除了第一个单元格之外）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“终止组”最后触发。</font><font style="vertical-align: inherit;">它打印一条消息并停止呼叫。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_sudoku_solving_rules_sudoku_drl"><a class="anchor" href="index.html#_sudoku_solving_rules_sudoku_drl"></a><a class="link" href="index.html#_sudoku_solving_rules_sudoku_drl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.9.5。</font><font style="vertical-align: inherit;">数独解决规则（sudoku.drl）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此文件中有三种类型的规则：一个组处理一个数字到一个单元的分配，另一个组检测可行的分配，第三个组从候选集中消除值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“设置值”，“从单元格中消除值”和“缩进设置”取决于</font></font><code>Setting</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的存在</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一个规则处理对单元格的赋值以及从单元格的三个组的“空闲”集中删除值的操作。</font><font style="vertical-align: inherit;">此外，它递减一个计数器，当为零时，将控制权返回给已调用的Java应用程序</font></font><code>fireUntilHalt()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">规则“从Cell中消除值”的目的是减少与新分配的单元相关的所有单元的候选列表。</font><font style="vertical-align: inherit;">最后，当完成所有淘汰后，规则“缩回设置”缩回触发</font></font><code>Setting</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有两个规则可以检测到可以为单元分配数字的情况。</font><font style="vertical-align: inherit;">对于</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有包含单个数字的候选集的a，</font><font style="vertical-align: inherit;">规则“单个”触发</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当没有单个候选者的单元格但是当存在包含候选者的单元格但是该单元格所属的三个组之一中的所有其他单元格中不存在该候选者时，规则“隐藏单个”会触发。</font><font style="vertical-align: inherit;">这两个规则都创建并插入</font></font><code>Setting</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事实。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自最大规则组的规则单独或以两个或三个为一组实施各种解决技术，因为它们在手动解决数独谜题时使用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则“裸对”在一组的两个单元中检测大小为2的相同候选集; </font><font style="vertical-align: inherit;">可以从该组的所有其他候选集中移除这两个值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个类似的想法激发了三个规则“隐藏在......中”; </font><font style="vertical-align: inherit;">在这里，规则在组的恰好两个单元格中查找两个数字的子集，在该组的任何其他单元格中都没有出现任何值。</font><font style="vertical-align: inherit;">这意味着可以从包含隐藏对的两个单元中消除所有其他候选者。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一对规则处理行和列中的“X翼”。</font><font style="vertical-align: inherit;">如果两个不同的行（或列）中的每个行中只有两个可能的单元格，并且这些候选单元也位于相同的列（或行）中，则列（或行）中此值的所有其他候选单元可以是淘汰。</font><font style="vertical-align: inherit;">如果您遵循其中一个规则中的模式序列，您将看到如何通过诸如“相同”或“仅”之类的单词方便地表达的条件会产生具有适当约束的模式或带有“not”前缀的模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则对“交叉点移除...”基于一个方格内某个数字的限制出现，无论是在单行还是在单个列中。</font><font style="vertical-align: inherit;">这意味着该数字必须位于行或列的两个或三个单元格之一中; </font><font style="vertical-align: inherit;">因此，它可以从该组的所有其他单元的候选集中移除。</font><font style="vertical-align: inherit;">该模式确定受限制的发生，然后为正方形外的每个单元格和同一单元格文件中的单元格触发。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些规则对于许多人来说已经足够了，但肯定不适用于所有数独游戏。</font><font style="vertical-align: inherit;">要解决非常困难的网格，需要使用更复杂的规则扩展规则集。</font><font style="vertical-align: inherit;">（最终，除了试错之外，还有一些难题无法解决。）</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_number_guess"><a class="anchor" href="index.html#_number_guess"></a><a class="link" href="index.html#_number_guess"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.10。</font><font style="vertical-align: inherit;">数字猜猜</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Number</span> <span class="hljs-tag">Guess</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.examples</span><span class="hljs-class">.numberguess</span><span class="hljs-class">.NumberGuessExample</span>
<span class="hljs-tag">Module</span>: <span class="hljs-tag">droolsjbpm-integration-examples</span> (<span class="hljs-tag">Note</span>: <span class="hljs-tag">this</span> <span class="hljs-tag">is</span> <span class="hljs-tag">in</span> <span class="hljs-tag">a</span> <span class="hljs-tag">different</span> <span class="hljs-tag">download</span>, <span class="hljs-tag">the</span> <span class="hljs-tag">droolsjbpm-integration</span> <span class="hljs-tag">download</span>.)
<span class="hljs-tag">Type</span>: <span class="hljs-tag">Java</span> <span class="hljs-tag">application</span>
<span class="hljs-tag">Rules</span> <span class="hljs-tag">file</span>: <span class="hljs-tag">NumberGuess</span><span class="hljs-class">.drl</span>
<span class="hljs-tag">Objective</span>: <span class="hljs-tag">Demonstrate</span> <span class="hljs-tag">use</span> <span class="hljs-tag">of</span> <span class="hljs-tag">Rule</span> <span class="hljs-tag">Flow</span> <span class="hljs-tag">to</span> <span class="hljs-tag">organise</span> <span class="hljs-tag">Rules</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Number Guess”示例显示了规则流的使用，这是一种控制规则触发顺序的方法。</font><font style="vertical-align: inherit;">它使用广泛理解的工作流程图来定义执行规则组的顺序。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子302.创建Number Guess RuleBase：NumberGuessExample.main（） - 第1部分</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">final</span> KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();<font></font>
kbuilder.add( ResourceFactory.newClassPathResource( <span class="hljs-string">"NumberGuess.drl"</span>,<font></font>
                                                    ShoppingExample.class ),<font></font>
              ResourceType.DRL );<font></font>
kbuilder.add( ResourceFactory.newClassPathResource( <span class="hljs-string">"NumberGuess.rf"</span>,<font></font>
                                                    ShoppingExample.class ),<font></font>
              ResourceType.DRF );<font></font>
<font></font>
<span class="hljs-keyword">final</span> KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase();<font></font>
kbase.addKnowledgePackages( kbuilder.getKnowledgePackages() );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包的创建和规则的加载（使用该</font></font><code>add()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法）与前面的示例相同。</font><font style="vertical-align: inherit;">还有一行可以添加规则流（</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuess.rf</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
），它提供了为同一个KIE库指定不同规则流的选项。</font><font style="vertical-align: inherit;">否则，以与以前相同的方式创建KIE库。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子303.启动RuleFlow：NumberGuessExample.main（） - 第2部分</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">final</span> StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();<font></font>
<font></font>
KnowledgeRuntimeLogger logger =<font></font>
  KnowledgeRuntimeLoggerFactory.newFileLogger(ksession, <span class="hljs-string">"log/numberguess"</span>);<font></font>
<font></font>
ksession.insert( <span class="hljs-keyword">new</span> GameRules( <span class="hljs-number">100</span>, <span class="hljs-number">5</span> ) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> RandomNumber() );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Game() );<font></font>
<font></font>
ksession.startProcess( <span class="hljs-string">"Number Guess"</span> );<font></font>
ksession.fireAllRules();<font></font>
<font></font>
logger.close();<font></font>
<font></font>
ksession.dispose();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦我们拥有KIE基础，我们就可以使用它来获得有状态会话。</font><font style="vertical-align: inherit;">在我们的会话中，我们插入事实，即标准Java对象。</font><font style="vertical-align: inherit;">（为简单起见，在此示例中，这些类都包含在我们的</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuessExample.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 文件中</font><em class="path"><font style="vertical-align: inherit;">.Class</font></em></font><code>GameRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了允许的最大范围和猜测次数</font><em class="path"><font style="vertical-align: inherit;">.Class</font></em></font><code>RandomNumber</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动生成0到100之间的数字，并使其可用于我们的规则，通过该</font></font><code>getValue()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">插入</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.Class记录我们之前做出的猜测及其编号。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，在我们调用标准</font></font><code>fireAllRules()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法之前，我们还通过该</font></font><code>startProcess()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">启动之前加载的进程</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当我们讨论规则流文件和下面的图形规则流编辑器时，我们将学习在何处获取我们传递的参数（“Number Guess”，即规则流的标识符）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们完成对Java代码的讨论之前，我们注意到在一些实际应用程序中，我们将检查对象的最终状态。</font><font style="vertical-align: inherit;">（在这里，我们可以检索猜测的数量，将其添加到高分表中。）对于此示例，我们满足于确保通过调用</font></font><code>dispose()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">清除工作内存会话</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/numberguess-ruleflow.png" alt="numberguess规则流">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图326. NumberGuess示例的RuleFlow</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">
 在Drools IDE中</font><font style="vertical-align: inherit;">打开</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuess.rf</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件（如果您在Eclipse中正确安装了JBoss Rules扩展），您应该看到上面的图，类似于标准流程图。</font><font style="vertical-align: inherit;">它的图标与JBoss jBPM工作流产品中的图标类似（但不完全相同）。</font><font style="vertical-align: inherit;">如果您希望编辑图表，IDE中图表左侧应该有一个可用组件菜单，称为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调色板</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该图使用XStream以XML（几乎）人类可读的格式保存。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果尚未打开，请确保在IDE中显示“属性视图”。</font><font style="vertical-align: inherit;">可以通过单击“窗口”，然后“显示视图”和“其他”打开它，您可以在其中选择“属性”视图。</font><font style="vertical-align: inherit;">如果</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择规则流中的任何项目</font><em><font style="vertical-align: inherit;">之前</font></em><font style="vertical-align: inherit;">执行此操作</font><font style="vertical-align: inherit;">（或单击规则流中的空白区域），则应显示以下属性集。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/numberguess-ruleflow-properties.png" alt="numberguess规则流属性">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图327. Number Guess规则流的属性</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在我们逐步完成示例的规则流程时，请关注“属性视图”，因为它提供了有价值的信息。</font><font style="vertical-align: inherit;">在这种情况下，它为我们提供了在我们调用时在早期代码片段中使用的规则流程过程的标识</font></font><code>session.startProcess()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在“Number Guess”规则流程中，我们遇到了几种节点类型，其中许多都是通过图标标识的。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“开始”节点（绿色圆圈中的白色箭头）和“结束”节点（红色框）标记规则流的开头和结尾。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“规则流组”框（黄色，没有图标）表示我们将在稍后查看的规则（DRL）文件中定义的规则流组。</font><font style="vertical-align: inherit;">例如，当流到达规则流组“太高”时，只有那些标记有`ruleflow-group属性的规则才有</font></font><code>`"Too High"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能触发。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">动作节点（黄色，齿形图标）执行标准Java方法调用。</font><font style="vertical-align: inherit;">此示例中的大多数操作节点都会调用</font></font><code>System.out.println()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，指示程序向用户的进度。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拆分和加入节点（蓝色椭圆，没有图标），例如“猜猜正确吗？” </font><font style="vertical-align: inherit;">并且“更多猜测加入”分别标记控制流可以根据各种条件分离并重新加入的位置</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">箭头表示各节点之间的流量。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结合规则的各种节点使得Number Guess游戏起作用。</font><font style="vertical-align: inherit;">例如，“猜测”规则流组仅允许触发规则“获取用户猜测”，因为只有该规则具有匹配的属性“ruleflow-group” </font></font><code>`"Guess"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例304.仅在规则流中的特定点触发规则：NumberGuess.drl</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"Get user Guess"</span>
    ruleflow-group <span class="hljs-string">"Guess"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
    <span class="hljs-keyword">when</span><font></font>
        $r : RandomNumber()<font></font>
        rules : GameRules( allowed : allowedGuesses )<font></font>
        game : Game( guessCount &lt; allowed )<font></font>
        <span class="hljs-keyword">not</span> ( Guess() )
    <span class="hljs-keyword">then</span>
        System.out.println( <span class="hljs-string">"You have "</span> + ( rules.allowedGuesses - game.guessCount )<font></font>
                            + <span class="hljs-string">" out of "</span> + rules.allowedGuesses<font></font>
                            + <span class="hljs-string">" guesses left.\nPlease enter your guess from 0 to "</span><font></font>
                            + rules.maxRange );<font></font>
        br = <span class="hljs-keyword">new</span> BufferedReader( <span class="hljs-keyword">new</span> InputStreamReader( System.<span class="hljs-keyword">in</span> ) );<font></font>
        i = br.readLine();<font></font>
        modify ( game ) { guessCount = game.guessCount + <span class="hljs-number">1</span> }<font></font>
        insert( <span class="hljs-keyword">new</span> Guess( i ) );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这条规则的其余部分是相当标准的。</font><font style="vertical-align: inherit;">规则的LHS部分（之后</font></font><code>when</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）声明将为</font></font><code>RandomNumber</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入工作存储器的</font><font style="vertical-align: inherit;">每个</font><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">激活它</font><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">对象</font></font><code>guessCount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小于</font><font style="vertical-align: inherit;">对象并且用户没有猜到正确的数字。</font></font><code>allowedGuesses</code><font style="vertical-align: inherit;"></font><code>GameRules</code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RHS部分（或后果</font></font><code>then</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将消息打印给用户，然后等待用户输入</font></font><code>System.in</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">获得此输入后（</font></font><code>readLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法调用阻塞直到按下返回键）它会修改猜测计数并插入新的猜测，使两者都可用于工作记忆。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则文件的其余部分是相当标准的：包将方言声明为MVEL，并导入各种Java类。</font><font style="vertical-align: inherit;">总共，此文件中有五个规则：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取用户猜测，我们上面检查的规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记录最高猜测的规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记录最低猜测的规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果不正确则检查猜测并从内存中撤回的规则。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一条规则，通知用户所有猜测都已用完。</font></font></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>ruleflow-group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如上所述，</font><font style="vertical-align: inherit;">标准规则和RuleFlow之间的一个集成点是通过</font><font style="vertical-align: inherit;">规则</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性。</font><font style="vertical-align: inherit;">一个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则（.drl）文件和规则流.rf文件之间的集成的第二点</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，拆分节点（蓝色椭圆），可以在工作内存使用值（用规则更新）决定作用的，其流采取。</font><font style="vertical-align: inherit;">要查看其工作原理，请单击“猜测正确的节点”; </font><font style="vertical-align: inherit;">然后在“属性视图”中，单击“约束”属性行后单击右侧出现的按钮，打开“约束编辑器”。</font><font style="vertical-align: inherit;">您应该看到类似于下图的内容。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/numberguess-editconstraints.png" alt="numberguess editconstraints">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图328.“Guess Correct”节点的编辑约束</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“To node Too High”旁边的“Edit”按钮，您将看到如下所示的对话框。</font><font style="vertical-align: inherit;">“文本编辑器”窗口中的值遵循LHS的标准规则格式，并且可以引用工作存储器中的对象。</font><font style="vertical-align: inherit;">结果（RHS）是如果LHS表达式评估为真，则控制流遵循该节点（即，“To node Too High”）。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/numberguess-constraint-toohigh.png" alt="numberguess约束太高了">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图329.“Guess Correct”节点的Constraint Editor：值太高</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuess.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
 包含一个</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法，因此它可以作为标准Java应用程序运行，可以从命令行或通过IDE运行。</font><font style="vertical-align: inherit;">典型的游戏可能会导致下面的交互。</font><font style="vertical-align: inherit;">粗体数字由用户输入。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例305.示例控制台输出，其中数字猜测示例击败了人类！</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">You have <span class="hljs-number">5</span> out of <span class="hljs-number">5</span> guesses left.<font></font>
Please enter your guess from <span class="hljs-number">0</span> to <span class="hljs-number">100</span>
<span class="hljs-number">50</span><font></font>
Your guess was too high<font></font>
You have <span class="hljs-number">4</span> out of <span class="hljs-number">5</span> guesses left.<font></font>
Please enter your guess from <span class="hljs-number">0</span> to <span class="hljs-number">100</span>
<span class="hljs-number">25</span><font></font>
Your guess was too low<font></font>
You have <span class="hljs-number">3</span> out of <span class="hljs-number">5</span> guesses left.<font></font>
Please enter your guess from <span class="hljs-number">0</span> to <span class="hljs-number">100</span>
<span class="hljs-number">37</span><font></font>
Your guess was too low<font></font>
You have <span class="hljs-number">2</span> out of <span class="hljs-number">5</span> guesses left.<font></font>
Please enter your guess from <span class="hljs-number">0</span> to <span class="hljs-number">100</span>
<span class="hljs-number">44</span><font></font>
Your guess was too low<font></font>
You have <span class="hljs-number">1</span> out of <span class="hljs-number">5</span> guesses left.<font></font>
Please enter your guess from <span class="hljs-number">0</span> to <span class="hljs-number">100</span>
<span class="hljs-number">47</span><font></font>
Your guess was too low<font></font>
You have no more guesses<font></font>
The correct guess was <span class="hljs-number">48</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例中发生的事情摘要如下：</font></font></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的方法</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuessExample.java</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载规则库，创建一个状态会话和插入</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>GameRules</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>RandomNumber</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（含有目标数）对象到它。</font><font style="vertical-align: inherit;">该方法还设置我们将要使用的流程，并触发所有规则。</font><font style="vertical-align: inherit;">控制传递到规则流。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuess.rf</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，规则流，从“开始”节点开始。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制传递（通过“更多猜测”连接节点）到Guess节点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Guess节点，启用相应的规则流组（“获取用户猜测”）。</font><font style="vertical-align: inherit;">在这种情况下，</font><font style="vertical-align: inherit;">触发</font><font style="vertical-align: inherit;">规则“Guess”（在</font></font><em class="path"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberGuess.drl</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中）。</font><font style="vertical-align: inherit;">此规则向用户显示消息，接收响应并将其放入工作内存。</font><font style="vertical-align: inherit;">流传递到下一个规则流节点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下一个节点“Guess Correct”，约束检查当前会话并决定采用哪条路径。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果步骤4中的猜测太高或太低，则流程沿着路径前进，该路径具有正常Java代码打印合适消息的动作节点和导致最高猜测或最低猜测规则被触发的规则流程组。</font><font style="vertical-align: inherit;">流程从这些节点传递到步骤6。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果步骤4中的猜测是正确的，我们沿着路径前进到规则流程的末尾。</font><font style="vertical-align: inherit;">在我们到达之前，具有普通Java代码的操作节点打印“您猜对了”的语句。</font><font style="vertical-align: inherit;">这里有一个连接节点（就在规则流结束之前），这样我们的无更多猜测路径（步骤7）也可以终止规则流。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制通过连接节点按照规则流传递，猜测不正确的规则流组（触发规则以从工作存储器中撤回猜测）到“更多猜测”决策节点上。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“更多猜测”决策节点（在规则流的右侧）使用约束，再次查看规则放入工作内存的值，以确定我们是否有更多猜测，如果是，请转到步骤3。如果没有，我们通过规则流程组继续执行规则流程的结束，该规则流程组触发规则“您没有更多的猜测”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">步骤3到7的循环继续，直到数字被正确猜测，或者我们用尽了猜测。</font></font></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_conway_s_game_of_life"><a class="anchor" href="index.html#_conway_s_game_of_life"></a><a class="link" href="index.html#_conway_s_game_of_life"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.11。</font><font style="vertical-align: inherit;">康威的生命游戏</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Name: Conway<span class="hljs-string">'s Game Of Life
Main class: org.drools.examples.conway.ConwayAgendaGroupRun
            org.drools.examples.conway.ConwayRuleFlowGroupRun
Module: droolsjbpm-integration-examples (Note: this is in a different download, the droolsjbpm-integration download.)
Type: Java application
Rules file: conway-ruleflow.drl conway-agendagroup.drl
Objective: Demonstrates '</span>accumulate<span class="hljs-string">', '</span>collect<span class="hljs-string">' and '</span>from<span class="hljs-string">'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">康威的生命游戏，在</font></font><a href="http://en.wikipedia.org/wiki/Conway%E2%80%99s_Game_of_Life" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://en.wikipedia.org/wiki/Conway's_Game_of_Life</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">描述</font></font><a href="http://www.math.com/students/wonders/life/life.html" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> http://www.math.com/students/wonders/life/life.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，是一位着名的细胞自动机，由数学家John Conway于1970年代早期构思。</font><font style="vertical-align: inherit;">虽然该系统众所周知为“康威的生命游戏”，但它根本不是游戏。</font><font style="vertical-align: inherit;">康威的系统更像是一种生活形式的模拟。</font><font style="vertical-align: inherit;">不要被吓倒。</font><font style="vertical-align: inherit;">该系统非常简单，非常有趣。</font><font style="vertical-align: inherit;">数学和计算机科学专业的学生已经对康威的系统感到惊叹已有30多年了。</font><font style="vertical-align: inherit;">这里介绍的应用程序是基于Swing的Conway生命游戏的实现。</font><font style="vertical-align: inherit;">管理系统的规则使用Drools作为业务规则实现。</font><font style="vertical-align: inherit;">本文档将解释驱动模拟的规则并讨论Drools实现的部分内容。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将首先介绍网格视图，如下所示，专为游戏可视化而设计，展示了生活模拟发生的“竞技场”。</font><font style="vertical-align: inherit;">最初网格是空的，这意味着系统中没有活动单元。</font><font style="vertical-align: inherit;">每个细胞活着或死亡，活细胞显示绿色球。</font><font style="vertical-align: inherit;">可以从“模式”下拉列表中选择预选的活细胞模式。</font><font style="vertical-align: inherit;">或者，可以双击单个细胞以在活体和死亡之间切换它们。</font><font style="vertical-align: inherit;">重要的是要了解每个细胞与其相邻细胞相关，这是游戏规则的基础。</font><font style="vertical-align: inherit;">邻居不仅包括左侧，右侧，顶部和底部的单元格，还包括对角连接的单元格，因此每个单元格总共有8个邻居。</font><font style="vertical-align: inherit;">例外是只有三个邻居的四个角落单元，</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/conway1.png" alt="conway1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图330.康威的生命游戏：开始新游戏</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那么这个游戏的基本规则是什么？</font><font style="vertical-align: inherit;">它的目标是一代又一代地展示人口的发展。</font><font style="vertical-align: inherit;">基于对所有细胞的同时评估，每一代都来自前一代。</font><font style="vertical-align: inherit;">这是一套简单的规则，用于管理下一代的外观：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一个活细胞有少于2个活着的邻居，它就会死于孤独。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一个活细胞有超过3个活着的邻居，它就会因过度拥挤而死亡。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一个死细胞正好有3个活着的邻居，它就会复活。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这就是它的全部。</font><font style="vertical-align: inherit;">任何不符合这些标准的单元格都会保留给下一代。</font><font style="vertical-align: inherit;">考虑到这些简单的规则，回过头来再玩一下这个系统并逐步完成几代人，并注意这些规则起到了作用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的屏幕截图显示了一个示例生成，包含许多活动单元格。</font><font style="vertical-align: inherit;">不要担心匹配屏幕截图中显示的确切模式。</font><font style="vertical-align: inherit;">只需将一些单元格组添加到网格中。</font><font style="vertical-align: inherit;">在网格中有活动单元组或选择预先设计的模式后，单击“下一代”按钮并注意会发生什么。</font><font style="vertical-align: inherit;">一些活细胞被杀死（绿球消失），一些死细胞复活（绿球出现）。</font><font style="vertical-align: inherit;">逐步完成几代，看看你是否注意到任何模式。</font><font style="vertical-align: inherit;">如果单击“开始”按钮，系统将自行演变，因此您无需反复单击“下一代”按钮。</font><font style="vertical-align: inherit;">稍微使用系统，然后返回此处以获取有关应用程序如何工作的更多详细信息。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/conway2.png" alt="conway2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图331.康威的生命游戏：正在运行的游戏</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在让我们深入研究代码。</font><font style="vertical-align: inherit;">由于这是一个高级示例，我们假设您现在已经了解了Drools框架的方法，并且能够连接所呈现的突出显示，因此我们只关注高级概述。</font><font style="vertical-align: inherit;">该示例有两种执行方式，一种方法使用议程组来管理执行流，另一种方法使用规则流组来管理执行流。</font><font style="vertical-align: inherit;">这两个版本分别在</font></font><code>ConwayAgendaGroupRun</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">中实现</font></font><code>ConwayRuleFlowGroupRun</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这里，我们将讨论规则流版本，因为它是大多数人将使用的版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象都插入到Session中，并且</font></font><code>ruleflow-group</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“register neighbor”中的规则允许由Rule Flow进程执行。</font><font style="vertical-align: inherit;">这组四个规则</font></font><code>Neighbor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一些细胞与其东北，北部，西北部和西部邻居之间</font><font style="vertical-align: inherit;">建立了</font><font style="vertical-align: inherit;">关系。</font><font style="vertical-align: inherit;">这种关系是双向的，它负责其他四个方向。</font><font style="vertical-align: inherit;">边界细胞不需要任何特殊处理 - 它们根本不会与没有任何特殊处理的邻近细胞配对。</font><font style="vertical-align: inherit;">当所有激活都针对这些规则触发时，所有单元都与其所有相邻单元相关。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例306.康威的生命游戏：注册细胞邻居关系</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">rule "register north east"<font></font>
    ruleflow-group "register neighbor"<font></font>
when<font></font>
    $cell: Cell( $row : row, $col : col )<font></font>
    $northEast : Cell( row  == ($row - 1), col == ( $col + 1 ) )<font></font>
then<font></font>
    <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $cell, $northEast ) );</span>
    <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $northEast, $cell ) );</span>
<span class="hljs-operator"><span class="hljs-keyword">end</span>

rule <span class="hljs-string">"register north"</span>
    ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"register neighbor"</span>
<span class="hljs-keyword">when</span>
    $cell: Cell( $<span class="hljs-keyword">row</span> : <span class="hljs-keyword">row</span>, $<span class="hljs-keyword">col</span> : <span class="hljs-keyword">col</span> )
    $north : Cell( <span class="hljs-keyword">row</span>  == ($<span class="hljs-keyword">row</span> - <span class="hljs-number">1</span>), <span class="hljs-keyword">col</span> == $<span class="hljs-keyword">col</span> )
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $cell, $north ) );</span>
    <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $north, $cell ) );</span>
<span class="hljs-operator"><span class="hljs-keyword">end</span>

rule <span class="hljs-string">"register north west"</span>
    ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"register neighbor"</span>
<span class="hljs-keyword">when</span>
    $cell: Cell( $<span class="hljs-keyword">row</span> : <span class="hljs-keyword">row</span>, $<span class="hljs-keyword">col</span> : <span class="hljs-keyword">col</span> )
    $northWest : Cell( <span class="hljs-keyword">row</span>  == ($<span class="hljs-keyword">row</span> - <span class="hljs-number">1</span>), <span class="hljs-keyword">col</span> == ( $<span class="hljs-keyword">col</span> - <span class="hljs-number">1</span> ) )
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $cell, $northWest ) );</span>
    <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $northWest, $cell ) );</span>
<span class="hljs-operator"><span class="hljs-keyword">end</span>

rule <span class="hljs-string">"register west"</span>
    ruleflow-<span class="hljs-keyword">group</span> <span class="hljs-string">"register neighbor"</span>
<span class="hljs-keyword">when</span>
    $cell: Cell( $<span class="hljs-keyword">row</span> : <span class="hljs-keyword">row</span>, $<span class="hljs-keyword">col</span> : <span class="hljs-keyword">col</span> )
    $west : Cell( <span class="hljs-keyword">row</span>  == $<span class="hljs-keyword">row</span>, <span class="hljs-keyword">col</span> == ( $<span class="hljs-keyword">col</span> - <span class="hljs-number">1</span> ) )
<span class="hljs-keyword">then</span>
    <span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $cell, $west ) );</span>
    <span class="hljs-operator"><span class="hljs-keyword">insert</span>( <span class="hljs-keyword">new</span> Neighbor( $west, $cell ) );</span>
<span class="hljs-operator"><span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入所有单元格后，某些Java代码会将模式应用于网格，将某些单元格设置为Live。</font><font style="vertical-align: inherit;">然后，当用户单击“开始”或“下一代”时，它执行“生成”规则流。</font><font style="vertical-align: inherit;">此规则流负责管理每个生成周期中的所有单元格更改。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/conway_ruleflow_generation.png" alt="conway规则流生成">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图332.康威的生命游戏：规则流“生成”</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则流程首先进入“评估”组，这意味着组中的任何活动规则都可以触发。</font><font style="vertical-align: inherit;">该组中的规则适用于示例开头讨论的生命游戏规则，确定要杀死的细胞和赋予生命的细胞。</font><font style="vertical-align: inherit;">我们使用“阶段”属性来驱动特定规则组的Cell推理; </font><font style="vertical-align: inherit;">通常，阶段与规则流程流程定义中的规则流程组相关联。</font><font style="vertical-align: inherit;">请注意，此时它实际上并没有改变任何对象的状态</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">这是因为它依次评估网格，它必须完成整个评估，直到可以应用这些更改。</font><font style="vertical-align: inherit;">为了达到这个目的，它将细胞设置为“阶段”，它是</font></font><code>Phase.KILL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code>Phase.BIRTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Cell</code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例307.康威的生命游戏：用状态变化评估细胞</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"Kill The Lonely"</span>
    ruleflow-group <span class="hljs-string">"evaluate"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
<span class="hljs-keyword">when</span>
<span class="hljs-regexp">//</span>  A live cell has fewer than <span class="hljs-number">2</span> live neighbors
    <span class="hljs-attribute">theCell</span>: Cell( liveNeighbors &lt; <span class="hljs-number">2</span>, cellState == CellState.LIVE,<font></font>
                   phase == Phase.EVALUATE )<font></font>
<span class="hljs-keyword">then</span><font></font>
    modify( theCell ){<font></font>
        setPhase( Phase.KILL );<font></font>
    }<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"Kill The Overcrowded"</span>
    ruleflow-group <span class="hljs-string">"evaluate"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
<span class="hljs-keyword">when</span>
<span class="hljs-regexp">//</span>  A live cell has more than <span class="hljs-number">3</span> live neighbors
    <span class="hljs-attribute">theCell</span>: Cell( liveNeighbors &gt; <span class="hljs-number">3</span>, cellState == CellState.LIVE,<font></font>
                   phase == Phase.EVALUATE )<font></font>
<span class="hljs-keyword">then</span><font></font>
    modify( theCell ){<font></font>
        setPhase( Phase.KILL );<font></font>
    }<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"Give Birth"</span>
    ruleflow-group <span class="hljs-string">"evaluate"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
<span class="hljs-keyword">when</span>
<span class="hljs-regexp">//</span>  A dead cell has <span class="hljs-number">3</span> live neighbors
    <span class="hljs-attribute">theCell</span>: Cell( liveNeighbors == <span class="hljs-number">3</span>, cellState == CellState.DEAD,<font></font>
                   phase == Phase.EVALUATE )<font></font>
<span class="hljs-keyword">then</span><font></font>
    modify( theCell ){<font></font>
        theCell.setPhase( Phase.BIRTH );<font></font>
    }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估了网格中的</font><font style="vertical-align: inherit;">所有</font><font style="vertical-align: inherit;">对象，我们首先清除任何先前数据更改中发生的任何计算激活。</font><font style="vertical-align: inherit;">这是通过“重置计算”规则完成的，该规则清除“计算”组中的任何激活。</font><font style="vertical-align: inherit;">然后，我们在规则流中输入一个分割，允许“kill”和“birth”组中的任何激活都被触发。</font><font style="vertical-align: inherit;">这些规则负责应用状态更改。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例308.康威的生命游戏：应用状态变化</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">rule <span class="hljs-string">"reset calculate"</span>
    ruleflow-group <span class="hljs-string">"reset calculate"</span>
<span class="hljs-keyword">when</span>
<span class="hljs-keyword">then</span><font></font>
    WorkingMemory wm = drools.getWorkingMemory();<font></font>
    wm.clearRuleFlowGroup( <span class="hljs-string">"calculate"</span> );<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"kill"</span>
    ruleflow-group <span class="hljs-string">"kill"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-attribute">theCell</span>: Cell( phase == Phase.KILL )
<span class="hljs-keyword">then</span><font></font>
    modify( theCell ){<font></font>
        setCellState( CellState.DEAD ),<font></font>
        setPhase( Phase.DONE );<font></font>
    }<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"birth"</span>
    ruleflow-group <span class="hljs-string">"birth"</span>
    <span class="hljs-literal">no</span>-<span class="hljs-keyword">loop</span>
<span class="hljs-keyword">when</span>
    <span class="hljs-attribute">theCell</span>: Cell( phase == Phase.BIRTH )
<span class="hljs-keyword">then</span><font></font>
    modify( theCell ){<font></font>
        setCellState( CellState.LIVE ),<font></font>
        setPhase( Phase.DONE );<font></font>
    }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此阶段，许多</font></font><code>Cell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象已被修改，状态更改为</font></font><code>LIVE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>DEAD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">现在我们可以看到</font></font><code>Neighbor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义细胞关系</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">事实</font><font style="vertical-align: inherit;">的力量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">当细胞变为活着或死亡时，我们使用该</font></font><code>Neighbor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关系迭代所有周围细胞，增加或减少细胞</font></font><code>liveNeighbor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计数。</font><font style="vertical-align: inherit;">任何更改其计数的单元格也将设置为</font></font><code>EVALUATE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阶段，以确保它在规则流程的评估阶段包含在推理中。</font><font style="vertical-align: inherit;">请注意，我们不必自己进行任何迭代; </font><font style="vertical-align: inherit;">只需在我们制定的规则中应用关系，Drools引擎就可以为我们完成所有艰苦的工作，只需要很少的代码。</font><font style="vertical-align: inherit;">一旦确定并为所有单元格设置了实时计数，规则流程就会结束。</font><font style="vertical-align: inherit;">如果用户最初点击了“开始”按钮，引擎将重新启动规则流程; </font><font style="vertical-align: inherit;">否则用户可以请求另一代。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例309.康威的生命游戏：用状态变化评估细胞</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">rule <span class="hljs-string">"Calculate Live"</span>
    ruleflow-group <span class="hljs-string">"calculate"</span><font></font>
    lock-on-active<font></font>
when<font></font>
    theCell: Cell( cellState == CellState.LIVE )<font></font>
    Neighbor( cell == theCell, <span class="hljs-variable">$neighbor</span> : neighbor )
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$neighbor</span> ){
        <span class="hljs-built_in">set</span>LiveNeighbors( <span class="hljs-variable">$neighbor</span>.getLiveNeighbors() + <span class="hljs-number">1</span> ),
        <span class="hljs-built_in">set</span>Phase( Phase.EVALUATE );<font></font>
    }<font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"Calculate Dead"</span>
    ruleflow-group <span class="hljs-string">"calculate"</span><font></font>
    lock-on-active<font></font>
when<font></font>
    theCell: Cell( cellState == CellState.DEAD )<font></font>
    Neighbor( cell == theCell, <span class="hljs-variable">$neighbor</span> : neighbor )
<span class="hljs-keyword">then</span>
    modify( <span class="hljs-variable">$neighbor</span> ){
        <span class="hljs-built_in">set</span>LiveNeighbors( <span class="hljs-variable">$neighbor</span>.getLiveNeighbors() - <span class="hljs-number">1</span> ),
        <span class="hljs-built_in">set</span>Phase( Phase.EVALUATE );<font></font>
    }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invaders"><a class="anchor" href="index.html#_invaders"></a><a class="link" href="index.html#_invaders"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12。</font><font style="vertical-align: inherit;">侵略者</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Space Invaders游戏的简化版本。</font><font style="vertical-align: inherit;">使用键Z和K，向左和向右移动，M用于发射导弹。</font><font style="vertical-align: inherit;">该示例构建了6个项目，每个项目都为最后一个项目添加了更多的复杂性。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Example</span> <span class="hljs-tag">Invaders</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders1Main</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders2Main</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders3Main</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders4Main</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders5Main</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.invaders</span><span class="hljs-class">.Invaders6Main</span></code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/invaders.png" alt="入侵者">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图333. Pong截图</font></font></div>
</div>
<div class="sect3">
<h4 id="_invaders1main"><a class="anchor" href="index.html#_invaders1main"></a><a class="link" href="index.html#_invaders1main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.1。</font><font style="vertical-align: inherit;">Invaders1Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders1Main创建框架并附加KeyListener，将关键事件提供给引擎。</font><font style="vertical-align: inherit;">它还设置了主游戏循环，可以在“Main.drl”中找到。</font><font style="vertical-align: inherit;">整个示例中使用的典型惯例是每个文件具有一个议程组，并且该文件中的所有规则位于同一议程组中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Run事实用于驱动Game循环的重复。</font><font style="vertical-align: inherit;">最初只有一个被评估的组，Keys。</font><font style="vertical-align: inherit;">“keys.drl”文件由多个示例共享，并说明了跨多个项目的规则重用。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子310.游戏循环</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule "init" when<font></font>
then<font></font>
    insert( new Run() );<font></font>
    setFocus( "Init" );<font></font>
end<font></font>
<font></font>
rule GameLoop when<font></font>
    r : Run()<font></font>
then<font></font>
    setFocus( "Keys" );<font></font>
end<font></font>
<font></font>
<font></font>
rule Draw when<font></font>
    r : Run()<font></font>
then<font></font>
    ui.show();<font></font>
    modify( r ) {} // force loop<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_invaders2main"><a class="anchor" href="index.html#_invaders2main"></a><a class="link" href="index.html#_invaders2main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.2。</font><font style="vertical-align: inherit;">Invaders2Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders2Main将“Draw”阶段添加到游戏循环中并绘制SpaceShip</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例311.游戏循环</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule GameLoop when<font></font>
    r : Run()<font></font>
then<font></font>
    setFocus( "Draw" );<font></font>
    setFocus( "Keys" );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_invaders3main"><a class="anchor" href="index.html#_invaders3main"></a><a class="link" href="index.html#_invaders3main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.3。</font><font style="vertical-align: inherit;">Invaders3Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders3Main向飞船添加移动控制，注意船舶移出屏幕边界。</font><font style="vertical-align: inherit;">检测到KeyPressed并在船舶方向上设置dx的增量。</font><font style="vertical-align: inherit;">然后将该delta重复应用于船舶的x位置</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例312.移动船舶</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule ShipDeltaMoveLeft agenda-group "Move" when<font></font>
    s : Ship()<font></font>
        KeyPressed( keyText == "Z" )<font></font>
then<font></font>
    modify( s ) { dx = 0 - s.speed }<font></font>
end<font></font>
<font></font>
rule ShipDeltaStopLeft agenda-group "Move" when<font></font>
    s : Ship()<font></font>
        not KeyPressed( keyText == "Z" )<font></font>
then<font></font>
    modify( s ) { dx = 0 }<font></font>
end<font></font>
<font></font>
rule ShipMove agenda-group "Move" when<font></font>
    s : Ship( dx != 0 )<font></font>
    Run()<font></font>
then<font></font>
    modify( s ) { x = s.x + s.dx }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_invaders4main"><a class="anchor" href="index.html#_invaders4main"></a><a class="link" href="index.html#_invaders4main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.4。</font><font style="vertical-align: inherit;">Invaders4Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders4Main为ShipMove规则添加了boundari控件，因此它不会移出屏幕。</font><font style="vertical-align: inherit;">注意使用“@watch（！x）”，这可以确保在规则将修改x属性时，它不会对x的更改做出反应，这可以避免递归问题。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例313.使用边界移动船舶</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule ShipMove agenda-group "Move" when<font></font>
    s : Ship( dx != 0, x + dx &gt; 0,  x + dx + width &lt; conf.windowWidth ) @watch( !x )<font></font>
    Run()<font></font>
then<font></font>
    modify( s ) { x = s.x + s.dx }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_invaders5main"><a class="anchor" href="index.html#_invaders5main"></a><a class="link" href="index.html#_invaders5main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.5。</font><font style="vertical-align: inherit;">Invaders5Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders5Main更新“绘图”组以绘制5个入侵者。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_invaders6main"><a class="anchor" href="index.html#_invaders6main"></a><a class="link" href="index.html#_invaders6main"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.6。</font><font style="vertical-align: inherit;">Invaders6Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders6Main增添了更多肉食。</font><font style="vertical-align: inherit;">按下“M”键可以发射一个沿着屏幕传播的导弹，同时检查导弹和入侵者之间的移动碰撞。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_invaders4main_2"><a class="anchor" href="index.html#_invaders4main_2"></a><a class="link" href="index.html#_invaders4main_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.12.7。</font><font style="vertical-align: inherit;">Invaders4Main</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Invaders4Main为ShipMove规则添加了boundari控件，因此它不会移出屏幕。</font><font style="vertical-align: inherit;">注意使用“@watch（！x）”，这可以确保在规则将修改x属性时，它不会对x的更改做出反应，这可以避免递归问题。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例314.火力导弹</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule InsertBullet agenda-group "Bullet" when<font></font>
        KeyPressed( keyText == "M" )<font></font>
    s : Ship()<font></font>
    not Bullet()<font></font>
then<font></font>
    b = new Bullet();<font></font>
    b.x = s.x + (s.width/2) - (b.width/2);<font></font>
    b.y = s.y - s.height - b.height;<font></font>
    b.width = conf.bulletWidth;<font></font>
    b.height = conf.bulletHeight;<font></font>
    b.dy = 0 - conf.bulletSpeed;<font></font>
    insert( b );<font></font>
end<font></font>
<font></font>
<font></font>
rule BulletMove agenda-group "Bullet" when<font></font>
    b : Bullet( y &gt; 0 ) @watch( !y )<font></font>
    Run()<font></font>
then<font></font>
    modify( b ) { y = b.y + b.dy }<font></font>
end<font></font>
<font></font>
rule Collision agenda-group "Bullet" when<font></font>
    b : Bullet( ) @watch( y )<font></font>
    i : Invader( x &lt; b.x, x + width &gt; b.x, y &gt; b.y)<font></font>
    Run()<font></font>
then<font></font>
    modify( i ) { alive = false }<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adventures_with_drools"><a class="anchor" href="index.html#_adventures_with_drools"></a><a class="link" href="index.html#_adventures_with_drools"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.13。</font><font style="vertical-align: inherit;">与Drools的冒险</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于Prolog的冒险，在Amzi网站上，</font></font><a href="http://www.amzi.com/AdventureInProlog/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> //www.amzi.com/AdventureInProlog/ </font><font style="vertical-align: inherit;">，我们开始为Drools开发文字冒险游戏。</font><font style="vertical-align: inherit;">它们是理想的，因为它们可以从简单开始，并且随着时间的推移构建复杂性和大小，它们还演示了声明性关系编程的关键方面。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Example</span> <span class="hljs-tag">Text</span> <span class="hljs-tag">Adventure</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.adventure</span><span class="hljs-class">.TextAdventure</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">游戏允许你扮演英雄或怪物。</font><font style="vertical-align: inherit;">如果单击“新窗口”，您可以打开一个窗口作为英雄，另一个窗口作为怪物打开，并同时播放它们。</font><font style="vertical-align: inherit;">游戏允许任何角色在房间内移动，拾取，丢弃或使用东西。</font><font style="vertical-align: inherit;">通过使用退出房间的钥匙可以锁定和解锁门，英雄可以通过使用怪物上的伞来杀死怪物。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在</font></font><a href="http://downloads.jboss.org/drools/videos/text-adventures.swf" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://downloads.jboss.org/drools/videos/text-adventures.swf</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看该示例的8分钟演示和简介</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，视频现在比当前改进的示例要早得多。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/textadventure.png" alt="textadventure">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图334.文本冒险截图</font></font></div>
</div>
<div class="sect3">
<h4 id="_using_the_game"><a class="anchor" href="index.html#_using_the_game"></a><a class="link" href="index.html#_using_the_game"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.13.1。</font><font style="vertical-align: inherit;">使用游戏。</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个操作都遵循关联的Command java类的构造函数参数。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子315. MoveCommand</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  <span class="hljs-annotation">@PropertyReactive</span>
  <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MoveCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Command</span> </span>{<font></font>
<font></font>
      <span class="hljs-annotation">@Position</span>(<span class="hljs-number">1</span>)
      <span class="hljs-keyword">private</span> Character character;<font></font>
<font></font>
      <span class="hljs-annotation">@Position</span>(<span class="hljs-number">2</span>)
      <span class="hljs-keyword">private</span> Room      room;<font></font>
<font></font>
      <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MoveCommand</span><span class="hljs-params">(Character character, Room room)</span> </span>{
          <span class="hljs-keyword">this</span>.character = character;
          <span class="hljs-keyword">this</span>.room = room;<font></font>
      }</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要发出移动操作，请选择“移动”按钮，然后选择退出房间。</font><font style="vertical-align: inherit;">请注意，当您按“移动”时，它会将文本添加到底部的白色条。</font><font style="vertical-align: inherit;">选择退出房间时，它也会添加到白色栏中。</font><font style="vertical-align: inherit;">然后按发送，游戏引擎将执行该命令。</font><font style="vertical-align: inherit;">在内部，它使用反射来实例化Command并将其插入引擎。</font><font style="vertical-align: inherit;">如果选择了不正确的参数，例如多次按退出，则反射将失败，您可以再次尝试。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/MoveCommand.png" alt="MoveCommand">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图335.移动动作</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“事物”列表显示您在房间中可以看到的任何内容，而不是所有内容都可以被拾取。</font><font style="vertical-align: inherit;">例如，你可以拿起钥匙和火炬，但不是怪物。</font><font style="vertical-align: inherit;">当拾取某些东西时，它会从Things列表移动到Inventory List。</font><font style="vertical-align: inherit;">当某些东西掉落时，反之亦然。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/PickUpCommand.png" alt="PickUpCommand">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图336.拾取操作</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">钥匙在办公室里，搬到楼上，进入办公室。</font><font style="vertical-align: inherit;">然后拿起钥匙。</font><font style="vertical-align: inherit;">回到楼下，进入厨房。</font><font style="vertical-align: inherit;">试着走进地下室，注意它被锁定了。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择“使用”操作，选择键，然后选择地下室出口。</font><font style="vertical-align: inherit;">这将打开门，你现在可以走过。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">杀死怪物从休息室拿起雨伞，然后选择“使用”，然后选择imbrella，最后选择怪物。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要忘记打开一个“新窗口”作为怪物玩，虽然你不能离开地下室，直到英雄用钥匙打开它。</font><font style="vertical-align: inherit;">怪物和英雄也可以互相给物品，在每个玩家库存之间移动物品。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_the_code"><a class="anchor" href="index.html#_the_code"></a><a class="link" href="index.html#_the_code"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.13.2。</font><font style="vertical-align: inherit;">代码</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该模型是用Java类编写的。</font><font style="vertical-align: inherit;">每个类都使用@PropertyReactive和@Position。</font><font style="vertical-align: inherit;">@PropertyReactive允许控制模式对哪些字段作出反应，并且@Position将字段映射到参数位置，从而允许模式的位置和命名参数。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子316.游戏世界数据示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@PropertyReactive</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Thing</span> </span>{
    <span class="hljs-annotation">@Position</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> id;<font></font>
<font></font>
    <span class="hljs-annotation">@Position</span>(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">private</span> String name;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Thing</span><span class="hljs-params">(<span class="hljs-keyword">long</span> id, String name)</span> </span>{
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.name = name;<font></font>
    }<font></font>
    ...<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MVEL数据文件用于填充我们的世界，请参阅“data.mvel”。</font><font style="vertical-align: inherit;">您可以编辑此文件以添加新房间，项目和字符以及门锁。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例317.游戏世界数据示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">rooms = [<font></font>
    "basement" : new Room("basement"),<font></font>
    "lounge" : new Room("lounge"),<font></font>
    "kitchen" : new Room("kitchen"),<font></font>
    "ground floor hallway" : new Room("ground floor hallway"),<font></font>
    "bedroom" : new Room("bedroom"),<font></font>
    "office" : new Room("office"),<font></font>
    "first floor hallway" : new Room("first floor hallway")<font></font>
];<font></font>
<font></font>
doors = [<font></font>
    "d1" : new Door( rooms["kitchen"], rooms["basement"] ),<font></font>
    "d2" : new Door( rooms["ground floor hallway"], rooms["lounge"]),<font></font>
    "d4" : new Door( rooms["ground floor hallway"], rooms["kitchen"]),<font></font>
    "d5" : new Door( rooms["ground floor hallway"], rooms[ "first floor hallway"] ),<font></font>
    "d8" : new Door( rooms["first floor hallway"], rooms[ "bedroom"] ),<font></font>
    "d9" : new Door( rooms["first floor hallway"], rooms[ "office"] )<font></font>
];<font></font>
<font></font>
locations = [<font></font>
    "monster" :  new Location( characters["monster"], rooms["basement"] ),<font></font>
    "hero" :  new Location( characters["hero"], rooms["ground floor hallway"] ),<font></font>
    "umbrella" :  new Location( items["umbrella"], rooms["lounge"] ),<font></font>
    "key1" :  new Location( items["key1"], rooms["office"] )<font></font>
];</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">游戏创建命令，将其插入引擎。</font><font style="vertical-align: inherit;">然后，这些命令用于更改世界状态，并且该状态将反映在UI中。</font><font style="vertical-align: inherit;">这些命令可以在“commands.drl”文件中找到。</font><font style="vertical-align: inherit;">以下规则与MoveCommand匹配，如果它有效，它将使移动发生。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例318.移动字符</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule validMove agenda-group "commands" when<font></font>
    mc : MoveCommand( c : character, r : room )<font></font>
    l  : Location( thing == c, ltarget : target ) @watch( !target )<font></font>
    ?connect( d, r, ltarget; )<font></font>
then<font></font>
    exit = new ExitEvent( c, (Room) l.target );<font></font>
    enter = new EnterEvent( c, r );<font></font>
<font></font>
    modify( l ) { target = r };<font></font>
<font></font>
    insert( exit );<font></font>
    insert( enter );<font></font>
<font></font>
    mc.session.channels["output"].send( "You have entered the " + l.target.name + "\n" );<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上面的规则中注意“连接”模式，这实际上是一个查询。</font><font style="vertical-align: inherit;">在MVEL数据文件中，门只用一种方式描述，我们可以使用查询来双向检查连接。</font><font style="vertical-align: inherit;">查询可以在“queries.drl”文件中找到。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例319.连接</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">query connect( Door $d, Room $x, Room $y )<font></font>
    $d := Door($id, $name, $x, $y;)<font></font>
    or<font></font>
    $d :=Door($id, $name, $y, $x;)<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UI的列表框由“UiView.drl”中的规则填充，这些规则依次使用查询。</font><font style="vertical-align: inherit;">以下是当“世界”发生变化时，“事物”列表框的填充方式。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例320.更新UI</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-drl" data-lang="drl">rule updateThings salience 5  when<font></font>
    session : UserSession( $char : character )<font></font>
    things( $char, $things; )<font></font>
then<font></font>
    session.channels["things"].send( $things );<font></font>
end<font></font>
<font></font>
query things(Character $char, List $things)<font></font>
    $char := Character()<font></font>
    Location( $char, $room; )<font></font>
    $things := List() from accumulate( Location($thing, $room; thing != $char),<font></font>
                                       collectList( $thing ) )<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pong"><a class="anchor" href="index.html#_pong"></a><a class="link" href="index.html#_pong"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.14。</font><font style="vertical-align: inherit;">傍</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">经典游戏Pong的转换。</font><font style="vertical-align: inherit;">使用键A，Z和K，M。每次反弹后球应该变快。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Example</span> <span class="hljs-tag">Pong</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.pong</span><span class="hljs-class">.PongMain</span></code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/pong.png" alt="乒乓">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图337. Pong截图</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="_wumpus_world"><a class="anchor" href="index.html#_wumpus_world"></a><a class="link" href="index.html#_wumpus_world"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.15。</font><font style="vertical-align: inherit;">Wumpus World</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">Name</span>: <span class="hljs-tag">Example</span> <span class="hljs-tag">Wumpus</span> <span class="hljs-tag">World</span>
<span class="hljs-tag">Main</span> <span class="hljs-tag">class</span>: <span class="hljs-tag">org</span><span class="hljs-class">.drools</span><span class="hljs-class">.games</span><span class="hljs-class">.wumpus</span><span class="hljs-class">.WumpusWorldMain</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wumpus World是“人工智能：现代方法”一书中涵盖的AI示例。</font><font style="vertical-align: inherit;">当游戏首次开始时，所有细胞都会变灰。</font><font style="vertical-align: inherit;">当你四处走动时，它们变得可见。</font><font style="vertical-align: inherit;">洞穴里有坑，还有金币和金币。</font><font style="vertical-align: inherit;">当你在一个坑旁边时，你将感受到一阵微风，当你在喧嚣旁边时，你会闻到一股恶臭，并在金色旁边看到闪光。</font><font style="vertical-align: inherit;">传感器图标显示在移动按钮上方。</font><font style="vertical-align: inherit;">如果你走进一个坑或wumpus，你就死了。</font><font style="vertical-align: inherit;">有关Wumpus World的更详细概述，</font></font><a href="http://www.cis.temple.edu/~giorgio/cis587/readings/wumpus.shtml" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问http://www.cis.temple.edu/~giorgio/cis587/readings/wumpus.shtml</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关如何创建和运行游戏的20分钟视频，</font></font><a href="http://www.youtube.com/watch?v=4CvjKqUOEzM"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问http://www.youtube.com/watch?v=4CvjKqUOEzM。</font></font></a></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wumpus1.png" alt="wumpus1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图338. Wumpus World</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wumpus2.png" alt="wumpus2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图339.洞穴截图</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wumpus3.png" alt="wumpus3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图340.信号截图</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wumpus4.png" alt="wumpus4">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图341.气味Stench</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/wumpus5.png" alt="wumpus5">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图342.向上移动，Wumpus碰撞</font></font></div>
</div>
</div>
<div class="sect2">
<h3 id="_backward_chaining"><a class="anchor" href="index.html#_backward_chaining"></a><a class="link" href="index.html#_backward_chaining"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16。</font><font style="vertical-align: inherit;">逆向链接</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反向链接规则系统是目标驱动的。</font><font style="vertical-align: inherit;">这意味着系统以引擎试图满足的结论开始。</font><font style="vertical-align: inherit;">如果它不能这样做，它会搜索子目标，即完成当前目标的一部分的结论。</font><font style="vertical-align: inherit;">它继续这个过程，直到满足初始结论或没有更多不满意的子目标。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prolog</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个反向链接引擎的例子。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/BackwardChainingChart.png" alt="BackwardChainingChart">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图343.后向链表</font></font></div>
</div>
<div class="sect3">
<h4 id="_backward_chaining_systems"><a class="anchor" href="index.html#_backward_chaining_systems"></a><a class="link" href="index.html#_backward_chaining_systems"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.1。</font><font style="vertical-align: inherit;">后向链系统</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Backward-Chaining是最近添加到JBoss Rules Engine的一个功能。</font><font style="vertical-align: inherit;">这个过程通常被称为派生查询，并且与反应系统相比它并不常见，因为JBoss Rules主要是反应式正向链接。</font><font style="vertical-align: inherit;">也就是说，它会响应您数据的变化。</font><font style="vertical-align: inherit;">添加到引擎的后向链接用于类似产品的派生。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_cloning_transitive_closures"><a class="anchor" href="index.html#_cloning_transitive_closures"></a><a class="link" href="index.html#_cloning_transitive_closures"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.2。</font><font style="vertical-align: inherit;">克隆传递闭包</font></font></a></h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ReasoningGraph.png" alt="ReasoningGraph">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图344.推理图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上图显示了House的传递项目示例。</font><font style="vertical-align: inherit;">可以通过实施以下规则来创建类似的推理图表：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.首先，创建一些java规则来开发可传递项的推理。</font><font style="vertical-align: inherit;">它插入每个位置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.接下来，创建</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Location</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类; </font><font style="vertical-align: inherit;">它有项目和它所在的位置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.键入House示例的规则，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"office"</span>, <span class="hljs-string">"house"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"kitchen"</span>, <span class="hljs-string">"house"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"knife"</span>, <span class="hljs-string">"kitchen"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"cheese"</span>, <span class="hljs-string">"kitchen"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"desk"</span>, <span class="hljs-string">"office"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"chair"</span>, <span class="hljs-string">"office"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"computer"</span>, <span class="hljs-string">"desk"</span>) );<font></font>
ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"drawer"</span>, <span class="hljs-string">"desk"</span>) );</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.创建传递设计，其中项目位于其指定位置，例如位于“办公室”中的“桌子”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TransitiveReasoningGraph.png" alt="TransitiveReasoningGraph">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图345.房屋的传递推理图</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_defining_a_query"><a class="anchor" href="index.html#_defining_a_query"></a><a class="link" href="index.html#_defining_a_query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.3。</font><font style="vertical-align: inherit;">定义查询</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.创建查询以查看插入Drools引擎的数据：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
  <span class="hljs-constant">Location</span>( x, y; )
  <span class="hljs-keyword">or</span>
  ( <span class="hljs-constant">Location</span>( z, y; ) <span class="hljs-keyword">and</span> isContainedIn( x, z; ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意查询是如何递归的并且调用“isContainedIn”。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.创建规则以打印插入系统的每个字符串，以查看实现方式。</font><font style="vertical-align: inherit;">该规则应类似于以下格式：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"go"</span> salience <span class="hljs-number">10</span>
<span class="hljs-keyword">when</span>
  <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">String</span>( )
<span class="hljs-keyword">then</span>
  <span class="hljs-constant">System</span>.out.println( <span class="hljs-variable">$s</span> );
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.使用步骤2作为模型，创建一个调用步骤1查询“isContainedIn”的规则。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"go1"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
  <span class="hljs-title">String</span>(<span class="hljs-params"> <span class="hljs-keyword">this</span> == <span class="hljs-string">"go1"</span> </span>)
  <span class="hljs-title">isContainedIn</span>(<span class="hljs-params"><span class="hljs-string">"office"</span>, <span class="hljs-string">"house"</span>; </span>)
then
  System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"office is in the house"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当第一个字符串插入引擎时，将触发“go1”规则。</font><font style="vertical-align: inherit;">也就是说，它询问项目“办公室”是否在“房屋”的位置。</font><font style="vertical-align: inherit;">因此，插入“go1”字符串时，前一个规则会引发第1步查询。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.创建“go1”，将其插入引擎，然后调用fireAllRules。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">         ksession.insert( <span class="hljs-string">"go1"</span> );<font></font>
ksession.fireAllRules();<font></font>
---<font></font>
go1<font></font>
office <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the house</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">---线表示引擎输出与“go”规则和“go1”规则的触发之间的分离。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_transitive_closure_example"><a class="anchor" href="index.html#_transitive_closure_example"></a><a class="link" href="index.html#_transitive_closure_example"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.4。</font><font style="vertical-align: inherit;">传递闭包示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.通过实现以下规则创建传递闭包：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"go2"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
  <span class="hljs-title">String</span>(<span class="hljs-params"> <span class="hljs-keyword">this</span> == <span class="hljs-string">"go2"</span> </span>)
  <span class="hljs-title">isContainedIn</span>(<span class="hljs-params"><span class="hljs-string">"drawer"</span>, <span class="hljs-string">"house"</span>; </span>)
then
  System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"Drawer in the House"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.回想一下Cloning Transitive Closure的主题，“house”中没有“抽屉”的实例。</font><font style="vertical-align: inherit;">“抽屉”位于“办公桌”。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TransitiveReasoningGraph2.png" alt="TransitiveReasoningGraph2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图346.抽屉的传递推理图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.使用上一个查询来获取此递归信息。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
  <span class="hljs-constant">Location</span>( x, y; )
  <span class="hljs-keyword">or</span>
  ( <span class="hljs-constant">Location</span>( z, y; ) <span class="hljs-keyword">and</span> isContainedIn( x, z; ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.创建“go2”，将其插入引擎，然后调用fireAllRules。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">ksession.insert( <span class="hljs-string">"go2"</span> );<font></font>
ksession.fireAllRules();<font></font>
---<font></font>
go2<font></font>
Drawer <span class="hljs-keyword">in</span> the House</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当规则被触发时，它正确地告诉你已插入“go2”并且“抽屉”在“房子”中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.检查发动机如何确定这一结果</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询必须递归几个级别以确定这一点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询使用</font><strong><font style="vertical-align: inherit;">（z，y;）</font></strong><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">而不是使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Location（x，y;）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">因为“drawer”不在“house”中。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ž</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前未绑定的，这意味着它没有价值，并将返回的一切，是在争论。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">y</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前必然会出现“房子”，所以</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将返回“办公室”和“厨房”。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果“抽屉”在“办公室”中，则从“办公室”收集信息并递归检查。</font><font style="vertical-align: inherit;">正在为以下参数调用以下查询行：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isContainedIn（x，z;）</font></font></strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“办公室”中没有“抽屉”的实例; </font><font style="vertical-align: inherit;">因此，它不匹配。</font><font style="vertical-align: inherit;">如果z未绑定，它将返回“办公室”内的数据，并将收集</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z ==桌面</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">isContainedIn(x==drawer, z==desk)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">isContainedIn recurses三次。</font><font style="vertical-align: inherit;">在最后的递归中，实例触发“桌子”中的“抽屉”。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs"> Location(x==drawer, y==desk)</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这匹配在第一个位置并且重新进行备份，因此我们知道“抽屉”在“桌子”中，“桌子”在“办公室”中，“办公室”在“房子”中。</font><font style="vertical-align: inherit;">因此，“抽屉”在“房子”中并返回true。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_reactive_transitive_queries"><a class="anchor" href="index.html#_reactive_transitive_queries"></a><a class="link" href="index.html#_reactive_transitive_queries"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.5。</font><font style="vertical-align: inherit;">反应性传递查询</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.通过实施以下规则创建反应性传递查询：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"go3"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
  <span class="hljs-title">String</span>(<span class="hljs-params"> <span class="hljs-keyword">this</span> == <span class="hljs-string">"go3"</span> </span>)
  <span class="hljs-title">isContainedIn</span>(<span class="hljs-params"><span class="hljs-string">"key"</span>, <span class="hljs-string">"office"</span>; </span>)
then
  System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"Key in the Office"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使无法满足​​答案，反应性传递查询也可以提出问题。</font><font style="vertical-align: inherit;">之后，如果满意，它将返回答案。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.对此反应信息使用相同的查询。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
  <span class="hljs-constant">Location</span>( x, y; )
  <span class="hljs-keyword">or</span>
  ( <span class="hljs-constant">Location</span>( z, y; ) <span class="hljs-keyword">and</span> isContainedIn( x, z; ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.创建“go3”，将其插入引擎，然后调用fireAllRules。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs css"><span class="hljs-tag">ksession</span><span class="hljs-class">.insert</span>( "<span class="hljs-tag">go3</span>" );
<span class="hljs-tag">ksession</span><span class="hljs-class">.fireAllRules</span>();
<span class="hljs-tag">---</span>
<span class="hljs-tag">go3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">匹配任何String的第一个规则返回“go3”但没有返回任何其他因为没有答案; </font><font style="vertical-align: inherit;">但是，当系统中插入“go3”时，它会一直等到满意为止。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.在“抽屉”中插入“key”的新位置：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">ksession.insert( <span class="hljs-keyword">new</span> Location(<span class="hljs-string">"key"</span>, <span class="hljs-string">"drawer"</span>) );<font></font>
ksession.fireAllRules();<font></font>
---<font></font>
Key <span class="hljs-keyword">in</span> the Office</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个新位置满足传递闭包，因为它监视整个图形。</font><font style="vertical-align: inherit;">此外，此过程现在有四个递归级别，在此级别中匹配并触发规则。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_queries_with_unbound_arguments"><a class="anchor" href="index.html#_queries_with_unbound_arguments"></a><a class="link" href="index.html#_queries_with_unbound_arguments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.6。</font><font style="vertical-align: inherit;">具有未绑定参数的查询</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.通过实现以下规则创建具有未绑定参数的查询：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"go4"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
  <span class="hljs-title">String</span>(<span class="hljs-params"> <span class="hljs-keyword">this</span> == <span class="hljs-string">"go4"</span> </span>)
  <span class="hljs-title">isContainedIn</span>(<span class="hljs-params">thing, <span class="hljs-string">"office"</span>; </span>)
then
  System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"thing"</span> + thing + <span class="hljs-string">"is in the Office"</span> </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这条规则要求“办公室”中的所有内容，它将告诉下面所有行中的所有内容。</font><font style="vertical-align: inherit;">此示例中的未绑定参数（out variable thing）将返回每个可能的值; </font><font style="vertical-align: inherit;">因此，它与Reactive Transitive Query示例中使用的z值非常相似。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.使用查询未绑定的参数。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
  <span class="hljs-constant">Location</span>( x, y; )
  <span class="hljs-keyword">or</span>
  ( <span class="hljs-constant">Location</span>( z, y; ) <span class="hljs-keyword">and</span> isContainedIn( x, z; ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.创建“go4”，将其插入引擎，然后调用fireAllRules。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">ksession.insert( <span class="hljs-string">"go4"</span> );<font></font>
ksession.fireAllRules();<font></font>
---<font></font>
go4<font></font>
thing Key <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the Office<font></font>
thing Computer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the Office<font></font>
thing Drawer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the Office<font></font>
thing Desk <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the Office<font></font>
thing Chair <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> the Office</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">插入“go4”时，它将返回“Office”下面的所有先前信息。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_unbound_arguments"><a class="anchor" href="index.html#_multiple_unbound_arguments"></a><a class="link" href="index.html#_multiple_unbound_arguments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23.16.7。</font><font style="vertical-align: inherit;">多个未绑定参数</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.通过实现以下规则，使用Mulitple Unbound Arguments创建查询：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">rule <span class="hljs-string">"go5"</span>
<span class="hljs-function"><span class="hljs-keyword">when</span>
  <span class="hljs-title">String</span>(<span class="hljs-params"> <span class="hljs-keyword">this</span> == <span class="hljs-string">"go5"</span> </span>)
  <span class="hljs-title">isContainedIn</span>(<span class="hljs-params">thing, location; </span>)
then
  System.<span class="hljs-keyword">out</span>.<span class="hljs-title">println</span>(<span class="hljs-params"> <span class="hljs-string">"thing"</span> + thing + <span class="hljs-string">"is in"</span> + location </span>)</span>;<font></font>
end</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这条规则要求“办公室”中的所有内容，它将告诉下面所有行中的所有内容。</font><font style="vertical-align: inherit;">此示例中的未绑定参数（out variable thing）将返回每个可能的值; </font><font style="vertical-align: inherit;">因此，它与Reactive Transitive Query示例中使用的z值非常相似。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">东西</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位置</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都绑定了变量，没有绑定参数，一切都在呼吁。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.将查询用于多个未绑定的参数。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query isContainedIn( <span class="hljs-constant">String</span> x, <span class="hljs-constant">String</span> y )
  <span class="hljs-constant">Location</span>( x, y; )
  <span class="hljs-keyword">or</span>
  ( <span class="hljs-constant">Location</span>( z, y; ) <span class="hljs-keyword">and</span> isContainedIn( x, z; ) )
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.创建“go5”，将其插入引擎，然后调用fireAllRules。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs coffeescript">ksession.insert( <span class="hljs-string">"go5"</span> );<font></font>
ksession.fireAllRules();<font></font>
---<font></font>
go5<font></font>
thing Knife <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Cheese <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Key <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Computer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Drawer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Desk <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Chair <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Key <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Office<font></font>
thing Computer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Office<font></font>
thing Drawer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Office<font></font>
thing Key <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Desk<font></font>
thing Office <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Computer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Desk<font></font>
thing Knife <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Kitchen<font></font>
thing Cheese <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Kitchen<font></font>
thing Kitchen <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> House<font></font>
thing Key <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Drawer<font></font>
thing Drawer <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Desk<font></font>
thing Desk <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Office<font></font>
thing Chair <span class="hljs-keyword">is</span> <span class="hljs-keyword">in</span> Office</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当调用“go5”时，它会返回所有内容中的所有内容。</font></font></p>
</div>
<h1 id="_drools_release_notes" class="discrete"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools发行说明</font></font></h1>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_droolsreleasenoteschapter"><a class="anchor" href="index.html#_droolsreleasenoteschapter"></a><a class="link" href="index.html#_droolsreleasenoteschapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.发行说明</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_drools.releasenotesdrools.7.11.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.7.11.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.7.11.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.1。</font><font style="vertical-align: inherit;">Drools 7.11中新的和值得注意的是什么</font></font></a></h3>
<div class="sect3">
<h4 id="_minor_api_changes_of_kie_dmn_open_source_engine"><a class="anchor" href="index.html#_minor_api_changes_of_kie_dmn_open_source_engine"></a><a class="link" href="index.html#_minor_api_changes_of_kie_dmn_open_source_engine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.1.1。</font><font style="vertical-align: inherit;">Kie DMN开源引擎的次要API更改</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie DMN开源引擎的API引入了一些细微的变化，以支持新的DMN v1.2格式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>org.kie.dmn.model.api</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven模块中的</font><font style="vertical-align: inherit;">新包</font></font><code>kie-dmn-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了支持DMN版本v1.1和v1.2的通用模型。</font><font style="vertical-align: inherit;">这要求先前版本的用户将先前包的引用更新</font></font><code>org.kie.dmn.model.v1_1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到此新包</font></font><code>org.kie.dmn.model.api</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在纪伊DMN API的用户必须从更新的导入包的引用</font><strong><font style="vertical-align: inherit;">来</font></strong><font style="vertical-align: inherit;">。
</font></font><code>import org.kie.dmn.model.v1_1.<strong>;</strong></code><strong><font style="vertical-align: inherit;"></font><code>import org.kie.dmn.model.api.</code></strong><code>;</code><font style="vertical-align: inherit;"></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">套餐</font></font><code>org.kie.dmn.api.marshalling.v1_1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已被弃用，有利于</font></font><code>org.kie.dmn.api.marshalling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">通常这不会影响Kie DMN API的最终用户，因为它</font></font><code>DMNRuntime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会自动为DMN v1.1和v1.2提供支持。</font><font style="vertical-align: inherit;">此更改会影响手动管理DMN资源编组的用户，必须升级到新软件包才能支持新的DMN v1.2版本。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.11.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.11.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.11.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.2。</font><font style="vertical-align: inherit;">KIE Workbench 7.11.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_multiple_git_branches_support"><a class="anchor" href="index.html#_multiple_git_branches_support"></a><a class="link" href="index.html#_multiple_git_branches_support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.2.1。</font><font style="vertical-align: inherit;">多个Git分支支持</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您现在可以在Drools Workbench中交替使用多个Git源代码分支来改进项目的Git工作流程。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建并打开项目后，您可以看到项目的所有资产：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/project_master.png" alt="项目大师">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在痕迹导航栏中，您现在可以看到一个下拉菜单，单击该菜单可显示所有可用的Git分支：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/branches_breadcrumb_only_master.png" alt="分支只是面包屑只有主人">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以单击“ </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加分支”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以向项目添加更多分支：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/add_branch_popup.png" alt="添加分支弹出窗口">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加新分支后，您将被重定向到新分支，其中包含您在基本分支中拥有的所有资产：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/feature_branch.png" alt="功能分支">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/branches_breadcrumb.png" alt="分支机构">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您也可以点击</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除支线</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在屏幕的右上角删除任何分支，除了主分支：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/delete_branch_option.png" alt="删除分支选项">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.7.9.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.7.9.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.7.9.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.3。</font><font style="vertical-align: inherit;">在Drools 7.9中新的和值得注意的是什么</font></font></a></h3>
<div class="sect3">
<h4 id="_moved_executablecommand_to_kie_public_api"><a class="anchor" href="index.html#_moved_executablecommand_to_kie_public_api"></a><a class="link" href="index.html#_moved_executablecommand_to_kie_public_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.3.1。</font><font style="vertical-align: inherit;">将ExecutableCommand移至KIE公共API</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools内部</font></font><code>ExecutableCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口已移至KIE公共API。</font><font style="vertical-align: inherit;">现在可以创建自定义可执行命令而无需依赖内部接口。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不推荐使用已弃用的内部</font></font><code>ExecutableCommand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口以实现向后兼容性，并将在以后的版本中删除。</font></font></p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"></font><code>canRunInTransaction()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于此更改</font><font style="vertical-align: inherit;">
，基于旧内部接口的现有自定义命令</font><font style="vertical-align: inherit;">将</font><font style="vertical-align: inherit;">覆盖</font><font style="vertical-align: inherit;">方法将不再编译。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_alpha_network_compiler"><a class="anchor" href="index.html#_alpha_network_compiler"></a><a class="link" href="index.html#_alpha_network_compiler"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.3.2。</font><font style="vertical-align: inherit;">Alpha网络编译器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools现在支持评估alpha节点的优化，这涉及生成一个中间类，该类被编译以更快地评估约束。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它是高度实验性的，它应该只适用于新的可执行模型系统。</font><font style="vertical-align: inherit;">要启用它</font></font><code>drools.alphaNetworkCompiler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请在</font></font><code>KieModuleModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置中</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">配置键</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;kmodule xmlns：xsi =“http://www.w3.org/2001/XMLSchema-instance”</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
         的xmlns = “http://www.drools.org/xsd/kmodule”&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;结构&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;property key =“drools.alphaNetworkCompiler”value =“true”/&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
  &lt;/配置&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/ KMODULE&gt;</font></font></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
当前实现存在增量编译问题，因此不要一起使用。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.8.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.8.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.8.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.4。</font><font style="vertical-align: inherit;">KIE Workbench 7.8.0中新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_new_system_property_for_setting_the_default_maven_repository_in_project_pom_xml_files"><a class="anchor" href="index.html#_new_system_property_for_setting_the_default_maven_repository_in_project_pom_xml_files"></a><a class="link" href="index.html#_new_system_property_for_setting_the_default_maven_repository_in_project_pom_xml_files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.4.1。</font><font style="vertical-align: inherit;">用于在Project pom.xml文件中设置Default Maven Repository的新系统属性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了使Workbench之外的Workbench项目更容易构建，现在可以设置添加到每个新Project Pom.xml中的默认Maven存储库的URL。</font><font style="vertical-align: inherit;">建议您在首次启动Workbench之前进行此设置。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.7.7.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.7.7.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.7.7.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5。</font><font style="vertical-align: inherit;">在Drools 7.7中新的和值得注意的是什么</font></font></a></h3>
<div class="sect3">
<h4 id="executable-model-con_pmml-models"><a class="anchor" href="index.html#executable-model-con_pmml-models"></a><a class="link" href="index.html#executable-model-con_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5.1。</font><font style="vertical-align: inherit;">可执行的规则模型</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行规则模型是可嵌入的模型，它们提供基于Java的规则集表示，以便在构建时执行。</font><font style="vertical-align: inherit;">可执行模型是Drools中标准资产打包的更有效替代方案，可以更快地创建KIE容器和KIE库，尤其是当您拥有大量DRL（Drools规则语言）文件和其他Drools资产时。</font><font style="vertical-align: inherit;">该模型是低级的，使您能够提供所有必要的执行信息，例如索引评估的lambda表达式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行规则模型为您的项目提供以下特定优势：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译时间：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传统上，打包的Drools项目（KJAR）包含DRL文件和其他Drools工件的列表，这些工件定义规则库以及实现约束和后果的一些预生成的类。</font><font style="vertical-align: inherit;">当从Maven存储库下载KJAR并将其安装在KIE容器中时，必须解析和编译这些DRL文件。</font><font style="vertical-align: inherit;">此过程可能很慢，尤其是对于大型规则集。</font><font style="vertical-align: inherit;">使用可执行模型，您可以在项目KJAR中打包实现项目规则库的可执行模型的Java类，并以更快的方式重新创建KIE容器及其KIE基础。</font><font style="vertical-align: inherit;">在Maven项目中，您可以使用</font></font><code>kie-maven-plugin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在编译过程中从DRL文件自动生成可执行模型源。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行时：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在可执行模型中，所有约束都定义为Java lambda表达式。</font><font style="vertical-align: inherit;">相同的lambda表达式也用于约束评估，因此您不再需要使用</font></font><code>mvel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式进行解释评估，也</font><font style="vertical-align: inherit;">不再需要使用</font><font style="vertical-align: inherit;">实时（JIT）过程将</font></font><code>mvel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于约束的约束转换为字节码。</font><font style="vertical-align: inherit;">这样可以更快，更高效地运行。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开发时间：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可执行模型使您能够开发和试验Drools引擎的新功能，而无需直接以DRL格式编码元素或修改DRL解析器以支持它们。</font></font></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_executable_model_domain_specific_languages_dsls"><a class="anchor" href="index.html#_executable_model_domain_specific_languages_dsls"></a><a class="link" href="index.html#_executable_model_domain_specific_languages_dsls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5.1.1。</font><font style="vertical-align: inherit;">可执行模型特定于域的语言（DSL）</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为可执行模型设计特定于域的语言（DSL）的第一次迭代时的一个目标是摆脱模式的概念并将规则视为表达式（约束）和动作（后果）的流。</font><font style="vertical-align: inherit;">出于这个原因，我们称之为Flow DSL。</font><font style="vertical-align: inherit;">此处提供了此DSL的一些示例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然而，在实现Flow DSL之后，很明显，避免明确使用模式的决定迫使我们实现一些既具有复杂性又具有性能成本的额外逻辑，因为为了正确地重新创建期望的数据结构，在Drools编译器中，有必要将那些看似无关的表达式中的模式组合在一起。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于这个原因，已决定在我们称为Pattern DSL的第二个DSL中重新引入模式。</font><font style="vertical-align: inherit;">这允许绕过该算法分组表达式，该表达式必须填充人为的语义间隙，并且在运行时也是耗时的。</font><font style="vertical-align: inherit;">我们相信这两种DSL都适用于不同的用例，因此我们决定保留并支持两者。</font><font style="vertical-align: inherit;">特别是Pattern DSL更安全，更快（即使更冗长），因此这将是通过kie-maven-plugin创建KJAR时自动生成的DSL。</font><font style="vertical-align: inherit;">相反，Flow DSL更简洁，更接近用户可能想要以编程方式在Java中定义规则的方式，我们计划通过后处理器自动生成定义索引的模型部分，使其更加冗长。和财产反应。</font><font style="vertical-align: inherit;">换一种说法，</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="executable-model-maven-proc_pmml-models"><a class="anchor" href="index.html#executable-model-maven-proc_pmml-models"></a><a class="link" href="index.html#executable-model-maven-proc_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5.1.2。</font><font style="vertical-align: inherit;">在Maven项目中嵌入可执行规则模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在Maven项目中嵌入可执行规则模型，以便在构建时更有效地编译规则资产。</font></font></p>
</div>
<div class="paragraph">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您有一个包含Drools业务资产的Mavenized项目。</font></font></p>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven项目</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">文件中，确保将包装类型设置为</font></font><code>kjar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并添加</font></font><code>kie-maven-plugin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建组件：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">packaging</span>&gt;</span>kjar<span class="hljs-tag">&lt;/<span class="hljs-title">packaging</span>&gt;</span><font></font>
...<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">build</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">extensions</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extensions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">build</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>kjar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装类型激活</font></font><code>kie-maven-plugin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来验证部件和预编译伪像资源。</font><font style="vertical-align: inherit;">这</font></font><code>&lt;version&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是目前在项目中使用的Drools的Maven工件版本（例如，7.11.0.Final-redhat-00002）。</font><font style="vertical-align: inherit;">正确打包Maven项目需要这些设置。</font></font></p>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将以下依赖项添加到</font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中以启用从可执行模型构建规则资产：</font></font></p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>drools-canonical-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用独立于Drools的规则集模型的可执行规范表示</font></font></p>
</li>
<li>
<p><code>drools-model-compiler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将可执行模型编译为Drools内部数据结构，以便它可以由Drools引擎执行</font></font></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-canonical-model<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-model-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在命令终端中，导航到Maven项目目录并运行以下命令以从可执行模型构建项目：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql">mvn clean <span class="hljs-operator"><span class="hljs-keyword">install</span> -DgenerateModel=&lt;<span class="hljs-keyword">VALUE</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>-DgenerateModel=&lt;VALUE&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性使项目可以构建为基于模型的KJAR而不是基于DRL的KJAR。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换</font></font><code>&lt;VALUE&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为三个值之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>YES</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：生成与原始项目中的DRL文件对应的可执行模型，并从生成的KJAR中排除DRL文件。</font></font></p>
</li>
<li>
<p><code>WITHDRL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：生成与原始项目中的DRL文件相对应的可执行模型，并将DRL文件添加到生成的KJAR以用于文档目的（无论如何，KIE库都是从可执行模型构建的）。</font></font></p>
</li>
<li>
<p><code>NO</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：不生成可执行模型。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例构建命令：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs nginx"><span class="hljs-title">mvn</span> clean install -DgenerateModel=YES</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="executable-model-java-proc_pmml-models"><a class="anchor" href="index.html#executable-model-java-proc_pmml-models"></a><a class="link" href="index.html#executable-model-java-proc_pmml-models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.5.1.3。</font><font style="vertical-align: inherit;">在Java应用程序中嵌入可执行规则模型</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以在Java应用程序中以编程方式嵌入可执行规则模型，以便在构建时更有效地编译规则资产。</font></font></p>
</div>
<div class="paragraph">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></div>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您有一个包含Drools业务资产的Java应用程序。</font></font></p>
</div>
<div class="olist arabic">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">程序</font></font></div>
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将以下依赖项添加到Java项目的相关类路径中：</font></font></p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>drools-canonical-model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：启用独立于Drools的规则集模型的可执行规范表示</font></font></p>
</li>
<li>
<p><code>drools-model-compiler</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将可执行模型编译为Drools内部数据结构，以便它可以由Drools引擎执行</font></font></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-canonical-model<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span><font></font>
<font></font>
<span class="hljs-tag">&lt;<span class="hljs-title">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.drools<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>drools-model-compiler<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">version</span>&gt;</span>${drools.version}<span class="hljs-tag">&lt;/<span class="hljs-title">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这</font></font><code>&lt;version&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是目前在项目中使用的Drools的Maven工件版本（例如，7.11.0.Final-redhat-00002）。</font></font></p>
</div>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加规则资产的KIE虚拟文件系统</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并使用</font></font><code>KieBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有</font></font><code>buildAll( ExecutableModelProject.class )</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">特定的从一个可执行模型构建资产：</font></font></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">import</span> org.kie.api.KieServices;
<span class="hljs-keyword">import</span> org.kie.api.builder.KieFileSystem;
<span class="hljs-keyword">import</span> org.kie.api.builder.KieBuilder;<font></font>
<font></font>
  KieServices ks = KieServices.Factory.get();<font></font>
  KieFileSystem kfs = ks.newKieFileSystem()<font></font>
  kfs.write(<span class="hljs-string">"src/main/resources/KBase1/ruleSet1.drl"</span>, stringContainingAValidDRL)<font></font>
  .write(<span class="hljs-string">"src/main/resources/dtable.xls"</span>,<font></font>
    kieServices.getResources().newInputStreamResource(dtableFileStream));<font></font>
<font></font>
  KieBuilder kieBuilder = ks.newKieBuilder( kfs );<font></font>
  <span class="hljs-comment">// Build from an executable model</span><font></font>
  kieBuilder.buildAll( ExecutableModelProject.class )<font></font>
  assertEquals(<span class="hljs-number">0</span>, kieBuilder.getResults().getMessages(Message.Level.ERROR).size());</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从可执行模型构建之后，结果</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用基于lambda表达式的约束而不是效率较低的</font></font><code>mvel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式。</font><font style="vertical-align: inherit;">如果不</font></font><code>buildAll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含参数，则项目使用标准方法构建，而不使用可执行模型。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为</font></font><code>KieFileSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于创建可执行模型</font><font style="vertical-align: inherit;">的更手动的替代</font><font style="vertical-align: inherit;">方法，您可以</font></font><code>Model</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用流畅的API </font><font style="vertical-align: inherit;">定义a </font><font style="vertical-align: inherit;">并</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从中</font><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Model model = <span class="hljs-keyword">new</span> ModelImpl().addRule( rule );<font></font>
KieBase kieBase = KieBaseBuilder.createKieBaseFromModel( model );</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.7.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.7.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.7.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6。</font><font style="vertical-align: inherit;">KIE Workbench 7.7.0中新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_project_oriented_workbench"><a class="anchor" href="index.html#_project_oriented_workbench"></a><a class="link" href="index.html#_project_oriented_workbench"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.1。</font><font style="vertical-align: inherit;">面向项目的工作台</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench成为面向项目的。</font><font style="vertical-align: inherit;">这意味着每个项目现在都在专用存储库中。</font><font style="vertical-align: inherit;">以前每个项目都在一个文件夹中，一个存储库可以容纳多个项目。</font><font style="vertical-align: inherit;">这些更改合并了Project和Repository的概念。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个项目一个存储库方法使UI更简单，并改进了单个项目的发布或冻结。</font><font style="vertical-align: inherit;">以前，如果项目被冻结，分支或标记，则存储库仍与其他项目共享，从而使发布控制更加困难和复杂。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要将旧Workbench版本的项目迁移到新设置。</font><font style="vertical-align: inherit;">为此，我们提供了一个命令行迁移工具。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，面向项目不提供对多模块设置的支持。</font><font style="vertical-align: inherit;">此功能已计划好，但不在此版本中。</font><font style="vertical-align: inherit;">现在已弃用的资产管理功能取决于多模块支持，无法迁移到此Workbench版本。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_to_a_headless_drools_controller"><a class="anchor" href="index.html#_connecting_to_a_headless_drools_controller"></a><a class="link" href="index.html#_connecting_to_a_headless_drools_controller"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.2。</font><font style="vertical-align: inherit;">连接到无头Drools控制器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行Workbench实例时，现在可以更灵活地决定如何管理Kie Server实例。</font><font style="vertical-align: inherit;">以前，只要启动Workbench，它就会始终启动嵌入式Drools控制器。</font><font style="vertical-align: inherit;">此设置仍然可用，但现在还有一个选项可以不启动此服务，而是连接到无头Drools控制器。</font><font style="vertical-align: inherit;">这允许更精细的部署模型，从而可以为特定方案确定最佳方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要在这些模式之间切换，可以使用关键系统属性：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">org.kie.workbench.controller</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，如果缺少此系统属性，Workbench将继续启动嵌入式服务。</font><font style="vertical-align: inherit;">否则，它将尝试连接到远程服务，并确保没有启动任何嵌入式服务。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重要的是要注意，当连接到无头Drools控制器时，只能使用Web Socket连接协议。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关通过密钥存储区关于用户名，密码，令牌和安全密码的所有可能系统配置的更多详细信息，请参阅</font></font><a href="index.html#_wb.systemproperties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench系统属性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_content_management_enhancements"><a class="anchor" href="index.html#_content_management_enhancements"></a><a class="link" href="index.html#_content_management_enhancements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.3。</font><font style="vertical-align: inherit;">内容管理增强功能</font></font></a></h4>
<div class="sect4">
<h5 id="_properties_panel"><a class="anchor" href="index.html#_properties_panel"></a><a class="link" href="index.html#_properties_panel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.3.1。</font><font style="vertical-align: inherit;">属性面板</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以编辑不同页面元素的属性，包括页面本身或其任何行和组件。</font><font style="vertical-align: inherit;">选择元素后，通过将鼠标悬停在元素上并单击编辑器区域或在“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">面板下拉列表中</font><font style="vertical-align: inherit;">选择元素
 </font><font style="vertical-align: inherit;">，其属性将显示在左对接面板中。</font><font style="vertical-align: inherit;">查看截图：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContentManagementPropertiesPanel.png" alt="ContentManagementPropertiesPanel">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图347.内容管理属性面板</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此版本中可用的属性基本上与元素样式相关，例如宽度，高度或边距等。</font><font style="vertical-align: inherit;">可用的属性可能因每种类型而异。</font><font style="vertical-align: inherit;">例如，HTML组件提供了一组与文本样式相关的额外属性。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改属性后，其值将在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设计</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预览</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式下</font><font style="vertical-align: inherit;">反映在编辑器区域中</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_screen_component_removed"><a class="anchor" href="index.html#_screen_component_removed"></a><a class="link" href="index.html#_screen_component_removed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.3.2。</font><font style="vertical-align: inherit;">屏幕组件已删除</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件，将其置于下</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">核心</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组中的右侧栏的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">面板上，已被移除。</font><font style="vertical-align: inherit;">原因是，该组件不适合生产环境。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是在未来的版本中，域相关组件（如BPM的任务列表）将可供最终用户轻松使用。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_new_migration_tool"><a class="anchor" href="index.html#_new_migration_tool"></a><a class="link" href="index.html#_new_migration_tool"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.6.4。</font><font style="vertical-align: inherit;">新的迁移工具</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供了一个支持Linux和Windows的新命令行迁移工具，用于将不同的资源移动到它的最新版本。</font><font style="vertical-align: inherit;">它可以执行不同的迁移：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目迁移</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将KIE项目从旧项目布局（7.4.x和之前的版本）迁移到新的面向项目的结构。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表单迁移</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：将旧的jBPM表单建模器表单迁移到新的表单格式。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/MigrationTool.png" alt="MigrationTool">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图348.命令行迁移工具</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你可以</font></font><a href="https://github.com/kiegroup/kie-wb-common/blob/master/kie-wb-common-cli/kie-wb-common-cli-migration-tool/README.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到更多信息</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.6.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.6.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.6.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7。</font><font style="vertical-align: inherit;">KIE Workbench 7.6.0中新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_content_management_enhancements_2"><a class="anchor" href="index.html#_content_management_enhancements_2"></a><a class="link" href="index.html#_content_management_enhancements_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1。</font><font style="vertical-align: inherit;">内容管理增强功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了改善用户体验</font><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容管理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具（又称</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面创作</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中</font><font style="vertical-align: inherit;">引入了一些额外的更改</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">以下屏幕截图显示了自最新版本以来引入的更改。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContentManagementEnhancements.png" alt="ContentManagementEnhancements">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图349.内容管理新外观</font></font></div>
</div>
<div class="sect4">
<h5 id="_fluid_page_editor_mode_selection"><a class="anchor" href="index.html#_fluid_page_editor_mode_selection"></a><a class="link" href="index.html#_fluid_page_editor_mode_selection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.1。</font><font style="vertical-align: inherit;">流体/页面编辑器模式选择</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出的新页面允许选择两种编辑模式：</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewPagePopup.png" alt="NewPagePopup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图350.弹出内容管理的新页面</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流体</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：它更像古典网页，当页面超出可用高度时显示垂直滚动条。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Page</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是以前版本的默认设置。</font><font style="vertical-align: inherit;">选中后，它会强制页面始终适合窗口的100％高度。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_preview_feature"><a class="anchor" href="index.html#_preview_feature"></a><a class="link" href="index.html#_preview_feature"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.2。</font><font style="vertical-align: inherit;">预览功能</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面作者可以</font><font style="vertical-align: inherit;">根据需要多次</font><font style="vertical-align: inherit;">从</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预览</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式。</font><font style="vertical-align: inherit;">在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预览</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式下，所有编辑器的控件都被删除，允许显示页面，因为最终用户在页面发布后会看到该页面。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_use_dock_panels_to_increase_the_editor_content_area"><a class="anchor" href="index.html#_use_dock_panels_to_increase_the_editor_content_area"></a><a class="link" href="index.html#_use_dock_panels_to_increase_the_editor_content_area"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.3。</font><font style="vertical-align: inherit;">使用停靠面板增加编辑器内容区域</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了增加编辑器中心区域的可用空间，页面列表，导航配置和组件面板面板都已作为停靠面板移动到左侧边栏。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_component_palette_reorganization"><a class="anchor" href="index.html#_component_palette_reorganization"></a><a class="link" href="index.html#_component_palette_reorganization"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.7.1.4。</font><font style="vertical-align: inherit;">组件调色板重组</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以前的版本中，调色板中只存在一个组件类别。</font><font style="vertical-align: inherit;">从7.6版开始，组件现在分为三大类：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">核心</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：HTML和页面组件</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：菜单栏，树，瓷砖，选项卡列表，轮播和目标Div</font></font></p>
</li>
<li>
<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">报告</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：酒吧，饼图，线，面积，地图，泡沫，公制，米，表和过滤器</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些更改的目标是使调色板更具吸引力，并简化要拖动的目标组件的选择。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kieserver.releasenoteskie.7.5.1"><a class="anchor" href="index.html#_kieserver.releasenoteskie.7.5.1"></a><a class="link" href="index.html#_kieserver.releasenoteskie.7.5.1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.8。</font><font style="vertical-align: inherit;">新的Drools控制器客户端API</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了便于管理Drools控制器相关的任务，如创建服务器模板，启动和停止容器等，我们开发了一个新的Java客户端API，可在kie-server-controller-client Maven模块下使用。</font><font style="vertical-align: inherit;">使用此API，您可以使用REST或Web套接字协议连接到Drools控制器。</font><font style="vertical-align: inherit;">有关更多详细信息，请参阅</font></font><a href="index.html#ControllerJavaAPI-section.adoc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools控制器客户端API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">章节。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_in_kie_server_7_5_1_from_7_0"><a class="anchor" href="index.html#_breaking_changes_in_kie_server_7_5_1_from_7_0"></a><a class="link" href="index.html#_breaking_changes_in_kie_server_7_5_1_from_7_0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9。</font><font style="vertical-align: inherit;">从7.0中断Kie Server 7.5.1中的更改</font></font></a></h3>
<div class="sect3">
<h4 id="_drools_controller_api_changes"><a class="anchor" href="index.html#_drools_controller_api_changes"></a><a class="link" href="index.html#_drools_controller_api_changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9.1。</font><font style="vertical-align: inherit;">Drools控制器API更改</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>SpecManagementService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面</font><font style="vertical-align: inherit;">变化</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code>getContainerInfo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许检索a中</font></font><code>ContainerSpec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">的单个</font><font style="vertical-align: inherit;">方法的新方法</font></font><code>ServerTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改方法</font></font><code>listContainerSpec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>listServerTemplateKeys</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><code>listServerTemplates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从泛型集合返回类型特定的域列表类型（</font></font><code>ContainerSpecList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>ServerTemplateKeyList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code>ServerTemplateList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以正确的序列化和反序列化使用JAXB和JSON返回值）。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>RuleCapabilitiesService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面</font><font style="vertical-align: inherit;">变化</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>startScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法现在采用的是</font></font><code>java.lang.Long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间，而不是原始</font></font><code>long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>interval</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，以避免JSON和JAXB序列化问题。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>RuntimeManagementService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面</font><font style="vertical-align: inherit;">变化</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将方法</font></font><code>getContainers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>getServerInstances</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回类型从泛型集合</font><font style="vertical-align: inherit;">更改</font><font style="vertical-align: inherit;">为特定域列表类型（</font></font><code>ContainerList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>ServerInstanceKeyList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），以便使用JAXB和JSON正确地序列化和反序列化返回的值。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关更多详细信息，请参阅</font></font><a href="https://issues.jboss.org/browse/JBPM-6243"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JBPM-6243</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kie_server_api_changes"><a class="anchor" href="index.html#_kie_server_api_changes"></a><a class="link" href="index.html#_kie_server_api_changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.9.2。</font><font style="vertical-align: inherit;">Kie Server API更改</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对</font></font><code>ServiceResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包装器的</font><font style="vertical-align: inherit;">更改</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>ResponseType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举和常用方法</font><font style="vertical-align: inherit;">移动</font><font style="vertical-align: inherit;">到一个名为的新接口</font></font><code>KieServiceResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许它扩展到多个实现。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.5.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.5.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.5.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10。</font><font style="vertical-align: inherit;">KIE Workbench 7.5.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_content_management_enhancements_3"><a class="anchor" href="index.html#_content_management_enhancements_3"></a><a class="link" href="index.html#_content_management_enhancements_3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.1。</font><font style="vertical-align: inherit;">内容管理增强功能</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容管理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（aka </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dashboards</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）工具中</font><font style="vertical-align: inherit;">引入了显着的更改</font><font style="vertical-align: inherit;">，以改善用户体验。</font></font></p>
</div>
<div class="sect4">
<h5 id="_perspective_to_page_renaming"><a class="anchor" href="index.html#_perspective_to_page_renaming"></a><a class="link" href="index.html#_perspective_to_page_renaming"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.1.1。</font><font style="vertical-align: inherit;">透视页面重命名</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“页面”术语对用户来说更为熟悉。</font><font style="vertical-align: inherit;">请注意，“perspective”是从Eclipse开发工具借来的概念，因此它是一个主要用于开发人员圈子的概念。</font><font style="vertical-align: inherit;">页面与网页内容更相关，更容易被普通人理解。</font><font style="vertical-align: inherit;">出于这个原因，透视图已重命名为整个工具页面。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_left_sidebar_new_look_and_feel"><a class="anchor" href="index.html#_left_sidebar_new_look_and_feel"></a><a class="link" href="index.html#_left_sidebar_new_look_and_feel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.1.2。</font><font style="vertical-align: inherit;">左侧边栏新的外观和感觉</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是引入的最引人注目的变化。</font><font style="vertical-align: inherit;">左侧边栏已完全重写，以提供增强的外观和感觉。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/ContentManagementLeftSideBar.png" alt="ContentManagementLeftSideBar">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图351.内容管理工具的左侧栏</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">页面</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个部分</font><font style="vertical-align: inherit;">已合并为一个视图。</font><font style="vertical-align: inherit;">用户可以从此视图创建新页面或更改导航配置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分列出了导航树。</font><font style="vertical-align: inherit;">具体来说，</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">名为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的树</font><font style="vertical-align: inherit;">可用，它不能被删除，它包含工作台顶级mega菜单中显示的条目。</font><font style="vertical-align: inherit;">应用的任何更改都将导致mega菜单修改其条目。</font><font style="vertical-align: inherit;">这实际上是用户必须使用的机制来扩展具有新页面的工作台。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_tags_button_disabled"><a class="anchor" href="index.html#_tags_button_disabled"></a><a class="link" href="index.html#_tags_button_disabled"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.1.3。</font><font style="vertical-align: inherit;">标签按钮被禁用</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已删除标签功能或在编辑期间将一组标签附加到页面的功能。</font><font style="vertical-align: inherit;">此功能与之前的“Apps”透视图结合使用，允许用户以分类方式发布其动态页面。</font><font style="vertical-align: inherit;">不再需要此功能。</font><font style="vertical-align: inherit;">在页面</font><font style="vertical-align: inherit;">编辑期间，已删除过去出现在编辑器右上方按钮栏中</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为替代，用户可以利用现有导航功能创建新页面并将其附加到工作台的大型菜单。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extra_navigation_components"><a class="anchor" href="index.html#_extra_navigation_components"></a><a class="link" href="index.html#_extra_navigation_components"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.2。</font><font style="vertical-align: inherit;">额外的导航组件</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容管理</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工具中</font><font style="vertical-align: inherit;">可用的现有导航组件</font><font style="vertical-align: inherit;">已扩展为一些额外类型。</font><font style="vertical-align: inherit;">迄今为止存在以下组件：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓷砖导航器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签列表</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">圆盘传送带</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最近发布了以下内容：</font></font></p>
</div>
<div class="sect4">
<h5 id="_menu_bar_2"><a class="anchor" href="index.html#_menu_bar_2"></a><a class="link" href="index.html#_menu_bar_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.2.1。</font><font style="vertical-align: inherit;">菜单栏</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正如其名称所述，此组件以manu bar形状显示导航树的条目。</font><font style="vertical-align: inherit;">支持的级别数没有限制。</font><font style="vertical-align: inherit;">单击页面项目时，页面内容将显示在</font><font style="vertical-align: inherit;">
菜单栏配置中指定</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目标div</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（请参阅下面的详细信息）组件中。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/MenubarComponent.png" alt="MenubarComponent">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图352.菜单栏导航组件</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_tree_navigator"><a class="anchor" href="index.html#_tree_navigator"></a><a class="link" href="index.html#_tree_navigator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.2.2。</font><font style="vertical-align: inherit;">树导航器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单栏</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同</font><font style="vertical-align: inherit;">，但条目显示为垂直树结构。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/TreeNavigatorComponent.png" alt="TreeNavigatorComponent">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图353.菜单栏导航组件</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_target_div"><a class="anchor" href="index.html#_target_div"></a><a class="link" href="index.html#_target_div"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.10.2.3。</font><font style="vertical-align: inherit;">目标div</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">传送带</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓷砖导航</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件可以通过自身处理用户点击该项目的显示。</font><font style="vertical-align: inherit;">其他像</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tab列表</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单栏</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树导航器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target div</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件作为其显示输出，因为它们的条目显示与最后一个项目的内容之间有明确的分隔。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，每次将</font><font style="vertical-align: inherit;">基于</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target div</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的导航组件放入页面时，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target div</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组件也必须已被删除，以便第一个组件可以链接到它。</font><font style="vertical-align: inherit;">以下屏幕显示每次将基于目标div的组件放入页面时显示的配置面板。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NavComponentTargetDivModal.png" alt="NavComponentTargetDivModal">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图354.基于目标div的导航组件配置</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导航组对于所有导航组件都是必需的，因为它指示要显示的导航结构，而</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Target div</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不适</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于非目标div组件，如</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Carousel</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tile导航器</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.4.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.4.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.4.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.11。</font><font style="vertical-align: inherit;">KIE Workbench 7.4.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_guided_decision_table_improvements"><a class="anchor" href="index.html#_guided_decision_table_improvements"></a><a class="link" href="index.html#_guided_decision_table_improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.11.1。</font><font style="vertical-align: inherit;">引导决策表的改进</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了修复许多错误之外，还改进了向导用于创建和编辑列的错误，以显示不同列类型所需的不同步骤的描述。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard-help-text1.png" alt="dtable向导帮助text1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图355.引导决策表向导示例1</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/dtable-wizard-help-text2.png" alt="dtable向导帮助text2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图356.引导决策表向导示例2</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_disable_experimental_editors"><a class="anchor" href="index.html#_disable_experimental_editors"></a><a class="link" href="index.html#_disable_experimental_editors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.11.2。</font><font style="vertical-align: inherit;">禁用实验编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下功能被认为是实验性功能，可以使用“安全/用户管理”管理屏幕禁用： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导决策树编辑器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导记分卡编辑器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XLS记分卡编辑器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（新）BPMN2流程编辑器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署/服务器供应透视图</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下启用这些功能。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/disable-experimental-features1.png" alt="禁用实验功能1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图357.禁用编辑器</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.3.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.3.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.3.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12。</font><font style="vertical-align: inherit;">KIE Workbench 7.3.0中新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_new_home_and_menu_bar"><a class="anchor" href="index.html#_new_home_and_menu_bar"></a><a class="link" href="index.html#_new_home_and_menu_bar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12.1。</font><font style="vertical-align: inherit;">新家和菜单栏</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主页，菜单栏和关于弹出窗口现在有了新的设计。</font><font style="vertical-align: inherit;">菜单项分为代表主要功能区域的组。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/home-with-menu-expanded.png" alt="菜单扩展的家">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图358.扩展了Menu的主视图</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/about-popup.png" alt="关于弹出窗口">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图359.关于弹出窗口</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_admin_page_changes"><a class="anchor" href="index.html#_admin_page_changes"></a><a class="link" href="index.html#_admin_page_changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.12.2。</font><font style="vertical-align: inherit;">管理页面更改</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以使用菜单栏上的cog图标访问“管理员”页面，其中包含更多项目。</font><font style="vertical-align: inherit;">对透视工件，数据集，数据源和语言选项的访问已移至那里。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/admin-page-7-3-x.png" alt="管理员页面7 3 x">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图360.管理员页面</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.7.1.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.7.1.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.7.1.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.13。</font><font style="vertical-align: inherit;">Drools 7.1中新的和值得注意的是什么</font></font></a></h3>

</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.1.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.1.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.1.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14。</font><font style="vertical-align: inherit;">KIE Workbench 7.1.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_project_metrics_dashboard"><a class="anchor" href="index.html#_project_metrics_dashboard"></a><a class="link" href="index.html#_project_metrics_dashboard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14.1。</font><font style="vertical-align: inherit;">项目指标仪表板</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以为创作库中列出的每个项目提供全新的仪表板。</font><font style="vertical-align: inherit;">打开项目详细信息页面后，屏幕右侧会显示一个指标卡。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/project-metrics-card.png" alt="项目指标卡">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图361.项目指标卡</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该卡显示了该特定项目随时间推移的贡献（提交）历史记录。</font><font style="vertical-align: inherit;">单击</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看全部</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接以访问完整的仪表板，该仪表板显示有关项目贡献的所有指标。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/project-metrics-dashboard.png" alt="项目指标仪表板">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图362.项目度量仪表板</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，可以使用不同的过滤器控件来选择由具体用户或在特定时间范围内做出的贡献。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_teams_metrics_dashboard"><a class="anchor" href="index.html#_teams_metrics_dashboard"></a><a class="link" href="index.html#_teams_metrics_dashboard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.14.2。</font><font style="vertical-align: inherit;">团队指标仪表板</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个全新的仪表板也已添加到团队页面。</font><font style="vertical-align: inherit;">右侧的度量卡显示所有贡献（提交）的历史记录。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/teams-metrics-card.png" alt="团队指标卡">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图363.团队指标卡</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看全部</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接以访问显示总体贡献度量标准的完整仪表板。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/teams-metrics-dashboard.png" alt="团队指标仪表板">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图364.团队指标仪表板</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，可以使用不同的过滤器控件来按不同条件选择贡献：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由具体用户，</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在特定的时间范围内，</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按团队或</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按项目。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此仪表板取代了以前的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创作”&gt;“贡献者”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仪表板，该仪表板在工作台的顶部菜单栏中不再可用。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.7.0.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.7.0.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.7.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15。</font><font style="vertical-align: inherit;">在Drools 7.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_core_engine"><a class="anchor" href="index.html#_core_engine"></a><a class="link" href="index.html#_core_engine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1。</font><font style="vertical-align: inherit;">核心引擎</font></font></a></h4>
<div class="sect4">
<h5 id="_dmn_runtime_support"><a class="anchor" href="index.html#_dmn_runtime_support"></a><a class="link" href="index.html#_dmn_runtime_support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.1。</font><font style="vertical-align: inherit;">DMN运行时支持</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools现在具有对DMN（决策模型和表示法）的完整运行时支持。</font><font style="vertical-align: inherit;">DMN文件现在是一种资产，可以添加到任何kjar中以供执行。</font><font style="vertical-align: inherit;">
有关如何构建和执行DMN模型的详细信息，</font><font style="vertical-align: inherit;">请参阅</font></font><a href="index.html#drools.DMN"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DMN部分</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，不支持DMN创作，但在将来的版本中将支持它。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_multithreaded_drools_engine"><a class="anchor" href="index.html#_multithreaded_drools_engine"></a><a class="link" href="index.html#_multithreaded_drools_engine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.2。</font><font style="vertical-align: inherit;">多线程Drools引擎</font></font></a></h5>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从历史上看，Rete一直是一种顺序算法，即使在Drools 6中引入它的演变的Phreak允许某种程度的并行化，这种可能性还没有具体的杠杆作用。</font><font style="vertical-align: inherit;">在Drools 7中，最终可以使引擎并行地评估更多规则。</font><font style="vertical-align: inherit;">这是通过将Rete / Phreak分区为独立分区并并行评估来实现的。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下此功能处于关闭状态，但可以通过以下方式启用它来创建并行KieBase </font></font><code>KieBaseConfiguration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cs">KieServices ks = KieServices.Factory.<span class="hljs-keyword">get</span>();<font></font>
KieBaseConfiguration kieBaseConf = ks.newKieBaseConfiguration();<font></font>
kieBaseConf.setOption(MultithreadEvaluationOption.YES);<font></font>
KieBase kieBase = kieContainer.newKieBase(kieBaseConf);</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者通过系统属性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">drools.multithreadEvaluation = <span class="hljs-literal">true</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并行引擎当前不支持使用查询，突出或议程组的规则。</font><font style="vertical-align: inherit;">如果它们存在于规则库中，则编译器会发出警告并使用单线程实现自动切换回来。</font><font style="vertical-align: inherit;">在其他情况下，使用多线程Drools引擎不正确并导致错误的结果，即使引擎可能无法自动检测它们然后也不会回退到单线程模式，例如规则依赖于规则给出的隐含突出性在drl文件中排序。</font><font style="vertical-align: inherit;">因此，启用此选项时必须特别注意。</font><font style="vertical-align: inherit;">最后，目前不支持会话序列化和增量编译。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="_oopath_improvements"><a class="anchor" href="index.html#_oopath_improvements"></a><a class="link" href="index.html#_oopath_improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.3。</font><font style="vertical-align: inherit;">OOPath的改进</font></font></a></h5>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oroath已经在Drools 6.3.0中引入，但是在Drools 7.0.0中，语法略有改变，使其更接近标准的xpath。</font><font style="vertical-align: inherit;">这意味着必须在方括号之间放置约束而不是卷曲括号，并且必须用约束来表示内联强制转换。</font><font style="vertical-align: inherit;">例如，使用6.x语法表示以下oopath：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/list{#SubClass, prop == <span class="hljs-number">0</span>}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools 7.x成为：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/list#SubClass[prop == <span class="hljs-number">0</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外Drools的7.0.0提高了标准的Java Collection中的支持，有专门的实施</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code>Set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为专业</font></font><code>ReactiveList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>ReactiveSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">a </font></font><code>ReactiveCollection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可用。</font><font style="vertical-align: inherit;">这还包括通过他们</font></font><code>Iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">他们执行可变操作时的开箱即用反应支持</font></font><code>ListIterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">School</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractReactiveObject</span> </span>{
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Child&gt; children = <span class="hljs-keyword">new</span> ReactiveList&lt;Child&gt;(); <i class="conum" data-value="1"></i><b>(<span class="hljs-number">1</span>)</b><font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;<font></font>
        notifyModification(); <i class="conum" data-value="2"></i><b>(<span class="hljs-number">2</span>)</b><font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addChild</span><span class="hljs-params">(Child child)</span> </span>{<font></font>
        children.add(child); <i class="conum" data-value="3"></i><b>(<span class="hljs-number">3</span>)</b>
        <span class="hljs-comment">// no need to call notifyModification() here.</span>
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用专用</font></font><code>ReactiveList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">于标准Java的反应支持</font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常</font></font><code>notifyModification()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要在更改字段以进行反应性支持时调用</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是在这种情况下</font></font><code>ReactiveList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会自动处理，就像在现场执行的所有其他变异操作一样</font></font><code>children</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="小费"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
作为最佳实践，建议</font></font><code>final</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按照所示示例</font><font style="vertical-align: inherit;">声明反应式收集字段</font><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="sect5">
<h6 id="_oopath_maven_plug_in"><a class="anchor" href="index.html#_oopath_maven_plug_in"></a><a class="link" href="index.html#_oopath_maven_plug_in"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OOPath Maven插件</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Maven插件提供了一个新的目标，</font></font><code>injectreactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于检测字节码并自动为标准情况注入反应性支持。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>injectreactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下禁用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">目标，并且可以通过Maven插件配置</font></font><code>instrument-enabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">启用</font><font style="vertical-align: inherit;">该</font><font style="vertical-align: inherit;">目标</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">extensions</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extensions</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">instrument-enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">instrument-enabled</span>&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用</font></font><code>injectreactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目标。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该</font></font><code>injectreactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关的Maven项目生成的输出目录目标将仪器的字节码</font></font><code>${project.build.outputDirectory}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过Maven插件配置</font></font><code>instrument-packages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置列表</font><font style="vertical-align: inherit;">将目标范围限制为特定包或包的层次结构</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">。例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">groupId</span>&gt;</span>org.kie<span class="hljs-tag">&lt;/<span class="hljs-title">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">artifactId</span>&gt;</span>kie-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-title">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">extensions</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">extensions</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">instrument-enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">instrument-enabled</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">instrument-packages</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">instrumentPackage</span>&gt;</span>to.instrument<span class="hljs-tag">&lt;/<span class="hljs-title">instrumentPackage</span>&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="hljs-tag">&lt;<span class="hljs-title">instrumentPackage</span>&gt;</span>org.drools.compiler.xpath.tobeinstrumented.*<span class="hljs-tag">&lt;/<span class="hljs-title">instrumentPackage</span>&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="hljs-tag">&lt;/<span class="hljs-title">instrument-packages</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将仪器的范围限制为</font></font><code>to.instrument</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅包装。</font></font></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></b></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">限制仪器的范围</font></font><code>org.drools.compiler.xpath.tobeinstrumented</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其子包。</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下标准情况下，插件将为每个字段分配检测字节码：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段分配也会触发 </font></font><code>notifyModification()</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用a包装任何定义为List的字段 </font></font><code>ReactiveList</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用a包装任何定义为Set的字段 </font></font><code>ReactiveSet</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用a包装任何定义为Collection的字段 </font></font><code>ReactiveCollection</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了正确包装List / Set类型的字段，必须使用或者声明java类的字段成员
 </font></font><code>java.util.Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>java.util.List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code>java.util.Set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
（例如声明一个字段，因为</font></font><code>java.util.ArrayList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会使用专门的反应集合进行检测）。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
建议不要混合手动支持反应（手动实现）和字节码检测Maven插件; </font><font style="vertical-align: inherit;">可以更好地设想保持两个范围不同，例如通过使用插件配置来仅检测特定包，如上所述。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下部分介绍了插件检测的详细示例。</font></font></p>
</div>
<div class="sect6">
<h7 id="_instrumentation_of_field_assignments"><a class="anchor" href="index.html#_instrumentation_of_field_assignments"></a><a class="link" href="index.html#_instrumentation_of_field_assignments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现场作业仪表</font></font></a></h7>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段分配，如下例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原版的：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Toy</span> </span>{
    <span class="hljs-keyword">private</span> String owner;<font></font>
    ...<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOwner</span><span class="hljs-params">(String owner)</span> </span>{
        <span class="hljs-keyword">this</span>.owner = owner;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将通过截取字段分配并触发以下内容来检测</font></font><code>notifyModification()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Toy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ReactiveObject</span> </span>{
    <span class="hljs-keyword">private</span> String owner;<font></font>
    ...<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOwner</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String owner)</span> </span>{
        <span class="hljs-keyword">this</span>.$$_drools_write_owner(owner);<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> $$_drools_write_owner(<span class="hljs-keyword">final</span> String owner) {
        <span class="hljs-keyword">this</span>.owner = owner;<font></font>
        ReactiveObjectUtil.notifyModification((ReactiveObject) <span class="hljs-keyword">this</span>);<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，只有当字段不是a时，此工具才适用</font></font><code>Collection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在字段分配是指a </font></font><code>List</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或a </font><font style="vertical-align: inherit;">的情况下</font></font><code>Set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，仪器将用a </font></font><code>ReactiveList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>`ReactiveSet</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相应地</font><font style="vertical-align: inherit;">包装赋值</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">例如：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">原版的：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">School</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Child&gt; children = <span class="hljs-keyword">new</span> ArrayList&lt;Child&gt;();<font></font>
    ...<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">School</span><span class="hljs-params">(String name)</span> </span>{
        <span class="hljs-keyword">this</span>.name = name;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Child&gt; <span class="hljs-title">getChildren</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> children;<font></font>
    }<font></font>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将通过截取和包装来进行检测</font></font><code>ReactiveList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果：</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">School</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ReactiveObject</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Child&gt; children;<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">School</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String name)</span> </span>{
        <span class="hljs-keyword">this</span>.$$_drools_write_children(<span class="hljs-keyword">new</span> ArrayList());
        <span class="hljs-keyword">this</span>.name = name;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Child&gt; <span class="hljs-title">getChildren</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.children;<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> $$_drools_write_children(<span class="hljs-keyword">final</span> List list) {
        <span class="hljs-keyword">this</span>.children = (List&lt;Child&gt;) <span class="hljs-keyword">new</span> ReactiveList(list);<font></font>
    }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pmml_support"><a class="anchor" href="index.html#_pmml_support"></a><a class="link" href="index.html#_pmml_support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.4。</font><font style="vertical-align: inherit;">PMML支持</font></font></a></h5>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
此功能使用</font></font><a href="index.html#_rule_units_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则单位</font></font></a>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools现在支持符合Predictive Modeling Markup Language（PMML）子集的资产。</font><font style="vertical-align: inherit;">现在支持以下预测模型类型：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回归</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">记分卡</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，挖掘模型类型具有部分支持; </font><font style="vertical-align: inherit;">目前提供以下模式：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型链</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全选</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择第一个</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当它们变得可用时，将支持进一步的操作模式。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_soft_expiration_for_events"><a class="anchor" href="index.html#_soft_expiration_for_events"></a><a class="link" href="index.html#_soft_expiration_for_events"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.5。</font><font style="vertical-align: inherit;">事件的软到期</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools 6.x中明确定义事件过期时，它始终被视为硬过期，这意味着它始终优先于在涉及事件的时间窗口和约束上隐式计算的任何其他过期。</font><font style="vertical-align: inherit;">如果推断的到期偏移是无限的，则Drools 7还允许为可以使用的事件指定软到期。</font><font style="vertical-align: inherit;">通过这种方式，如果缺少另一个，则可以保证有效期为推断的一个或指定的一个。</font><font style="vertical-align: inherit;">此外，这意味着规则作者不需要在所有规则中包含时间约束，然后即使规则尚未知晓，也可以设计事件类。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，事件过期被认为是困难的，但是可以更改过期策略并定义软到期，或者按照以下方式注释事件的类：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Role</span>(Role.Type.EVENT)
<span class="hljs-annotation">@Expires</span>( value = <span class="hljs-string">"30s"</span>, policy = TIME_SOFT )
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyEvent</span> </span>{ ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或使用类型声明：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs sql"><span class="hljs-operator"><span class="hljs-keyword">declare</span> MyEvent
  @<span class="hljs-keyword">role</span>( <span class="hljs-keyword">event</span> )
  @expires(<span class="hljs-keyword">value</span> = <span class="hljs-number">30</span>s, <span class="hljs-keyword">policy</span> = TIME_SOFT)
<span class="hljs-keyword">end</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_rule_units_2"><a class="anchor" href="index.html#_rule_units_2"></a><a class="link" href="index.html#_rule_units_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.1.6。</font><font style="vertical-align: inherit;">规则单位</font></font></a></h5>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则单元表示将规则集划分为较小单元，将不同数据源绑定到这些单元并协调单个单元的执行的纯粹声明性方法。</font><font style="vertical-align: inherit;">规则单元是数据源，全局变量和规则的集合。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_workbench"><a class="anchor" href="index.html#_workbench"></a><a class="link" href="index.html#_workbench"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2。</font><font style="vertical-align: inherit;">工作台</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了对工作台的一般性改进（在下面的单独部分中列出）之外，工作台中还有一些特定于Drools的增强功能。</font></font></p>
</div>
<div class="sect4">
<h5 id="_dmn_style_hit_policies_for_decision_tables"><a class="anchor" href="index.html#_dmn_style_hit_policies_for_decision_tables"></a><a class="link" href="index.html#_dmn_style_hit_policies_for_decision_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2.1。</font><font style="vertical-align: inherit;">DMN样式命中决策表的策略</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于每个命中策略，默认情况下，行优先于其下方的每一行。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一命中使用唯一命中策略，每一行必须是唯一的，这意味着不能重叠。</font><font style="vertical-align: inherit;">如果有Verification功能在开发时就此发出警告，那么永远不会出现两行可以触发的情况。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">First Hit First命中只触发一行，首先从上到下满足。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已解决的命中与第一次命中类似，但您可以例如在第5行中提供第10行优先级。这意味着您可以保留所需的行的顺序以实现可视化可读性，但指定优先级例外。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则顺序可以触发多行，并且验证不报告行之间的冲突，因为它们预计会发生。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无这是正常的点击模式。</font><font style="vertical-align: inherit;">旧决策表默认使用此选项，但由于7.0使用PHREAK，因此行顺序现在很重要。</font><font style="vertical-align: inherit;">旧表不需要迁移工具。</font><font style="vertical-align: inherit;">多行可以触发。</font><font style="vertical-align: inherit;">验证警告有冲突的行。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_guided_rule_editor_support_formulae_in_composite_field_constraints"><a class="anchor" href="index.html#_guided_rule_editor_support_formulae_in_composite_field_constraints"></a><a class="link" href="index.html#_guided_rule_editor_support_formulae_in_composite_field_constraints"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2.2。</font><font style="vertical-align: inherit;">引导规则编辑器：支持复合字段约束中的公式</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复合字段约束现在支持使用公式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向模式添加约束时，“多字段约束”选项（“全部（和）”和“任何（或）”除了表达式之外还支持使用公式）。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/composite-field-constraint-formulae1.png" alt="复合场约束公式1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图365.复合字段约束 - 选择公式</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/composite-field-constraint-formulae2.png" alt="复合场约束公式2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图366.复合字段约束 - 公式编辑器</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_guided_decision_table_editor_new_editor"><a class="anchor" href="index.html#_guided_decision_table_editor_new_editor"></a><a class="link" href="index.html#_guided_decision_table_editor_new_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2.3。</font><font style="vertical-align: inherit;">引导决策表编辑器：新编辑器</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导决策表编辑器已被广泛重写，以支持在同一编辑器中编辑多个表。</font><font style="vertical-align: inherit;">共享关联的表是明显相关的，这使得更容易可视化关系。</font><font style="vertical-align: inherit;">从创建或更新另一个表的条件所消耗的事实的操作中获取关联。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">亮点包括： - </font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全新的外观和感觉</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可调整大小的列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过拖放“在表格中”重新排序列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过拖放“在表格中”重新排序行</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用拖放重新定位表</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">平移视图以滚动内容</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoomable视图，因此您可以“缩小”以立即查看更多内容</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个决策表的文件锁和版本历史记录</font></font></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dtables-new-editor.png" alt="dtables新编辑">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图367.新编辑器</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/dtables-new-editor-multiple.png" alt="dtables新编辑器多个">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图368.新编辑器 - 多个打开的表</font></font></div>
</div>
</div>
<div class="sect4">
<h5 id="_guided_decision_table_editor_caching_of_enumeration_lookups"><a class="anchor" href="index.html#_guided_decision_table_editor_caching_of_enumeration_lookups"></a><a class="link" href="index.html#_guided_decision_table_editor_caching_of_enumeration_lookups"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2.4。</font><font style="vertical-align: inherit;">引导式决策表编辑器：枚举查找的缓存</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导式决策表编辑器长期以来一直能够使用枚举定义。</font><font style="vertical-align: inherit;">但是，由于表可以包含许多单元，如果定义需要服务器往返从辅助类中检索查找，则枚举的性能有时可能不太理想。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务器往返的结果现在缓存在客户端中，因此在修改单元时不需要连续的网络调用。</font><font style="vertical-align: inherit;">在打开编辑器并按需填充时，将初始化缓存。</font></font></p>
</div>
</div>
<div class="sect4">
<h5 id="_guided_decision_table_editor_verification_and_validation"><a class="anchor" href="index.html#_guided_decision_table_editor_verification_and_validation"></a><a class="link" href="index.html#_guided_decision_table_editor_verification_and_validation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.15.2.5。</font><font style="vertical-align: inherit;">引导决策表编辑器：验证和验证</font></font></a></h5>
<div class="sect5">
<h6 id="_system_property"><a class="anchor" href="index.html#_system_property"></a><a class="link" href="index.html#_system_property"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用系统属性禁用验证和验证</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这对于大型决策表或用户想要忽略V＆V非常有用。</font></font><strong><code></code></strong><code>org.kie.verification.disable-dtable-realtime-verification<strong></strong></code><font style="vertical-align: inherit;"></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_range_checks"><a class="anchor" href="index.html#_range_checks"></a><a class="link" href="index.html#_range_checks"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围检查</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">验证的第一步是帮助您制定完整的决策表。</font><font style="vertical-align: inherit;">在下一个版本中，我们添加了对检查布尔值，数值和日期值是否涵盖所有范围的支持。</font><font style="vertical-align: inherit;">这意味着如果您的表格检查申请是否获得批准，验证报告将提醒您确保您还处理申请未获批准的情况。</font></font></p>
</div>
</div>
<div class="sect5">
<h6 id="_unique_single_hit"><a class="anchor" href="index.html#_unique_single_hit"></a><a class="link" href="index.html#_unique_single_hit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">独特的单击</font></font></a></h6>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在过去，如果行相互包含，则验证和验证会引发问题。</font><font style="vertical-align: inherit;">如果一行包含另一行，则可以用相同的一组事实来满足条件。</font><font style="vertical-align: inherit;">意味着同一个表中的两行可以同时触发。</font><font style="vertical-align: inherit;">在某些情况下，包含无关紧要，但在其他情况下，您希望有一个表格，当时只有一个规则触发。</font><font style="vertical-align: inherit;">然后该表是单个命中决策表。</font><font style="vertical-align: inherit;">为了帮助制作只有一行可以触发的单个命中表，验证会密切关注条件。</font><font style="vertical-align: inherit;">报告单击时的情况。</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_breaking_changes_in_drools_7_0_from_6_x"><a class="anchor" href="index.html#_breaking_changes_in_drools_7_0_from_6_x"></a><a class="link" href="index.html#_breaking_changes_in_drools_7_0_from_6_x"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16。</font><font style="vertical-align: inherit;">从6.x突破Drools 7.0的变化</font></font></a></h3>
<div class="sect3">
<h4 id="_property_reactivity_enabled_by_default"><a class="anchor" href="index.html#_property_reactivity_enabled_by_default"></a><a class="link" href="index.html#_property_reactivity_enabled_by_default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.1。</font><font style="vertical-align: inherit;">默认启用属性反应</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性反应性已在Drools 5.4中引入，但用户必须通过</font></font><code>@PropertyReactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释或使用</font></font><code>PropertySpecificOption.ALWAYS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建器选项</font><font style="vertical-align: inherit;">在整个KIE基础上</font><font style="vertical-align: inherit;">逐个类地明确启用它</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，由于在正确性和性能观点下使用此功能被认为是一种很好的做法，因此默认情况下它已在Drools 7.0中启用。</font><font style="vertical-align: inherit;">如果需要，可以通过将以下配置添加到kmodule.xml文件来禁用属性反应性并重新配置Drools 7.0以完全像在6.x版中那样工作。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"drools.propertySpecific"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"ALLOWED"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_preserving_accumulate_functions"><a class="anchor" href="index.html#_type_preserving_accumulate_functions"></a><a class="link" href="index.html#_type_preserving_accumulate_functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.2。</font><font style="vertical-align: inherit;">类型保留累积函数</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools 6中，当</font></font><code>sum</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在累积模式中</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">时，</font><font style="vertical-align: inherit;">无论执行求和的字段类型如何，结果始终为Double。</font><font style="vertical-align: inherit;">这导致了以下3个问题：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度损失：长期的总和</font></font><code>1881617265586265321L</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将错误地返回</font></font><code>1.88161726558626534E18</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">的BigDecimal的总和</font></font><code>0.09</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code>0.01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也将是不正确的。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能损失：与Double总和相比明显慢于使用Long或Integer求和。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">泄漏的复杂性：它强制用户在Double上进行模式匹配，或者在Number上更一般地（建议选择），同时可以预期在Integer类型的字段上求和的结果也是整数。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，Drools 7保留了执行求和的表达式的类型，因此可以直接匹配该类型，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Long(...) from accumulate(..., sum(<span class="hljs-variable">$p</span>.getLongWeight()))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_renaming_timedruleexecutionoption"><a class="anchor" href="index.html#_renaming_timedruleexecutionoption"></a><a class="link" href="index.html#_renaming_timedruleexecutionoption"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.3。</font><font style="vertical-align: inherit;">重命名TimedRuleExecutionOption</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于控制何时必须自动执行定时规则的KieSession选项已重命名为</font></font><code>TimedRuleExecutionOption</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复其名称中影响先前版本的输入错误; </font><font style="vertical-align: inherit;">该物业已被调整</font></font><code>drools.timedRuleExecution</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表44.名称更改</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以前的版本</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版 </font></font><code>7.0.0.Final</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSession选项</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimedRuleExectionOption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TimedRuleExecutionOption</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>drools.timedRuleExection</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>drools.timedRuleExecution</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_renaming_and_unification_of_configuration_files"><a class="anchor" href="index.html#_renaming_and_unification_of_configuration_files"></a><a class="link" href="index.html#_renaming_and_unification_of_configuration_files"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.16.4。</font><font style="vertical-align: inherit;">重命名和统一配置文件</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools 6.x中，默认的Drools配置属性配置在两个不同的文件中：*   </font></font><code>drools.default.rulebase.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于drools-core *   </font></font><code>drools.default.packagebuilder.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的META-INF文件夹中，位于drools-compiler的META-INF文件夹中</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Drools 7.0.0中，这些文件统一为一个名为的文件</font></font><code>kie.default.properties.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，位于drools-core的META-INF文件夹中。</font><font style="vertical-align: inherit;">如果要覆盖这些属性的默认值或添加自己的属性，可以将它们放在名为</font></font><code>kie.properties.conf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于项目的META-INF文件夹中的文件中。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.7.0.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.7.0.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.7.0.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17。</font><font style="vertical-align: inherit;">KIE Workbench 7.0.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台已更新，以支持Wildfly 10和EAP7。</font><font style="vertical-align: inherit;">最低Java要求是JDK8。</font></font></p>
</div>
<div class="sect3">
<h4 id="_new_authoring_library"><a class="anchor" href="index.html#_new_authoring_library"></a><a class="link" href="index.html#_new_authoring_library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.1。</font><font style="vertical-align: inherit;">新作者（图书馆）</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在创作有一个新的设计，有一个更好的信息组织。</font><font style="vertical-align: inherit;">现在可以管理（创建，删除和编辑）团队（组织单位），列出存储库中的项目和项目中的资产。</font><font style="vertical-align: inherit;">选择“资产”后，您可以看到“资源编辑器”和“项目浏览器”。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Library使用Workbench的索引。</font><font style="vertical-align: inherit;">因此，</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除现有索引信息，以便Workbench可以使用必要信息重建它们。</font><font style="vertical-align: inherit;">索引信息存储在</font></font><code>.index</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序服务器</font></font><code>\bin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹中的文件夹中（或者您可能已使用</font></font><code>org.uberfire.metadata.index.dir</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font><font style="vertical-align: inherit;">配置</font><font style="vertical-align: inherit;">）。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-teams-view.png" alt="图书馆团队观点">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图369.团队视图</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-team-creation.png" alt="图书馆团队创建">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图370.团队创建</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-empty-library.png" alt="图书馆空库">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图371.清空存储库</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-projects-list.png" alt="图书馆项目清单">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图372.包含项目的存储库</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-empty-project.png" alt="图书馆空项目">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图373.空项目</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-assets-list.png" alt="图书馆资产清单">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图374.包含资产的项目</font></font></div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-asset-view.png" alt="图书馆资产视图">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图375.资产视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，您可以通过访问主页&gt;管理员&gt;库来设置有关默认工作区的一些首选项。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/library-preferences.png" alt="图书馆偏好">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图376.库首选项</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_authoring_imports_of_examples"><a class="anchor" href="index.html#_authoring_imports_of_examples"></a><a class="link" href="index.html#_authoring_imports_of_examples"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.2。</font><font style="vertical-align: inherit;">创作 - 导入示例</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在7.x之前，Workbench用于在启动时安装预定义的示例。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本7.x带来了从git存储库导入示例的功能。</font><font style="vertical-align: inherit;">“创作视角”包含“示例”的菜单项，单击此按钮可启动向导以指导您完成导入。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例321.菜单项</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Authoring Perspective包含“Examples”的菜单项。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/examples-wizard1.png" alt="示例wizard1">
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子322.向导 - 输入源存储库</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向导的第1页允许用户选择预定义的示例存储库，或输入自己的URL。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/examples-wizard2.png" alt="示例wizard2">
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例323.向导 - 选择项目</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向导的第2页列出了源存储库中可用的项目。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/examples-wizard3.png" alt="示例wizard3">
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例324.向导 - 输入目标存储库</font></font></div>
<div class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向导的第3页允许用户输入目标存储库名称并将其与组织单位关联。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/examples-wizard4.png" alt="示例wizard4">
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authoring_pop_ups_improvements"><a class="anchor" href="index.html#_authoring_pop_ups_improvements"></a><a class="link" href="index.html#_authoring_pop_ups_improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.3。</font><font style="vertical-align: inherit;">创作 - 弹出式改进</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有系统弹出窗口都改进了UX。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下隐藏“评论”字段。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/popups-comment-field.png" alt="弹出注释字段">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，从任何包复制项目文件时，可以选择目标包。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/popups-package-field.png" alt="弹出包字段">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authoring_project_editor_reimport_button"><a class="anchor" href="index.html#_authoring_project_editor_reimport_button"></a><a class="link" href="index.html#_authoring_project_editor_reimport_button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.4。</font><font style="vertical-align: inherit;">创作 - 项目编辑 - 重新导入按钮</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“重新导入”按钮使所有缓存的依赖项无效，以便处理更新特定依赖项而不修改其版本的情况。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_security_management"><a class="anchor" href="index.html#_security_management"></a><a class="link" href="index.html#_security_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.5。</font><font style="vertical-align: inherit;">安全管理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本6.4中发布的用户和组管理透视图已统一到一个透视图中，该透视图提供用于管理用户和组的共享视图以及授予任何应用程序角色的权限。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个非常新的视角</font><font style="vertical-align: inherit;">位于顶部菜单栏</font><font style="vertical-align: inherit;">的“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主页”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font><font style="vertical-align: inherit;">下</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementMenuEntry.png" alt="SecurityManagementMenuEntry">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图377.链接到安全管理透视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个屏幕截图显示了这个新透视图的外观：</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementHome.png" alt="SecurityManagementHome">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图378.安全管理主页</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签窗格显示在左侧，允许用户选择“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">组”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或“ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户”</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡。</font><font style="vertical-align: inherit;">单击角色（或组）后，将显示详细屏幕，允许用户配置某些安全设置。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/SecurityManagementRoleView.png" alt="SecurityManagementRoleView">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图379.角色安全设置</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主页透视</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：登录后用户指向的目标透视图，这使得每个角色/组可以拥有不同的主页。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优先级</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：用于确定哪些设置（主视角，权限等）优先于分配了多个角色或组的用户。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">权限</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：完整ACL（</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问控制列表</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）编辑器，用于对平台中可用的不同资源（如</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perspectives</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，
 </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organizational Units</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repositories</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Projects</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）授予/拒绝权限</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">可以通过添加单个异常来覆盖任何这些资源类型之上的全局权限，这可以实现</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">授予所有拒绝一些</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">拒绝所有授予一些</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">策略。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_kie_config_cli_has_been_removed"><a class="anchor" href="index.html#_kie_config_cli_has_been_removed"></a><a class="link" href="index.html#_kie_config_cli_has_been_removed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.6。</font><font style="vertical-align: inherit;">kie-config-cli已被删除</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>kie-config-cli.[sh/bat]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于管理6.x中存在的远程存储库</font><font style="vertical-align: inherit;">的命令行工具</font><font style="vertical-align: inherit;">已被删除，原因如下：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它提供的安全相关操作（</font></font><code>add-role-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-role-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>add-role-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-role-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>add-role-project</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-role-project</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）已被替换更全面的</font></font><a href="index.html#_wb.userandgroupmgmt"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安全管理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关管理部署的操作（</font></font><code>list-deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>add-deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）不再有意义，因为jBPM的运行已经从工作台删除。</font><font style="vertical-align: inherit;">仍然可以使用</font></font><a href="index.html#_kie.ksrestapi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Server REST API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以编程方式管理部署</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">剩余的操作（</font></font><code>create-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>list-org-units</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>create-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>list-repo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>add-repo-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>remove-repo-org-unit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>list-project-details</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）可作为一部分</font></font><a href="index.html#_drools.workbenchremoteapi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台远程API</font></font></a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_user_and_project_admin_pages_and_preferences"><a class="anchor" href="index.html#_user_and_project_admin_pages_and_preferences"></a><a class="link" href="index.html#_user_and_project_admin_pages_and_preferences"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.7。</font><font style="vertical-align: inherit;">用户和项目管理页面和首选项</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台现在有一个新菜单项：“Admin”。</font><font style="vertical-align: inherit;">在那里，您可以找到一些管理工具，如“用户”，“组”和“角色”管理，以及一般首选项。</font><font style="vertical-align: inherit;">当在那里更改首选项时，它将影响依赖于它的所有位置，但仅限于已记录的用户。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/admin-page-user-access.png" alt="管理页面用户访问权限">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图380.用户管理页面访问</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/admin-page-user.png" alt="管理页面用户">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图381.用户管理页面，包含用户级工具和首选项</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个项目还有自己的管理页面，包括管理工具和首选项。</font><font style="vertical-align: inherit;">在此处更改首选项时，它将仅影响该项目，并且仅针对已记录的用户。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/admin-page-project-access.png" alt="管理页面项目访问">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图382.项目管理页面访问</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/admin-page-project.png" alt="管理页面项目">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图383.项目管理页面，包含项目级工具和首选项</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_gav_conflict_check_and_child_gav_edition"><a class="anchor" href="index.html#_gav_conflict_check_and_child_gav_edition"></a><a class="link" href="index.html#_gav_conflict_check_and_child_gav_edition"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.8。</font><font style="vertical-align: inherit;">GAV冲突检查和儿童GAV版</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，对于每个用户，可以设置GAV冲突检查标志，并且还允许或阻止子GAV版本用于他们的所有项目，或者专门用于每个项目。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果通过“Admin”菜单项进行访问，则可以在管理工具“Project”中找到该配置。</font><font style="vertical-align: inherit;">也可以通过在项目管理页面上输入管理工具“常规”来找到它。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/gav-preferences.png" alt="gav偏好">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图384.组工件版本（GAV）首选项</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_data_source_management"><a class="anchor" href="index.html#_data_source_management"></a><a class="link" href="index.html#_data_source_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.17.9。</font><font style="vertical-align: inherit;">数据源管理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的数据源管理系统使工作台能够定义用于访问外部数据库的数据源和驱动程序。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一些包含的功能是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理数据源的新视角：</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceManagementPerspective.png" alt="DataSourceManagementPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图385.数据源创作透视图</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于指导数据源创建的新向导。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewDataSourceWizard.png" alt="NewDataSourceWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图386.新数据源向导</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于指导驱动程序创建的新向导。</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/NewDriverWizard.png" alt="NewDriverWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图387.新驱动程序向导</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及浏览数据源指向的数据库的数据库信息的能力。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用的模式浏览</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser1.png" alt="DataSourceContentBrowser1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图388.数据库模式</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用表格浏览</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser2.png" alt="DataSourceContentBrowser2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图389.模式表</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表内容浏览</font></font></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/DataSourceContentBrowser3.png" alt="DataSourceContentBrowser3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图390.表信息</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kieserver.releasenoteskie.7.0.0"><a class="anchor" href="index.html#_kieserver.releasenoteskie.7.0.0"></a><a class="link" href="index.html#_kieserver.releasenoteskie.7.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18。</font><font style="vertical-align: inherit;">从6.x中断Kie Server 7.0中的更改</font></font></a></h3>
<div class="sect3">
<h4 id="_serviceresponse_xstream_marshalling_changes"><a class="anchor" href="index.html#_serviceresponse_xstream_marshalling_changes"></a><a class="link" href="index.html#_serviceresponse_xstream_marshalling_changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.1。</font><font style="vertical-align: inherit;">ServiceResponse XStream编组更改</font></font></a></h4>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
本发行说明仅适用于与Kie Server（kie-server）API直接连接，而不适用于使用Kie Server Java Client（kie-server-client）API时。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了更加符合JAXB编组，XStream编组已经发生了以下变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML ServiceResponse元素的</font></font><code>response</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象不再使用规范名称进行渲染。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XStream现在使用</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>msg</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作为属性，而不是子元素。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关详细信息，请参阅</font></font><a href="https://issues.jboss.org/browse/DROOLS-1509"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DROOLS-1509</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_simplified_planner_rest_api"><a class="anchor" href="index.html#_simplified_planner_rest_api"></a><a class="link" href="index.html#_simplified_planner_rest_api"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.2。</font><font style="vertical-align: inherit;">简化的Planner REST API</font></font></a></h4>
<div class="sect4">
<h5 id="_serviceresponse_wrapper_removal"><a class="anchor" href="index.html#_serviceresponse_wrapper_removal"></a><a class="link" href="index.html#_serviceresponse_wrapper_removal"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.2.1。</font><font style="vertical-align: inherit;">ServiceResponse包装器删除</font></font></a></h5>
<div class="paragraph">
<p><code>ServiceResponse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已从KIE Server返回的Planner服务响应中删除了包装器。</font><font style="vertical-align: inherit;">这允许更容易地处理客户端上的响应。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">solver-instance</span>&gt;</span><font></font>
    ...<font></font>
    <span class="hljs-tag">&lt;<span class="hljs-title">status</span>&gt;</span>SOLVING<span class="hljs-tag">&lt;/<span class="hljs-title">status</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">score</span> <span class="hljs-attribute">scoreClass</span>=<span class="hljs-value">"org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore"</span>&gt;</span>0hard/-10soft<span class="hljs-tag">&lt;/<span class="hljs-title">score</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">best-solution</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"curriculumcourse.curriculumcourse.CourseSchedule"</span>&gt;</span><font></font>
        ...<font></font>
    <span class="hljs-tag">&lt;/<span class="hljs-title">best-solution</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">solver-instance</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_new_planner_api_overview"><a class="anchor" href="index.html#_new_planner_api_overview"></a><a class="link" href="index.html#_new_planner_api_overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.18.2.2。</font><font style="vertical-align: inherit;">新的Planner API概述</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注册求解器：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUT </font></font><a href="http://%24%7Bkie-server%7D/services/rest/server/containers/$%7Bcontainer_id%7D/solvers/$%7Bsolver_id%7D" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// $ {kie-server} / services / rest / server / containers / $ {container_id} / solvers / $ {solver_id}</font></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提交解决方案：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POST </font></font><a href="http://%24%7Bkie-server%7D/services/rest/server/containers/$%7Bcontainer_id%7D/solvers/$%7Bsolver_id%7D/state/solving" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// $ {kie-server} / services / rest / server / containers / $ {container_id} / solvers / $ {solver_id} / state / solving</font></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得最佳解决方案：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GET </font></font><a href="http://%24%7Bkie-server%7D/services/rest/server/containers/$%7Bcontainer_id%7D/solvers/$%7Bsolver_id%7D/bestsolution" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// $ {kie-server} / services / rest / server / containers / $ {container_id} / solvers / $ {solver_id} / bestsolution</font></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">终止求解器：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">POST </font></font><a href="http://%24%7Bkie-server%7D/services/rest/server/containers/$%7Bcontainer_id%7D/solvers/$%7Bsolver_id%7D/state/terminating-early" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// $ {kie-server} / services / rest / server / containers / $ {container_id} / solvers / $ {solver_id} / state / terminating-early</font></font></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理一个求解器：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DELETE </font></font><a href="http://%24%7Bkie-server%7D/services/rest/server/containers/$%7Bcontainer_id%7D/solvers/$%7Bsolver_id%7D" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http：// $ {kie-server} / services / rest / server / containers / $ {container_id} / solvers / $ {solver_id}</font></font></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.5.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.5.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.5.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19。</font><font style="vertical-align: inherit;">在Drools 6.5.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_configurable_threadfactory"><a class="anchor" href="index.html#_configurable_threadfactory"></a><a class="link" href="index.html#_configurable_threadfactory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.1。</font><font style="vertical-align: inherit;">可配置的ThreadFactory</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些运行时环境（例如Google App Engine）不允许直接创建新的线程。</font><font style="vertical-align: inherit;">因此，现在可以通过设置系统属性</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">drools.threadFactory</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">及其类名</font><font style="vertical-align: inherit;">来插入自己的ThreadFactory实现</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，如果您使用该类实现了与Google App Engine兼容的ThreadFactory，则</font></font><code>com.user.project.GoogleAppEngineThreadFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过设置Drools来使用它：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs">drools.threadFactory = com.user.project.GoogleAppEngineThreadFactory</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_use_of_any_expressions_as_input_for_a_query"><a class="anchor" href="index.html#_use_of_any_expressions_as_input_for_a_query"></a><a class="link" href="index.html#_use_of_any_expressions_as_input_for_a_query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.2。</font><font style="vertical-align: inherit;">使用任何表达式作为查询的输入</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以使用查询的输入参数作为事实的字段，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query contains(<span class="hljs-constant">String</span> <span class="hljs-variable">$s</span>, <span class="hljs-constant">String</span> <span class="hljs-variable">$c</span>)
    <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span>= <span class="hljs-constant">String</span>( this.contains( <span class="hljs-variable">$c</span> ) )
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-constant">PersonNamesWithA</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>()<font></font>
    contains( <span class="hljs-variable">$p</span>.name, <span class="hljs-string">"a"</span>; )
<span class="hljs-keyword">then</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及更多通常的任何类型的有效表达式，如：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">query checkLength(<span class="hljs-constant">String</span> <span class="hljs-variable">$s</span>, int <span class="hljs-variable">$l</span>)
    <span class="hljs-variable">$s</span> <span class="hljs-symbol">:</span>= <span class="hljs-constant">String</span>( length == <span class="hljs-variable">$l</span> )
<span class="hljs-keyword">end</span><font></font>
<font></font>
rule <span class="hljs-constant">CheckPersonNameLength</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$i</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Integer</span>()
    <span class="hljs-variable">$p</span> <span class="hljs-symbol">:</span> <span class="hljs-constant">Person</span>()<font></font>
    checkLength( <span class="hljs-variable">$p</span>.name, <span class="hljs-number">1</span> + <span class="hljs-variable">$i</span> + <span class="hljs-variable">$p</span>.age; )
<span class="hljs-keyword">then</span>
<span class="hljs-keyword">end</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_update_with_modified_properties"><a class="anchor" href="index.html#_update_with_modified_properties"></a><a class="link" href="index.html#_update_with_modified_properties"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.3。</font><font style="vertical-align: inherit;">使用已修改的属性进</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入了属性反应性以避免不需要的和无用的（重新）评估，并允许引擎仅对实际约束或绑定在给定模式内的属性的修改作出反应。</font><font style="vertical-align: inherit;">但是，此功能仅对在规则结果内执行的修改自动可用。</font><font style="vertical-align: inherit;">相反，程序更新不知道已更改的对象属性，因此无法使用此功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了克服此限制，现在可以在update语句中指定已修改对象中已更改的属性的名称，如以下示例所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp">Person me = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">"me"</span>, <span class="hljs-number">40</span>);<font></font>
FactHandle meHandle = ksession.insert( me );<font></font>
<font></font>
me.setAge(<span class="hljs-number">41</span>);<font></font>
me.setAddress(<span class="hljs-string">"California Avenue"</span>);<font></font>
ksession.update( meHandle, me, <span class="hljs-string">"age"</span>, <span class="hljs-string">"address"</span> );</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_monitoring_framework_improvements"><a class="anchor" href="index.html#_monitoring_framework_improvements"></a><a class="link" href="index.html#_monitoring_framework_improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.19.4。</font><font style="vertical-align: inherit;">监控框架改进</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了提供对KieContainers的监视，引入了一种新类型的MBean，并且重新审视了JMX MBean层次结构，以反映与KieBases的相关MBean的关系。</font><font style="vertical-align: inherit;">JMX对象已经规范化以反映Kie API中使用的术语。</font><font style="vertical-align: inherit;">引入了一种新类型的MBean，以便为无状态KieSession提供监视，这在以前的版本中是不可用的。</font></font></p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表45. JMX对象名更改</font></font></caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的MBean</font></font></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前 </font></font><code>6.5.x</code></th>
<th class="tableblock halign-left valign-top"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 </font></font><code>6.5.0.Final</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieContainer</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N / A</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.kie:kcontainerId=<em>{kcontainerId}</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieBase</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.drools.kbases:type=<em>{kbaseId}</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.kie:kcontainerId=<em>{kcontainerId}</em>,kbaseId=<em>{kbaseId}</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSession（有状态）</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.drools.kbases:type=<em>{kbaseId}</em>,group=Sessions,sessionId=<em>{ksessionId}</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.kie:kcontainerId=<em>{kcontainerId}</em>,kbaseId=<em>{kbaseId}</em>,ksessionType=Stateful,ksessionName=<em>{ksessionName}</em></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无国籍的KieSession</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N / A</font></font></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.kie:kcontainerId=<em>{kcontainerId}</em>,kbaseId=<em>{kbaseId}</em>,ksessionType=Stateless,ksessionName=<em>{ksessionName}</em></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSession MBean整合了以相同名称实例化的所有会话的统计数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieSession创建通过</font></font><code>JPAKnowledgeService</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将根据KieSession的MBean被监控具有恒定</font></font><code>{ksessionName}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增值的到</font></font><code>persistent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">此MBean不由KieContainer直接管理，因此需要在不再需要监视时从JMX手动取消注册。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的JMX objectnaming方案现在为ID强制执行适当的JMX引用，例如： </font></font><code>org.kie:kcontainerId="2cb55f40-f220-432a-aba8-7940c18bf108",kbaseId="KBase1"</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">旧的DroolsManagementAgent（已在JMX上注册</font></font><code>org.drools:type=DroolsManagementAgent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）不再需要，因此不再在JMX上注册。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果适用，</font><font style="vertical-align: inherit;">KieSession MBean现在具有适当的JMX </font></font><code>CompositeData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>TabularData</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持。</font><font style="vertical-align: inherit;">KieSession MBean继续支持所有与流程相关的聚合统计信息监控，但不再显示每个流程实例的开始/结束日期：jBPM中针对此范围提供审计和日志记录支持。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了针对正确显示分层嵌套的特定错误修复外，Drools RHQ / JON插件已更改为反映所有上述更改。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.4.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.4.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.4.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20。</font><font style="vertical-align: inherit;">在Drools 6.4.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_better_java_8_compatibility"><a class="anchor" href="index.html#_better_java_8_compatibility"></a><a class="link" href="index.html#_better_java_8_compatibility"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.1。</font><font style="vertical-align: inherit;">更好的Java 8兼容性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以在规则的右侧（然后）部分使用Java 8语法（lambdas和方法引用）。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_more_robust_incremental_compilation"><a class="anchor" href="index.html#_more_robust_incremental_compilation"></a><a class="link" href="index.html#_more_robust_incremental_compilation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.2。</font><font style="vertical-align: inherit;">更强大的增量编译</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当涉及具有子网（具有复杂存在模式的规则）的一个或多个规则时，增量编译（动态规则库更新）具有一些相关缺陷，尤其是当不同规则之间共享相同子网时。</font><font style="vertical-align: inherit;">此问题需要部分重写现有的增量编译算法，然后进行完整的审计，该审计也由全新的测试套件验证，仅由该区域的20,000多个测试案例构成。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_improved_multi_threading_behaviour"><a class="anchor" href="index.html#_improved_multi_threading_behaviour"></a><a class="link" href="index.html#_improved_multi_threading_behaviour"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.3。</font><font style="vertical-align: inherit;">改进的多线程行为</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理多线程的引擎代码已被部分重写，以便删除大量同步点并提高稳定性和可预测性。</font><font style="vertical-align: inherit;">特别是这个新的实现允许用户线程（在会话上执行插入/更新/删除操作），Engine线程（执行适当的规则评估）和Timer one（执行基于时间的操作）之间更清晰的分离和更好的交互。喜欢活动到期）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过Drools 6引入的新的phreak算法使得这种改进成为可能。实际上，在ReteOO算法中，在用户插入/更新/删除操作期间执行网络评估，这意味着每个用户动作锁定整个引擎。</font><font style="vertical-align: inherit;">与phreak相反，插入/更新/删除是分开的，并且在调用fireAllRules或fireUntilHalt时发生网络评估。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更详细地说，这一改进由两部分组成。</font><font style="vertical-align: inherit;">首先，添加了一个新的线程安全队列，将所有用户操作存储为命令。</font><font style="vertical-align: inherit;">此队列由User线程填充，而其条目在规则评估阶段由Engine线程刷新和处理。</font><font style="vertical-align: inherit;">第二部分介绍了一个状态机协调用户，计时器和引擎线程，然后提供更清晰和自我记录的方式来模拟他们的交互。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_oopath_improvements_2"><a class="anchor" href="index.html#_oopath_improvements_2"></a><a class="link" href="index.html#_oopath_improvements_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.20.4。</font><font style="vertical-align: inherit;">OOPath的改进</font></font></a></h4>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oroath已经与Drools 6.3.0一起推出。</font><font style="vertical-align: inherit;">在Drools 6.4.0中，它已得到增强，可支持以下功能：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束还可以具有对在当前迭代之前遍历的图的对象的beckreference。</font><font style="vertical-align: inherit;">例如以下OOPath：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams/grades{ result &gt; ../averageResult } )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅匹配结果高于通过考试平均成绩的成绩。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">约束也可以递归地成为另一个OOPath，如下所示：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$exam</span>: /plan/exams{ /grades{ result &gt; <span class="hljs-number">20</span> } } )</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以使用</font></font><code>?/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">分隔符代替分隔符</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如下例所示：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams{ course == <span class="hljs-string">"Big Data"</span> }?/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过这样做，引擎将对考试所做的更改做出反应，或者如果考试被添加到计划中，但是如果在现有考试中添加了新成绩则不会。</font><font style="vertical-align: inherit;">当然，如果OOPath块不是反应性的，那么从那里直到表达式结束的OOPath的所有剩余部分也将是非反应性的。</font><font style="vertical-align: inherit;">例如以下OOPath</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: ?/plan/exams{ course == <span class="hljs-string">"Big Data"</span> }/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将是完全无反应的。</font><font style="vertical-align: inherit;">因此，不允许</font></font><code>?/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在同一个OOPath中多次</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">分隔符，因此表达式如下：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan?/exams{ course == <span class="hljs-string">"Big Data"</span> }?/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将导致编译时错误。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.6.4.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.6.4.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.6.4.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21。</font><font style="vertical-align: inherit;">KIE Workbench 6.4.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_new_look_and_feel"><a class="anchor" href="index.html#_new_look_and_feel"></a><a class="link" href="index.html#_new_look_and_feel"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.1。</font><font style="vertical-align: inherit;">新的外观和感觉</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">整个工作台中的一般外观已更新为采用</font></font><a href="https://www.patternfly.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PatternFly</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该更新为每个屏幕带来了更清晰，轻量和更一致的用户体验。</font><font style="vertical-align: inherit;">允许用户通过删除所有不必要的视觉元素来专注于数据和任务。</font><font style="vertical-align: inherit;">交互和行为基本保持不变，将此更改的范围限制为可视更新。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewLookAndFeel.png" alt="NewLookAndFeel">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图391. Workbench  - 新外观</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_various_ui_improvements"><a class="anchor" href="index.html#_various_ui_improvements"></a><a class="link" href="index.html#_various_ui_improvements"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.2。</font><font style="vertical-align: inherit;">各种UI改进</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了上面描述的针对一般外观的PatternFly更新之外，工作台中的许多单独组件已得到改进，以创建更好的用户体验。</font><font style="vertical-align: inherit;">这包括确保模态弹出窗口的默认大小适合于适合相应的内容，调整文本字段的大小以及对齐标签，以及在较小的屏幕上使用时改进各种组件的调整大小行为。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ModalPostPatternFly.png" alt="ModalPostPatternFly">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图392. Workbench  - 大小合适的弹出窗口</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/LabelFieldAlignmentPostPatternFly.png" alt="LabelFieldAlignmentPostPatternFly">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图393. Workbench  - 正确大小的文本字段和对齐的标签</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/HorizonalAlignmentPostPatternFly.png" alt="Horizo​​nalAlignmentPostPatternFly">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图394. Workbench  - 具有有限水平空间的已调整大小的编辑器窗口</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_new_locales"><a class="anchor" href="index.html#_new_locales"></a><a class="link" href="index.html#_new_locales"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.3。</font><font style="vertical-align: inherit;">新的语言环境</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在添加了</font><font style="vertical-align: inherit;">Locales </font></font><code>ru</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（俄语）和</font></font><code>zh_TW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Chineses Traditional）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在支持的语言环境是：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认英文。</font></font></p>
</li>
<li>
<p><code>es</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （西班牙语）</font></font></p>
</li>
<li>
<p><code>fr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （法文）</font></font></p>
</li>
<li>
<p><code>de</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （德语）</font></font></p>
</li>
<li>
<p><code>ja</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （日本）</font></font></p>
</li>
<li>
<p><code>pt_BR</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （葡萄牙语 - 巴西）</font></font></p>
</li>
<li>
<p><code>zh_CN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （简体中文）</font></font></p>
</li>
<li>
<p><code>zh_TW</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （中国传统的）</font></font></p>
</li>
<li>
<p><code>ru</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> （俄语）</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_authoring_imports_consistent_terminology"><a class="anchor" href="index.html#_authoring_imports_consistent_terminology"></a><a class="link" href="index.html#_authoring_imports_consistent_terminology"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.4。</font><font style="vertical-align: inherit;">创作 - 进口 - 一致的术语</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Workbench曾经在项目编辑器中有一个“导入建议”部分，这实际上是用户注册Java Runtime环境提供的类以供规则创作使用的方法。</font><font style="vertical-align: inherit;">此外，编辑器有一个“配置”选项卡，用户需要将其他包中的类导入到规则所在的位置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个术语都不清楚，并且彼此之间以及Workbench的其他方面都不一致。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经将这些术语更改为（希望）更明确的含义，并与在Workbench中创建Java类所使用的“数据对象”术语保持一致。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ExternalDataObjects1.png" alt="ExternalDataObjects1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图395.项目编辑器 - 外部数据对象</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ExternalDataObjects2.png" alt="ExternalDataObjects2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图396.项目编辑器 - 定义外部数据对象</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DataObjects1.png" alt="DataObjects1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图397.资产编辑器 - 数据对象</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“数据对象”屏幕列出与资产位于同一包中的所有数据对象，并允许导入其他包中的其他数据对象。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DataObjects2.png" alt="DataObjects2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图398.资产编辑器 - 定义可用于创作的数据对象</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_disable_automatic_build"><a class="anchor" href="index.html#_disable_automatic_build"></a><a class="link" href="index.html#_disable_automatic_build"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.5。</font><font style="vertical-align: inherit;">禁用自动构建</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用Project Explorer导航Projects时，工作台会自动构建所选项目，并在消息控制台中显示构建消息。</font><font style="vertical-align: inherit;">虽然这是有益的，但它在创作大型项目时会对工作台的性能产生不利影响。</font><font style="vertical-align: inherit;">现在可以使用</font></font><code>org.kie.build.disable-project-explorer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System Property </font><font style="vertical-align: inherit;">禁用自动构建</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">将值设置</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为禁用。</font><font style="vertical-align: inherit;">默认值为</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_support_for_code_scp_code_style_code_git_code_repository_urls"><a class="anchor" href="index.html#_support_for_code_scp_code_style_code_git_code_repository_urls"></a><a class="link" href="index.html#_support_for_code_scp_code_style_code_git_code_repository_urls"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.6。</font><font style="vertical-align: inherit;">支持</font></font><code>SCP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样式</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库URL</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">克隆</font></font><code>git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库时，现在可以使用</font></font><code>SCP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样式URLS </font></font><code>git@github.com:user/repository.git</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您的操作系统的公钥库受密码保护，则可以使用</font></font><code>org.uberfire.nio.git.ssh.passphrase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统属性</font><font style="vertical-align: inherit;">提供密码</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_authoring_duplicate_gav_detection"><a class="anchor" href="index.html#_authoring_duplicate_gav_detection"></a><a class="link" href="index.html#_authoring_duplicate_gav_detection"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.7。</font><font style="vertical-align: inherit;">创作 - 重复GAV检测</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行以下任何操作时，现在将针对项目的所有Maven存储库进行检查，以确定Project的GroupId，ArtifactId和Version是否已存在。</font><font style="vertical-align: inherit;">如果发现冲突，则阻止操作; </font><font style="vertical-align: inherit;">虽然具有该</font></font><code>admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色</font><font style="vertical-align: inherit;">的用户可以覆盖此项</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该功能可以通过系统属性设置来禁用</font></font><code>org.guvnor.project.gav.check.disabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已解决的存储库是在以下位置发现的存储库：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目</font></font><code>POM</code> <code>&lt;repositories&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分（或任何父母</font></font><code>POM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目的</font></font><code>POM</code> <code>&lt;distributionManagement&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven的全局</font></font><code>settings.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置文件。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">受影响的业务：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建新的托管存储库。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器保存项目定义。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将新模块添加到托管多模块存储库。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存</font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器构建和安装项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用项目编辑器构建和部署项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理操作构建，安装或部署项目。</font></font></p>
</li>
<li>
<p><code>REST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 操作创建，安装或部署项目。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有该</font></font><code>Admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色的</font><font style="vertical-align: inherit;">用户</font><font style="vertical-align: inherit;">可以使用项目编辑器中的“存储库”设置覆盖已检查的存储库列表。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/MavenRepositories1.png" alt="MavenRepositories1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图399.项目编辑器 - 查看已解析的存储库</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/MavenRepositories2.png" alt="MavenRepositories2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图400.项目编辑器 - 已解析的存储库列表</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/MavenRepositories3.png" alt="MavenRepositories3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图401.检测到重复的GAV</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_new_execution_server_management_user_interface"><a class="anchor" href="index.html#_new_execution_server_management_user_interface"></a><a class="link" href="index.html#_new_execution_server_management_user_interface"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.8。</font><font style="vertical-align: inherit;">新的执行服务器管理用户界面</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE执行服务器管理UI已经过完全重新设计，以适应最近推出的主要改进。</font><font style="vertical-align: inherit;">除了从头开始构建新UI并遵循PatternFly提供的最佳实践这一事实外，新界面还扩展了以前的功能，使用户可以更好地控制其服务器。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewExecServerUI(1).png" alt="NewExecServerUI">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图402. KIE执行服务器 - 新用户界面</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_user_and_group_management"><a class="anchor" href="index.html#_user_and_group_management"></a><a class="link" href="index.html#_user_and_group_management"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.21.9。</font><font style="vertical-align: inherit;">用户和组管理</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供后端服务和直观友好的用户界面，允许工作台管理员管理应用程序的用户和组。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/UserAndGroupManagement.png" alt="UserAndGroupManagement">
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此接口为工作台管理员提供执行领域相关操作的能力，例如创建用户，创建组，为给定用户分配组或角色等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，它具有用于管理Wildfly，EAP和Tomcat默认领域的内置实现，并且它旨在可扩展 - 任何第三方领域管理系统都可以轻松集成到工作台中。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.3.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.3.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.3.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.22。</font><font style="vertical-align: inherit;">在Drools 6.3.0中新的和值得注意的是什么</font></font></a></h3>
<div class="sect3">
<h4 id="_browsing_graphs_of_objects_with_oopath_2"><a class="anchor" href="index.html#_browsing_graphs_of_objects_with_oopath_2"></a><a class="link" href="index.html#_browsing_graphs_of_objects_with_oopath_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.22.1。</font><font style="vertical-align: inherit;">使用OOPath浏览对象的图形</font></font></a></h4>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能是实验性的</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当事实的字段是集合时，可以使用</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关键字</font><font style="vertical-align: inherit;">将该集合中的所有项目绑定和推理</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">然而，当需要浏览对象图时，</font></font><code>from</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件元素</font><font style="vertical-align: inherit;">的广泛使用</font><font style="vertical-align: inherit;">可能会产生冗长和立方体的语法，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例325.浏览带有from的对象图</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Find all grades for Big Data exam"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-variable">$student</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Student</span>( <span class="hljs-variable">$plan</span><span class="hljs-symbol">:</span> plan )
    <span class="hljs-variable">$exam</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Exam</span>( course == <span class="hljs-string">"Big Data"</span> ) from <span class="hljs-variable">$plan</span>.exams
    <span class="hljs-variable">$grade</span><span class="hljs-symbol">:</span> <span class="hljs-constant">Grade</span>() from <span class="hljs-variable">$exam</span>.grades
<span class="hljs-keyword">then</span> /* <span class="hljs-constant">RHS</span> *<span class="hljs-regexp">/ end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该示例中，假设使用由</font></font><code>Student</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有</font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">研究</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">人</font><font style="vertical-align: inherit;">组成的域模型</font><font style="vertical-align: inherit;">：a </font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以具有零个或多个</font></font><code>Exam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s以及</font></font><code>Exam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">零个或多个</font></font><code>Grade</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s。</font><font style="vertical-align: inherit;">请注意，只有图形的根对象（</font></font><code>Student</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在本例中）才需要位于工作内存中才能使其正常工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过借用XPath中的思想，可以使这种语法更加简洁，因为XPath在处理集合和过滤约束时具有用于导航相关元素的紧凑表示法。</font><font style="vertical-align: inherit;">这个以XPath为基础的符号已被调用，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因为它明确地用于浏览对象的图形。</font><font style="vertical-align: inherit;">使用此表示法可以重写前一个示例，如下所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例326.使用OOPath浏览对象图</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ruby">rule <span class="hljs-string">"Find all grades for Big Data exam"</span> <span class="hljs-keyword">when</span>
    <span class="hljs-constant">Student</span>( <span class="hljs-variable">$grade</span><span class="hljs-symbol">:</span> /plan/exams[course == <span class="hljs-string">"Big Data"</span>]/grades )
<span class="hljs-keyword">then</span> /* <span class="hljs-constant">RHS</span> *<span class="hljs-regexp">/ end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">形式上，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">的核心语法</font><font style="vertical-align: inherit;">可以用这种方式用EBNF表示法定义。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs ini"><span class="hljs-setting">OOPExpr = <span class="hljs-value"><span class="hljs-string">"/"</span> OOPSegment { ( <span class="hljs-string">"/"</span> | <span class="hljs-string">"."</span> ) OOPSegment } ;</span></span>
<span class="hljs-setting">OOPSegment = <span class="hljs-value">[ID ( <span class="hljs-string">":"</span> | <span class="hljs-string">":="</span> )] ID [<span class="hljs-string">"["</span> Number <span class="hljs-string">"]"</span>] [<span class="hljs-string">"{"</span> Constraints <span class="hljs-string">"}"</span>];</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上，</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式具有以下特征。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它必须从头开始</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它可以使用</font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">取消引用对象的单个属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它可以使用</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">取消引用对象的多个属性</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果返回一个集合，它将迭代集合中的值</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在遍历引用的对象时，它可以过滤那些不满足一个或多个约束的对象，在大括号之间写为谓词表达式，如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[course == <span class="hljs-string">"Big Data"</span>]/grades )</code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也可以通过将项目放在方括号之间来访问项目，如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs bash">Student( <span class="hljs-variable">$grade</span>: /plan/exams[<span class="hljs-number">0</span>]/grades )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与基于XPath 1相比，遵循Java约定OOPath索引是基于0的</font></font></p>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_reactive_oopath"><a class="anchor" href="index.html#_reactive_oopath"></a><a class="link" href="index.html#_reactive_oopath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.22.1.1。</font><font style="vertical-align: inherit;">反应性OOPath</font></font></a></h5>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目前，Drools无法对在</font></font><code>OOPath</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式</font><font style="vertical-align: inherit;">求值过程中涉及深度嵌套的更新做出反应</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了使这些对象在当下对变化起反应，有必要使它们扩展类</font></font><code>org.drools.core.phreak.ReactiveObject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">计划通过实现自动检测属于特定域模型的类的机制来克服该限制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展该类后，域对象可以通过调用继承的方法更新其中一个字段时通知引擎</font></font><code>notifyModification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例327.通知引擎已将考试移至其他课程</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCourse</span><span class="hljs-params">(String course)</span> </span>{
    <span class="hljs-keyword">this</span>.course = course;<font></font>
    notifyModification(<span class="hljs-keyword">this</span>);<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样，如果将考试移至其他课程，则会重新触发该规则，并重新计算与该规则匹配的成绩列表。</font></font></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shared.releasenotes.kienavigator"><a class="anchor" href="index.html#_shared.releasenotes.kienavigator"></a><a class="link" href="index.html#_shared.releasenotes.kienavigator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.22.2。</font><font style="vertical-align: inherit;">Eclipse的Kie Navigator视图</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eclipse Tooling中添加了一个新的查看器。</font><font style="vertical-align: inherit;">此Kie Navigator视图用于管理Kie Server安装和项目。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.6.3.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.6.3.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.6.3.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23。</font><font style="vertical-align: inherit;">KIE Workbench 6.3.0中新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_real_time_validation_and_verification_for_the_decision_tables"><a class="anchor" href="index.html#_real_time_validation_and_verification_for_the_decision_tables"></a><a class="link" href="index.html#_real_time_validation_and_verification_for_the_decision_tables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.1。</font><font style="vertical-align: inherit;">决策表的实时验证和验证</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">决策表曾用于验证表的验证按钮。</font><font style="vertical-align: inherit;">现在将其删除，并在每个单元格值更改后验证表。</font><font style="vertical-align: inherit;">验证和验证检查包括：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冗余</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">涵摄</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冲突</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缺少列</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些检查在工作台文档中有详细说明。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_improved_drl_editor"><a class="anchor" href="index.html#_improved_drl_editor"></a><a class="link" href="index.html#_improved_drl_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.2。</font><font style="vertical-align: inherit;">改进的DRL编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DRL编辑器经历了整容; </font><font style="vertical-align: inherit;">从纯文本区域移动到使用ACE编辑器和自定义DRL语法高亮显示器。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/drl-ace-editor.png" alt="drl ace编辑">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图403. ACE编辑器</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_asset_locking"><a class="anchor" href="index.html#_asset_locking"></a><a class="link" href="index.html#_asset_locking"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.3。</font><font style="vertical-align: inherit;">资产锁定</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了避免在编辑资产时发生冲突，引入了一种新的锁定机制，确保一次只能有一个用户编辑资产。</font><font style="vertical-align: inherit;">当用户开始编辑资产时，将自动获取锁定。</font><font style="vertical-align: inherit;">这由资产标题栏以及项目资源管理器视图中出现的锁定符号表示。</font><font style="vertical-align: inherit;">如果用户开始编辑已经锁定的资产，则会出现弹出通知，通知用户当前无法编辑该资产，因为该资产正由另一个用户处理。</font><font style="vertical-align: inherit;">只要编辑用户持有锁，就会阻止其他用户进行更改。</font><font style="vertical-align: inherit;">当编辑用户保存或关闭资产或退出工作台时，将自动释放锁定。</font><font style="vertical-align: inherit;">如果需要，每个用户还可以选择在元数据选项卡中强制执行锁定释放。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DataModelEditingWithLock.png" alt="DataModelEditingWithLock">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图404.编辑资产会自动获取锁定</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DataModelLocked.png" alt="DataModelLocked">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图405.其他用户无法编辑锁定的资产</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_data_modeller_tool_windows"><a class="anchor" href="index.html#_data_modeller_tool_windows"></a><a class="link" href="index.html#_data_modeller_tool_windows"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.4。</font><font style="vertical-align: inherit;">数据建模工具Windows</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools和jBPM配置，持久性（请参阅生成JPA的数据模型）和高级配置已移至“工具窗口”。</font><font style="vertical-align: inherit;">“工具Windows”是最新Uberfire版本中引入的新概念，可用于开发上下文感知屏幕。</font><font style="vertical-align: inherit;">每个“工具窗口”将包含一个域编辑器，用于管理一组相关的数据对象参数。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-DroolsDomainToolWindow6.3.png" alt="DM DroolsDomainToolWindow6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图406. Drools和jBPM域工具窗口</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-JPADomainToolWindow6.3.png" alt="DM JPADomainToolWindow6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图407.持久性工具窗口</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-AdvancedDomainToolWindow6.3.png" alt="DM AdvancedDomainToolWindow6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图408.高级配置工具窗口</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_generation_of_jpa_enabled_data_models"><a class="anchor" href="index.html#_generation_of_jpa_enabled_data_models"></a><a class="link" href="index.html#_generation_of_jpa_enabled_data_models"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.5。</font><font style="vertical-align: inherit;">生成JPA启用的数据模型</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展了数据建模器以支持生成可持久的数据对象。</font><font style="vertical-align: inherit;">可持久化的数据对象基于JPA规范，并且自动生成所有底层元数据。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“新建→数据对象”数据对象可以在创建时标记为可持久。</font></font></p>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-NewDataObject6.3.png" alt="DM NewDataObject6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图409.新数据对象</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“持久性”工具窗口包含“数据对象”和“字段”的JPA域编辑器。</font><font style="vertical-align: inherit;">每个编辑器将默认管理生成的JPA元数据</font></font></p>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-DataObjectJPADomainTab6.3.png" alt="DM DataObjectJPADomainTab6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图410.数据对象级别JPA域编辑器</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-FieldJPADomainTab6.3.png" alt="DM FieldJPADomainTab6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图411.字段级JPA域编辑器</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">持久性配置屏幕已添加到项目编辑器中。</font></font></p>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DM-Persistence-Configuration6.3.png" alt="DM持久性配置6.3">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图412.持久性配置</font></font></div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_data_set_authoring"><a class="anchor" href="index.html#_data_set_authoring"></a><a class="link" href="index.html#_data_set_authoring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.23.6。</font><font style="vertical-align: inherit;">数据集创作</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了创作数据集定义的新视角。</font><font style="vertical-align: inherit;">数据集定义使得从数据库，CSV / Excel文件等外部系统检索数据成为可能，甚至可以使用Java类生成数据。</font><font style="vertical-align: inherit;">一旦数据可用，就可以使用它从Perspective Editor中创建图表和仪表板，只需从任何可用的数据集中提供图表。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/DataSetAuthoringPerspective(1).png" alt="DataSetAuthoringPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图413.数据集创作透视图</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.2.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.2.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.2.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.24。</font><font style="vertical-align: inherit;">在Drools 6.2.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_propagation_modes_2"><a class="anchor" href="index.html#_propagation_modes_2"></a><a class="link" href="index.html#_propagation_modes_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.24.1。</font><font style="vertical-align: inherit;">传播模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入PHREAK作为Drools引擎的默认算法使得规则的评估变得懒惰。</font><font style="vertical-align: inherit;">这种新的Drools懒惰行为允许相关的性能提升，但在某些非常特殊的情况下，打破了一些Drools功能的语义。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更确切地说，在某些情况下，有必要立即将新事实的插入传播到会话中。</font><font style="vertical-align: inherit;">例如，Drools允许通过预先设置'？'来在只拉（或被动）模式下执行查询。</font><font style="vertical-align: inherit;">调用符号，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例328.被动查询</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function">query <span class="hljs-title">Q</span> <span class="hljs-params">(Integer i)</span>
    <span class="hljs-title">String</span><span class="hljs-params">( <span class="hljs-keyword">this</span> == i.toString()</span> )
end
rule R when
    $i : <span class="hljs-title">Integer</span><span class="hljs-params">()</span>
    ?<span class="hljs-title">Q</span><span class="hljs-params">( $i; )</span>
then
    System.out.<span class="hljs-title">println</span><span class="hljs-params">( $i )</span></span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，由于查询是被动的，因此它不应对插入与查询本身中的连接条件匹配的String作出反应。</font><font style="vertical-align: inherit;">换句话说，这个命令序列</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSession ksession = ...<font></font>
ksession.insert(<span class="hljs-number">1</span>);<font></font>
ksession.insert(<span class="hljs-string">"1"</span>);<font></font>
ksession.fireAllRules();</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不应该导致规则R触发，因为在Integer之后插入了满足查询条件的String，并且被动查询不应该对此插入做出反应。</font><font style="vertical-align: inherit;">相反，如果插入序列被反转，则应该触发规则，因为当已经存在的字符串的存在可以满足被动查询时，插入整数将触发它。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不幸的是，PHREAK的懒惰性质不允许引擎对两个事实的插入顺序做出任何区分，因此规则将在两种情况下触发。</font><font style="vertical-align: inherit;">在这种情况下，有必要像旧的基于RETEOO的引擎一样急切地评估规则。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其他情况下，要求传播是急切的，这意味着它不是即时的，但无论如何必须在引擎/议程开始预定的评估之前发生。</font><font style="vertical-align: inherit;">例如，当规则具有no-loop或lock-on-active属性时，这是必要的，实际上当发生这种情况时，引擎会自动强制执行此传播模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了覆盖这些用例，并且在需要立即或急切规则评估的所有其他情况下，可以通过使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Propagation（Propagation.Type）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释规则本身来声明性地指定</font><font style="vertical-align: inherit;">，其中Propagation.Type是枚举3个可能的值：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IMMEDIATE</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示传播立即执行。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">EAGER</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着传播是在计划的评估之前懒惰地进行但是热切地评估。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LAZY</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着传播完全是懒惰的，这是默认的PHREAK行为</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着以下drl：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例329.使用被动查询的数据驱动规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-function">query <span class="hljs-title">Q</span> <span class="hljs-params">(Integer i)</span>
    <span class="hljs-title">String</span><span class="hljs-params">( <span class="hljs-keyword">this</span> == i.toString()</span> )
end
rule R @<span class="hljs-title">Propagation</span><span class="hljs-params">(IMMEDIATE)</span> when
    $i : <span class="hljs-title">Integer</span><span class="hljs-params">()</span>
    ?<span class="hljs-title">Q</span><span class="hljs-params">( $i; )</span>
then
    System.out.<span class="hljs-title">println</span><span class="hljs-params">( $i )</span></span>;<font></font>
end</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当且仅当在String之后插入Integer时，才会使规则R触发，从而根据被动查询的语义进行操作。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.6.2.0.final"><a class="anchor" href="index.html#_wb.releasenotesworkbench.6.2.0.final"></a><a class="link" href="index.html#_wb.releasenotesworkbench.6.2.0.final"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25。</font><font style="vertical-align: inherit;">KIE Workbench 6.2.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_download_repository_or_part_of_the_repository_as_a_zip"><a class="anchor" href="index.html#_download_repository_or_part_of_the_repository_as_a_zip"></a><a class="link" href="index.html#_download_repository_or_part_of_the_repository_as_a_zip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.1。</font><font style="vertical-align: inherit;">以ZIP格式下载存储库或存储库的一部分</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此功能可以将存储库或文件夹作为ZIP文件从存储库下载。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/zip_repo.png" alt="zip repo">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图414.下载当前存储库或项目</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/zip_folder.png" alt="ZIP文件夹">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图415.下载文件夹</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_project_editor_permissions"><a class="anchor" href="index.html#_project_editor_permissions"></a><a class="link" href="index.html#_project_editor_permissions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.2。</font><font style="vertical-align: inherit;">项目编辑器权限</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了为项目编辑器配置基于角色的权限的功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用该</font></font><code>WEB-INF/classes/workbench-policy.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件</font><font style="vertical-align: inherit;">配置权限</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持以下权限：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存按钮</font></font></p>
<div class="paragraph">
<p><code>feature.wb_project_authoring_save</code></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除按钮</font></font></p>
<div class="paragraph">
<p><code>feature.wb_project_authoring_delete</code></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制按钮</font></font></p>
<div class="paragraph">
<p><code>feature.wb_project_authoring_copy</code></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重命名按钮</font></font></p>
<div class="paragraph">
<p><code>feature.wb_project_authoring_rename</code></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构建和部署按钮</font></font></p>
<div class="paragraph">
<p><code>feature.wb_project_authoring_buildAndDeploy</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unify_validation_style_in_guided_decision_table_wizard"><a class="anchor" href="index.html#_unify_validation_style_in_guided_decision_table_wizard"></a><a class="link" href="index.html#_unify_validation_style_in_guided_decision_table_wizard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.3。</font><font style="vertical-align: inherit;">统一引导决策表向导中的验证样式。</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们所有的新屏幕都使用GWT-Bootstrap小部件，并提醒用户以一致的方式输入错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最引人注目的差异之一是引导式决策表向导，它以与我们使用GWT-Bootstrap不一致的方式警告错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此向导已更新为使用新外观。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewGuidedDecisionTableWizardValidation.png" alt="NewGuidedDecisionTableWizardValidation">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图416.新的引导决策表向导验证</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_improved_wizards"><a class="anchor" href="index.html#_improved_wizards"></a><a class="link" href="index.html#_improved_wizards"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.4。</font><font style="vertical-align: inherit;">改进的向导</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在引导决策表向导的重新工作期间，为了使其验证与应用程序的其他区域一致，我们借此机会将向导框架移动到GWT-Bootstrap。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由此产生的外观更加令人愉悦。</font><font style="vertical-align: inherit;">我们希望在时间和优先级允许的情况下将更多遗留编辑器迁移到GWT-Bootstrap。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewGuidedDecisionTableWizard.png" alt="NewGuidedDecisionTableWizard">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图417.新向导框架</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_consistent_behaviour_of_xls_guided_decision_tables_and_guided_templates"><a class="anchor" href="index.html#_consistent_behaviour_of_xls_guided_decision_tables_and_guided_templates"></a><a class="link" href="index.html#_consistent_behaviour_of_xls_guided_decision_tables_and_guided_templates"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.5。</font><font style="vertical-align: inherit;">XLS，引导决策表和引导模板的一致行为</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一致性对每个人都是好事。</font><font style="vertical-align: inherit;">用户可以期望不同的创作隐喻产生相同的规则行为（开发人员知道什么时候出现错误！）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XLS决策表，指导决策表和引导规则模板生成空单元格的基础规则的方式存在一些不一致之处。</font><font style="vertical-align: inherit;">这些已被淘汰，使其运作一致。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果所有约束都具有空值（空单元格），则不会创建Pattern。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你是否需要模式，但没有约束; </font><font style="vertical-align: inherit;">您需要包含约束</font></font><code>this != null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此操作与XLS和Guided Decision Tables的工作方式一致。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以通过用双引号分隔空字符串或空白字符串来定义String字段的约束。</font><font style="vertical-align: inherit;">生成规则时，将从值中删除封闭的引号。</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要为其他String值使用引号，可以省略它们。</font><font style="vertical-align: inherit;">然而，它们的使用对于区分空String和空单元的约束是必要的 - 在这种情况下省略约束。</font></font></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_improved_metadata_tab"><a class="anchor" href="index.html#_improved_metadata_tab"></a><a class="link" href="index.html#_improved_metadata_tab"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.6。</font><font style="vertical-align: inherit;">改进的元数据选项卡</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新设计了先前版本中提供的“元数据”选项卡，以提供更好的资产版本信息浏览和恢复。</font><font style="vertical-align: inherit;">现在，每个工作台编辑器都会提供一个“概述”选项卡，使用户可以管理以下信息。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ImprovedMetadataWidget.jpg" alt="ImprovedMetadataWidget">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图418.改进的元数据选项卡</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本历史</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本历史记录显示资产版本的表格视图，并提供“选择”按钮，使用户可以加载以前创建的版本。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ImprovedVersionsHistory.jpg" alt="ImprovedVersionsHistory">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图419.版本历史记录</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元数据部分可以访问其他文件属性。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ImprovedMetadatSection.jpg" alt="ImprovedMetadatSection">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图420.元数据部分</font></font></div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论区</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重新设计的评论区域可以更清晰地讨论文件。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本选择下拉列表</font></font></p>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于菜单栏的“版本选择器下拉列表”提供了从“编辑器选项卡”加载和恢复以前版本的功能，而无需打开“概述”选项卡来加载“版本历史记录”。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ImprovedVersionsSelector.jpg" alt="ImprovedVersionsSelector">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图421.版本选择下拉列表</font></font></div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_improved_data_objects_editor"><a class="anchor" href="index.html#_improved_data_objects_editor"></a><a class="link" href="index.html#_improved_data_objects_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.7。</font><font style="vertical-align: inherit;">改进的数据对象编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Java编辑器统一为标准的工作台编辑器。</font><font style="vertical-align: inherit;">这意味着现在每个数据对象都在他自己的编辑器窗口中进行编辑。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewJavaEditor.png" alt="NewJavaEditor">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图422.改进的数据对象编辑器</font></font></div>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了“新建→数据对象”选项以创建数据对象。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为每个文件添加了“概述”选项卡，以管理文件元数据并可以访问文件版本历史记录。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可编辑的“来源选项卡”选项卡已添加。</font><font style="vertical-align: inherit;">现在，管理员可以使用工作台修改Java代码。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“编辑” - 提供“源标签”往返。</font><font style="vertical-align: inherit;">这将允许管理员对生成的Java代码进行手动更改，然后返回编辑器选项卡继续工作。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类使用检测。</font><font style="vertical-align: inherit;">每当要删除或重命名数据对象时，将扫描项目以查找类使用情况。</font><font style="vertical-align: inherit;">如果找到用法（例如在drl文件，决策表等中），用户将收到警报。</font><font style="vertical-align: inherit;">这将阻止用户破坏项目构建。</font></font></p>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/UsagesDetection.png" alt="UsagesDetection">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图423.使用检测</font></font></div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_execution_server_management_ui"><a class="anchor" href="index.html#_execution_server_management_ui"></a><a class="link" href="index.html#_execution_server_management_ui"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.8。</font><font style="vertical-align: inherit;">执行服务器管理UI</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font><strong><font style="vertical-align: inherit;">服务器</font></strong><font style="vertical-align: inherit;">顶级菜单</font><font style="vertical-align: inherit;">下添加了</font><font style="vertical-align: inherit;">一个名为</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Management</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的新视角</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此透视图为用户提供了使用多个容器管理多个执行服务器的能力。</font><font style="vertical-align: inherit;">可用功能包括连接到已部署的执行服务器; </font><font style="vertical-align: inherit;">创建新的，启动，停止，删除或升级容器。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/NewExecutionServerManagementPerspective.png" alt="NewExecutionServerManagementPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图424.管理视角</font></font></div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="注意"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前版本的Execution Server仅支持基于规则的执行。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_social_activities"><a class="anchor" href="index.html#_social_activities"></a><a class="link" href="index.html#_social_activities"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.9。</font><font style="vertical-align: inherit;">社交活动</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在名为</font><strong><font style="vertical-align: inherit;">Activity</font></strong><font style="vertical-align: inherit;">的新顶级菜单项组下添加了一项</font><font style="vertical-align: inherit;">名为</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Social Activities的</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全新功能</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个新功能分为两个不同的视角：</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间线视角</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">   和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人物视角</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时间线透视图</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">显示在左侧最近登录的用户创建或编辑的资产。</font><font style="vertical-align: inherit;">在主窗口中有“最新更改”屏幕，显示所有最近更新的资产以及按存储库过滤最近更新的选项。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/TimelinePerspective.png" alt="TimelinePerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图425.时间轴透视图</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人们视野</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是用户的主页。</font><font style="vertical-align: inherit;">显示他的信息（包括来自用户电子邮件的重力图片），用户连接（用户关注的人）和用户最近的活动。</font><font style="vertical-align: inherit;">还有一种编辑用户信息的方法。</font><font style="vertical-align: inherit;">搜索建议可用于导航到用户个人资料，关注他并在时间轴上查看他的更新。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/PeoplePerspective.png" alt="PeoplePerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图426.人们观点</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/PeoplePerspective1.png" alt="PeoplePerspective1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图427.编辑用户信息</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_contributors_dashboard"><a class="anchor" href="index.html#_contributors_dashboard"></a><a class="link" href="index.html#_contributors_dashboard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.10。</font><font style="vertical-align: inherit;">贡献者仪表板</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在名为</font><strong><font style="vertical-align: inherit;">Activity</font></strong><font style="vertical-align: inherit;">的新顶级菜单项组下添加了一个</font><font style="vertical-align: inherit;">名为</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contributors的</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">全新视角</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">透视图本身是一个仪表板，显示有关对工作台中托管组织/存储库所做贡献的若干指标。</font><font style="vertical-align: inherit;">每次从工作台添加/删除组织/存储库时，仪表板本身都会相应更新。</font></font><strong><font style="vertical-align: inherit;"></font></strong><font style="vertical-align: inherit;"></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此新透视图允许监视托管存储库上的基础活动。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ContributorsPerspective.png" alt="ContributorsPerspective">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图428.贡献者的观点</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_package_selector"><a class="anchor" href="index.html#_package_selector"></a><a class="link" href="index.html#_package_selector"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.11。</font><font style="vertical-align: inherit;">包选择器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创作时新资产的位置由Project Explorer的上下文驱动。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这已被New Resource Popup中的Package Selector取代。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该位置默认为Project Explorer上下文，但现在可以更轻松地选择不同的包。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/PackageSelector.png" alt="PackageSelector">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图429.包选择器</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_improved_visual_consistency"><a class="anchor" href="index.html#_improved_visual_consistency"></a><a class="link" href="index.html#_improved_visual_consistency"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.12。</font><font style="vertical-align: inherit;">改善视觉一致性</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有Popup都已重构为使用GWT-Bootstrap小部件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然简单的改变，但它为整个应用程序带来了更大的视觉一致性。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTableNewPopup.png" alt="GuidedDecisionTableNewPopup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图430.示例引导决策表编辑器弹出窗口</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/GuidedRuleNewPopup.png" alt="GuidedRuleNewPopup">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图431.示例引导规则编辑器弹出窗口</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_guided_decision_tree_editor"><a class="anchor" href="index.html#_guided_decision_tree_editor"></a><a class="link" href="index.html#_guided_decision_tree_editor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.13。</font><font style="vertical-align: inherit;">引导决策树编辑器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了一个新编辑器以支持简单决策树的建模。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关用法的详细信息，请参阅“用户指南”中的适用部分。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/GuidedDecisionTree1.png" alt="GuidedDecisionTree1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图432.示例引导决策树</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_create_repository_wizard"><a class="anchor" href="index.html#_create_repository_wizard"></a><a class="link" href="index.html#_create_repository_wizard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.14。</font><font style="vertical-align: inherit;">创建存储库向导</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已创建一个向导来指导存储库创建过程。</font><font style="vertical-align: inherit;">现在，用户可以在存储库创建时决定它应该是托管存储库还是非托管存储库并配置所有相关参数。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/CreateRepositoryWizard1.png" alt="CreateRepositoryWizard1">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图433.创建存储库向导1/2</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/CreateRepositoryWizard2.png" alt="CreateRepositoryWizard2">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图434.创建存储库向导2/2</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_repository_structure_screen"><a class="anchor" href="index.html#_repository_structure_screen"></a><a class="link" href="index.html#_repository_structure_screen"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.25.15。</font><font style="vertical-align: inherit;">存储库结构屏幕</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的存储库结构屏幕将允许用户管理给定存储库的项目，以及与托管存储库相关的其他操作，如：分支创建，资产提升和项目发布。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/ManagedRepositoryStructureScreen.png" alt="ManagedRepositoryStructureScreen">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图435.托管存储库的存储库结构屏幕</font></font></div>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/UnManagedRepositoryStructureScreen.png" alt="UnManagedRepositoryStructureScreen">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图436.非托管存储库的存储库结构屏幕</font></font></div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie.releasenotesintegration.6.2.0"><a class="anchor" href="index.html#_kie.releasenotesintegration.6.2.0"></a><a class="link" href="index.html#_kie.releasenotesintegration.6.2.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.26。</font><font style="vertical-align: inherit;">集成6.2.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_kie_execution_server"><a class="anchor" href="index.html#_kie_execution_server"></a><a class="link" href="index.html#_kie_execution_server"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.26.1。</font><font style="vertical-align: inherit;">KIE执行服务器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建了一个新的KIE Execution Server，其目标是支持kjars的部署以及为远程规则执行自动创建REST端点。</font><font style="vertical-align: inherit;">这个初始实现支持通过REST配置和执行kjars而无需任何粘合代码。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用户界面也集成到工作台中以进行远程配置。</font><font style="vertical-align: inherit;">有关详细信息，请参阅工作台的New＆Noteworthy。</font></font></p>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kie Server界面</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Path</span>(<span class="hljs-string">"/server"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">KieServer</span> </span>{<font></font>
<font></font>
    <span class="hljs-annotation">@GET</span>
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">getInfo</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-annotation">@POST</span>
    <span class="hljs-annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">execute</span><span class="hljs-params">( CommandScript command )</span></span>;<font></font>
<font></font>
    <span class="hljs-annotation">@GET</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers"</span>)
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">listContainers</span><span class="hljs-params">()</span></span>;<font></font>
<font></font>
    <span class="hljs-annotation">@GET</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}"</span>)
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">getContainerInfo</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@PUT</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}"</span>)
    <span class="hljs-annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">createContainer</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id, KieContainerResource container )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@DELETE</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}"</span>)
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">disposeContainer</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@POST</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}"</span>)
    <span class="hljs-annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">execute</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id, String cmdPayload )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@GET</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}/release-id"</span>)
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">getReleaseId</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id)</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@POST</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}/release-id"</span>)
    <span class="hljs-annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">updateReleaseId</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id, ReleaseId releaseId )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@GET</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}/scanner"</span>)
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">getScannerInfo</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id )</span>;<font></font>
<font></font>
    <span class="hljs-annotation">@POST</span>
    <span class="hljs-annotation">@Path</span>(<span class="hljs-string">"containers/{id}/scanner"</span>)
    <span class="hljs-annotation">@Consumes</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-annotation">@Produces</span>({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    <span class="hljs-function"><span class="hljs-keyword">public</span> Response <span class="hljs-title">updateScanner</span><span class="hljs-params">( @PathParam(<span class="hljs-string">"id"</span>)</span> String id, KieScannerResource resource )</span>;<font></font>
<font></font>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.1.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.1.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.1.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.27。</font><font style="vertical-align: inherit;">在Drools 6.1.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_jmx_support_for_kiescanner"><a class="anchor" href="index.html#_jmx_support_for_kiescanner"></a><a class="link" href="index.html#_jmx_support_for_kiescanner"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.27.1。</font><font style="vertical-align: inherit;">JMX对KieScanner的支持</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在KieScanner和KieContainer上添加了对JMX监视和管理的支持。</font><font style="vertical-align: inherit;">要启用，请将属性设置</font></font><code>kie.scanner.mbeans</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>enabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，例如通过Java命令行：</font></font><code> -Dkie.scanner.mbeans=enabled </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieScannerMBean将以以下名称注册：</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它公开了以下属性：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描仪版本ID：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扫描仪配置的版本ID。</font><font style="vertical-align: inherit;">可能包括maven范围版本和特殊关键字，如LATEST，SNAPSHOT等。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当前版本ID：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工件解析为的实际版本ID。</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启动，扫描，更新，运行，停止，关闭</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它还公开了以下操作：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scanNow（）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">强制立即扫描maven存储库以查找工件更新</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start（）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据轮询间隔参数开始轮询maven存储库以获取工件更新</font></font></p>
</li>
<li>
<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stop（）：</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">停止自动轮询maven存储库</font></font></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.6.1.0"><a class="anchor" href="index.html#_wb.releasenotesworkbench.6.1.0"></a><a class="link" href="index.html#_wb.releasenotesworkbench.6.1.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.28。</font><font style="vertical-align: inherit;">KIE Workbench 6.1.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_data_modeler_round_trip_and_source_code_preservation"><a class="anchor" href="index.html#_data_modeler_round_trip_and_source_code_preservation"></a><a class="link" href="index.html#_data_modeler_round_trip_and_source_code_preservation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.28.1。</font><font style="vertical-align: inherit;">Data Modeler  - 往返和源代码保存</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在支持Data Modeler和Java源代码之间的完整往返。</font><font style="vertical-align: inherit;">无论Java代码在何处生成（例如Eclipse，Data modeller），数据建模器都只会更新必要的代码块以维护模型的更新。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_data_modeler_improved_annotations"><a class="anchor" href="index.html#_data_modeler_improved_annotations"></a><a class="link" href="index.html#_data_modeler_improved_annotations"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.28.2。</font><font style="vertical-align: inherit;">Data Modeler  - 改进了注释</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了新注释@TypeSafe，@ ClassReactive，@ PropertyReactive，@ Timestamp，@ Duration和@Expires，以丰富数据建模器管理的当前Drools注释。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_standardization_of_the_display_of_tabular_data"><a class="anchor" href="index.html#_standardization_of_the_display_of_tabular_data"></a><a class="link" href="index.html#_standardization_of_the_display_of_tabular_data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.28.3。</font><font style="vertical-align: inherit;">标准化表格数据的显示</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们已经使用新的表小部件标准化了表格数据的显示。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新表支持以下功能：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择可见列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可调整大小的列</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可移动的列</font></font></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/new-grid.png" alt="新网格">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图437.新表</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该表用于以下场景：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收件箱（传入更改）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收件箱（最近编辑）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">收件箱（最近开放）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目问题摘要</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工件存储库浏览器</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目编辑器依赖项网格</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目编辑器KSession网格</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目编辑器工作项处理程序配置网格</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目编辑器监听器配置网格</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">搜索结果网格</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_generation_of_code_modify_x_code_blocks"><a class="anchor" href="index.html#_generation_of_code_modify_x_code_blocks"></a><a class="link" href="index.html#_generation_of_code_modify_x_code_blocks"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.28.4。</font><font style="vertical-align: inherit;">生成</font></font><code>modify(x) {…​}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">块</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引导规则编辑器，引导模板编辑器和引导决策表编辑器已更改为生成 </font></font><code>modify(x){…​}</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从历史上看，这些编辑器支持较旧的</font></font><code>update(x)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语法，因此在Workbench中创建的规则不会正确响应</font></font><code>@PropertyReactive</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模型中的注释和关联的注释。</font><font style="vertical-align: inherit;">现在已经使用</font></font><code>modify(x){…​}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">块</font><font style="vertical-align: inherit;">来纠正这个问题</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kie.releasenoteskie.6.0.0"><a class="anchor" href="index.html#_kie.releasenoteskie.6.0.0"></a><a class="link" href="index.html#_kie.releasenoteskie.6.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29。</font><font style="vertical-align: inherit;">KIE A​​PI 6.0.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_new_kie_name"><a class="anchor" href="index.html#_new_kie_name"></a><a class="link" href="index.html#_new_kie_name"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.1。</font><font style="vertical-align: inherit;">新的KIE名称</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE是用于将我们相关项目组合在一起的新伞形名称; </font><font style="vertical-align: inherit;">随着家庭的不断发展。</font><font style="vertical-align: inherit;">KIE也用于统一API的通用部分; </font><font style="vertical-align: inherit;">例如建筑，部署和装载。</font><font style="vertical-align: inherit;">这将替换之前使用过的kiegroup和knowledge关键字。</font></font></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./Drools文档_files/kie.png" alt="纪伊">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图438. KIE解剖学</font></font></div>
</div>
</div>
<div class="sect3">
<h4 id="_maven_aligned_projects_and_modules_and_maven_deployment"><a class="anchor" href="index.html#_maven_aligned_projects_and_modules_and_maven_deployment"></a><a class="link" href="index.html#_maven_aligned_projects_and_modules_and_maven_deployment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.2。</font><font style="vertical-align: inherit;">Maven对齐了项目和模块以及Maven部署</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.x系列中最大的抱怨之一是缺乏明确的部署方法。</font><font style="vertical-align: inherit;">Drools和jBPM使用的机制非常灵活，但它太灵活了。</font><font style="vertical-align: inherit;">6.0的一个重点是简化系统的构建，部署和加载（利用）方面。</font><font style="vertical-align: inherit;">现在，构建和部署活动与Maven和Maven存储库保持一致。</font><font style="vertical-align: inherit;">加载规则和进程的利用现在是面向约定和面向配置的，而不是程序化的，具有合理的默认值以最小化配置。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用Maven构建项目并将其安装到本地M2_REPO或远程Maven存储库。</font><font style="vertical-align: inherit;">然后，Maven用于声明和构建依赖项的类路径，供KIE访问。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_and_convention_based_projects"><a class="anchor" href="index.html#_configuration_and_convention_based_projects"></a><a class="link" href="index.html#_configuration_and_convention_based_projects"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.3。</font><font style="vertical-align: inherit;">基于配置和约定的项目</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'kmodule.xml'为KIE项目提供声明性配置。</font><font style="vertical-align: inherit;">约定和默认值用于减少所需的配置量。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子330.声明KieBases和KieSessions</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase1"</span> <span class="hljs-attribute">packages</span>=<span class="hljs-value">"org.mypackages"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession1"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例331.使用KieSession</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieContainer kContainer = ks.getKieClasspathContainer();<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiebase_inclusion"><a class="anchor" href="index.html#_kiebase_inclusion"></a><a class="link" href="index.html#_kiebase_inclusion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.4。</font><font style="vertical-align: inherit;">KieBase包容</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将属于KieBase的所有KIE工件包括在第二个KieBase中。</font><font style="vertical-align: inherit;">这意味着第二个KieBase除了直接定义到其中的所有规则，功能和进程外，还将包含在包含的KieBase中创建的那些。</font><font style="vertical-align: inherit;">可以在kmodule.xml文件中以声明方式完成此包含</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例332.以声明方式将KieBase包含在另一个中</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-title">kmodule</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.drools.org/xsd/kmodule"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">kbase</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"kbase2"</span> <span class="hljs-attribute">includes</span>=<span class="hljs-value">"kbase1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ksession</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"ksession2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">kbase</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">kmodule</span>&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或以编程方式使用</font></font><code>KieModuleModel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例333.以编程方式将KieBase包含在另一个中</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieModuleModel kmodule = KieServices.Factory.get().newKieModuleModel();<font></font>
KieBaseModel kieBaseModel1 = kmodule.newKieBaseModel(<span class="hljs-string">"KBase2"</span>).addInclude(<span class="hljs-string">"KBase1"</span>);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiemodules_kiecontainer_and_kie_ci"><a class="anchor" href="index.html#_kiemodules_kiecontainer_and_kie_ci"></a><a class="link" href="index.html#_kiemodules_kiecontainer_and_kie_ci"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.5。</font><font style="vertical-align: inherit;">KieModules，KieContainer和KIE-CI</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何Maven生成的带有'kmodule.xml'的JAR都被认为是KieModule。</font><font style="vertical-align: inherit;">这可以从类路径加载，也可以在运行时从资源位置动态加载。</font><font style="vertical-align: inherit;">如果kie-ci依赖项在类路径上，则它嵌入Maven，所有解析都是使用Maven自动完成的，并且可以访问本地或远程存储库。</font><font style="vertical-align: inherit;">Maven配置遵循Settings.xml。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieContainer提供了一个运行时间来使用KieModule，版本控制贯穿整个Maven。</font><font style="vertical-align: inherit;">Kie-ci将从正在加载的工件的所有Maven声明的依赖项动态创建一个类路径。</font><font style="vertical-align: inherit;">支持Maven LATEST，SNAPSHOT，RELEASE和版本范围。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子334.使用和运行 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices ks = KieServices.Factory.get();<font></font>
KieContainer kContainer = ks.newKieContainer(<font></font>
        ks.newReleaseId(<span class="hljs-string">"org.mygroup"</span>, <span class="hljs-string">"myartefact"</span>, <span class="hljs-string">"1.0"</span>) );<font></font>
<font></font>
KieSession kSession = kContainer.newKieSession(<span class="hljs-string">"ksession1"</span>);<font></font>
kSession.insert(<span class="hljs-keyword">new</span> Message(<span class="hljs-string">"Dave"</span>, <span class="hljs-string">"Hello, HAL. Do you read me, HAL?"</span>));<font></font>
kSession.fireAllRules();</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KieContainers可以动态更新为特定版本，如果KIE-CI在类路径上，则通过Maven解析。</font><font style="vertical-align: inherit;">对于有状态的KieSessions，现有会话将逐步更新。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例335.动态更新 -  Java</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieContainer kContainer.updateToVersion(<font></font>
                ks.newReleaseId(<span class="hljs-string">"org.mygroup"</span>, <span class="hljs-string">"myartefact"</span>, <span class="hljs-string">"1.1"</span>) );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_kiescanner_2"><a class="anchor" href="index.html#_kiescanner_2"></a><a class="link" href="index.html#_kiescanner_2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.6。</font><font style="vertical-align: inherit;">KieScanner</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是面向Maven的Drools 5中存在的KnowledgeAgent的替代品。它持续监视您的Maven存储库以检查是否已安装新版本的Kie项目，如果已​​安装，则将其部署在该</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">项目</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">包装中。</font><font style="vertical-align: inherit;">使用</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kie-ci.jar需要在类路径上。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在a上注册，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下例所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例336.在KieContainer上注册和启动KieScanner</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieServices kieServices = KieServices.Factory.get();<font></font>
ReleaseId releaseId = kieServices.newReleaseId( <span class="hljs-string">"org.acme"</span>, <span class="hljs-string">"myartifact"</span>, <span class="hljs-string">"1.0-SNAPSHOT"</span> );<font></font>
KieContainer kContainer = kieServices.newKieContainer( releaseId );<font></font>
KieScanner kScanner = kieServices.newKieScanner( kContainer );<font></font>
<font></font>
<span class="hljs-comment">// Start the KieScanner polling the Maven repository every 10 seconds</span>
kScanner.start( <span class="hljs-number">10000L</span> );</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此示例中，</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置为以固定的时间间隔运行，但也可以通过在其上调用</font></font><code>scanNow()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">按需运行</font><font style="vertical-align: inherit;">它。</font><font style="vertical-align: inherit;">如果</font></font><code>KieScanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在Maven存储库中找到所使用的Kie项目的更新版本，</font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它会自动下载新版本并触发新项目的增量构建。</font><font style="vertical-align: inherit;">从这时起，所有</font><font style="vertical-align: inherit;">创建</font><font style="vertical-align: inherit;">的新</font></font><code>KieBase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s和</font></font><code>KieSession</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">s </font></font><code>KieContainer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将使用新的项目版本。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_hierarchical_classloader"><a class="anchor" href="index.html#_hierarchical_classloader"></a><a class="link" href="index.html#_hierarchical_classloader"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.7。</font><font style="vertical-align: inherit;">分层ClassLoader</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再使用CompositeClassLoader; </font><font style="vertical-align: inherit;">因为它是性能问题和错误的持续来源。</font><font style="vertical-align: inherit;">现在使用传统的分层类加载器。</font><font style="vertical-align: inherit;">根类加载器位于KieContext级别，每个名称空间有一个子类ClassLoader。</font><font style="vertical-align: inherit;">这使得添加和删除规则变得更加清晰，但现在DRL文件中的命名空间之间没有引用; </font><font style="vertical-align: inherit;">即函数只能由声明它们的命名空间使用。</font><font style="vertical-align: inherit;">建议在项目中使用静态Java方法，这对所有命名空间都是可见的; </font><font style="vertical-align: inherit;">但那些不能（像根KieContainer ClassLoader上的其他类一样）动态更新。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_legacy_api_adapter"><a class="anchor" href="index.html#_legacy_api_adapter"></a><a class="link" href="index.html#_legacy_api_adapter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.8。</font><font style="vertical-align: inherit;">旧版API适配器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于构建和运行Drools和jBPM的5.x API仍可通过Maven依赖“knowledge-api-legacy5-adapter”获得。</font><font style="vertical-align: inherit;">由于部署的性质在6.0中发生了显着变化，因此无法为KnowledgeAgent提供适配器桥接。</font><font style="vertical-align: inherit;">如果缺少任何其他方法或有问题，请打开JIRA，我们将修复6.1</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_kie_documentation"><a class="anchor" href="index.html#_kie_documentation"></a><a class="link" href="index.html#_kie_documentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.29.9。</font><font style="vertical-align: inherit;">KIE文档</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虽然为使用新的KIE A​​PI添加了许多新文档，但整个文档尚未更新。</font><font style="vertical-align: inherit;">因此，将继续提及旧术语。</font><font style="vertical-align: inherit;">提前道歉，谢谢你的耐心等待。</font><font style="vertical-align: inherit;">我们希望社区中的人们能够与我们合作，在6.1中全面更新文档</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drools.releasenotesdrools.6.0.0"><a class="anchor" href="index.html#_drools.releasenotesdrools.6.0.0"></a><a class="link" href="index.html#_drools.releasenotesdrools.6.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.30。</font><font style="vertical-align: inherit;">在Drools 6.0.0中有什么新的和值得注意的</font></font></a></h3>
<div class="sect3">
<h4 id="_phreak_lazy_rule_matching_algorithm"><a class="anchor" href="index.html#_phreak_lazy_rule_matching_algorithm"></a><a class="link" href="index.html#_phreak_lazy_rule_matching_algorithm"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.30.1。</font><font style="vertical-align: inherit;">PHREAK  - 懒惰规则匹配算法</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.0中Drools的主要工作涉及新的PREAK算法。</font><font style="vertical-align: inherit;">这是一个惰性算法，应该使Drools能够处理大量的规则和事实。</font><font style="vertical-align: inherit;">AngendaGroups现在可以帮助提高性能，因为规则在尝试触发它们之前不会被评估。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PHREAK继续支持顺序模式，但现在允许“修改”。</font><font style="vertical-align: inherit;">虽然顺序配置没有“推论”，但由于规则被懒惰地评估，任何尚未评估的规则将会因“修改”而看到更新的数据。</font><font style="vertical-align: inherit;">这更符合人们直观地思考顺序工作的方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">冲突解决顺序已针对PHREAK进行了调整，现在按显着性和规则顺序排序; </font><font style="vertical-align: inherit;">基于文件中的规则位置。在Drools 6.0.0之前，在显着之后，它被认为是任意的。</font><font style="vertical-align: inherit;">当KieModules和updateToVersion用于动态部署时，文件中的规则顺序将通过diff处理保留。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_automatically_firing_timed_rule_in_passive_mode"><a class="anchor" href="index.html#_automatically_firing_timed_rule_in_passive_mode"></a><a class="link" href="index.html#_automatically_firing_timed_rule_in_passive_mode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.30.2。</font><font style="vertical-align: inherit;">在被动模式下自动触发定时规则</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当Drools引擎默认以被动模式运行时（即：使用fireAllRules），它不会触发定时规则的后果，除非再次调用fireAllRules。</font><font style="vertical-align: inherit;">现在，可以通过使用</font></font><code>TimedRuleExectionOption</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下示例中所示</font><font style="vertical-align: inherit;">的配置KieSession来更改此默认行为</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例子337.配置KieSession以自动执行定时规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration ksconf = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
ksconf.setOption( TimedRuleExectionOption.YES );<font></font>
KSession ksession = kbase.newKieSession(ksconf, <span class="hljs-keyword">null</span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还可以对必须自动执行的定时规则进行更细粒度的控制。</font><font style="vertical-align: inherit;">要做到这一点，有必要设置一个`FILTERED </font></font><code>`TimedRuleExectionOption</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，允许定义一个回调来过滤这些规则，如下一个例子所示。</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例338.配置过滤器以选择应自动执行的定时规则</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">KieSessionConfiguration ksconf = KieServices.Factory.get().newKieSessionConfiguration();<font></font>
conf.setOption( <span class="hljs-keyword">new</span> TimedRuleExectionOption.FILTERED(<span class="hljs-keyword">new</span> TimedRuleExecutionFilter() {
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">accept</span><span class="hljs-params">(Rule[] rules)</span> </span>{
        <span class="hljs-keyword">return</span> rules[<span class="hljs-number">0</span>].getName().equals(<span class="hljs-string">"MyRule"</span>);<font></font>
    }<font></font>
}) );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_expression_timers"><a class="anchor" href="index.html#_expression_timers"></a><a class="link" href="index.html#_expression_timers"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.30.3。</font><font style="vertical-align: inherit;">表达计时器</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以将间隔定时器的延迟和间隔定义为表达式而不是固定值。</font><font style="vertical-align: inherit;">要做到这一点，有必要将计时器声明为表达式1（由“expr：”表示），如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例339.表达式计时器示例</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">declare Bean<font></font>
    delay   : String = <span class="hljs-string">"30s"</span>
    period  : <span class="hljs-keyword">long</span> = <span class="hljs-number">60000</span><font></font>
end<font></font>
<font></font>
rule <span class="hljs-string">"Expression timer"</span><font></font>
    timer( expr: $d, $p )<font></font>
<span class="hljs-function">when
    <span class="hljs-title">Bean</span><span class="hljs-params">( $d : delay, $p : period )</span>
then
end</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，表达式$ d和$ p可以使用在规则的模式匹配部分中定义的任何变量，并且可以是可以在持续时间内解析的任何String或将在内部转换为长的任何数值。表示以毫秒表示的持续时间。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">间隔和表达式计时器都可以有3个可选参数，分别名为“start”，“end”和“repeat-limit”。</font><font style="vertical-align: inherit;">当使用这些参数中的一个或多个时，定时器定义的第一部分必须后跟分号';' </font><font style="vertical-align: inherit;">并且参数必须用逗号'，'分隔，如下例所示：</font></font></p>
</div>
<div class="exampleblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例340.具有开始和结束的间隔定时器</font></font></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">timer (<span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s <span class="hljs-number">10</span>s; start=<span class="hljs-number">3</span>-JAN-<span class="hljs-number">2010</span>, end=<span class="hljs-number">5</span>-JAN-<span class="hljs-number">2010</span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">start和end参数的值可以是Date，表示Date或long的字符串，或者通常是任何Number的字符串，将在应用以下转换的Java Date中进行转换：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-keyword">new</span> Date( ((Number) n).longValue() )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相反，repeat-limit只能是一个整数，它定义了计时器允许的最大重复次数。</font><font style="vertical-align: inherit;">如果设置了结束和重复限制参数，则当两个中的第一个匹配时，计时器将停止。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用start参数意味着定时器的相位定义，其中相位的开始由开始本身加上最终延迟给出。</font><font style="vertical-align: inherit;">换句话说，在这种情况下，定时规则将被安排：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">start + delay + n*period</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最多重复限制次数，不迟于结束时间戳（以先到者为准）。</font><font style="vertical-align: inherit;">例如，具有以下间隔计时器的规则</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">timer ( <span class="hljs-keyword">int</span>: <span class="hljs-number">30</span>s <span class="hljs-number">1</span>m; start=<span class="hljs-string">"3-JAN-2010"</span> )</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将于2010年1月3日午夜后的每分钟第30秒安排。</font><font style="vertical-align: inherit;">这也意味着，例如，如果您在3-FEB-2010的午夜打开系统，它将不会立即安排，但会保留计时器定义的阶段，因此将在30秒后第一次安排午夜。</font><font style="vertical-align: inherit;">如果由于某种原因系统暂停（例如会话被序列化然后在一段时间后反序列化），规则将只安排一次以从缺失的激活中恢复（无论我们错过了多少次激活），随后它将再次安排在与计时器相。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_ruleflowgroups_and_agendagroups_are_merged"><a class="anchor" href="index.html#_ruleflowgroups_and_agendagroups_are_merged"></a><a class="link" href="index.html#_ruleflowgroups_and_agendagroups_are_merged"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.30.4。</font><font style="vertical-align: inherit;">RuleFlowGroups和AgendaGroups合并</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个组已合并，现在RuleFlowGroups的行为与AgendaGroups相同。</font><font style="vertical-align: inherit;">出于弃用原因，已经保留了get方法，但两者都返回相同的基础数据。</font><font style="vertical-align: inherit;">当jBPM激活一个组时，它现在只调用setFocus。</font><font style="vertical-align: inherit;">RuleFlowGroups和AgendaGroups一起使用是一个持续的错误来源。</font><font style="vertical-align: inherit;">它还使代码库与PHREAK以及未来计划的多核展开保持一致。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wb.releasenotesworkbench.6.0.0"><a class="anchor" href="index.html#_wb.releasenotesworkbench.6.0.0"></a><a class="link" href="index.html#_wb.releasenotesworkbench.6.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.31。</font><font style="vertical-align: inherit;">KIE Workbench 6.0.0中的新功能和值得注意的功能</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台使用名为UberFire的新基础项目进行了大规模的改造。</font><font style="vertical-align: inherit;">UberFire受Eclipse的启发，为工作台提供了一个干净，可扩展和灵活的框架。</font><font style="vertical-align: inherit;">最终结果不仅为我们的最终用户提供了更丰富的体验，而且我们现在可以通过基于组件的清洁架构更快地开发。</font><font style="vertical-align: inherit;">如果您喜欢Workbench体验，您可以立即使用UberFire构建自己的基于Web的仪表板和控制台工作。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了转向UberFire之外，另一个最大的变化是从JCR迁移到Git; </font><font style="vertical-align: inherit;">有一个实用程序项目可以帮助迁移。</font><font style="vertical-align: inherit;">Git是最具扩展性和功能最强大的源代码库，无。</font><font style="vertical-align: inherit;">JGit为Git提供了可靠的OSS实现。</font><font style="vertical-align: inherit;">这解决了各种JCR实现的持续性能问题，一旦文件数量和版本数量变得太高，这将会减慢速度。</font><font style="vertical-align: inherit;">为了消除复杂性，已经有一个很大的“低技术”驱动器。</font><font style="vertical-align: inherit;">现在一切都存储为文件，包括元数据。</font><font style="vertical-align: inherit;">数据库仅用于提供快速索引和搜索。</font><font style="vertical-align: inherit;">因此，导入和导出都是标准的Git，外部站点（如GitHub）可用于交换存储库。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在5.x中，开发人员可以使用他们自己的源存储库，然后通过团队提供者推送JCR。</font><font style="vertical-align: inherit;">这个团队提供者并不是全功能的，并且在Eclipse之外不可用。</font><font style="vertical-align: inherit;">Git使我们的存储库能够运行任何现有的Git工具或团队提供者。</font><font style="vertical-align: inherit;">虽然UI尚未支持，但随着时间的推移，这将被添加，可以连接到repo和标记以及分支和恢复。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/kie-drools-wb.png" alt="kie drools wb">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图439.工作台</font></font></div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guvnor品牌从其预期的角色中泄露了太多; </font><font style="vertical-align: inherit;">诸如决策表之类的创作隐喻被认为是Guvnor组件而不是Drools组件。</font><font style="vertical-align: inherit;">Guvnor在5.x中使用的整体项目结构没有帮助。</font><font style="vertical-align: inherit;">在6.0中，Guvnor的重点已经缩小到封装了一套UberFire插件，这些插件为构建基于Web的IDE提供了基础。</font><font style="vertical-align: inherit;">例如Maven集成用于构建和部署，Maven存储库的管理以及通过收件箱的活动通知。</font><font style="vertical-align: inherit;">Drools和jBPM构建工作台分发，使用Uberfire作为基础，包括一组插件，如Guvnor，以及他们自己的插件，用于决策表，指导编辑器，BPMN2设计器，人工任务等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“模型结构”图概述了新项目的解剖结构。</font><font style="vertical-align: inherit;">Drools工作台称为KIE-Drools-WB。</font><font style="vertical-align: inherit;">KIE-WB是超级工作台，结合了所有Guvnor，Drools和jBPM插件。</font><font style="vertical-align: inherit;">jBPM-WB由于实际上并不存在而被幻影显示，被KIE-WB视为冗余。</font></font></p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Drools文档_files/kie-structure.png" alt="kie结构">
</div>
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图440.模块结构</font></font></div>
</div>
<div class="admonitionblock important">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE Drools Workbench和KIE Workbench共享一组通用工作台功能的通用组件，例如项目导航，项目定义，基于Maven的项目，Maven工件库。</font><font style="vertical-align: inherit;">本文档中更详细地描述了这些常见功能。</font></font></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两个主要分布包括：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE Drools Workbench</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Editors，用于规则和支持资产。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM Designer，用于规则流和支持资产。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE Workbench</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Drools Editors，用于规则和支持资产。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM Designer，用于BPMN2和支持资产。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM控制台，运行时和人工任务支持。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">jBPM表单生成器。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BAM。</font></font></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作台亮点：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的灵活Workbench环境，具有透视图和面板。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KIE A​​PI之后的新打包和构建系统。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于Maven的项目。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Maven Artifact Repository替换了Global Area，具有完全依赖性支持。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Data Modeller取代了声明性事实模型编辑器; </font><font style="vertical-align: inherit;">将Java类的创作引入创作环境。</font><font style="vertical-align: inherit;">Java类打包到项目中，可以在规则，进程等中使用，也可以在您自己的应用程序中使用。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚拟文件系统使用默认的基于Git的实现替换JCR。</font></font></p>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认的基于Git的实现支持远程操作。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">外部修改显示在Workbench中。</font></font></p>
</li>
</ul>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增量构建系统显示项目和资产的近实时验证结果。</font></font></p>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑本身基本没有变化; </font><font style="vertical-align: inherit;">但是，注意导入已从包定义移到单个编辑器，因此您只需要用于资产的导入类型而不是整个包。</font></font></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kie.releasenotesintegration.6.0.0"><a class="anchor" href="index.html#_kie.releasenotesintegration.6.0.0"></a><a class="link" href="index.html#_kie.releasenotesintegration.6.0.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.32。</font><font style="vertical-align: inherit;">Integration 6.0.0中的新增功能和值得注意的功能</font></font></a></h3>
<div class="sect3">
<h4 id="_cdi"><a class="anchor" href="index.html#_cdi"></a><a class="link" href="index.html#_cdi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.32.1。</font><font style="vertical-align: inherit;">CDI</font></font></a></h4>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v10;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KBase</span>(<span class="hljs-string">"kbase1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieBase kbase1v10;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为'jar1.KBase1'KieBase加载并排版本</font></font></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"><span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.0"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv10;<font></font>
<font></font>
<span class="hljs-annotation">@Inject</span>
<span class="hljs-annotation">@KSession</span>(<span class="hljs-string">"ksession1"</span>)
<span class="hljs-annotation">@KReleaseId</span>( groupId = <span class="hljs-string">"jar1"</span>, rtifactId = <span class="hljs-string">"art1"</span>, version = <span class="hljs-string">"1.1"</span>)
<span class="hljs-keyword">private</span> KieSession ksessionv11;</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CDI现已紧密集成到KIE A​​PI中。</font><font style="vertical-align: inherit;">它可用于注入版本化的KieSession和KieBases。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_spring"><a class="anchor" href="index.html#_spring"></a><a class="link" href="index.html#_spring"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.32.2。</font><font style="vertical-align: inherit;">弹簧</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Spring已经改版，现在与KIE整合。</font><font style="vertical-align: inherit;">Spring可以用更强大的弹簧版本替换'kmodule.xml'。</font><font style="vertical-align: inherit;">目的是为了与kmodule.xml保持一致</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_aries_blueprints"><a class="anchor" href="index.html#_aries_blueprints"></a><a class="link" href="index.html#_aries_blueprints"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.32.3。</font><font style="vertical-align: inherit;">白羊座蓝图</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在也支持白羊座的蓝图，并遵循春天所做的工作。</font><font style="vertical-align: inherit;">目的是为了与spring和kmodule.xml保持一致</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="_osgi_ready"><a class="anchor" href="index.html#_osgi_ready"></a><a class="link" href="index.html#_osgi_ready"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.32.4。</font><font style="vertical-align: inherit;">OSGi准备好了</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有模块都经过重构以避免软件包拆分，这是5.x中的一个问题。</font><font style="vertical-align: inherit;">测试已移至PAX。</font></font></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
版本7.12.0.Final </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
上次更新时间：2018-09-26 10:00:03 CEST
</font></font></div>
</div>
<!-- Collapsed Table of Content -->
<script src="./Drools文档_files/jquery.min.js.下载"></script>
<script src="./Drools文档_files/jstree.min.js.下载"></script>
<script src="./Drools文档_files/toc.js.下载"></script>

<!-- Adobe Analytics for Red Hat - DPAL (DTM Property Auto-Loader) - part 2/2 -->
<script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
</script>
<link rel="stylesheet" href="./Drools文档_files/github.min.css">
<script src="./Drools文档_files/highlight.min.js.下载"></script>
<script>hljs.initHighlighting()</script><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="./Drools文档_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>

<div class="goog-te-spinner-pos goog-te-spinner-pos-show"><div class="goog-te-spinner-animation goog-te-spinner-animation-show"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>